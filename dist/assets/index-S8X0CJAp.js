var OA=Object.defineProperty;var xA=(r,e,t)=>e in r?OA(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var qt=(r,e,t)=>xA(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function lf(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function NA(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var a=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:function(){return r[i]}})}),t}var Np={exports:{}},Yl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L_;function MA(){if(L_)return Yl;L_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:r,type:i,key:c,ref:a!==void 0?a:null,props:l}}return Yl.Fragment=e,Yl.jsx=t,Yl.jsxs=t,Yl}var P_;function kA(){return P_||(P_=1,Np.exports=MA()),Np.exports}var se=kA(),Mp={exports:{}},U_;function LA(){if(U_)return Mp.exports;U_=1;var r=Mp.exports={},e,t;function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?e=setTimeout:e=i}catch{e=i}try{typeof clearTimeout=="function"?t=clearTimeout:t=a}catch{t=a}})();function l(I){if(e===setTimeout)return setTimeout(I,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(I,0);try{return e(I,0)}catch{try{return e.call(null,I,0)}catch{return e.call(this,I,0)}}}function c(I){if(t===clearTimeout)return clearTimeout(I);if((t===a||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(I);try{return t(I)}catch{try{return t.call(null,I)}catch{return t.call(this,I)}}}var h=[],p=!1,g,y=-1;function S(){!p||!g||(p=!1,g.length?h=g.concat(h):y=-1,h.length&&T())}function T(){if(!p){var I=l(S);p=!0;for(var N=h.length;N;){for(g=h,h=[];++y<N;)g&&g[y].run();y=-1,N=h.length}g=null,p=!1,c(I)}}r.nextTick=function(I){var N=new Array(arguments.length-1);if(arguments.length>1)for(var O=1;O<arguments.length;O++)N[O-1]=arguments[O];h.push(new D(I,N)),h.length===1&&!p&&l(T)};function D(I,N){this.fun=I,this.array=N}D.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function E(){}return r.on=E,r.addListener=E,r.once=E,r.off=E,r.removeListener=E,r.removeAllListeners=E,r.emit=E,r.prependListener=E,r.prependOnceListener=E,r.listeners=function(I){return[]},r.binding=function(I){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(I){throw new Error("process.chdir is not supported")},r.umask=function(){return 0},Mp.exports}var PA=LA();const UA=lf(PA);var kp={exports:{}},st={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V_;function VA(){if(V_)return st;V_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),S=Symbol.iterator;function T(Z){return Z===null||typeof Z!="object"?null:(Z=S&&Z[S]||Z["@@iterator"],typeof Z=="function"?Z:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,I={};function N(Z,de,we){this.props=Z,this.context=de,this.refs=I,this.updater=we||D}N.prototype.isReactComponent={},N.prototype.setState=function(Z,de){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,de,"setState")},N.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function O(){}O.prototype=N.prototype;function B(Z,de,we){this.props=Z,this.context=de,this.refs=I,this.updater=we||D}var j=B.prototype=new O;j.constructor=B,E(j,N.prototype),j.isPureReactComponent=!0;var G=Array.isArray,q={H:null,A:null,T:null,S:null,V:null},X=Object.prototype.hasOwnProperty;function V(Z,de,we,Ie,ke,Fe){return we=Fe.ref,{$$typeof:r,type:Z,key:de,ref:we!==void 0?we:null,props:Fe}}function M(Z,de){return V(Z.type,de,void 0,void 0,void 0,Z.props)}function P(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===r}function K(Z){var de={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(we){return de[we]})}var J=/\/+/g;function ee(Z,de){return typeof Z=="object"&&Z!==null&&Z.key!=null?K(""+Z.key):de.toString(36)}function Q(){}function ct(Z){switch(Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason;default:switch(typeof Z.status=="string"?Z.then(Q,Q):(Z.status="pending",Z.then(function(de){Z.status==="pending"&&(Z.status="fulfilled",Z.value=de)},function(de){Z.status==="pending"&&(Z.status="rejected",Z.reason=de)})),Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason}}throw Z}function nt(Z,de,we,Ie,ke){var Fe=typeof Z;(Fe==="undefined"||Fe==="boolean")&&(Z=null);var re=!1;if(Z===null)re=!0;else switch(Fe){case"bigint":case"string":case"number":re=!0;break;case"object":switch(Z.$$typeof){case r:case e:re=!0;break;case y:return re=Z._init,nt(re(Z._payload),de,we,Ie,ke)}}if(re)return ke=ke(Z),re=Ie===""?"."+ee(Z,0):Ie,G(ke)?(we="",re!=null&&(we=re.replace(J,"$&/")+"/"),nt(ke,de,we,"",function(Ne){return Ne})):ke!=null&&(P(ke)&&(ke=M(ke,we+(ke.key==null||Z&&Z.key===ke.key?"":(""+ke.key).replace(J,"$&/")+"/")+re)),de.push(ke)),1;re=0;var te=Ie===""?".":Ie+":";if(G(Z))for(var ye=0;ye<Z.length;ye++)Ie=Z[ye],Fe=te+ee(Ie,ye),re+=nt(Ie,de,we,Fe,ke);else if(ye=T(Z),typeof ye=="function")for(Z=ye.call(Z),ye=0;!(Ie=Z.next()).done;)Ie=Ie.value,Fe=te+ee(Ie,ye++),re+=nt(Ie,de,we,Fe,ke);else if(Fe==="object"){if(typeof Z.then=="function")return nt(ct(Z),de,we,Ie,ke);throw de=String(Z),Error("Objects are not valid as a React child (found: "+(de==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":de)+"). If you meant to render a collection of children, use an array instead.")}return re}function ge(Z,de,we){if(Z==null)return Z;var Ie=[],ke=0;return nt(Z,Ie,"","",function(Fe){return de.call(we,Fe,ke++)}),Ie}function De(Z){if(Z._status===-1){var de=Z._result;de=de(),de.then(function(we){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=we)},function(we){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=we)}),Z._status===-1&&(Z._status=0,Z._result=de)}if(Z._status===1)return Z._result.default;throw Z._result}var Me=typeof reportError=="function"?reportError:function(Z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var de=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Z=="object"&&Z!==null&&typeof Z.message=="string"?String(Z.message):String(Z),error:Z});if(!window.dispatchEvent(de))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Z);return}console.error(Z)};function Xe(){}return st.Children={map:ge,forEach:function(Z,de,we){ge(Z,function(){de.apply(this,arguments)},we)},count:function(Z){var de=0;return ge(Z,function(){de++}),de},toArray:function(Z){return ge(Z,function(de){return de})||[]},only:function(Z){if(!P(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}},st.Component=N,st.Fragment=t,st.Profiler=a,st.PureComponent=B,st.StrictMode=i,st.Suspense=p,st.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,st.__COMPILER_RUNTIME={__proto__:null,c:function(Z){return q.H.useMemoCache(Z)}},st.cache=function(Z){return function(){return Z.apply(null,arguments)}},st.cloneElement=function(Z,de,we){if(Z==null)throw Error("The argument must be a React element, but you passed "+Z+".");var Ie=E({},Z.props),ke=Z.key,Fe=void 0;if(de!=null)for(re in de.ref!==void 0&&(Fe=void 0),de.key!==void 0&&(ke=""+de.key),de)!X.call(de,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&de.ref===void 0||(Ie[re]=de[re]);var re=arguments.length-2;if(re===1)Ie.children=we;else if(1<re){for(var te=Array(re),ye=0;ye<re;ye++)te[ye]=arguments[ye+2];Ie.children=te}return V(Z.type,ke,void 0,void 0,Fe,Ie)},st.createContext=function(Z){return Z={$$typeof:c,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null},Z.Provider=Z,Z.Consumer={$$typeof:l,_context:Z},Z},st.createElement=function(Z,de,we){var Ie,ke={},Fe=null;if(de!=null)for(Ie in de.key!==void 0&&(Fe=""+de.key),de)X.call(de,Ie)&&Ie!=="key"&&Ie!=="__self"&&Ie!=="__source"&&(ke[Ie]=de[Ie]);var re=arguments.length-2;if(re===1)ke.children=we;else if(1<re){for(var te=Array(re),ye=0;ye<re;ye++)te[ye]=arguments[ye+2];ke.children=te}if(Z&&Z.defaultProps)for(Ie in re=Z.defaultProps,re)ke[Ie]===void 0&&(ke[Ie]=re[Ie]);return V(Z,Fe,void 0,void 0,null,ke)},st.createRef=function(){return{current:null}},st.forwardRef=function(Z){return{$$typeof:h,render:Z}},st.isValidElement=P,st.lazy=function(Z){return{$$typeof:y,_payload:{_status:-1,_result:Z},_init:De}},st.memo=function(Z,de){return{$$typeof:g,type:Z,compare:de===void 0?null:de}},st.startTransition=function(Z){var de=q.T,we={};q.T=we;try{var Ie=Z(),ke=q.S;ke!==null&&ke(we,Ie),typeof Ie=="object"&&Ie!==null&&typeof Ie.then=="function"&&Ie.then(Xe,Me)}catch(Fe){Me(Fe)}finally{q.T=de}},st.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},st.use=function(Z){return q.H.use(Z)},st.useActionState=function(Z,de,we){return q.H.useActionState(Z,de,we)},st.useCallback=function(Z,de){return q.H.useCallback(Z,de)},st.useContext=function(Z){return q.H.useContext(Z)},st.useDebugValue=function(){},st.useDeferredValue=function(Z,de){return q.H.useDeferredValue(Z,de)},st.useEffect=function(Z,de,we){var Ie=q.H;if(typeof we=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Ie.useEffect(Z,de)},st.useId=function(){return q.H.useId()},st.useImperativeHandle=function(Z,de,we){return q.H.useImperativeHandle(Z,de,we)},st.useInsertionEffect=function(Z,de){return q.H.useInsertionEffect(Z,de)},st.useLayoutEffect=function(Z,de){return q.H.useLayoutEffect(Z,de)},st.useMemo=function(Z,de){return q.H.useMemo(Z,de)},st.useOptimistic=function(Z,de){return q.H.useOptimistic(Z,de)},st.useReducer=function(Z,de,we){return q.H.useReducer(Z,de,we)},st.useRef=function(Z){return q.H.useRef(Z)},st.useState=function(Z){return q.H.useState(Z)},st.useSyncExternalStore=function(Z,de,we){return q.H.useSyncExternalStore(Z,de,we)},st.useTransition=function(){return q.H.useTransition()},st.version="19.1.0",st}var B_;function gm(){return B_||(B_=1,kp.exports=VA()),kp.exports}var W=gm();const BA=lf(W);var Lp={exports:{}},Wl={},Pp={exports:{}},Up={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j_;function jA(){return j_||(j_=1,function(r){function e(ge,De){var Me=ge.length;ge.push(De);e:for(;0<Me;){var Xe=Me-1>>>1,Z=ge[Xe];if(0<a(Z,De))ge[Xe]=De,ge[Me]=Z,Me=Xe;else break e}}function t(ge){return ge.length===0?null:ge[0]}function i(ge){if(ge.length===0)return null;var De=ge[0],Me=ge.pop();if(Me!==De){ge[0]=Me;e:for(var Xe=0,Z=ge.length,de=Z>>>1;Xe<de;){var we=2*(Xe+1)-1,Ie=ge[we],ke=we+1,Fe=ge[ke];if(0>a(Ie,Me))ke<Z&&0>a(Fe,Ie)?(ge[Xe]=Fe,ge[ke]=Me,Xe=ke):(ge[Xe]=Ie,ge[we]=Me,Xe=we);else if(ke<Z&&0>a(Fe,Me))ge[Xe]=Fe,ge[ke]=Me,Xe=ke;else break e}}return De}function a(ge,De){var Me=ge.sortIndex-De.sortIndex;return Me!==0?Me:ge.id-De.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();r.unstable_now=function(){return c.now()-h}}var p=[],g=[],y=1,S=null,T=3,D=!1,E=!1,I=!1,N=!1,O=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function G(ge){for(var De=t(g);De!==null;){if(De.callback===null)i(g);else if(De.startTime<=ge)i(g),De.sortIndex=De.expirationTime,e(p,De);else break;De=t(g)}}function q(ge){if(I=!1,G(ge),!E)if(t(p)!==null)E=!0,X||(X=!0,ee());else{var De=t(g);De!==null&&nt(q,De.startTime-ge)}}var X=!1,V=-1,M=5,P=-1;function K(){return N?!0:!(r.unstable_now()-P<M)}function J(){if(N=!1,X){var ge=r.unstable_now();P=ge;var De=!0;try{e:{E=!1,I&&(I=!1,B(V),V=-1),D=!0;var Me=T;try{t:{for(G(ge),S=t(p);S!==null&&!(S.expirationTime>ge&&K());){var Xe=S.callback;if(typeof Xe=="function"){S.callback=null,T=S.priorityLevel;var Z=Xe(S.expirationTime<=ge);if(ge=r.unstable_now(),typeof Z=="function"){S.callback=Z,G(ge),De=!0;break t}S===t(p)&&i(p),G(ge)}else i(p);S=t(p)}if(S!==null)De=!0;else{var de=t(g);de!==null&&nt(q,de.startTime-ge),De=!1}}break e}finally{S=null,T=Me,D=!1}De=void 0}}finally{De?ee():X=!1}}}var ee;if(typeof j=="function")ee=function(){j(J)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ct=Q.port2;Q.port1.onmessage=J,ee=function(){ct.postMessage(null)}}else ee=function(){O(J,0)};function nt(ge,De){V=O(function(){ge(r.unstable_now())},De)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ge){ge.callback=null},r.unstable_forceFrameRate=function(ge){0>ge||125<ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<ge?Math.floor(1e3/ge):5},r.unstable_getCurrentPriorityLevel=function(){return T},r.unstable_next=function(ge){switch(T){case 1:case 2:case 3:var De=3;break;default:De=T}var Me=T;T=De;try{return ge()}finally{T=Me}},r.unstable_requestPaint=function(){N=!0},r.unstable_runWithPriority=function(ge,De){switch(ge){case 1:case 2:case 3:case 4:case 5:break;default:ge=3}var Me=T;T=ge;try{return De()}finally{T=Me}},r.unstable_scheduleCallback=function(ge,De,Me){var Xe=r.unstable_now();switch(typeof Me=="object"&&Me!==null?(Me=Me.delay,Me=typeof Me=="number"&&0<Me?Xe+Me:Xe):Me=Xe,ge){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=Me+Z,ge={id:y++,callback:De,priorityLevel:ge,startTime:Me,expirationTime:Z,sortIndex:-1},Me>Xe?(ge.sortIndex=Me,e(g,ge),t(p)===null&&ge===t(g)&&(I?(B(V),V=-1):I=!0,nt(q,Me-Xe))):(ge.sortIndex=Z,e(p,ge),E||D||(E=!0,X||(X=!0,ee()))),ge},r.unstable_shouldYield=K,r.unstable_wrapCallback=function(ge){var De=T;return function(){var Me=T;T=De;try{return ge.apply(this,arguments)}finally{T=Me}}}}(Up)),Up}var F_;function FA(){return F_||(F_=1,Pp.exports=jA()),Pp.exports}var Vp={exports:{}},Nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q_;function qA(){if(q_)return Nn;q_=1;var r=gm();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,g,y){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:S==null?null:""+S,children:p,containerInfo:g,implementation:y}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Nn.createPortal=function(p,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,y)},Nn.flushSync=function(p){var g=c.T,y=i.p;try{if(c.T=null,i.p=2,p)return p()}finally{c.T=g,i.p=y,i.d.f()}},Nn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(p,g))},Nn.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},Nn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var y=g.as,S=h(y,g.crossOrigin),T=typeof g.integrity=="string"?g.integrity:void 0,D=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?i.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:S,integrity:T,fetchPriority:D}):y==="script"&&i.d.X(p,{crossOrigin:S,integrity:T,fetchPriority:D,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Nn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=h(g.as,g.crossOrigin);i.d.M(p,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(p)},Nn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,S=h(y,g.crossOrigin);i.d.L(p,y,{crossOrigin:S,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Nn.preloadModule=function(p,g){if(typeof p=="string")if(g){var y=h(g.as,g.crossOrigin);i.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(p)},Nn.requestFormReset=function(p){i.d.r(p)},Nn.unstable_batchedUpdates=function(p,g){return p(g)},Nn.useFormState=function(p,g,y){return c.H.useFormState(p,g,y)},Nn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Nn.version="19.1.0",Nn}var z_;function zA(){if(z_)return Vp.exports;z_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Vp.exports=qA(),Vp.exports}var H_;function HA(){if(H_)return Wl;H_=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=FA(),e=gm(),t=zA();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function h(n){if(l(n)!==n)throw Error(i(188))}function p(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(i(188));return s!==n?null:n}for(var o=n,u=s;;){var d=o.return;if(d===null)break;var m=d.alternate;if(m===null){if(u=d.return,u!==null){o=u;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===o)return h(d),n;if(m===u)return h(d),s;m=m.sibling}throw Error(i(188))}if(o.return!==u.return)o=d,u=m;else{for(var C=!1,k=d.child;k;){if(k===o){C=!0,o=d,u=m;break}if(k===u){C=!0,u=d,o=m;break}k=k.sibling}if(!C){for(k=m.child;k;){if(k===o){C=!0,o=m,u=d;break}if(k===u){C=!0,u=m,o=d;break}k=k.sibling}if(!C)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:s}function g(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=g(n),s!==null)return s;n=n.sibling}return null}var y=Object.assign,S=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),B=Symbol.for("react.consumer"),j=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function ee(n){return n===null||typeof n!="object"?null:(n=J&&n[J]||n["@@iterator"],typeof n=="function"?n:null)}var Q=Symbol.for("react.client.reference");function ct(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===Q?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case E:return"Fragment";case N:return"Profiler";case I:return"StrictMode";case q:return"Suspense";case X:return"SuspenseList";case P:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case D:return"Portal";case j:return(n.displayName||"Context")+".Provider";case B:return(n._context.displayName||"Context")+".Consumer";case G:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case V:return s=n.displayName||null,s!==null?s:ct(n.type)||"Memo";case M:s=n._payload,n=n._init;try{return ct(n(s))}catch{}}return null}var nt=Array.isArray,ge=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,De=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Me={pending:!1,data:null,method:null,action:null},Xe=[],Z=-1;function de(n){return{current:n}}function we(n){0>Z||(n.current=Xe[Z],Xe[Z]=null,Z--)}function Ie(n,s){Z++,Xe[Z]=n.current,n.current=s}var ke=de(null),Fe=de(null),re=de(null),te=de(null);function ye(n,s){switch(Ie(re,s),Ie(Fe,n),Ie(ke,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?u_(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=u_(s),n=c_(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}we(ke),Ie(ke,n)}function Ne(){we(ke),we(Fe),we(re)}function Be(n){n.memoizedState!==null&&Ie(te,n);var s=ke.current,o=c_(s,n.type);s!==o&&(Ie(Fe,n),Ie(ke,o))}function F(n){Fe.current===n&&(we(ke),we(Fe)),te.current===n&&(we(te),Hl._currentValue=Me)}var H=Object.prototype.hasOwnProperty,ve=r.unstable_scheduleCallback,Oe=r.unstable_cancelCallback,dt=r.unstable_shouldYield,L=r.unstable_requestPaint,b=r.unstable_now,R=r.unstable_getCurrentPriorityLevel,$=r.unstable_ImmediatePriority,oe=r.unstable_UserBlockingPriority,be=r.unstable_NormalPriority,Ae=r.unstable_LowPriority,qe=r.unstable_IdlePriority,rt=r.log,ze=r.unstable_setDisableYieldValue,He=null,x=null;function _(n){if(typeof rt=="function"&&ze(n),x&&typeof x.setStrictMode=="function")try{x.setStrictMode(He,n)}catch{}}var w=Math.clz32?Math.clz32:he,z=Math.log,ie=Math.LN2;function he(n){return n>>>=0,n===0?32:31-(z(n)/ie|0)|0}var _e=256,$e=4194304;function pt(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function bt(n,s,o){var u=n.pendingLanes;if(u===0)return 0;var d=0,m=n.suspendedLanes,C=n.pingedLanes;n=n.warmLanes;var k=u&134217727;return k!==0?(u=k&~m,u!==0?d=pt(u):(C&=k,C!==0?d=pt(C):o||(o=k&~n,o!==0&&(d=pt(o))))):(k=u&~m,k!==0?d=pt(k):C!==0?d=pt(C):o||(o=u&~n,o!==0&&(d=pt(o)))),d===0?0:s!==0&&s!==d&&(s&m)===0&&(m=d&-d,o=s&-s,m>=o||m===32&&(o&4194048)!==0)?s:d}function St(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function yt(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ii(){var n=_e;return _e<<=1,(_e&4194048)===0&&(_e=256),n}function Ls(){var n=$e;return $e<<=1,($e&62914560)===0&&($e=4194304),n}function Er(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function Tr(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Ps(n,s,o,u,d,m){var C=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var k=n.entanglements,Y=n.expirationTimes,ce=n.hiddenUpdates;for(o=C&~o;0<o;){var Ee=31-w(o),Se=1<<Ee;k[Ee]=0,Y[Ee]=-1;var fe=ce[Ee];if(fe!==null)for(ce[Ee]=null,Ee=0;Ee<fe.length;Ee++){var pe=fe[Ee];pe!==null&&(pe.lane&=-536870913)}o&=~Se}u!==0&&qn(n,u,0),m!==0&&d===0&&n.tag!==0&&(n.suspendedLanes|=m&~(C&~s))}function qn(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-w(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|o&4194090}function Us(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var u=31-w(o),d=1<<u;d&s|n[u]&s&&(n[u]|=s),o&=~d}}function Wn(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function kr(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Lr(){var n=De.p;return n!==0?n:(n=window.event,n===void 0?32:D_(n.type))}function Oa(n,s){var o=De.p;try{return De.p=n,s()}finally{De.p=o}}var Pt=Math.random().toString(36).slice(2),$t="__reactFiber$"+Pt,Je="__reactProps$"+Pt,vt="__reactContainer$"+Pt,hn="__reactEvents$"+Pt,Kt="__reactListeners$"+Pt,_n="__reactHandles$"+Pt,On="__reactResources$"+Pt,si="__reactMarker$"+Pt;function ji(n){delete n[$t],delete n[Je],delete n[hn],delete n[Kt],delete n[_n]}function ai(n){var s=n[$t];if(s)return s;for(var o=n.parentNode;o;){if(s=o[vt]||o[$t]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=p_(n);n!==null;){if(o=n[$t])return o;n=p_(n)}return s}n=o,o=n.parentNode}return null}function Pr(n){if(n=n[$t]||n[vt]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function Ur(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function Vn(n){var s=n[On];return s||(s=n[On]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Qt(n){n[si]=!0}var Wo=new Set,xa={};function wr(n,s){oi(n,s),oi(n+"Capture",s)}function oi(n,s){for(xa[n]=s,n=0;n<s.length;n++)Wo.add(s[n])}var qu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zu={},Vs={};function Hu(n){return H.call(Vs,n)?!0:H.call(zu,n)?!1:qu.test(n)?Vs[n]=!0:(zu[n]=!0,!1)}function Fi(n,s,o){if(Hu(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function Vr(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function En(n,s,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+u)}}var Bs,Gu;function li(n){if(Bs===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Bs=s&&s[1]||"",Gu=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Bs+n+Gu}var Na=!1;function Ma(n,s){if(!n||Na)return"";Na=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var Se=function(){throw Error()};if(Object.defineProperty(Se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Se,[])}catch(pe){var fe=pe}Reflect.construct(n,[],Se)}else{try{Se.call()}catch(pe){fe=pe}n.call(Se.prototype)}}else{try{throw Error()}catch(pe){fe=pe}(Se=n())&&typeof Se.catch=="function"&&Se.catch(function(){})}}catch(pe){if(pe&&fe&&typeof pe.stack=="string")return[pe.stack,fe.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),C=m[0],k=m[1];if(C&&k){var Y=C.split(`
`),ce=k.split(`
`);for(d=u=0;u<Y.length&&!Y[u].includes("DetermineComponentFrameRoot");)u++;for(;d<ce.length&&!ce[d].includes("DetermineComponentFrameRoot");)d++;if(u===Y.length||d===ce.length)for(u=Y.length-1,d=ce.length-1;1<=u&&0<=d&&Y[u]!==ce[d];)d--;for(;1<=u&&0<=d;u--,d--)if(Y[u]!==ce[d]){if(u!==1||d!==1)do if(u--,d--,0>d||Y[u]!==ce[d]){var Ee=`
`+Y[u].replace(" at new "," at ");return n.displayName&&Ee.includes("<anonymous>")&&(Ee=Ee.replace("<anonymous>",n.displayName)),Ee}while(1<=u&&0<=d);break}}}finally{Na=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?li(o):""}function Xo(n){switch(n.tag){case 26:case 27:case 5:return li(n.type);case 16:return li("Lazy");case 13:return li("Suspense");case 19:return li("SuspenseList");case 0:case 15:return Ma(n.type,!1);case 11:return Ma(n.type.render,!1);case 1:return Ma(n.type,!0);case 31:return li("Activity");default:return""}}function ka(n){try{var s="";do s+=Xo(n),n=n.return;while(n);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function Bn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Zo(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Pf(n){var s=Zo(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),u=""+n[s];if(!n.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,m=o.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(C){u=""+C,m.call(this,C)}}),Object.defineProperty(n,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(C){u=""+C},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function La(n){n._valueTracker||(n._valueTracker=Pf(n))}function Jo(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return n&&(u=Zo(n)?n.checked?"true":"false":n.value),n=u,n!==o?(s.setValue(n),!0):!1}function js(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Uf=/[\n"\\]/g;function Zt(n){return n.replace(Uf,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Xn(n,s,o,u,d,m,C,k){n.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?n.type=C:n.removeAttribute("type"),s!=null?C==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Bn(s)):n.value!==""+Bn(s)&&(n.value=""+Bn(s)):C!=="submit"&&C!=="reset"||n.removeAttribute("value"),s!=null?qi(n,C,Bn(s)):o!=null?qi(n,C,Bn(o)):u!=null&&n.removeAttribute("value"),d==null&&m!=null&&(n.defaultChecked=!!m),d!=null&&(n.checked=d&&typeof d!="function"&&typeof d!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?n.name=""+Bn(k):n.removeAttribute("name")}function Fs(n,s,o,u,d,m,C,k){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),s!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||s!=null))return;o=o!=null?""+Bn(o):"",s=s!=null?""+Bn(s):o,k||s===n.value||(n.value=s),n.defaultValue=s}u=u??d,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=k?n.checked:!!u,n.defaultChecked=!!u,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(n.name=C)}function qi(n,s,o){s==="number"&&js(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function ui(n,s,o,u){if(n=n.options,s){s={};for(var d=0;d<o.length;d++)s["$"+o[d]]=!0;for(o=0;o<n.length;o++)d=s.hasOwnProperty("$"+n[o].value),n[o].selected!==d&&(n[o].selected=d),d&&u&&(n[o].defaultSelected=!0)}else{for(o=""+Bn(o),s=null,d=0;d<n.length;d++){if(n[d].value===o){n[d].selected=!0,u&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function xt(n,s,o){if(s!=null&&(s=""+Bn(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+Bn(o):""}function qs(n,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(nt(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=Bn(s),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u)}function sr(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var zs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $u(n,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,o):typeof o!="number"||o===0||zs.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function el(n,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var d in s)u=s[d],s.hasOwnProperty(d)&&o[d]!==u&&$u(n,d,u)}else for(var m in s)s.hasOwnProperty(m)&&$u(n,m,s[m])}function tl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pa(n){return Bf.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var ci=null;function ar(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var hi=null,fi=null;function nl(n){var s=Pr(n);if(s&&(n=s.stateNode)){var o=n[Je]||null;e:switch(n=s.stateNode,s.type){case"input":if(Xn(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Zt(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==n&&u.form===n.form){var d=u[Je]||null;if(!d)throw Error(i(90));Xn(u,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===n.form&&Jo(u)}break e;case"textarea":xt(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&ui(n,!!o.multiple,s,!1)}}}var Br=!1;function Ku(n,s,o){if(Br)return n(s,o);Br=!0;try{var u=n(s);return u}finally{if(Br=!1,(hi!==null||fi!==null)&&(jc(),hi&&(s=hi,n=fi,fi=hi=null,nl(s),n)))for(s=0;s<n.length;s++)nl(n[s])}}function Hs(n,s){var o=n.stateNode;if(o===null)return null;var u=o[Je]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var br=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),or=!1;if(br)try{var Gs={};Object.defineProperty(Gs,"passive",{get:function(){or=!0}}),window.addEventListener("test",Gs,Gs),window.removeEventListener("test",Gs,Gs)}catch{or=!1}var jr=null,zi=null,di=null;function rl(){if(di)return di;var n,s=zi,o=s.length,u,d="value"in jr?jr.value:jr.textContent,m=d.length;for(n=0;n<o&&s[n]===d[n];n++);var C=o-n;for(u=1;u<=C&&s[o-u]===d[m-u];u++);return di=d.slice(n,1<u?1-u:void 0)}function Fr(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function qr(){return!0}function il(){return!1}function fn(n){function s(o,u,d,m,C){this._reactName=o,this._targetInst=d,this.type=u,this.nativeEvent=m,this.target=C,this.currentTarget=null;for(var k in n)n.hasOwnProperty(k)&&(o=n[k],this[k]=o?o(m):m[k]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?qr:il,this.isPropagationStopped=il,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=qr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=qr)},persist:function(){},isPersistent:qr}),s}var Ct={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ua=fn(Ct),$s=y({},Ct,{view:0,detail:0}),Qu=fn($s),Va,Ba,zr,Ks=y({},$s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ws,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==zr&&(zr&&n.type==="mousemove"?(Va=n.screenX-zr.screenX,Ba=n.screenY-zr.screenY):Ba=Va=0,zr=n),Va)},movementY:function(n){return"movementY"in n?n.movementY:Ba}}),lr=fn(Ks),Yu=y({},Ks,{dataTransfer:0}),jf=fn(Yu),Qs=y({},$s,{relatedTarget:0}),ja=fn(Qs),sl=y({},Ct,{animationName:0,elapsedTime:0,pseudoElement:0}),Fa=fn(sl),Wu=y({},Ct,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),qa=fn(Wu),Ff=y({},Ct,{data:0}),al=fn(Ff),Ys={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ol(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Zu[n])?!!s[n]:!1}function Ws(){return ol}var Ju=y({},$s,{key:function(n){if(n.key){var s=Ys[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Fr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Xu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ws,charCode:function(n){return n.type==="keypress"?Fr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Fr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),za=fn(Ju),ec=y({},Ks,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ll=fn(ec),pi=y({},$s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ws}),tc=fn(pi),nc=y({},Ct,{propertyName:0,elapsedTime:0,pseudoElement:0}),rc=fn(nc),ic=y({},Ks,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ha=fn(ic),jn=y({},Ct,{newState:0,oldState:0}),sc=fn(jn),ac=[9,13,27,32],Hr=br&&"CompositionEvent"in window,f=null;br&&"documentMode"in document&&(f=document.documentMode);var v=br&&"TextEvent"in window&&!f,A=br&&(!Hr||f&&8<f&&11>=f),U=" ",le=!1;function me(n,s){switch(n){case"keyup":return ac.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xe(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var _t=!1;function rn(n,s){switch(n){case"compositionend":return xe(s);case"keypress":return s.which!==32?null:(le=!0,U);case"textInput":return n=s.data,n===U&&le?null:n;default:return null}}function Et(n,s){if(_t)return n==="compositionend"||!Hr&&me(n,s)?(n=rl(),di=zi=jr=null,_t=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return A&&s.locale!=="ko"?null:s.data;default:return null}}var dn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sn(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!dn[n.type]:s==="textarea"}function gi(n,s,o,u){hi?fi?fi.push(u):fi=[u]:hi=u,s=$c(s,"onChange"),0<s.length&&(o=new Ua("onChange","change",null,o,u),n.push({event:o,listeners:s}))}var Tn=null,Gr=null;function ul(n){i_(n,0)}function oc(n){var s=Ur(n);if(Jo(s))return n}function Ry(n,s){if(n==="change")return s}var Ay=!1;if(br){var qf;if(br){var zf="oninput"in document;if(!zf){var Cy=document.createElement("div");Cy.setAttribute("oninput","return;"),zf=typeof Cy.oninput=="function"}qf=zf}else qf=!1;Ay=qf&&(!document.documentMode||9<document.documentMode)}function Iy(){Tn&&(Tn.detachEvent("onpropertychange",Dy),Gr=Tn=null)}function Dy(n){if(n.propertyName==="value"&&oc(Gr)){var s=[];gi(s,Gr,n,ar(n)),Ku(ul,s)}}function aR(n,s,o){n==="focusin"?(Iy(),Tn=s,Gr=o,Tn.attachEvent("onpropertychange",Dy)):n==="focusout"&&Iy()}function oR(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return oc(Gr)}function lR(n,s){if(n==="click")return oc(s)}function uR(n,s){if(n==="input"||n==="change")return oc(s)}function cR(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Zn=typeof Object.is=="function"?Object.is:cR;function cl(n,s){if(Zn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var d=o[u];if(!H.call(s,d)||!Zn(n[d],s[d]))return!1}return!0}function Oy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function xy(n,s){var o=Oy(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=s&&u>=s)return{node:o,offset:s-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Oy(o)}}function Ny(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Ny(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function My(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=js(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=js(n.document)}return s}function Hf(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var hR=br&&"documentMode"in document&&11>=document.documentMode,Ga=null,Gf=null,hl=null,$f=!1;function ky(n,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;$f||Ga==null||Ga!==js(u)||(u=Ga,"selectionStart"in u&&Hf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),hl&&cl(hl,u)||(hl=u,u=$c(Gf,"onSelect"),0<u.length&&(s=new Ua("onSelect","select",null,s,o),n.push({event:s,listeners:u}),s.target=Ga)))}function Xs(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var $a={animationend:Xs("Animation","AnimationEnd"),animationiteration:Xs("Animation","AnimationIteration"),animationstart:Xs("Animation","AnimationStart"),transitionrun:Xs("Transition","TransitionRun"),transitionstart:Xs("Transition","TransitionStart"),transitioncancel:Xs("Transition","TransitionCancel"),transitionend:Xs("Transition","TransitionEnd")},Kf={},Ly={};br&&(Ly=document.createElement("div").style,"AnimationEvent"in window||(delete $a.animationend.animation,delete $a.animationiteration.animation,delete $a.animationstart.animation),"TransitionEvent"in window||delete $a.transitionend.transition);function Zs(n){if(Kf[n])return Kf[n];if(!$a[n])return n;var s=$a[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in Ly)return Kf[n]=s[o];return n}var Py=Zs("animationend"),Uy=Zs("animationiteration"),Vy=Zs("animationstart"),fR=Zs("transitionrun"),dR=Zs("transitionstart"),pR=Zs("transitioncancel"),By=Zs("transitionend"),jy=new Map,Qf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qf.push("scrollEnd");function Sr(n,s){jy.set(n,s),wr(s,[n])}var Fy=new WeakMap;function ur(n,s){if(typeof n=="object"&&n!==null){var o=Fy.get(n);return o!==void 0?o:(s={value:n,source:s,stack:ka(s)},Fy.set(n,s),s)}return{value:n,source:s,stack:ka(s)}}var cr=[],Ka=0,Yf=0;function lc(){for(var n=Ka,s=Yf=Ka=0;s<n;){var o=cr[s];cr[s++]=null;var u=cr[s];cr[s++]=null;var d=cr[s];cr[s++]=null;var m=cr[s];if(cr[s++]=null,u!==null&&d!==null){var C=u.pending;C===null?d.next=d:(d.next=C.next,C.next=d),u.pending=d}m!==0&&qy(o,d,m)}}function uc(n,s,o,u){cr[Ka++]=n,cr[Ka++]=s,cr[Ka++]=o,cr[Ka++]=u,Yf|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Wf(n,s,o,u){return uc(n,s,o,u),cc(n)}function Qa(n,s){return uc(n,null,null,s),cc(n)}function qy(n,s,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var d=!1,m=n.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(d=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,d&&s!==null&&(d=31-w(o),n=m.hiddenUpdates,u=n[d],u===null?n[d]=[s]:u.push(s),s.lane=o|536870912),m):null}function cc(n){if(50<Pl)throw Pl=0,np=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Ya={};function gR(n,s,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jn(n,s,o,u){return new gR(n,s,o,u)}function Xf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function mi(n,s){var o=n.alternate;return o===null?(o=Jn(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function zy(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function hc(n,s,o,u,d,m){var C=0;if(u=n,typeof n=="function")Xf(n)&&(C=1);else if(typeof n=="string")C=yA(n,o,ke.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case P:return n=Jn(31,o,s,d),n.elementType=P,n.lanes=m,n;case E:return Js(o.children,d,m,s);case I:C=8,d|=24;break;case N:return n=Jn(12,o,s,d|2),n.elementType=N,n.lanes=m,n;case q:return n=Jn(13,o,s,d),n.elementType=q,n.lanes=m,n;case X:return n=Jn(19,o,s,d),n.elementType=X,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case O:case j:C=10;break e;case B:C=9;break e;case G:C=11;break e;case V:C=14;break e;case M:C=16,u=null;break e}C=29,o=Error(i(130,n===null?"null":typeof n,"")),u=null}return s=Jn(C,o,s,d),s.elementType=n,s.type=u,s.lanes=m,s}function Js(n,s,o,u){return n=Jn(7,n,u,s),n.lanes=o,n}function Zf(n,s,o){return n=Jn(6,n,null,s),n.lanes=o,n}function Jf(n,s,o){return s=Jn(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Wa=[],Xa=0,fc=null,dc=0,hr=[],fr=0,ea=null,yi=1,vi="";function ta(n,s){Wa[Xa++]=dc,Wa[Xa++]=fc,fc=n,dc=s}function Hy(n,s,o){hr[fr++]=yi,hr[fr++]=vi,hr[fr++]=ea,ea=n;var u=yi;n=vi;var d=32-w(u)-1;u&=~(1<<d),o+=1;var m=32-w(s)+d;if(30<m){var C=d-d%5;m=(u&(1<<C)-1).toString(32),u>>=C,d-=C,yi=1<<32-w(s)+d|o<<d|u,vi=m+n}else yi=1<<m|o<<d|u,vi=n}function ed(n){n.return!==null&&(ta(n,1),Hy(n,1,0))}function td(n){for(;n===fc;)fc=Wa[--Xa],Wa[Xa]=null,dc=Wa[--Xa],Wa[Xa]=null;for(;n===ea;)ea=hr[--fr],hr[fr]=null,vi=hr[--fr],hr[fr]=null,yi=hr[--fr],hr[fr]=null}var Fn=null,Ht=null,At=!1,na=null,$r=!1,nd=Error(i(519));function ra(n){var s=Error(i(418,""));throw pl(ur(s,n)),nd}function Gy(n){var s=n.stateNode,o=n.type,u=n.memoizedProps;switch(s[$t]=n,s[Je]=u,o){case"dialog":ft("cancel",s),ft("close",s);break;case"iframe":case"object":case"embed":ft("load",s);break;case"video":case"audio":for(o=0;o<Vl.length;o++)ft(Vl[o],s);break;case"source":ft("error",s);break;case"img":case"image":case"link":ft("error",s),ft("load",s);break;case"details":ft("toggle",s);break;case"input":ft("invalid",s),Fs(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),La(s);break;case"select":ft("invalid",s);break;case"textarea":ft("invalid",s),qs(s,u.value,u.defaultValue,u.children),La(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||l_(s.textContent,o)?(u.popover!=null&&(ft("beforetoggle",s),ft("toggle",s)),u.onScroll!=null&&ft("scroll",s),u.onScrollEnd!=null&&ft("scrollend",s),u.onClick!=null&&(s.onclick=Kc),s=!0):s=!1,s||ra(n)}function $y(n){for(Fn=n.return;Fn;)switch(Fn.tag){case 5:case 13:$r=!1;return;case 27:case 3:$r=!0;return;default:Fn=Fn.return}}function fl(n){if(n!==Fn)return!1;if(!At)return $y(n),At=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||vp(n.type,n.memoizedProps)),o=!o),o&&Ht&&ra(n),$y(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(s===0){Ht=Ar(n.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;n=n.nextSibling}Ht=null}}else s===27?(s=Ht,ss(n.type)?(n=wp,wp=null,Ht=n):Ht=s):Ht=Fn?Ar(n.stateNode.nextSibling):null;return!0}function dl(){Ht=Fn=null,At=!1}function Ky(){var n=na;return n!==null&&(Gn===null?Gn=n:Gn.push.apply(Gn,n),na=null),n}function pl(n){na===null?na=[n]:na.push(n)}var rd=de(null),ia=null,_i=null;function Hi(n,s,o){Ie(rd,s._currentValue),s._currentValue=o}function Ei(n){n._currentValue=rd.current,we(rd)}function id(n,s,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===o)break;n=n.return}}function sd(n,s,o,u){var d=n.child;for(d!==null&&(d.return=n);d!==null;){var m=d.dependencies;if(m!==null){var C=d.child;m=m.firstContext;e:for(;m!==null;){var k=m;m=d;for(var Y=0;Y<s.length;Y++)if(k.context===s[Y]){m.lanes|=o,k=m.alternate,k!==null&&(k.lanes|=o),id(m.return,o,n),u||(C=null);break e}m=k.next}}else if(d.tag===18){if(C=d.return,C===null)throw Error(i(341));C.lanes|=o,m=C.alternate,m!==null&&(m.lanes|=o),id(C,o,n),C=null}else C=d.child;if(C!==null)C.return=d;else for(C=d;C!==null;){if(C===n){C=null;break}if(d=C.sibling,d!==null){d.return=C.return,C=d;break}C=C.return}d=C}}function gl(n,s,o,u){n=null;for(var d=s,m=!1;d!==null;){if(!m){if((d.flags&524288)!==0)m=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var C=d.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var k=d.type;Zn(d.pendingProps.value,C.value)||(n!==null?n.push(k):n=[k])}}else if(d===te.current){if(C=d.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(n!==null?n.push(Hl):n=[Hl])}d=d.return}n!==null&&sd(s,n,o,u),s.flags|=262144}function pc(n){for(n=n.firstContext;n!==null;){if(!Zn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function sa(n){ia=n,_i=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function xn(n){return Qy(ia,n)}function gc(n,s){return ia===null&&sa(n),Qy(n,s)}function Qy(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},_i===null){if(n===null)throw Error(i(308));_i=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else _i=_i.next=s;return o}var mR=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},yR=r.unstable_scheduleCallback,vR=r.unstable_NormalPriority,an={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ad(){return{controller:new mR,data:new Map,refCount:0}}function ml(n){n.refCount--,n.refCount===0&&yR(vR,function(){n.controller.abort()})}var yl=null,od=0,Za=0,Ja=null;function _R(n,s){if(yl===null){var o=yl=[];od=0,Za=up(),Ja={status:"pending",value:void 0,then:function(u){o.push(u)}}}return od++,s.then(Yy,Yy),s}function Yy(){if(--od===0&&yl!==null){Ja!==null&&(Ja.status="fulfilled");var n=yl;yl=null,Za=0,Ja=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function ER(n,s){var o=[],u={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var d=0;d<o.length;d++)(0,o[d])(s)},function(d){for(u.status="rejected",u.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),u}var Wy=ge.S;ge.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&_R(n,s),Wy!==null&&Wy(n,s)};var aa=de(null);function ld(){var n=aa.current;return n!==null?n:Ut.pooledCache}function mc(n,s){s===null?Ie(aa,aa.current):Ie(aa,s.pool)}function Xy(){var n=ld();return n===null?null:{parent:an._currentValue,pool:n}}var vl=Error(i(460)),Zy=Error(i(474)),yc=Error(i(542)),ud={then:function(){}};function Jy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function vc(){}function e0(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(vc,vc),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,n0(n),n;default:if(typeof s.status=="string")s.then(vc,vc);else{if(n=Ut,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=u}},function(u){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,n0(n),n}throw _l=s,vl}}var _l=null;function t0(){if(_l===null)throw Error(i(459));var n=_l;return _l=null,n}function n0(n){if(n===vl||n===yc)throw Error(i(483))}var Gi=!1;function cd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hd(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function $i(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ki(n,s,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Dt&2)!==0){var d=u.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),u.pending=s,s=cc(n),qy(n,null,o),s}return uc(n,u,s,o),cc(n)}function El(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Us(n,o)}}function fd(n,s){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var d=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var C={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?d=m=C:m=m.next=C,o=o.next}while(o!==null);m===null?d=m=s:m=m.next=s}else d=m=s;o={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var dd=!1;function Tl(){if(dd){var n=Ja;if(n!==null)throw n}}function wl(n,s,o,u){dd=!1;var d=n.updateQueue;Gi=!1;var m=d.firstBaseUpdate,C=d.lastBaseUpdate,k=d.shared.pending;if(k!==null){d.shared.pending=null;var Y=k,ce=Y.next;Y.next=null,C===null?m=ce:C.next=ce,C=Y;var Ee=n.alternate;Ee!==null&&(Ee=Ee.updateQueue,k=Ee.lastBaseUpdate,k!==C&&(k===null?Ee.firstBaseUpdate=ce:k.next=ce,Ee.lastBaseUpdate=Y))}if(m!==null){var Se=d.baseState;C=0,Ee=ce=Y=null,k=m;do{var fe=k.lane&-536870913,pe=fe!==k.lane;if(pe?(Tt&fe)===fe:(u&fe)===fe){fe!==0&&fe===Za&&(dd=!0),Ee!==null&&(Ee=Ee.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Ye=n,Ge=k;fe=s;var kt=o;switch(Ge.tag){case 1:if(Ye=Ge.payload,typeof Ye=="function"){Se=Ye.call(kt,Se,fe);break e}Se=Ye;break e;case 3:Ye.flags=Ye.flags&-65537|128;case 0:if(Ye=Ge.payload,fe=typeof Ye=="function"?Ye.call(kt,Se,fe):Ye,fe==null)break e;Se=y({},Se,fe);break e;case 2:Gi=!0}}fe=k.callback,fe!==null&&(n.flags|=64,pe&&(n.flags|=8192),pe=d.callbacks,pe===null?d.callbacks=[fe]:pe.push(fe))}else pe={lane:fe,tag:k.tag,payload:k.payload,callback:k.callback,next:null},Ee===null?(ce=Ee=pe,Y=Se):Ee=Ee.next=pe,C|=fe;if(k=k.next,k===null){if(k=d.shared.pending,k===null)break;pe=k,k=pe.next,pe.next=null,d.lastBaseUpdate=pe,d.shared.pending=null}}while(!0);Ee===null&&(Y=Se),d.baseState=Y,d.firstBaseUpdate=ce,d.lastBaseUpdate=Ee,m===null&&(d.shared.lanes=0),ts|=C,n.lanes=C,n.memoizedState=Se}}function r0(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function i0(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)r0(o[n],s)}var eo=de(null),_c=de(0);function s0(n,s){n=Ci,Ie(_c,n),Ie(eo,s),Ci=n|s.baseLanes}function pd(){Ie(_c,Ci),Ie(eo,eo.current)}function gd(){Ci=_c.current,we(eo),we(_c)}var Qi=0,ot=null,Nt=null,Jt=null,Ec=!1,to=!1,oa=!1,Tc=0,bl=0,no=null,TR=0;function Yt(){throw Error(i(321))}function md(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!Zn(n[o],s[o]))return!1;return!0}function yd(n,s,o,u,d,m){return Qi=m,ot=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ge.H=n===null||n.memoizedState===null?q0:z0,oa=!1,m=o(u,d),oa=!1,to&&(m=o0(s,o,u,d)),a0(n),m}function a0(n){ge.H=Cc;var s=Nt!==null&&Nt.next!==null;if(Qi=0,Jt=Nt=ot=null,Ec=!1,bl=0,no=null,s)throw Error(i(300));n===null||pn||(n=n.dependencies,n!==null&&pc(n)&&(pn=!0))}function o0(n,s,o,u){ot=n;var d=0;do{if(to&&(no=null),bl=0,to=!1,25<=d)throw Error(i(301));if(d+=1,Jt=Nt=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}ge.H=IR,m=s(o,u)}while(to);return m}function wR(){var n=ge.H,s=n.useState()[0];return s=typeof s.then=="function"?Sl(s):s,n=n.useState()[0],(Nt!==null?Nt.memoizedState:null)!==n&&(ot.flags|=1024),s}function vd(){var n=Tc!==0;return Tc=0,n}function _d(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function Ed(n){if(Ec){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ec=!1}Qi=0,Jt=Nt=ot=null,to=!1,bl=Tc=0,no=null}function zn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?ot.memoizedState=Jt=n:Jt=Jt.next=n,Jt}function en(){if(Nt===null){var n=ot.alternate;n=n!==null?n.memoizedState:null}else n=Nt.next;var s=Jt===null?ot.memoizedState:Jt.next;if(s!==null)Jt=s,Nt=n;else{if(n===null)throw ot.alternate===null?Error(i(467)):Error(i(310));Nt=n,n={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Jt===null?ot.memoizedState=Jt=n:Jt=Jt.next=n}return Jt}function Td(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Sl(n){var s=bl;return bl+=1,no===null&&(no=[]),n=e0(no,n,s),s=ot,(Jt===null?s.memoizedState:Jt.next)===null&&(s=s.alternate,ge.H=s===null||s.memoizedState===null?q0:z0),n}function wc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Sl(n);if(n.$$typeof===j)return xn(n)}throw Error(i(438,String(n)))}function wd(n){var s=null,o=ot.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=ot.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Td(),ot.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),u=0;u<n;u++)o[u]=K;return s.index++,o}function Ti(n,s){return typeof s=="function"?s(n):s}function bc(n){var s=en();return bd(s,Nt,n)}function bd(n,s,o){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var d=n.baseQueue,m=u.pending;if(m!==null){if(d!==null){var C=d.next;d.next=m.next,m.next=C}s.baseQueue=d=m,u.pending=null}if(m=n.baseState,d===null)n.memoizedState=m;else{s=d.next;var k=C=null,Y=null,ce=s,Ee=!1;do{var Se=ce.lane&-536870913;if(Se!==ce.lane?(Tt&Se)===Se:(Qi&Se)===Se){var fe=ce.revertLane;if(fe===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null}),Se===Za&&(Ee=!0);else if((Qi&fe)===fe){ce=ce.next,fe===Za&&(Ee=!0);continue}else Se={lane:0,revertLane:ce.revertLane,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null},Y===null?(k=Y=Se,C=m):Y=Y.next=Se,ot.lanes|=fe,ts|=fe;Se=ce.action,oa&&o(m,Se),m=ce.hasEagerState?ce.eagerState:o(m,Se)}else fe={lane:Se,revertLane:ce.revertLane,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null},Y===null?(k=Y=fe,C=m):Y=Y.next=fe,ot.lanes|=Se,ts|=Se;ce=ce.next}while(ce!==null&&ce!==s);if(Y===null?C=m:Y.next=k,!Zn(m,n.memoizedState)&&(pn=!0,Ee&&(o=Ja,o!==null)))throw o;n.memoizedState=m,n.baseState=C,n.baseQueue=Y,u.lastRenderedState=m}return d===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Sd(n){var s=en(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var u=o.dispatch,d=o.pending,m=s.memoizedState;if(d!==null){o.pending=null;var C=d=d.next;do m=n(m,C.action),C=C.next;while(C!==d);Zn(m,s.memoizedState)||(pn=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),o.lastRenderedState=m}return[m,u]}function l0(n,s,o){var u=ot,d=en(),m=At;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=s();var C=!Zn((Nt||d).memoizedState,o);C&&(d.memoizedState=o,pn=!0),d=d.queue;var k=h0.bind(null,u,d,n);if(Rl(2048,8,k,[n]),d.getSnapshot!==s||C||Jt!==null&&Jt.memoizedState.tag&1){if(u.flags|=2048,ro(9,Sc(),c0.bind(null,u,d,o,s),null),Ut===null)throw Error(i(349));m||(Qi&124)!==0||u0(u,s,o)}return o}function u0(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=ot.updateQueue,s===null?(s=Td(),ot.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function c0(n,s,o,u){s.value=o,s.getSnapshot=u,f0(s)&&d0(n)}function h0(n,s,o){return o(function(){f0(s)&&d0(n)})}function f0(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!Zn(n,o)}catch{return!0}}function d0(n){var s=Qa(n,2);s!==null&&ir(s,n,2)}function Rd(n){var s=zn();if(typeof n=="function"){var o=n;if(n=o(),oa){_(!0);try{o()}finally{_(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:n},s}function p0(n,s,o,u){return n.baseState=o,bd(n,Nt,typeof u=="function"?u:Ti)}function bR(n,s,o,u,d){if(Ac(n))throw Error(i(485));if(n=s.action,n!==null){var m={payload:d,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){m.listeners.push(C)}};ge.T!==null?o(!0):m.isTransition=!1,u(m),o=s.pending,o===null?(m.next=s.pending=m,g0(s,m)):(m.next=o.next,s.pending=o.next=m)}}function g0(n,s){var o=s.action,u=s.payload,d=n.state;if(s.isTransition){var m=ge.T,C={};ge.T=C;try{var k=o(d,u),Y=ge.S;Y!==null&&Y(C,k),m0(n,s,k)}catch(ce){Ad(n,s,ce)}finally{ge.T=m}}else try{m=o(d,u),m0(n,s,m)}catch(ce){Ad(n,s,ce)}}function m0(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){y0(n,s,u)},function(u){return Ad(n,s,u)}):y0(n,s,o)}function y0(n,s,o){s.status="fulfilled",s.value=o,v0(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,g0(n,o)))}function Ad(n,s,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,v0(s),s=s.next;while(s!==u)}n.action=null}function v0(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function _0(n,s){return s}function E0(n,s){if(At){var o=Ut.formState;if(o!==null){e:{var u=ot;if(At){if(Ht){t:{for(var d=Ht,m=$r;d.nodeType!==8;){if(!m){d=null;break t}if(d=Ar(d.nextSibling),d===null){d=null;break t}}m=d.data,d=m==="F!"||m==="F"?d:null}if(d){Ht=Ar(d.nextSibling),u=d.data==="F!";break e}}ra(u)}u=!1}u&&(s=o[0])}}return o=zn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_0,lastRenderedState:s},o.queue=u,o=B0.bind(null,ot,u),u.dispatch=o,u=Rd(!1),m=xd.bind(null,ot,!1,u.queue),u=zn(),d={state:s,dispatch:null,action:n,pending:null},u.queue=d,o=bR.bind(null,ot,d,m,o),d.dispatch=o,u.memoizedState=n,[s,o,!1]}function T0(n){var s=en();return w0(s,Nt,n)}function w0(n,s,o){if(s=bd(n,s,_0)[0],n=bc(Ti)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Sl(s)}catch(C){throw C===vl?yc:C}else u=s;s=en();var d=s.queue,m=d.dispatch;return o!==s.memoizedState&&(ot.flags|=2048,ro(9,Sc(),SR.bind(null,d,o),null)),[u,m,n]}function SR(n,s){n.action=s}function b0(n){var s=en(),o=Nt;if(o!==null)return w0(s,o,n);en(),s=s.memoizedState,o=en();var u=o.queue.dispatch;return o.memoizedState=n,[s,u,!1]}function ro(n,s,o,u){return n={tag:n,create:o,deps:u,inst:s,next:null},s=ot.updateQueue,s===null&&(s=Td(),ot.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,s.lastEffect=n),n}function Sc(){return{destroy:void 0,resource:void 0}}function S0(){return en().memoizedState}function Rc(n,s,o,u){var d=zn();u=u===void 0?null:u,ot.flags|=n,d.memoizedState=ro(1|s,Sc(),o,u)}function Rl(n,s,o,u){var d=en();u=u===void 0?null:u;var m=d.memoizedState.inst;Nt!==null&&u!==null&&md(u,Nt.memoizedState.deps)?d.memoizedState=ro(s,m,o,u):(ot.flags|=n,d.memoizedState=ro(1|s,m,o,u))}function R0(n,s){Rc(8390656,8,n,s)}function A0(n,s){Rl(2048,8,n,s)}function C0(n,s){return Rl(4,2,n,s)}function I0(n,s){return Rl(4,4,n,s)}function D0(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function O0(n,s,o){o=o!=null?o.concat([n]):null,Rl(4,4,D0.bind(null,s,n),o)}function Cd(){}function x0(n,s){var o=en();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&md(s,u[1])?u[0]:(o.memoizedState=[n,s],n)}function N0(n,s){var o=en();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&md(s,u[1]))return u[0];if(u=n(),oa){_(!0);try{n()}finally{_(!1)}}return o.memoizedState=[u,s],u}function Id(n,s,o){return o===void 0||(Qi&1073741824)!==0?n.memoizedState=s:(n.memoizedState=o,n=Lv(),ot.lanes|=n,ts|=n,o)}function M0(n,s,o,u){return Zn(o,s)?o:eo.current!==null?(n=Id(n,o,u),Zn(n,s)||(pn=!0),n):(Qi&42)===0?(pn=!0,n.memoizedState=o):(n=Lv(),ot.lanes|=n,ts|=n,s)}function k0(n,s,o,u,d){var m=De.p;De.p=m!==0&&8>m?m:8;var C=ge.T,k={};ge.T=k,xd(n,!1,s,o);try{var Y=d(),ce=ge.S;if(ce!==null&&ce(k,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var Ee=ER(Y,u);Al(n,s,Ee,rr(n))}else Al(n,s,u,rr(n))}catch(Se){Al(n,s,{then:function(){},status:"rejected",reason:Se},rr())}finally{De.p=m,ge.T=C}}function RR(){}function Dd(n,s,o,u){if(n.tag!==5)throw Error(i(476));var d=L0(n).queue;k0(n,d,s,Me,o===null?RR:function(){return P0(n),o(u)})}function L0(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:Me,baseState:Me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:Me},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function P0(n){var s=L0(n).next.queue;Al(n,s,{},rr())}function Od(){return xn(Hl)}function U0(){return en().memoizedState}function V0(){return en().memoizedState}function AR(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=rr();n=$i(o);var u=Ki(s,n,o);u!==null&&(ir(u,s,o),El(u,s,o)),s={cache:ad()},n.payload=s;return}s=s.return}}function CR(n,s,o){var u=rr();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Ac(n)?j0(s,o):(o=Wf(n,s,o,u),o!==null&&(ir(o,n,u),F0(o,s,u)))}function B0(n,s,o){var u=rr();Al(n,s,o,u)}function Al(n,s,o,u){var d={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Ac(n))j0(s,d);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var C=s.lastRenderedState,k=m(C,o);if(d.hasEagerState=!0,d.eagerState=k,Zn(k,C))return uc(n,s,d,0),Ut===null&&lc(),!1}catch{}finally{}if(o=Wf(n,s,d,u),o!==null)return ir(o,n,u),F0(o,s,u),!0}return!1}function xd(n,s,o,u){if(u={lane:2,revertLane:up(),action:u,hasEagerState:!1,eagerState:null,next:null},Ac(n)){if(s)throw Error(i(479))}else s=Wf(n,o,u,2),s!==null&&ir(s,n,2)}function Ac(n){var s=n.alternate;return n===ot||s!==null&&s===ot}function j0(n,s){to=Ec=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function F0(n,s,o){if((o&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Us(n,o)}}var Cc={readContext:xn,use:wc,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useLayoutEffect:Yt,useInsertionEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useSyncExternalStore:Yt,useId:Yt,useHostTransitionStatus:Yt,useFormState:Yt,useActionState:Yt,useOptimistic:Yt,useMemoCache:Yt,useCacheRefresh:Yt},q0={readContext:xn,use:wc,useCallback:function(n,s){return zn().memoizedState=[n,s===void 0?null:s],n},useContext:xn,useEffect:R0,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,Rc(4194308,4,D0.bind(null,s,n),o)},useLayoutEffect:function(n,s){return Rc(4194308,4,n,s)},useInsertionEffect:function(n,s){Rc(4,2,n,s)},useMemo:function(n,s){var o=zn();s=s===void 0?null:s;var u=n();if(oa){_(!0);try{n()}finally{_(!1)}}return o.memoizedState=[u,s],u},useReducer:function(n,s,o){var u=zn();if(o!==void 0){var d=o(s);if(oa){_(!0);try{o(s)}finally{_(!1)}}}else d=s;return u.memoizedState=u.baseState=d,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:d},u.queue=n,n=n.dispatch=CR.bind(null,ot,n),[u.memoizedState,n]},useRef:function(n){var s=zn();return n={current:n},s.memoizedState=n},useState:function(n){n=Rd(n);var s=n.queue,o=B0.bind(null,ot,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:Cd,useDeferredValue:function(n,s){var o=zn();return Id(o,n,s)},useTransition:function(){var n=Rd(!1);return n=k0.bind(null,ot,n.queue,!0,!1),zn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var u=ot,d=zn();if(At){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),Ut===null)throw Error(i(349));(Tt&124)!==0||u0(u,s,o)}d.memoizedState=o;var m={value:o,getSnapshot:s};return d.queue=m,R0(h0.bind(null,u,m,n),[n]),u.flags|=2048,ro(9,Sc(),c0.bind(null,u,m,o,s),null),o},useId:function(){var n=zn(),s=Ut.identifierPrefix;if(At){var o=vi,u=yi;o=(u&~(1<<32-w(u)-1)).toString(32)+o,s=""+s+"R"+o,o=Tc++,0<o&&(s+="H"+o.toString(32)),s+=""}else o=TR++,s=""+s+"r"+o.toString(32)+"";return n.memoizedState=s},useHostTransitionStatus:Od,useFormState:E0,useActionState:E0,useOptimistic:function(n){var s=zn();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=xd.bind(null,ot,!0,o),o.dispatch=s,[n,s]},useMemoCache:wd,useCacheRefresh:function(){return zn().memoizedState=AR.bind(null,ot)}},z0={readContext:xn,use:wc,useCallback:x0,useContext:xn,useEffect:A0,useImperativeHandle:O0,useInsertionEffect:C0,useLayoutEffect:I0,useMemo:N0,useReducer:bc,useRef:S0,useState:function(){return bc(Ti)},useDebugValue:Cd,useDeferredValue:function(n,s){var o=en();return M0(o,Nt.memoizedState,n,s)},useTransition:function(){var n=bc(Ti)[0],s=en().memoizedState;return[typeof n=="boolean"?n:Sl(n),s]},useSyncExternalStore:l0,useId:U0,useHostTransitionStatus:Od,useFormState:T0,useActionState:T0,useOptimistic:function(n,s){var o=en();return p0(o,Nt,n,s)},useMemoCache:wd,useCacheRefresh:V0},IR={readContext:xn,use:wc,useCallback:x0,useContext:xn,useEffect:A0,useImperativeHandle:O0,useInsertionEffect:C0,useLayoutEffect:I0,useMemo:N0,useReducer:Sd,useRef:S0,useState:function(){return Sd(Ti)},useDebugValue:Cd,useDeferredValue:function(n,s){var o=en();return Nt===null?Id(o,n,s):M0(o,Nt.memoizedState,n,s)},useTransition:function(){var n=Sd(Ti)[0],s=en().memoizedState;return[typeof n=="boolean"?n:Sl(n),s]},useSyncExternalStore:l0,useId:U0,useHostTransitionStatus:Od,useFormState:b0,useActionState:b0,useOptimistic:function(n,s){var o=en();return Nt!==null?p0(o,Nt,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:wd,useCacheRefresh:V0},io=null,Cl=0;function Ic(n){var s=Cl;return Cl+=1,io===null&&(io=[]),e0(io,n,s)}function Il(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Dc(n,s){throw s.$$typeof===S?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function H0(n){var s=n._init;return s(n._payload)}function G0(n){function s(ae,ne){if(n){var ue=ae.deletions;ue===null?(ae.deletions=[ne],ae.flags|=16):ue.push(ne)}}function o(ae,ne){if(!n)return null;for(;ne!==null;)s(ae,ne),ne=ne.sibling;return null}function u(ae){for(var ne=new Map;ae!==null;)ae.key!==null?ne.set(ae.key,ae):ne.set(ae.index,ae),ae=ae.sibling;return ne}function d(ae,ne){return ae=mi(ae,ne),ae.index=0,ae.sibling=null,ae}function m(ae,ne,ue){return ae.index=ue,n?(ue=ae.alternate,ue!==null?(ue=ue.index,ue<ne?(ae.flags|=67108866,ne):ue):(ae.flags|=67108866,ne)):(ae.flags|=1048576,ne)}function C(ae){return n&&ae.alternate===null&&(ae.flags|=67108866),ae}function k(ae,ne,ue,Te){return ne===null||ne.tag!==6?(ne=Zf(ue,ae.mode,Te),ne.return=ae,ne):(ne=d(ne,ue),ne.return=ae,ne)}function Y(ae,ne,ue,Te){var Pe=ue.type;return Pe===E?Ee(ae,ne,ue.props.children,Te,ue.key):ne!==null&&(ne.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===M&&H0(Pe)===ne.type)?(ne=d(ne,ue.props),Il(ne,ue),ne.return=ae,ne):(ne=hc(ue.type,ue.key,ue.props,null,ae.mode,Te),Il(ne,ue),ne.return=ae,ne)}function ce(ae,ne,ue,Te){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==ue.containerInfo||ne.stateNode.implementation!==ue.implementation?(ne=Jf(ue,ae.mode,Te),ne.return=ae,ne):(ne=d(ne,ue.children||[]),ne.return=ae,ne)}function Ee(ae,ne,ue,Te,Pe){return ne===null||ne.tag!==7?(ne=Js(ue,ae.mode,Te,Pe),ne.return=ae,ne):(ne=d(ne,ue),ne.return=ae,ne)}function Se(ae,ne,ue){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return ne=Zf(""+ne,ae.mode,ue),ne.return=ae,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case T:return ue=hc(ne.type,ne.key,ne.props,null,ae.mode,ue),Il(ue,ne),ue.return=ae,ue;case D:return ne=Jf(ne,ae.mode,ue),ne.return=ae,ne;case M:var Te=ne._init;return ne=Te(ne._payload),Se(ae,ne,ue)}if(nt(ne)||ee(ne))return ne=Js(ne,ae.mode,ue,null),ne.return=ae,ne;if(typeof ne.then=="function")return Se(ae,Ic(ne),ue);if(ne.$$typeof===j)return Se(ae,gc(ae,ne),ue);Dc(ae,ne)}return null}function fe(ae,ne,ue,Te){var Pe=ne!==null?ne.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return Pe!==null?null:k(ae,ne,""+ue,Te);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case T:return ue.key===Pe?Y(ae,ne,ue,Te):null;case D:return ue.key===Pe?ce(ae,ne,ue,Te):null;case M:return Pe=ue._init,ue=Pe(ue._payload),fe(ae,ne,ue,Te)}if(nt(ue)||ee(ue))return Pe!==null?null:Ee(ae,ne,ue,Te,null);if(typeof ue.then=="function")return fe(ae,ne,Ic(ue),Te);if(ue.$$typeof===j)return fe(ae,ne,gc(ae,ue),Te);Dc(ae,ue)}return null}function pe(ae,ne,ue,Te,Pe){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return ae=ae.get(ue)||null,k(ne,ae,""+Te,Pe);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case T:return ae=ae.get(Te.key===null?ue:Te.key)||null,Y(ne,ae,Te,Pe);case D:return ae=ae.get(Te.key===null?ue:Te.key)||null,ce(ne,ae,Te,Pe);case M:var ut=Te._init;return Te=ut(Te._payload),pe(ae,ne,ue,Te,Pe)}if(nt(Te)||ee(Te))return ae=ae.get(ue)||null,Ee(ne,ae,Te,Pe,null);if(typeof Te.then=="function")return pe(ae,ne,ue,Ic(Te),Pe);if(Te.$$typeof===j)return pe(ae,ne,ue,gc(ne,Te),Pe);Dc(ne,Te)}return null}function Ye(ae,ne,ue,Te){for(var Pe=null,ut=null,Ve=ne,Ke=ne=0,mn=null;Ve!==null&&Ke<ue.length;Ke++){Ve.index>Ke?(mn=Ve,Ve=null):mn=Ve.sibling;var Rt=fe(ae,Ve,ue[Ke],Te);if(Rt===null){Ve===null&&(Ve=mn);break}n&&Ve&&Rt.alternate===null&&s(ae,Ve),ne=m(Rt,ne,Ke),ut===null?Pe=Rt:ut.sibling=Rt,ut=Rt,Ve=mn}if(Ke===ue.length)return o(ae,Ve),At&&ta(ae,Ke),Pe;if(Ve===null){for(;Ke<ue.length;Ke++)Ve=Se(ae,ue[Ke],Te),Ve!==null&&(ne=m(Ve,ne,Ke),ut===null?Pe=Ve:ut.sibling=Ve,ut=Ve);return At&&ta(ae,Ke),Pe}for(Ve=u(Ve);Ke<ue.length;Ke++)mn=pe(Ve,ae,Ke,ue[Ke],Te),mn!==null&&(n&&mn.alternate!==null&&Ve.delete(mn.key===null?Ke:mn.key),ne=m(mn,ne,Ke),ut===null?Pe=mn:ut.sibling=mn,ut=mn);return n&&Ve.forEach(function(cs){return s(ae,cs)}),At&&ta(ae,Ke),Pe}function Ge(ae,ne,ue,Te){if(ue==null)throw Error(i(151));for(var Pe=null,ut=null,Ve=ne,Ke=ne=0,mn=null,Rt=ue.next();Ve!==null&&!Rt.done;Ke++,Rt=ue.next()){Ve.index>Ke?(mn=Ve,Ve=null):mn=Ve.sibling;var cs=fe(ae,Ve,Rt.value,Te);if(cs===null){Ve===null&&(Ve=mn);break}n&&Ve&&cs.alternate===null&&s(ae,Ve),ne=m(cs,ne,Ke),ut===null?Pe=cs:ut.sibling=cs,ut=cs,Ve=mn}if(Rt.done)return o(ae,Ve),At&&ta(ae,Ke),Pe;if(Ve===null){for(;!Rt.done;Ke++,Rt=ue.next())Rt=Se(ae,Rt.value,Te),Rt!==null&&(ne=m(Rt,ne,Ke),ut===null?Pe=Rt:ut.sibling=Rt,ut=Rt);return At&&ta(ae,Ke),Pe}for(Ve=u(Ve);!Rt.done;Ke++,Rt=ue.next())Rt=pe(Ve,ae,Ke,Rt.value,Te),Rt!==null&&(n&&Rt.alternate!==null&&Ve.delete(Rt.key===null?Ke:Rt.key),ne=m(Rt,ne,Ke),ut===null?Pe=Rt:ut.sibling=Rt,ut=Rt);return n&&Ve.forEach(function(DA){return s(ae,DA)}),At&&ta(ae,Ke),Pe}function kt(ae,ne,ue,Te){if(typeof ue=="object"&&ue!==null&&ue.type===E&&ue.key===null&&(ue=ue.props.children),typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case T:e:{for(var Pe=ue.key;ne!==null;){if(ne.key===Pe){if(Pe=ue.type,Pe===E){if(ne.tag===7){o(ae,ne.sibling),Te=d(ne,ue.props.children),Te.return=ae,ae=Te;break e}}else if(ne.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===M&&H0(Pe)===ne.type){o(ae,ne.sibling),Te=d(ne,ue.props),Il(Te,ue),Te.return=ae,ae=Te;break e}o(ae,ne);break}else s(ae,ne);ne=ne.sibling}ue.type===E?(Te=Js(ue.props.children,ae.mode,Te,ue.key),Te.return=ae,ae=Te):(Te=hc(ue.type,ue.key,ue.props,null,ae.mode,Te),Il(Te,ue),Te.return=ae,ae=Te)}return C(ae);case D:e:{for(Pe=ue.key;ne!==null;){if(ne.key===Pe)if(ne.tag===4&&ne.stateNode.containerInfo===ue.containerInfo&&ne.stateNode.implementation===ue.implementation){o(ae,ne.sibling),Te=d(ne,ue.children||[]),Te.return=ae,ae=Te;break e}else{o(ae,ne);break}else s(ae,ne);ne=ne.sibling}Te=Jf(ue,ae.mode,Te),Te.return=ae,ae=Te}return C(ae);case M:return Pe=ue._init,ue=Pe(ue._payload),kt(ae,ne,ue,Te)}if(nt(ue))return Ye(ae,ne,ue,Te);if(ee(ue)){if(Pe=ee(ue),typeof Pe!="function")throw Error(i(150));return ue=Pe.call(ue),Ge(ae,ne,ue,Te)}if(typeof ue.then=="function")return kt(ae,ne,Ic(ue),Te);if(ue.$$typeof===j)return kt(ae,ne,gc(ae,ue),Te);Dc(ae,ue)}return typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint"?(ue=""+ue,ne!==null&&ne.tag===6?(o(ae,ne.sibling),Te=d(ne,ue),Te.return=ae,ae=Te):(o(ae,ne),Te=Zf(ue,ae.mode,Te),Te.return=ae,ae=Te),C(ae)):o(ae,ne)}return function(ae,ne,ue,Te){try{Cl=0;var Pe=kt(ae,ne,ue,Te);return io=null,Pe}catch(Ve){if(Ve===vl||Ve===yc)throw Ve;var ut=Jn(29,Ve,null,ae.mode);return ut.lanes=Te,ut.return=ae,ut}finally{}}}var so=G0(!0),$0=G0(!1),dr=de(null),Kr=null;function Yi(n){var s=n.alternate;Ie(on,on.current&1),Ie(dr,n),Kr===null&&(s===null||eo.current!==null||s.memoizedState!==null)&&(Kr=n)}function K0(n){if(n.tag===22){if(Ie(on,on.current),Ie(dr,n),Kr===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(Kr=n)}}else Wi()}function Wi(){Ie(on,on.current),Ie(dr,dr.current)}function wi(n){we(dr),Kr===n&&(Kr=null),we(on)}var on=de(0);function Oc(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Tp(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Nd(n,s,o,u){s=n.memoizedState,o=o(u,s),o=o==null?s:y({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Md={enqueueSetState:function(n,s,o){n=n._reactInternals;var u=rr(),d=$i(u);d.payload=s,o!=null&&(d.callback=o),s=Ki(n,d,u),s!==null&&(ir(s,n,u),El(s,n,u))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var u=rr(),d=$i(u);d.tag=1,d.payload=s,o!=null&&(d.callback=o),s=Ki(n,d,u),s!==null&&(ir(s,n,u),El(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=rr(),u=$i(o);u.tag=2,s!=null&&(u.callback=s),s=Ki(n,u,o),s!==null&&(ir(s,n,o),El(s,n,o))}};function Q0(n,s,o,u,d,m,C){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,C):s.prototype&&s.prototype.isPureReactComponent?!cl(o,u)||!cl(d,m):!0}function Y0(n,s,o,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==n&&Md.enqueueReplaceState(s,s.state,null)}function la(n,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(n=n.defaultProps){o===s&&(o=y({},o));for(var d in n)o[d]===void 0&&(o[d]=n[d])}return o}var xc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function W0(n){xc(n)}function X0(n){console.error(n)}function Z0(n){xc(n)}function Nc(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function J0(n,s,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function kd(n,s,o){return o=$i(o),o.tag=3,o.payload={element:null},o.callback=function(){Nc(n,s)},o}function ev(n){return n=$i(n),n.tag=3,n}function tv(n,s,o,u){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var m=u.value;n.payload=function(){return d(m)},n.callback=function(){J0(s,o,u)}}var C=o.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(n.callback=function(){J0(s,o,u),typeof d!="function"&&(ns===null?ns=new Set([this]):ns.add(this));var k=u.stack;this.componentDidCatch(u.value,{componentStack:k!==null?k:""})})}function DR(n,s,o,u,d){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&gl(s,o,d,!0),o=dr.current,o!==null){switch(o.tag){case 13:return Kr===null?ip():o.alternate===null&&Gt===0&&(Gt=3),o.flags&=-257,o.flags|=65536,o.lanes=d,u===ud?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),ap(n,u,d)),!1;case 22:return o.flags|=65536,u===ud?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),ap(n,u,d)),!1}throw Error(i(435,o.tag))}return ap(n,u,d),ip(),!1}if(At)return s=dr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,u!==nd&&(n=Error(i(422),{cause:u}),pl(ur(n,o)))):(u!==nd&&(s=Error(i(423),{cause:u}),pl(ur(s,o))),n=n.current.alternate,n.flags|=65536,d&=-d,n.lanes|=d,u=ur(u,o),d=kd(n.stateNode,u,d),fd(n,d),Gt!==4&&(Gt=2)),!1;var m=Error(i(520),{cause:u});if(m=ur(m,o),Ll===null?Ll=[m]:Ll.push(m),Gt!==4&&(Gt=2),s===null)return!0;u=ur(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=d&-d,o.lanes|=n,n=kd(o.stateNode,u,n),fd(o,n),!1;case 1:if(s=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ns===null||!ns.has(m))))return o.flags|=65536,d&=-d,o.lanes|=d,d=ev(d),tv(d,n,o,u),fd(o,d),!1}o=o.return}while(o!==null);return!1}var nv=Error(i(461)),pn=!1;function wn(n,s,o,u){s.child=n===null?$0(s,null,o,u):so(s,n.child,o,u)}function rv(n,s,o,u,d){o=o.render;var m=s.ref;if("ref"in u){var C={};for(var k in u)k!=="ref"&&(C[k]=u[k])}else C=u;return sa(s),u=yd(n,s,o,C,m,d),k=vd(),n!==null&&!pn?(_d(n,s,d),bi(n,s,d)):(At&&k&&ed(s),s.flags|=1,wn(n,s,u,d),s.child)}function iv(n,s,o,u,d){if(n===null){var m=o.type;return typeof m=="function"&&!Xf(m)&&m.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=m,sv(n,s,m,u,d)):(n=hc(o.type,null,u,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,!qd(n,d)){var C=m.memoizedProps;if(o=o.compare,o=o!==null?o:cl,o(C,u)&&n.ref===s.ref)return bi(n,s,d)}return s.flags|=1,n=mi(m,u),n.ref=s.ref,n.return=s,s.child=n}function sv(n,s,o,u,d){if(n!==null){var m=n.memoizedProps;if(cl(m,u)&&n.ref===s.ref)if(pn=!1,s.pendingProps=u=m,qd(n,d))(n.flags&131072)!==0&&(pn=!0);else return s.lanes=n.lanes,bi(n,s,d)}return Ld(n,s,o,u,d)}function av(n,s,o){var u=s.pendingProps,d=u.children,m=n!==null?n.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=m!==null?m.baseLanes|o:o,n!==null){for(d=s.child=n.child,m=0;d!==null;)m=m|d.lanes|d.childLanes,d=d.sibling;s.childLanes=m&~u}else s.childLanes=0,s.child=null;return ov(n,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&mc(s,m!==null?m.cachePool:null),m!==null?s0(s,m):pd(),K0(s);else return s.lanes=s.childLanes=536870912,ov(n,s,m!==null?m.baseLanes|o:o,o)}else m!==null?(mc(s,m.cachePool),s0(s,m),Wi(),s.memoizedState=null):(n!==null&&mc(s,null),pd(),Wi());return wn(n,s,d,o),s.child}function ov(n,s,o,u){var d=ld();return d=d===null?null:{parent:an._currentValue,pool:d},s.memoizedState={baseLanes:o,cachePool:d},n!==null&&mc(s,null),pd(),K0(s),n!==null&&gl(n,s,u,!0),null}function Mc(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function Ld(n,s,o,u,d){return sa(s),o=yd(n,s,o,u,void 0,d),u=vd(),n!==null&&!pn?(_d(n,s,d),bi(n,s,d)):(At&&u&&ed(s),s.flags|=1,wn(n,s,o,d),s.child)}function lv(n,s,o,u,d,m){return sa(s),s.updateQueue=null,o=o0(s,u,o,d),a0(n),u=vd(),n!==null&&!pn?(_d(n,s,m),bi(n,s,m)):(At&&u&&ed(s),s.flags|=1,wn(n,s,o,m),s.child)}function uv(n,s,o,u,d){if(sa(s),s.stateNode===null){var m=Ya,C=o.contextType;typeof C=="object"&&C!==null&&(m=xn(C)),m=new o(u,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Md,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=u,m.state=s.memoizedState,m.refs={},cd(s),C=o.contextType,m.context=typeof C=="object"&&C!==null?xn(C):Ya,m.state=s.memoizedState,C=o.getDerivedStateFromProps,typeof C=="function"&&(Nd(s,o,C,u),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(C=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),C!==m.state&&Md.enqueueReplaceState(m,m.state,null),wl(s,u,m,d),Tl(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){m=s.stateNode;var k=s.memoizedProps,Y=la(o,k);m.props=Y;var ce=m.context,Ee=o.contextType;C=Ya,typeof Ee=="object"&&Ee!==null&&(C=xn(Ee));var Se=o.getDerivedStateFromProps;Ee=typeof Se=="function"||typeof m.getSnapshotBeforeUpdate=="function",k=s.pendingProps!==k,Ee||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(k||ce!==C)&&Y0(s,m,u,C),Gi=!1;var fe=s.memoizedState;m.state=fe,wl(s,u,m,d),Tl(),ce=s.memoizedState,k||fe!==ce||Gi?(typeof Se=="function"&&(Nd(s,o,Se,u),ce=s.memoizedState),(Y=Gi||Q0(s,o,Y,u,fe,ce,C))?(Ee||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=ce),m.props=u,m.state=ce,m.context=C,u=Y):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{m=s.stateNode,hd(n,s),C=s.memoizedProps,Ee=la(o,C),m.props=Ee,Se=s.pendingProps,fe=m.context,ce=o.contextType,Y=Ya,typeof ce=="object"&&ce!==null&&(Y=xn(ce)),k=o.getDerivedStateFromProps,(ce=typeof k=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(C!==Se||fe!==Y)&&Y0(s,m,u,Y),Gi=!1,fe=s.memoizedState,m.state=fe,wl(s,u,m,d),Tl();var pe=s.memoizedState;C!==Se||fe!==pe||Gi||n!==null&&n.dependencies!==null&&pc(n.dependencies)?(typeof k=="function"&&(Nd(s,o,k,u),pe=s.memoizedState),(Ee=Gi||Q0(s,o,Ee,u,fe,pe,Y)||n!==null&&n.dependencies!==null&&pc(n.dependencies))?(ce||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,pe,Y),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,pe,Y)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||C===n.memoizedProps&&fe===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&fe===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=pe),m.props=u,m.state=pe,m.context=Y,u=Ee):(typeof m.componentDidUpdate!="function"||C===n.memoizedProps&&fe===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&fe===n.memoizedState||(s.flags|=1024),u=!1)}return m=u,Mc(n,s),u=(s.flags&128)!==0,m||u?(m=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,n!==null&&u?(s.child=so(s,n.child,null,d),s.child=so(s,null,o,d)):wn(n,s,o,d),s.memoizedState=m.state,n=s.child):n=bi(n,s,d),n}function cv(n,s,o,u){return dl(),s.flags|=256,wn(n,s,o,u),s.child}var Pd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ud(n){return{baseLanes:n,cachePool:Xy()}}function Vd(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=pr),n}function hv(n,s,o){var u=s.pendingProps,d=!1,m=(s.flags&128)!==0,C;if((C=m)||(C=n!==null&&n.memoizedState===null?!1:(on.current&2)!==0),C&&(d=!0,s.flags&=-129),C=(s.flags&32)!==0,s.flags&=-33,n===null){if(At){if(d?Yi(s):Wi(),At){var k=Ht,Y;if(Y=k){e:{for(Y=k,k=$r;Y.nodeType!==8;){if(!k){k=null;break e}if(Y=Ar(Y.nextSibling),Y===null){k=null;break e}}k=Y}k!==null?(s.memoizedState={dehydrated:k,treeContext:ea!==null?{id:yi,overflow:vi}:null,retryLane:536870912,hydrationErrors:null},Y=Jn(18,null,null,0),Y.stateNode=k,Y.return=s,s.child=Y,Fn=s,Ht=null,Y=!0):Y=!1}Y||ra(s)}if(k=s.memoizedState,k!==null&&(k=k.dehydrated,k!==null))return Tp(k)?s.lanes=32:s.lanes=536870912,null;wi(s)}return k=u.children,u=u.fallback,d?(Wi(),d=s.mode,k=kc({mode:"hidden",children:k},d),u=Js(u,d,o,null),k.return=s,u.return=s,k.sibling=u,s.child=k,d=s.child,d.memoizedState=Ud(o),d.childLanes=Vd(n,C,o),s.memoizedState=Pd,u):(Yi(s),Bd(s,k))}if(Y=n.memoizedState,Y!==null&&(k=Y.dehydrated,k!==null)){if(m)s.flags&256?(Yi(s),s.flags&=-257,s=jd(n,s,o)):s.memoizedState!==null?(Wi(),s.child=n.child,s.flags|=128,s=null):(Wi(),d=u.fallback,k=s.mode,u=kc({mode:"visible",children:u.children},k),d=Js(d,k,o,null),d.flags|=2,u.return=s,d.return=s,u.sibling=d,s.child=u,so(s,n.child,null,o),u=s.child,u.memoizedState=Ud(o),u.childLanes=Vd(n,C,o),s.memoizedState=Pd,s=d);else if(Yi(s),Tp(k)){if(C=k.nextSibling&&k.nextSibling.dataset,C)var ce=C.dgst;C=ce,u=Error(i(419)),u.stack="",u.digest=C,pl({value:u,source:null,stack:null}),s=jd(n,s,o)}else if(pn||gl(n,s,o,!1),C=(o&n.childLanes)!==0,pn||C){if(C=Ut,C!==null&&(u=o&-o,u=(u&42)!==0?1:Wn(u),u=(u&(C.suspendedLanes|o))!==0?0:u,u!==0&&u!==Y.retryLane))throw Y.retryLane=u,Qa(n,u),ir(C,n,u),nv;k.data==="$?"||ip(),s=jd(n,s,o)}else k.data==="$?"?(s.flags|=192,s.child=n.child,s=null):(n=Y.treeContext,Ht=Ar(k.nextSibling),Fn=s,At=!0,na=null,$r=!1,n!==null&&(hr[fr++]=yi,hr[fr++]=vi,hr[fr++]=ea,yi=n.id,vi=n.overflow,ea=s),s=Bd(s,u.children),s.flags|=4096);return s}return d?(Wi(),d=u.fallback,k=s.mode,Y=n.child,ce=Y.sibling,u=mi(Y,{mode:"hidden",children:u.children}),u.subtreeFlags=Y.subtreeFlags&65011712,ce!==null?d=mi(ce,d):(d=Js(d,k,o,null),d.flags|=2),d.return=s,u.return=s,u.sibling=d,s.child=u,u=d,d=s.child,k=n.child.memoizedState,k===null?k=Ud(o):(Y=k.cachePool,Y!==null?(ce=an._currentValue,Y=Y.parent!==ce?{parent:ce,pool:ce}:Y):Y=Xy(),k={baseLanes:k.baseLanes|o,cachePool:Y}),d.memoizedState=k,d.childLanes=Vd(n,C,o),s.memoizedState=Pd,u):(Yi(s),o=n.child,n=o.sibling,o=mi(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,n!==null&&(C=s.deletions,C===null?(s.deletions=[n],s.flags|=16):C.push(n)),s.child=o,s.memoizedState=null,o)}function Bd(n,s){return s=kc({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function kc(n,s){return n=Jn(22,n,null,s),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function jd(n,s,o){return so(s,n.child,null,o),n=Bd(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function fv(n,s,o){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),id(n.return,s,o)}function Fd(n,s,o,u,d){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:d}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=o,m.tailMode=d)}function dv(n,s,o){var u=s.pendingProps,d=u.revealOrder,m=u.tail;if(wn(n,s,u.children,o),u=on.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&fv(n,o,s);else if(n.tag===19)fv(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(Ie(on,u),d){case"forwards":for(o=s.child,d=null;o!==null;)n=o.alternate,n!==null&&Oc(n)===null&&(d=o),o=o.sibling;o=d,o===null?(d=s.child,s.child=null):(d=o.sibling,o.sibling=null),Fd(s,!1,d,o,m);break;case"backwards":for(o=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&Oc(n)===null){s.child=d;break}n=d.sibling,d.sibling=o,o=d,d=n}Fd(s,!0,o,null,m);break;case"together":Fd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function bi(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),ts|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(gl(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,o=mi(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=mi(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function qd(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&pc(n)))}function OR(n,s,o){switch(s.tag){case 3:ye(s,s.stateNode.containerInfo),Hi(s,an,n.memoizedState.cache),dl();break;case 27:case 5:Be(s);break;case 4:ye(s,s.stateNode.containerInfo);break;case 10:Hi(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Yi(s),s.flags|=128,null):(o&s.child.childLanes)!==0?hv(n,s,o):(Yi(s),n=bi(n,s,o),n!==null?n.sibling:null);Yi(s);break;case 19:var d=(n.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(gl(n,s,o,!1),u=(o&s.childLanes)!==0),d){if(u)return dv(n,s,o);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ie(on,on.current),u)break;return null;case 22:case 23:return s.lanes=0,av(n,s,o);case 24:Hi(s,an,n.memoizedState.cache)}return bi(n,s,o)}function pv(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)pn=!0;else{if(!qd(n,o)&&(s.flags&128)===0)return pn=!1,OR(n,s,o);pn=(n.flags&131072)!==0}else pn=!1,At&&(s.flags&1048576)!==0&&Hy(s,dc,s.index);switch(s.lanes=0,s.tag){case 16:e:{n=s.pendingProps;var u=s.elementType,d=u._init;if(u=d(u._payload),s.type=u,typeof u=="function")Xf(u)?(n=la(u,n),s.tag=1,s=uv(null,s,u,n,o)):(s.tag=0,s=Ld(null,s,u,n,o));else{if(u!=null){if(d=u.$$typeof,d===G){s.tag=11,s=rv(null,s,u,n,o);break e}else if(d===V){s.tag=14,s=iv(null,s,u,n,o);break e}}throw s=ct(u)||u,Error(i(306,s,""))}}return s;case 0:return Ld(n,s,s.type,s.pendingProps,o);case 1:return u=s.type,d=la(u,s.pendingProps),uv(n,s,u,d,o);case 3:e:{if(ye(s,s.stateNode.containerInfo),n===null)throw Error(i(387));u=s.pendingProps;var m=s.memoizedState;d=m.element,hd(n,s),wl(s,u,null,o);var C=s.memoizedState;if(u=C.cache,Hi(s,an,u),u!==m.cache&&sd(s,[an],o,!0),Tl(),u=C.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:C.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=cv(n,s,u,o);break e}else if(u!==d){d=ur(Error(i(424)),s),pl(d),s=cv(n,s,u,o);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Ht=Ar(n.firstChild),Fn=s,At=!0,na=null,$r=!0,o=$0(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(dl(),u===d){s=bi(n,s,o);break e}wn(n,s,u,o)}s=s.child}return s;case 26:return Mc(n,s),n===null?(o=v_(s.type,null,s.pendingProps,null))?s.memoizedState=o:At||(o=s.type,n=s.pendingProps,u=Qc(re.current).createElement(o),u[$t]=s,u[Je]=n,Sn(u,o,n),Qt(u),s.stateNode=u):s.memoizedState=v_(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Be(s),n===null&&At&&(u=s.stateNode=g_(s.type,s.pendingProps,re.current),Fn=s,$r=!0,d=Ht,ss(s.type)?(wp=d,Ht=Ar(u.firstChild)):Ht=d),wn(n,s,s.pendingProps.children,o),Mc(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&At&&((d=u=Ht)&&(u=iA(u,s.type,s.pendingProps,$r),u!==null?(s.stateNode=u,Fn=s,Ht=Ar(u.firstChild),$r=!1,d=!0):d=!1),d||ra(s)),Be(s),d=s.type,m=s.pendingProps,C=n!==null?n.memoizedProps:null,u=m.children,vp(d,m)?u=null:C!==null&&vp(d,C)&&(s.flags|=32),s.memoizedState!==null&&(d=yd(n,s,wR,null,null,o),Hl._currentValue=d),Mc(n,s),wn(n,s,u,o),s.child;case 6:return n===null&&At&&((n=o=Ht)&&(o=sA(o,s.pendingProps,$r),o!==null?(s.stateNode=o,Fn=s,Ht=null,n=!0):n=!1),n||ra(s)),null;case 13:return hv(n,s,o);case 4:return ye(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=so(s,null,u,o):wn(n,s,u,o),s.child;case 11:return rv(n,s,s.type,s.pendingProps,o);case 7:return wn(n,s,s.pendingProps,o),s.child;case 8:return wn(n,s,s.pendingProps.children,o),s.child;case 12:return wn(n,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Hi(s,s.type,u.value),wn(n,s,u.children,o),s.child;case 9:return d=s.type._context,u=s.pendingProps.children,sa(s),d=xn(d),u=u(d),s.flags|=1,wn(n,s,u,o),s.child;case 14:return iv(n,s,s.type,s.pendingProps,o);case 15:return sv(n,s,s.type,s.pendingProps,o);case 19:return dv(n,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},n===null?(o=kc(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=mi(n.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return av(n,s,o);case 24:return sa(s),u=xn(an),n===null?(d=ld(),d===null&&(d=Ut,m=ad(),d.pooledCache=m,m.refCount++,m!==null&&(d.pooledCacheLanes|=o),d=m),s.memoizedState={parent:u,cache:d},cd(s),Hi(s,an,d)):((n.lanes&o)!==0&&(hd(n,s),wl(s,null,null,o),Tl()),d=n.memoizedState,m=s.memoizedState,d.parent!==u?(d={parent:u,cache:u},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),Hi(s,an,u)):(u=m.cache,Hi(s,an,u),u!==d.cache&&sd(s,[an],o,!0))),wn(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Si(n){n.flags|=4}function gv(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!b_(s)){if(s=dr.current,s!==null&&((Tt&4194048)===Tt?Kr!==null:(Tt&62914560)!==Tt&&(Tt&536870912)===0||s!==Kr))throw _l=ud,Zy;n.flags|=8192}}function Lc(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Ls():536870912,n.lanes|=s,uo|=s)}function Dl(n,s){if(!At)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Ft(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(s)for(var d=n.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags&65011712,u|=d.flags&65011712,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=u,n.childLanes=o,s}function xR(n,s,o){var u=s.pendingProps;switch(td(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(s),null;case 1:return Ft(s),null;case 3:return o=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Ei(an),Ne(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(fl(s)?Si(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Ky())),Ft(s),null;case 26:return o=s.memoizedState,n===null?(Si(s),o!==null?(Ft(s),gv(s,o)):(Ft(s),s.flags&=-16777217)):o?o!==n.memoizedState?(Si(s),Ft(s),gv(s,o)):(Ft(s),s.flags&=-16777217):(n.memoizedProps!==u&&Si(s),Ft(s),s.flags&=-16777217),null;case 27:F(s),o=re.current;var d=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Si(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return Ft(s),null}n=ke.current,fl(s)?Gy(s):(n=g_(d,u,o),s.stateNode=n,Si(s))}return Ft(s),null;case 5:if(F(s),o=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Si(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return Ft(s),null}if(n=ke.current,fl(s))Gy(s);else{switch(d=Qc(re.current),n){case 1:n=d.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=d.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=d.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=d.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=d.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?d.createElement("select",{is:u.is}):d.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?d.createElement(o,{is:u.is}):d.createElement(o)}}n[$t]=s,n[Je]=u;e:for(d=s.child;d!==null;){if(d.tag===5||d.tag===6)n.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break e;for(;d.sibling===null;){if(d.return===null||d.return===s)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}s.stateNode=n;e:switch(Sn(n,o,u),o){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Si(s)}}return Ft(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&Si(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(n=re.current,fl(s)){if(n=s.stateNode,o=s.memoizedProps,u=null,d=Fn,d!==null)switch(d.tag){case 27:case 5:u=d.memoizedProps}n[$t]=s,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||l_(n.nodeValue,o)),n||ra(s)}else n=Qc(n).createTextNode(u),n[$t]=s,s.stateNode=n}return Ft(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(d=fl(s),u!==null&&u.dehydrated!==null){if(n===null){if(!d)throw Error(i(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[$t]=s}else dl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ft(s),d=!1}else d=Ky(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(wi(s),s):(wi(s),null)}if(wi(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,n=n!==null&&n.memoizedState!==null,o){u=s.child,d=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(d=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==d&&(u.flags|=2048)}return o!==n&&o&&(s.child.flags|=8192),Lc(s,s.updateQueue),Ft(s),null;case 4:return Ne(),n===null&&dp(s.stateNode.containerInfo),Ft(s),null;case 10:return Ei(s.type),Ft(s),null;case 19:if(we(on),d=s.memoizedState,d===null)return Ft(s),null;if(u=(s.flags&128)!==0,m=d.rendering,m===null)if(u)Dl(d,!1);else{if(Gt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(m=Oc(n),m!==null){for(s.flags|=128,Dl(d,!1),n=m.updateQueue,s.updateQueue=n,Lc(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)zy(o,n),o=o.sibling;return Ie(on,on.current&1|2),s.child}n=n.sibling}d.tail!==null&&b()>Vc&&(s.flags|=128,u=!0,Dl(d,!1),s.lanes=4194304)}else{if(!u)if(n=Oc(m),n!==null){if(s.flags|=128,u=!0,n=n.updateQueue,s.updateQueue=n,Lc(s,n),Dl(d,!0),d.tail===null&&d.tailMode==="hidden"&&!m.alternate&&!At)return Ft(s),null}else 2*b()-d.renderingStartTime>Vc&&o!==536870912&&(s.flags|=128,u=!0,Dl(d,!1),s.lanes=4194304);d.isBackwards?(m.sibling=s.child,s.child=m):(n=d.last,n!==null?n.sibling=m:s.child=m,d.last=m)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=b(),s.sibling=null,n=on.current,Ie(on,u?n&1|2:n&1),s):(Ft(s),null);case 22:case 23:return wi(s),gd(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(Ft(s),s.subtreeFlags&6&&(s.flags|=8192)):Ft(s),o=s.updateQueue,o!==null&&Lc(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),n!==null&&we(aa),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Ei(an),Ft(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function NR(n,s){switch(td(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Ei(an),Ne(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return F(s),null;case 13:if(wi(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));dl()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return we(on),null;case 4:return Ne(),null;case 10:return Ei(s.type),null;case 22:case 23:return wi(s),gd(),n!==null&&we(aa),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Ei(an),null;case 25:return null;default:return null}}function mv(n,s){switch(td(s),s.tag){case 3:Ei(an),Ne();break;case 26:case 27:case 5:F(s);break;case 4:Ne();break;case 13:wi(s);break;case 19:we(on);break;case 10:Ei(s.type);break;case 22:case 23:wi(s),gd(),n!==null&&we(aa);break;case 24:Ei(an)}}function Ol(n,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var d=u.next;o=d;do{if((o.tag&n)===n){u=void 0;var m=o.create,C=o.inst;u=m(),C.destroy=u}o=o.next}while(o!==d)}}catch(k){Lt(s,s.return,k)}}function Xi(n,s,o){try{var u=s.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var m=d.next;u=m;do{if((u.tag&n)===n){var C=u.inst,k=C.destroy;if(k!==void 0){C.destroy=void 0,d=s;var Y=o,ce=k;try{ce()}catch(Ee){Lt(d,Y,Ee)}}}u=u.next}while(u!==m)}}catch(Ee){Lt(s,s.return,Ee)}}function yv(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{i0(s,o)}catch(u){Lt(n,n.return,u)}}}function vv(n,s,o){o.props=la(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){Lt(n,s,u)}}function xl(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(d){Lt(n,s,d)}}function Qr(n,s){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(d){Lt(n,s,d)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){Lt(n,s,d)}else o.current=null}function _v(n){var s=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(d){Lt(n,n.return,d)}}function zd(n,s,o){try{var u=n.stateNode;JR(u,n.type,o,s),u[Je]=s}catch(d){Lt(n,n.return,d)}}function Ev(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ss(n.type)||n.tag===4}function Hd(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Ev(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ss(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Gd(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Kc));else if(u!==4&&(u===27&&ss(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(Gd(n,s,o),n=n.sibling;n!==null;)Gd(n,s,o),n=n.sibling}function Pc(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(u!==4&&(u===27&&ss(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Pc(n,s,o),n=n.sibling;n!==null;)Pc(n,s,o),n=n.sibling}function Tv(n){var s=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);Sn(s,u,o),s[$t]=n,s[Je]=o}catch(m){Lt(n,n.return,m)}}var Ri=!1,Wt=!1,$d=!1,wv=typeof WeakSet=="function"?WeakSet:Set,gn=null;function MR(n,s){if(n=n.containerInfo,mp=eh,n=My(n),Hf(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var d=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var C=0,k=-1,Y=-1,ce=0,Ee=0,Se=n,fe=null;t:for(;;){for(var pe;Se!==o||d!==0&&Se.nodeType!==3||(k=C+d),Se!==m||u!==0&&Se.nodeType!==3||(Y=C+u),Se.nodeType===3&&(C+=Se.nodeValue.length),(pe=Se.firstChild)!==null;)fe=Se,Se=pe;for(;;){if(Se===n)break t;if(fe===o&&++ce===d&&(k=C),fe===m&&++Ee===u&&(Y=C),(pe=Se.nextSibling)!==null)break;Se=fe,fe=Se.parentNode}Se=pe}o=k===-1||Y===-1?null:{start:k,end:Y}}else o=null}o=o||{start:0,end:0}}else o=null;for(yp={focusedElem:n,selectionRange:o},eh=!1,gn=s;gn!==null;)if(s=gn,n=s.child,(s.subtreeFlags&1024)!==0&&n!==null)n.return=s,gn=n;else for(;gn!==null;){switch(s=gn,m=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=s,d=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var Ye=la(o.type,d,o.elementType===o.type);n=u.getSnapshotBeforeUpdate(Ye,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(Ge){Lt(o,o.return,Ge)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)Ep(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Ep(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,gn=n;break}gn=s.return}}function bv(n,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Zi(n,o),u&4&&Ol(5,o);break;case 1:if(Zi(n,o),u&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(C){Lt(o,o.return,C)}else{var d=la(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(d,s,n.__reactInternalSnapshotBeforeUpdate)}catch(C){Lt(o,o.return,C)}}u&64&&yv(o),u&512&&xl(o,o.return);break;case 3:if(Zi(n,o),u&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{i0(n,s)}catch(C){Lt(o,o.return,C)}}break;case 27:s===null&&u&4&&Tv(o);case 26:case 5:Zi(n,o),s===null&&u&4&&_v(o),u&512&&xl(o,o.return);break;case 12:Zi(n,o);break;case 13:Zi(n,o),u&4&&Av(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=qR.bind(null,o),aA(n,o))));break;case 22:if(u=o.memoizedState!==null||Ri,!u){s=s!==null&&s.memoizedState!==null||Wt,d=Ri;var m=Wt;Ri=u,(Wt=s)&&!m?Ji(n,o,(o.subtreeFlags&8772)!==0):Zi(n,o),Ri=d,Wt=m}break;case 30:break;default:Zi(n,o)}}function Sv(n){var s=n.alternate;s!==null&&(n.alternate=null,Sv(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&ji(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Bt=null,Hn=!1;function Ai(n,s,o){for(o=o.child;o!==null;)Rv(n,s,o),o=o.sibling}function Rv(n,s,o){if(x&&typeof x.onCommitFiberUnmount=="function")try{x.onCommitFiberUnmount(He,o)}catch{}switch(o.tag){case 26:Wt||Qr(o,s),Ai(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Wt||Qr(o,s);var u=Bt,d=Hn;ss(o.type)&&(Bt=o.stateNode,Hn=!1),Ai(n,s,o),jl(o.stateNode),Bt=u,Hn=d;break;case 5:Wt||Qr(o,s);case 6:if(u=Bt,d=Hn,Bt=null,Ai(n,s,o),Bt=u,Hn=d,Bt!==null)if(Hn)try{(Bt.nodeType===9?Bt.body:Bt.nodeName==="HTML"?Bt.ownerDocument.body:Bt).removeChild(o.stateNode)}catch(m){Lt(o,s,m)}else try{Bt.removeChild(o.stateNode)}catch(m){Lt(o,s,m)}break;case 18:Bt!==null&&(Hn?(n=Bt,d_(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Ql(n)):d_(Bt,o.stateNode));break;case 4:u=Bt,d=Hn,Bt=o.stateNode.containerInfo,Hn=!0,Ai(n,s,o),Bt=u,Hn=d;break;case 0:case 11:case 14:case 15:Wt||Xi(2,o,s),Wt||Xi(4,o,s),Ai(n,s,o);break;case 1:Wt||(Qr(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&vv(o,s,u)),Ai(n,s,o);break;case 21:Ai(n,s,o);break;case 22:Wt=(u=Wt)||o.memoizedState!==null,Ai(n,s,o),Wt=u;break;default:Ai(n,s,o)}}function Av(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Ql(n)}catch(o){Lt(s,s.return,o)}}function kR(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new wv),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new wv),s;default:throw Error(i(435,n.tag))}}function Kd(n,s){var o=kR(n);s.forEach(function(u){var d=zR.bind(null,n,u);o.has(u)||(o.add(u),u.then(d,d))})}function er(n,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var d=o[u],m=n,C=s,k=C;e:for(;k!==null;){switch(k.tag){case 27:if(ss(k.type)){Bt=k.stateNode,Hn=!1;break e}break;case 5:Bt=k.stateNode,Hn=!1;break e;case 3:case 4:Bt=k.stateNode.containerInfo,Hn=!0;break e}k=k.return}if(Bt===null)throw Error(i(160));Rv(m,C,d),Bt=null,Hn=!1,m=d.alternate,m!==null&&(m.return=null),d.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Cv(s,n),s=s.sibling}var Rr=null;function Cv(n,s){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:er(s,n),tr(n),u&4&&(Xi(3,n,n.return),Ol(3,n),Xi(5,n,n.return));break;case 1:er(s,n),tr(n),u&512&&(Wt||o===null||Qr(o,o.return)),u&64&&Ri&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var d=Rr;if(er(s,n),tr(n),u&512&&(Wt||o===null||Qr(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,d=d.ownerDocument||d;t:switch(u){case"title":m=d.getElementsByTagName("title")[0],(!m||m[si]||m[$t]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=d.createElement(u),d.head.insertBefore(m,d.querySelector("head > title"))),Sn(m,u,o),m[$t]=n,Qt(m),u=m;break e;case"link":var C=T_("link","href",d).get(u+(o.href||""));if(C){for(var k=0;k<C.length;k++)if(m=C[k],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){C.splice(k,1);break t}}m=d.createElement(u),Sn(m,u,o),d.head.appendChild(m);break;case"meta":if(C=T_("meta","content",d).get(u+(o.content||""))){for(k=0;k<C.length;k++)if(m=C[k],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){C.splice(k,1);break t}}m=d.createElement(u),Sn(m,u,o),d.head.appendChild(m);break;default:throw Error(i(468,u))}m[$t]=n,Qt(m),u=m}n.stateNode=u}else w_(d,n.type,n.stateNode);else n.stateNode=E_(d,u,n.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?w_(d,n.type,n.stateNode):E_(d,u,n.memoizedProps)):u===null&&n.stateNode!==null&&zd(n,n.memoizedProps,o.memoizedProps)}break;case 27:er(s,n),tr(n),u&512&&(Wt||o===null||Qr(o,o.return)),o!==null&&u&4&&zd(n,n.memoizedProps,o.memoizedProps);break;case 5:if(er(s,n),tr(n),u&512&&(Wt||o===null||Qr(o,o.return)),n.flags&32){d=n.stateNode;try{sr(d,"")}catch(pe){Lt(n,n.return,pe)}}u&4&&n.stateNode!=null&&(d=n.memoizedProps,zd(n,d,o!==null?o.memoizedProps:d)),u&1024&&($d=!0);break;case 6:if(er(s,n),tr(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(pe){Lt(n,n.return,pe)}}break;case 3:if(Xc=null,d=Rr,Rr=Yc(s.containerInfo),er(s,n),Rr=d,tr(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Ql(s.containerInfo)}catch(pe){Lt(n,n.return,pe)}$d&&($d=!1,Iv(n));break;case 4:u=Rr,Rr=Yc(n.stateNode.containerInfo),er(s,n),tr(n),Rr=u;break;case 12:er(s,n),tr(n);break;case 13:er(s,n),tr(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Jd=b()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Kd(n,u)));break;case 22:d=n.memoizedState!==null;var Y=o!==null&&o.memoizedState!==null,ce=Ri,Ee=Wt;if(Ri=ce||d,Wt=Ee||Y,er(s,n),Wt=Ee,Ri=ce,tr(n),u&8192)e:for(s=n.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(o===null||Y||Ri||Wt||ua(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){Y=o=s;try{if(m=Y.stateNode,d)C=m.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{k=Y.stateNode;var Se=Y.memoizedProps.style,fe=Se!=null&&Se.hasOwnProperty("display")?Se.display:null;k.style.display=fe==null||typeof fe=="boolean"?"":(""+fe).trim()}}catch(pe){Lt(Y,Y.return,pe)}}}else if(s.tag===6){if(o===null){Y=s;try{Y.stateNode.nodeValue=d?"":Y.memoizedProps}catch(pe){Lt(Y,Y.return,pe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Kd(n,o))));break;case 19:er(s,n),tr(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Kd(n,u)));break;case 30:break;case 21:break;default:er(s,n),tr(n)}}function tr(n){var s=n.flags;if(s&2){try{for(var o,u=n.return;u!==null;){if(Ev(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var d=o.stateNode,m=Hd(n);Pc(n,m,d);break;case 5:var C=o.stateNode;o.flags&32&&(sr(C,""),o.flags&=-33);var k=Hd(n);Pc(n,k,C);break;case 3:case 4:var Y=o.stateNode.containerInfo,ce=Hd(n);Gd(n,ce,Y);break;default:throw Error(i(161))}}catch(Ee){Lt(n,n.return,Ee)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Iv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;Iv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Zi(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)bv(n,s.alternate,s),s=s.sibling}function ua(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Xi(4,s,s.return),ua(s);break;case 1:Qr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&vv(s,s.return,o),ua(s);break;case 27:jl(s.stateNode);case 26:case 5:Qr(s,s.return),ua(s);break;case 22:s.memoizedState===null&&ua(s);break;case 30:ua(s);break;default:ua(s)}n=n.sibling}}function Ji(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,d=n,m=s,C=m.flags;switch(m.tag){case 0:case 11:case 15:Ji(d,m,o),Ol(4,m);break;case 1:if(Ji(d,m,o),u=m,d=u.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(ce){Lt(u,u.return,ce)}if(u=m,d=u.updateQueue,d!==null){var k=u.stateNode;try{var Y=d.shared.hiddenCallbacks;if(Y!==null)for(d.shared.hiddenCallbacks=null,d=0;d<Y.length;d++)r0(Y[d],k)}catch(ce){Lt(u,u.return,ce)}}o&&C&64&&yv(m),xl(m,m.return);break;case 27:Tv(m);case 26:case 5:Ji(d,m,o),o&&u===null&&C&4&&_v(m),xl(m,m.return);break;case 12:Ji(d,m,o);break;case 13:Ji(d,m,o),o&&C&4&&Av(d,m);break;case 22:m.memoizedState===null&&Ji(d,m,o),xl(m,m.return);break;case 30:break;default:Ji(d,m,o)}s=s.sibling}}function Qd(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&ml(o))}function Yd(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&ml(n))}function Yr(n,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Dv(n,s,o,u),s=s.sibling}function Dv(n,s,o,u){var d=s.flags;switch(s.tag){case 0:case 11:case 15:Yr(n,s,o,u),d&2048&&Ol(9,s);break;case 1:Yr(n,s,o,u);break;case 3:Yr(n,s,o,u),d&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&ml(n)));break;case 12:if(d&2048){Yr(n,s,o,u),n=s.stateNode;try{var m=s.memoizedProps,C=m.id,k=m.onPostCommit;typeof k=="function"&&k(C,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(Y){Lt(s,s.return,Y)}}else Yr(n,s,o,u);break;case 13:Yr(n,s,o,u);break;case 23:break;case 22:m=s.stateNode,C=s.alternate,s.memoizedState!==null?m._visibility&2?Yr(n,s,o,u):Nl(n,s):m._visibility&2?Yr(n,s,o,u):(m._visibility|=2,ao(n,s,o,u,(s.subtreeFlags&10256)!==0)),d&2048&&Qd(C,s);break;case 24:Yr(n,s,o,u),d&2048&&Yd(s.alternate,s);break;default:Yr(n,s,o,u)}}function ao(n,s,o,u,d){for(d=d&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var m=n,C=s,k=o,Y=u,ce=C.flags;switch(C.tag){case 0:case 11:case 15:ao(m,C,k,Y,d),Ol(8,C);break;case 23:break;case 22:var Ee=C.stateNode;C.memoizedState!==null?Ee._visibility&2?ao(m,C,k,Y,d):Nl(m,C):(Ee._visibility|=2,ao(m,C,k,Y,d)),d&&ce&2048&&Qd(C.alternate,C);break;case 24:ao(m,C,k,Y,d),d&&ce&2048&&Yd(C.alternate,C);break;default:ao(m,C,k,Y,d)}s=s.sibling}}function Nl(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,u=s,d=u.flags;switch(u.tag){case 22:Nl(o,u),d&2048&&Qd(u.alternate,u);break;case 24:Nl(o,u),d&2048&&Yd(u.alternate,u);break;default:Nl(o,u)}s=s.sibling}}var Ml=8192;function oo(n){if(n.subtreeFlags&Ml)for(n=n.child;n!==null;)Ov(n),n=n.sibling}function Ov(n){switch(n.tag){case 26:oo(n),n.flags&Ml&&n.memoizedState!==null&&_A(Rr,n.memoizedState,n.memoizedProps);break;case 5:oo(n);break;case 3:case 4:var s=Rr;Rr=Yc(n.stateNode.containerInfo),oo(n),Rr=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=Ml,Ml=16777216,oo(n),Ml=s):oo(n));break;default:oo(n)}}function xv(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function kl(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];gn=u,Mv(u,n)}xv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Nv(n),n=n.sibling}function Nv(n){switch(n.tag){case 0:case 11:case 15:kl(n),n.flags&2048&&Xi(9,n,n.return);break;case 3:kl(n);break;case 12:kl(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Uc(n)):kl(n);break;default:kl(n)}}function Uc(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];gn=u,Mv(u,n)}xv(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Xi(8,s,s.return),Uc(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Uc(s));break;default:Uc(s)}n=n.sibling}}function Mv(n,s){for(;gn!==null;){var o=gn;switch(o.tag){case 0:case 11:case 15:Xi(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:ml(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,gn=u;else e:for(o=n;gn!==null;){u=gn;var d=u.sibling,m=u.return;if(Sv(u),u===o){gn=null;break e}if(d!==null){d.return=m,gn=d;break e}gn=m}}}var LR={getCacheForType:function(n){var s=xn(an),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o}},PR=typeof WeakMap=="function"?WeakMap:Map,Dt=0,Ut=null,ht=null,Tt=0,Ot=0,nr=null,es=!1,lo=!1,Wd=!1,Ci=0,Gt=0,ts=0,ca=0,Xd=0,pr=0,uo=0,Ll=null,Gn=null,Zd=!1,Jd=0,Vc=1/0,Bc=null,ns=null,bn=0,rs=null,co=null,ho=0,ep=0,tp=null,kv=null,Pl=0,np=null;function rr(){if((Dt&2)!==0&&Tt!==0)return Tt&-Tt;if(ge.T!==null){var n=Za;return n!==0?n:up()}return Lr()}function Lv(){pr===0&&(pr=(Tt&536870912)===0||At?ii():536870912);var n=dr.current;return n!==null&&(n.flags|=32),pr}function ir(n,s,o){(n===Ut&&(Ot===2||Ot===9)||n.cancelPendingCommit!==null)&&(fo(n,0),is(n,Tt,pr,!1)),Tr(n,o),((Dt&2)===0||n!==Ut)&&(n===Ut&&((Dt&2)===0&&(ca|=o),Gt===4&&is(n,Tt,pr,!1)),Wr(n))}function Pv(n,s,o){if((Dt&6)!==0)throw Error(i(327));var u=!o&&(s&124)===0&&(s&n.expiredLanes)===0||St(n,s),d=u?BR(n,s):sp(n,s,!0),m=u;do{if(d===0){lo&&!u&&is(n,s,0,!1);break}else{if(o=n.current.alternate,m&&!UR(o)){d=sp(n,s,!1),m=!1;continue}if(d===2){if(m=s,n.errorRecoveryDisabledLanes&m)var C=0;else C=n.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){s=C;e:{var k=n;d=Ll;var Y=k.current.memoizedState.isDehydrated;if(Y&&(fo(k,C).flags|=256),C=sp(k,C,!1),C!==2){if(Wd&&!Y){k.errorRecoveryDisabledLanes|=m,ca|=m,d=4;break e}m=Gn,Gn=d,m!==null&&(Gn===null?Gn=m:Gn.push.apply(Gn,m))}d=C}if(m=!1,d!==2)continue}}if(d===1){fo(n,0),is(n,s,0,!0);break}e:{switch(u=n,m=d,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:is(u,s,pr,!es);break e;case 2:Gn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(d=Jd+300-b(),10<d)){if(is(u,s,pr,!es),bt(u,0,!0)!==0)break e;u.timeoutHandle=h_(Uv.bind(null,u,o,Gn,Bc,Zd,s,pr,ca,uo,es,m,2,-0,0),d);break e}Uv(u,o,Gn,Bc,Zd,s,pr,ca,uo,es,m,0,-0,0)}}break}while(!0);Wr(n)}function Uv(n,s,o,u,d,m,C,k,Y,ce,Ee,Se,fe,pe){if(n.timeoutHandle=-1,Se=s.subtreeFlags,(Se&8192||(Se&16785408)===16785408)&&(zl={stylesheets:null,count:0,unsuspend:vA},Ov(s),Se=EA(),Se!==null)){n.cancelPendingCommit=Se(Hv.bind(null,n,s,m,o,u,d,C,k,Y,Ee,1,fe,pe)),is(n,m,C,!ce);return}Hv(n,s,m,o,u,d,C,k,Y)}function UR(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var d=o[u],m=d.getSnapshot;d=d.value;try{if(!Zn(m(),d))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function is(n,s,o,u){s&=~Xd,s&=~ca,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var d=s;0<d;){var m=31-w(d),C=1<<m;u[m]=-1,d&=~C}o!==0&&qn(n,o,s)}function jc(){return(Dt&6)===0?(Ul(0),!1):!0}function rp(){if(ht!==null){if(Ot===0)var n=ht.return;else n=ht,_i=ia=null,Ed(n),io=null,Cl=0,n=ht;for(;n!==null;)mv(n.alternate,n),n=n.return;ht=null}}function fo(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,tA(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),rp(),Ut=n,ht=o=mi(n.current,null),Tt=s,Ot=0,nr=null,es=!1,lo=St(n,s),Wd=!1,uo=pr=Xd=ca=ts=Gt=0,Gn=Ll=null,Zd=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var d=31-w(u),m=1<<d;s|=n[d],u&=~m}return Ci=s,lc(),o}function Vv(n,s){ot=null,ge.H=Cc,s===vl||s===yc?(s=t0(),Ot=3):s===Zy?(s=t0(),Ot=4):Ot=s===nv?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,nr=s,ht===null&&(Gt=1,Nc(n,ur(s,n.current)))}function Bv(){var n=ge.H;return ge.H=Cc,n===null?Cc:n}function jv(){var n=ge.A;return ge.A=LR,n}function ip(){Gt=4,es||(Tt&4194048)!==Tt&&dr.current!==null||(lo=!0),(ts&134217727)===0&&(ca&134217727)===0||Ut===null||is(Ut,Tt,pr,!1)}function sp(n,s,o){var u=Dt;Dt|=2;var d=Bv(),m=jv();(Ut!==n||Tt!==s)&&(Bc=null,fo(n,s)),s=!1;var C=Gt;e:do try{if(Ot!==0&&ht!==null){var k=ht,Y=nr;switch(Ot){case 8:rp(),C=6;break e;case 3:case 2:case 9:case 6:dr.current===null&&(s=!0);var ce=Ot;if(Ot=0,nr=null,po(n,k,Y,ce),o&&lo){C=0;break e}break;default:ce=Ot,Ot=0,nr=null,po(n,k,Y,ce)}}VR(),C=Gt;break}catch(Ee){Vv(n,Ee)}while(!0);return s&&n.shellSuspendCounter++,_i=ia=null,Dt=u,ge.H=d,ge.A=m,ht===null&&(Ut=null,Tt=0,lc()),C}function VR(){for(;ht!==null;)Fv(ht)}function BR(n,s){var o=Dt;Dt|=2;var u=Bv(),d=jv();Ut!==n||Tt!==s?(Bc=null,Vc=b()+500,fo(n,s)):lo=St(n,s);e:do try{if(Ot!==0&&ht!==null){s=ht;var m=nr;t:switch(Ot){case 1:Ot=0,nr=null,po(n,s,m,1);break;case 2:case 9:if(Jy(m)){Ot=0,nr=null,qv(s);break}s=function(){Ot!==2&&Ot!==9||Ut!==n||(Ot=7),Wr(n)},m.then(s,s);break e;case 3:Ot=7;break e;case 4:Ot=5;break e;case 7:Jy(m)?(Ot=0,nr=null,qv(s)):(Ot=0,nr=null,po(n,s,m,7));break;case 5:var C=null;switch(ht.tag){case 26:C=ht.memoizedState;case 5:case 27:var k=ht;if(!C||b_(C)){Ot=0,nr=null;var Y=k.sibling;if(Y!==null)ht=Y;else{var ce=k.return;ce!==null?(ht=ce,Fc(ce)):ht=null}break t}}Ot=0,nr=null,po(n,s,m,5);break;case 6:Ot=0,nr=null,po(n,s,m,6);break;case 8:rp(),Gt=6;break e;default:throw Error(i(462))}}jR();break}catch(Ee){Vv(n,Ee)}while(!0);return _i=ia=null,ge.H=u,ge.A=d,Dt=o,ht!==null?0:(Ut=null,Tt=0,lc(),Gt)}function jR(){for(;ht!==null&&!dt();)Fv(ht)}function Fv(n){var s=pv(n.alternate,n,Ci);n.memoizedProps=n.pendingProps,s===null?Fc(n):ht=s}function qv(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=lv(o,s,s.pendingProps,s.type,void 0,Tt);break;case 11:s=lv(o,s,s.pendingProps,s.type.render,s.ref,Tt);break;case 5:Ed(s);default:mv(o,s),s=ht=zy(s,Ci),s=pv(o,s,Ci)}n.memoizedProps=n.pendingProps,s===null?Fc(n):ht=s}function po(n,s,o,u){_i=ia=null,Ed(s),io=null,Cl=0;var d=s.return;try{if(DR(n,d,s,o,Tt)){Gt=1,Nc(n,ur(o,n.current)),ht=null;return}}catch(m){if(d!==null)throw ht=d,m;Gt=1,Nc(n,ur(o,n.current)),ht=null;return}s.flags&32768?(At||u===1?n=!0:lo||(Tt&536870912)!==0?n=!1:(es=n=!0,(u===2||u===9||u===3||u===6)&&(u=dr.current,u!==null&&u.tag===13&&(u.flags|=16384))),zv(s,n)):Fc(s)}function Fc(n){var s=n;do{if((s.flags&32768)!==0){zv(s,es);return}n=s.return;var o=xR(s.alternate,s,Ci);if(o!==null){ht=o;return}if(s=s.sibling,s!==null){ht=s;return}ht=s=n}while(s!==null);Gt===0&&(Gt=5)}function zv(n,s){do{var o=NR(n.alternate,n);if(o!==null){o.flags&=32767,ht=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){ht=n;return}ht=n=o}while(n!==null);Gt=6,ht=null}function Hv(n,s,o,u,d,m,C,k,Y){n.cancelPendingCommit=null;do qc();while(bn!==0);if((Dt&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=Yf,Ps(n,o,m,C,k,Y),n===Ut&&(ht=Ut=null,Tt=0),co=s,rs=n,ho=o,ep=m,tp=d,kv=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,HR(be,function(){return Yv(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=ge.T,ge.T=null,d=De.p,De.p=2,C=Dt,Dt|=4;try{MR(n,s,o)}finally{Dt=C,De.p=d,ge.T=u}}bn=1,Gv(),$v(),Kv()}}function Gv(){if(bn===1){bn=0;var n=rs,s=co,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=ge.T,ge.T=null;var u=De.p;De.p=2;var d=Dt;Dt|=4;try{Cv(s,n);var m=yp,C=My(n.containerInfo),k=m.focusedElem,Y=m.selectionRange;if(C!==k&&k&&k.ownerDocument&&Ny(k.ownerDocument.documentElement,k)){if(Y!==null&&Hf(k)){var ce=Y.start,Ee=Y.end;if(Ee===void 0&&(Ee=ce),"selectionStart"in k)k.selectionStart=ce,k.selectionEnd=Math.min(Ee,k.value.length);else{var Se=k.ownerDocument||document,fe=Se&&Se.defaultView||window;if(fe.getSelection){var pe=fe.getSelection(),Ye=k.textContent.length,Ge=Math.min(Y.start,Ye),kt=Y.end===void 0?Ge:Math.min(Y.end,Ye);!pe.extend&&Ge>kt&&(C=kt,kt=Ge,Ge=C);var ae=xy(k,Ge),ne=xy(k,kt);if(ae&&ne&&(pe.rangeCount!==1||pe.anchorNode!==ae.node||pe.anchorOffset!==ae.offset||pe.focusNode!==ne.node||pe.focusOffset!==ne.offset)){var ue=Se.createRange();ue.setStart(ae.node,ae.offset),pe.removeAllRanges(),Ge>kt?(pe.addRange(ue),pe.extend(ne.node,ne.offset)):(ue.setEnd(ne.node,ne.offset),pe.addRange(ue))}}}}for(Se=[],pe=k;pe=pe.parentNode;)pe.nodeType===1&&Se.push({element:pe,left:pe.scrollLeft,top:pe.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<Se.length;k++){var Te=Se[k];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}eh=!!mp,yp=mp=null}finally{Dt=d,De.p=u,ge.T=o}}n.current=s,bn=2}}function $v(){if(bn===2){bn=0;var n=rs,s=co,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=ge.T,ge.T=null;var u=De.p;De.p=2;var d=Dt;Dt|=4;try{bv(n,s.alternate,s)}finally{Dt=d,De.p=u,ge.T=o}}bn=3}}function Kv(){if(bn===4||bn===3){bn=0,L();var n=rs,s=co,o=ho,u=kv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?bn=5:(bn=0,co=rs=null,Qv(n,n.pendingLanes));var d=n.pendingLanes;if(d===0&&(ns=null),kr(o),s=s.stateNode,x&&typeof x.onCommitFiberRoot=="function")try{x.onCommitFiberRoot(He,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=ge.T,d=De.p,De.p=2,ge.T=null;try{for(var m=n.onRecoverableError,C=0;C<u.length;C++){var k=u[C];m(k.value,{componentStack:k.stack})}}finally{ge.T=s,De.p=d}}(ho&3)!==0&&qc(),Wr(n),d=n.pendingLanes,(o&4194090)!==0&&(d&42)!==0?n===np?Pl++:(Pl=0,np=n):Pl=0,Ul(0)}}function Qv(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,ml(s)))}function qc(n){return Gv(),$v(),Kv(),Yv()}function Yv(){if(bn!==5)return!1;var n=rs,s=ep;ep=0;var o=kr(ho),u=ge.T,d=De.p;try{De.p=32>o?32:o,ge.T=null,o=tp,tp=null;var m=rs,C=ho;if(bn=0,co=rs=null,ho=0,(Dt&6)!==0)throw Error(i(331));var k=Dt;if(Dt|=4,Nv(m.current),Dv(m,m.current,C,o),Dt=k,Ul(0,!1),x&&typeof x.onPostCommitFiberRoot=="function")try{x.onPostCommitFiberRoot(He,m)}catch{}return!0}finally{De.p=d,ge.T=u,Qv(n,s)}}function Wv(n,s,o){s=ur(o,s),s=kd(n.stateNode,s,2),n=Ki(n,s,2),n!==null&&(Tr(n,2),Wr(n))}function Lt(n,s,o){if(n.tag===3)Wv(n,n,o);else for(;s!==null;){if(s.tag===3){Wv(s,n,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ns===null||!ns.has(u))){n=ur(o,n),o=ev(2),u=Ki(s,o,2),u!==null&&(tv(o,u,s,n),Tr(u,2),Wr(u));break}}s=s.return}}function ap(n,s,o){var u=n.pingCache;if(u===null){u=n.pingCache=new PR;var d=new Set;u.set(s,d)}else d=u.get(s),d===void 0&&(d=new Set,u.set(s,d));d.has(o)||(Wd=!0,d.add(o),n=FR.bind(null,n,s,o),s.then(n,n))}function FR(n,s,o){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Ut===n&&(Tt&o)===o&&(Gt===4||Gt===3&&(Tt&62914560)===Tt&&300>b()-Jd?(Dt&2)===0&&fo(n,0):Xd|=o,uo===Tt&&(uo=0)),Wr(n)}function Xv(n,s){s===0&&(s=Ls()),n=Qa(n,s),n!==null&&(Tr(n,s),Wr(n))}function qR(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),Xv(n,o)}function zR(n,s){var o=0;switch(n.tag){case 13:var u=n.stateNode,d=n.memoizedState;d!==null&&(o=d.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),Xv(n,o)}function HR(n,s){return ve(n,s)}var zc=null,go=null,op=!1,Hc=!1,lp=!1,ha=0;function Wr(n){n!==go&&n.next===null&&(go===null?zc=go=n:go=go.next=n),Hc=!0,op||(op=!0,$R())}function Ul(n,s){if(!lp&&Hc){lp=!0;do for(var o=!1,u=zc;u!==null;){if(n!==0){var d=u.pendingLanes;if(d===0)var m=0;else{var C=u.suspendedLanes,k=u.pingedLanes;m=(1<<31-w(42|n)+1)-1,m&=d&~(C&~k),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,t_(u,m))}else m=Tt,m=bt(u,u===Ut?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||St(u,m)||(o=!0,t_(u,m));u=u.next}while(o);lp=!1}}function GR(){Zv()}function Zv(){Hc=op=!1;var n=0;ha!==0&&(eA()&&(n=ha),ha=0);for(var s=b(),o=null,u=zc;u!==null;){var d=u.next,m=Jv(u,s);m===0?(u.next=null,o===null?zc=d:o.next=d,d===null&&(go=o)):(o=u,(n!==0||(m&3)!==0)&&(Hc=!0)),u=d}Ul(n)}function Jv(n,s){for(var o=n.suspendedLanes,u=n.pingedLanes,d=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var C=31-w(m),k=1<<C,Y=d[C];Y===-1?((k&o)===0||(k&u)!==0)&&(d[C]=yt(k,s)):Y<=s&&(n.expiredLanes|=k),m&=~k}if(s=Ut,o=Tt,o=bt(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===s&&(Ot===2||Ot===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Oe(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||St(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(u!==null&&Oe(u),kr(o)){case 2:case 8:o=oe;break;case 32:o=be;break;case 268435456:o=qe;break;default:o=be}return u=e_.bind(null,n),o=ve(o,u),n.callbackPriority=s,n.callbackNode=o,s}return u!==null&&u!==null&&Oe(u),n.callbackPriority=2,n.callbackNode=null,2}function e_(n,s){if(bn!==0&&bn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(qc()&&n.callbackNode!==o)return null;var u=Tt;return u=bt(n,n===Ut?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Pv(n,u,s),Jv(n,b()),n.callbackNode!=null&&n.callbackNode===o?e_.bind(null,n):null)}function t_(n,s){if(qc())return null;Pv(n,s,!0)}function $R(){nA(function(){(Dt&6)!==0?ve($,GR):Zv()})}function up(){return ha===0&&(ha=ii()),ha}function n_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Pa(""+n)}function r_(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function KR(n,s,o,u,d){if(s==="submit"&&o&&o.stateNode===d){var m=n_((d[Je]||null).action),C=u.submitter;C&&(s=(s=C[Je]||null)?n_(s.formAction):C.getAttribute("formAction"),s!==null&&(m=s,C=null));var k=new Ua("action","action",null,u,d);n.push({event:k,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ha!==0){var Y=C?r_(d,C):new FormData(d);Dd(o,{pending:!0,data:Y,method:d.method,action:m},null,Y)}}else typeof m=="function"&&(k.preventDefault(),Y=C?r_(d,C):new FormData(d),Dd(o,{pending:!0,data:Y,method:d.method,action:m},m,Y))},currentTarget:d}]})}}for(var cp=0;cp<Qf.length;cp++){var hp=Qf[cp],QR=hp.toLowerCase(),YR=hp[0].toUpperCase()+hp.slice(1);Sr(QR,"on"+YR)}Sr(Py,"onAnimationEnd"),Sr(Uy,"onAnimationIteration"),Sr(Vy,"onAnimationStart"),Sr("dblclick","onDoubleClick"),Sr("focusin","onFocus"),Sr("focusout","onBlur"),Sr(fR,"onTransitionRun"),Sr(dR,"onTransitionStart"),Sr(pR,"onTransitionCancel"),Sr(By,"onTransitionEnd"),oi("onMouseEnter",["mouseout","mouseover"]),oi("onMouseLeave",["mouseout","mouseover"]),oi("onPointerEnter",["pointerout","pointerover"]),oi("onPointerLeave",["pointerout","pointerover"]),wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wr("onBeforeInput",["compositionend","keypress","textInput","paste"]),wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vl));function i_(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],d=u.event;u=u.listeners;e:{var m=void 0;if(s)for(var C=u.length-1;0<=C;C--){var k=u[C],Y=k.instance,ce=k.currentTarget;if(k=k.listener,Y!==m&&d.isPropagationStopped())break e;m=k,d.currentTarget=ce;try{m(d)}catch(Ee){xc(Ee)}d.currentTarget=null,m=Y}else for(C=0;C<u.length;C++){if(k=u[C],Y=k.instance,ce=k.currentTarget,k=k.listener,Y!==m&&d.isPropagationStopped())break e;m=k,d.currentTarget=ce;try{m(d)}catch(Ee){xc(Ee)}d.currentTarget=null,m=Y}}}}function ft(n,s){var o=s[hn];o===void 0&&(o=s[hn]=new Set);var u=n+"__bubble";o.has(u)||(s_(s,n,2,!1),o.add(u))}function fp(n,s,o){var u=0;s&&(u|=4),s_(o,n,u,s)}var Gc="_reactListening"+Math.random().toString(36).slice(2);function dp(n){if(!n[Gc]){n[Gc]=!0,Wo.forEach(function(o){o!=="selectionchange"&&(WR.has(o)||fp(o,!1,n),fp(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Gc]||(s[Gc]=!0,fp("selectionchange",!1,s))}}function s_(n,s,o,u){switch(D_(s)){case 2:var d=bA;break;case 8:d=SA;break;default:d=Cp}o=d.bind(null,s,o,n),d=void 0,!or||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),u?d!==void 0?n.addEventListener(s,o,{capture:!0,passive:d}):n.addEventListener(s,o,!0):d!==void 0?n.addEventListener(s,o,{passive:d}):n.addEventListener(s,o,!1)}function pp(n,s,o,u,d){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var C=u.tag;if(C===3||C===4){var k=u.stateNode.containerInfo;if(k===d)break;if(C===4)for(C=u.return;C!==null;){var Y=C.tag;if((Y===3||Y===4)&&C.stateNode.containerInfo===d)return;C=C.return}for(;k!==null;){if(C=ai(k),C===null)return;if(Y=C.tag,Y===5||Y===6||Y===26||Y===27){u=m=C;continue e}k=k.parentNode}}u=u.return}Ku(function(){var ce=m,Ee=ar(o),Se=[];e:{var fe=jy.get(n);if(fe!==void 0){var pe=Ua,Ye=n;switch(n){case"keypress":if(Fr(o)===0)break e;case"keydown":case"keyup":pe=za;break;case"focusin":Ye="focus",pe=ja;break;case"focusout":Ye="blur",pe=ja;break;case"beforeblur":case"afterblur":pe=ja;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=lr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=jf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=tc;break;case Py:case Uy:case Vy:pe=Fa;break;case By:pe=rc;break;case"scroll":case"scrollend":pe=Qu;break;case"wheel":pe=Ha;break;case"copy":case"cut":case"paste":pe=qa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=ll;break;case"toggle":case"beforetoggle":pe=sc}var Ge=(s&4)!==0,kt=!Ge&&(n==="scroll"||n==="scrollend"),ae=Ge?fe!==null?fe+"Capture":null:fe;Ge=[];for(var ne=ce,ue;ne!==null;){var Te=ne;if(ue=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||ue===null||ae===null||(Te=Hs(ne,ae),Te!=null&&Ge.push(Bl(ne,Te,ue))),kt)break;ne=ne.return}0<Ge.length&&(fe=new pe(fe,Ye,null,o,Ee),Se.push({event:fe,listeners:Ge}))}}if((s&7)===0){e:{if(fe=n==="mouseover"||n==="pointerover",pe=n==="mouseout"||n==="pointerout",fe&&o!==ci&&(Ye=o.relatedTarget||o.fromElement)&&(ai(Ye)||Ye[vt]))break e;if((pe||fe)&&(fe=Ee.window===Ee?Ee:(fe=Ee.ownerDocument)?fe.defaultView||fe.parentWindow:window,pe?(Ye=o.relatedTarget||o.toElement,pe=ce,Ye=Ye?ai(Ye):null,Ye!==null&&(kt=l(Ye),Ge=Ye.tag,Ye!==kt||Ge!==5&&Ge!==27&&Ge!==6)&&(Ye=null)):(pe=null,Ye=ce),pe!==Ye)){if(Ge=lr,Te="onMouseLeave",ae="onMouseEnter",ne="mouse",(n==="pointerout"||n==="pointerover")&&(Ge=ll,Te="onPointerLeave",ae="onPointerEnter",ne="pointer"),kt=pe==null?fe:Ur(pe),ue=Ye==null?fe:Ur(Ye),fe=new Ge(Te,ne+"leave",pe,o,Ee),fe.target=kt,fe.relatedTarget=ue,Te=null,ai(Ee)===ce&&(Ge=new Ge(ae,ne+"enter",Ye,o,Ee),Ge.target=ue,Ge.relatedTarget=kt,Te=Ge),kt=Te,pe&&Ye)t:{for(Ge=pe,ae=Ye,ne=0,ue=Ge;ue;ue=mo(ue))ne++;for(ue=0,Te=ae;Te;Te=mo(Te))ue++;for(;0<ne-ue;)Ge=mo(Ge),ne--;for(;0<ue-ne;)ae=mo(ae),ue--;for(;ne--;){if(Ge===ae||ae!==null&&Ge===ae.alternate)break t;Ge=mo(Ge),ae=mo(ae)}Ge=null}else Ge=null;pe!==null&&a_(Se,fe,pe,Ge,!1),Ye!==null&&kt!==null&&a_(Se,kt,Ye,Ge,!0)}}e:{if(fe=ce?Ur(ce):window,pe=fe.nodeName&&fe.nodeName.toLowerCase(),pe==="select"||pe==="input"&&fe.type==="file")var Pe=Ry;else if(sn(fe))if(Ay)Pe=uR;else{Pe=oR;var ut=aR}else pe=fe.nodeName,!pe||pe.toLowerCase()!=="input"||fe.type!=="checkbox"&&fe.type!=="radio"?ce&&tl(ce.elementType)&&(Pe=Ry):Pe=lR;if(Pe&&(Pe=Pe(n,ce))){gi(Se,Pe,o,Ee);break e}ut&&ut(n,fe,ce),n==="focusout"&&ce&&fe.type==="number"&&ce.memoizedProps.value!=null&&qi(fe,"number",fe.value)}switch(ut=ce?Ur(ce):window,n){case"focusin":(sn(ut)||ut.contentEditable==="true")&&(Ga=ut,Gf=ce,hl=null);break;case"focusout":hl=Gf=Ga=null;break;case"mousedown":$f=!0;break;case"contextmenu":case"mouseup":case"dragend":$f=!1,ky(Se,o,Ee);break;case"selectionchange":if(hR)break;case"keydown":case"keyup":ky(Se,o,Ee)}var Ve;if(Hr)e:{switch(n){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else _t?me(n,o)&&(Ke="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Ke="onCompositionStart");Ke&&(A&&o.locale!=="ko"&&(_t||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&_t&&(Ve=rl()):(jr=Ee,zi="value"in jr?jr.value:jr.textContent,_t=!0)),ut=$c(ce,Ke),0<ut.length&&(Ke=new al(Ke,n,null,o,Ee),Se.push({event:Ke,listeners:ut}),Ve?Ke.data=Ve:(Ve=xe(o),Ve!==null&&(Ke.data=Ve)))),(Ve=v?rn(n,o):Et(n,o))&&(Ke=$c(ce,"onBeforeInput"),0<Ke.length&&(ut=new al("onBeforeInput","beforeinput",null,o,Ee),Se.push({event:ut,listeners:Ke}),ut.data=Ve)),KR(Se,n,ce,o,Ee)}i_(Se,s)})}function Bl(n,s,o){return{instance:n,listener:s,currentTarget:o}}function $c(n,s){for(var o=s+"Capture",u=[];n!==null;){var d=n,m=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||m===null||(d=Hs(n,o),d!=null&&u.unshift(Bl(n,d,m)),d=Hs(n,s),d!=null&&u.push(Bl(n,d,m))),n.tag===3)return u;n=n.return}return[]}function mo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function a_(n,s,o,u,d){for(var m=s._reactName,C=[];o!==null&&o!==u;){var k=o,Y=k.alternate,ce=k.stateNode;if(k=k.tag,Y!==null&&Y===u)break;k!==5&&k!==26&&k!==27||ce===null||(Y=ce,d?(ce=Hs(o,m),ce!=null&&C.unshift(Bl(o,ce,Y))):d||(ce=Hs(o,m),ce!=null&&C.push(Bl(o,ce,Y)))),o=o.return}C.length!==0&&n.push({event:s,listeners:C})}var XR=/\r\n?/g,ZR=/\u0000|\uFFFD/g;function o_(n){return(typeof n=="string"?n:""+n).replace(XR,`
`).replace(ZR,"")}function l_(n,s){return s=o_(s),o_(n)===s}function Kc(){}function Mt(n,s,o,u,d,m){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||sr(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&sr(n,""+u);break;case"className":Vr(n,"class",u);break;case"tabIndex":Vr(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Vr(n,o,u);break;case"style":el(n,u,m);break;case"data":if(s!=="object"){Vr(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Pa(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(s!=="input"&&Mt(n,s,"name",d.name,d,null),Mt(n,s,"formEncType",d.formEncType,d,null),Mt(n,s,"formMethod",d.formMethod,d,null),Mt(n,s,"formTarget",d.formTarget,d,null)):(Mt(n,s,"encType",d.encType,d,null),Mt(n,s,"method",d.method,d,null),Mt(n,s,"target",d.target,d,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Pa(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=Kc);break;case"onScroll":u!=null&&ft("scroll",n);break;case"onScrollEnd":u!=null&&ft("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Pa(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":ft("beforetoggle",n),ft("toggle",n),Fi(n,"popover",u);break;case"xlinkActuate":En(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":En(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":En(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":En(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":En(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":En(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":En(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":En(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":En(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Fi(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Vf.get(o)||o,Fi(n,o,u))}}function gp(n,s,o,u,d,m){switch(o){case"style":el(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof u=="string"?sr(n,u):(typeof u=="number"||typeof u=="bigint")&&sr(n,""+u);break;case"onScroll":u!=null&&ft("scroll",n);break;case"onScrollEnd":u!=null&&ft("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Kc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xa.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),s=o.slice(2,d?o.length-7:void 0),m=n[Je]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(s,m,d),typeof u=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,u,d);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Fi(n,o,u)}}}function Sn(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ft("error",n),ft("load",n);var u=!1,d=!1,m;for(m in o)if(o.hasOwnProperty(m)){var C=o[m];if(C!=null)switch(m){case"src":u=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Mt(n,s,m,C,o,null)}}d&&Mt(n,s,"srcSet",o.srcSet,o,null),u&&Mt(n,s,"src",o.src,o,null);return;case"input":ft("invalid",n);var k=m=C=d=null,Y=null,ce=null;for(u in o)if(o.hasOwnProperty(u)){var Ee=o[u];if(Ee!=null)switch(u){case"name":d=Ee;break;case"type":C=Ee;break;case"checked":Y=Ee;break;case"defaultChecked":ce=Ee;break;case"value":m=Ee;break;case"defaultValue":k=Ee;break;case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(i(137,s));break;default:Mt(n,s,u,Ee,o,null)}}Fs(n,m,k,Y,ce,C,d,!1),La(n);return;case"select":ft("invalid",n),u=C=m=null;for(d in o)if(o.hasOwnProperty(d)&&(k=o[d],k!=null))switch(d){case"value":m=k;break;case"defaultValue":C=k;break;case"multiple":u=k;default:Mt(n,s,d,k,o,null)}s=m,o=C,n.multiple=!!u,s!=null?ui(n,!!u,s,!1):o!=null&&ui(n,!!u,o,!0);return;case"textarea":ft("invalid",n),m=d=u=null;for(C in o)if(o.hasOwnProperty(C)&&(k=o[C],k!=null))switch(C){case"value":u=k;break;case"defaultValue":d=k;break;case"children":m=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(i(91));break;default:Mt(n,s,C,k,o,null)}qs(n,u,d,m),La(n);return;case"option":for(Y in o)if(o.hasOwnProperty(Y)&&(u=o[Y],u!=null))switch(Y){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Mt(n,s,Y,u,o,null)}return;case"dialog":ft("beforetoggle",n),ft("toggle",n),ft("cancel",n),ft("close",n);break;case"iframe":case"object":ft("load",n);break;case"video":case"audio":for(u=0;u<Vl.length;u++)ft(Vl[u],n);break;case"image":ft("error",n),ft("load",n);break;case"details":ft("toggle",n);break;case"embed":case"source":case"link":ft("error",n),ft("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ce in o)if(o.hasOwnProperty(ce)&&(u=o[ce],u!=null))switch(ce){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Mt(n,s,ce,u,o,null)}return;default:if(tl(s)){for(Ee in o)o.hasOwnProperty(Ee)&&(u=o[Ee],u!==void 0&&gp(n,s,Ee,u,o,void 0));return}}for(k in o)o.hasOwnProperty(k)&&(u=o[k],u!=null&&Mt(n,s,k,u,o,null))}function JR(n,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,m=null,C=null,k=null,Y=null,ce=null,Ee=null;for(pe in o){var Se=o[pe];if(o.hasOwnProperty(pe)&&Se!=null)switch(pe){case"checked":break;case"value":break;case"defaultValue":Y=Se;default:u.hasOwnProperty(pe)||Mt(n,s,pe,null,u,Se)}}for(var fe in u){var pe=u[fe];if(Se=o[fe],u.hasOwnProperty(fe)&&(pe!=null||Se!=null))switch(fe){case"type":m=pe;break;case"name":d=pe;break;case"checked":ce=pe;break;case"defaultChecked":Ee=pe;break;case"value":C=pe;break;case"defaultValue":k=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(i(137,s));break;default:pe!==Se&&Mt(n,s,fe,pe,u,Se)}}Xn(n,C,k,Y,ce,Ee,m,d);return;case"select":pe=C=k=fe=null;for(m in o)if(Y=o[m],o.hasOwnProperty(m)&&Y!=null)switch(m){case"value":break;case"multiple":pe=Y;default:u.hasOwnProperty(m)||Mt(n,s,m,null,u,Y)}for(d in u)if(m=u[d],Y=o[d],u.hasOwnProperty(d)&&(m!=null||Y!=null))switch(d){case"value":fe=m;break;case"defaultValue":k=m;break;case"multiple":C=m;default:m!==Y&&Mt(n,s,d,m,u,Y)}s=k,o=C,u=pe,fe!=null?ui(n,!!o,fe,!1):!!u!=!!o&&(s!=null?ui(n,!!o,s,!0):ui(n,!!o,o?[]:"",!1));return;case"textarea":pe=fe=null;for(k in o)if(d=o[k],o.hasOwnProperty(k)&&d!=null&&!u.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:Mt(n,s,k,null,u,d)}for(C in u)if(d=u[C],m=o[C],u.hasOwnProperty(C)&&(d!=null||m!=null))switch(C){case"value":fe=d;break;case"defaultValue":pe=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==m&&Mt(n,s,C,d,u,m)}xt(n,fe,pe);return;case"option":for(var Ye in o)if(fe=o[Ye],o.hasOwnProperty(Ye)&&fe!=null&&!u.hasOwnProperty(Ye))switch(Ye){case"selected":n.selected=!1;break;default:Mt(n,s,Ye,null,u,fe)}for(Y in u)if(fe=u[Y],pe=o[Y],u.hasOwnProperty(Y)&&fe!==pe&&(fe!=null||pe!=null))switch(Y){case"selected":n.selected=fe&&typeof fe!="function"&&typeof fe!="symbol";break;default:Mt(n,s,Y,fe,u,pe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ge in o)fe=o[Ge],o.hasOwnProperty(Ge)&&fe!=null&&!u.hasOwnProperty(Ge)&&Mt(n,s,Ge,null,u,fe);for(ce in u)if(fe=u[ce],pe=o[ce],u.hasOwnProperty(ce)&&fe!==pe&&(fe!=null||pe!=null))switch(ce){case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(i(137,s));break;default:Mt(n,s,ce,fe,u,pe)}return;default:if(tl(s)){for(var kt in o)fe=o[kt],o.hasOwnProperty(kt)&&fe!==void 0&&!u.hasOwnProperty(kt)&&gp(n,s,kt,void 0,u,fe);for(Ee in u)fe=u[Ee],pe=o[Ee],!u.hasOwnProperty(Ee)||fe===pe||fe===void 0&&pe===void 0||gp(n,s,Ee,fe,u,pe);return}}for(var ae in o)fe=o[ae],o.hasOwnProperty(ae)&&fe!=null&&!u.hasOwnProperty(ae)&&Mt(n,s,ae,null,u,fe);for(Se in u)fe=u[Se],pe=o[Se],!u.hasOwnProperty(Se)||fe===pe||fe==null&&pe==null||Mt(n,s,Se,fe,u,pe)}var mp=null,yp=null;function Qc(n){return n.nodeType===9?n:n.ownerDocument}function u_(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function c_(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function vp(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var _p=null;function eA(){var n=window.event;return n&&n.type==="popstate"?n===_p?!1:(_p=n,!0):(_p=null,!1)}var h_=typeof setTimeout=="function"?setTimeout:void 0,tA=typeof clearTimeout=="function"?clearTimeout:void 0,f_=typeof Promise=="function"?Promise:void 0,nA=typeof queueMicrotask=="function"?queueMicrotask:typeof f_<"u"?function(n){return f_.resolve(null).then(n).catch(rA)}:h_;function rA(n){setTimeout(function(){throw n})}function ss(n){return n==="head"}function d_(n,s){var o=s,u=0,d=0;do{var m=o.nextSibling;if(n.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(0<u&&8>u){o=u;var C=n.ownerDocument;if(o&1&&jl(C.documentElement),o&2&&jl(C.body),o&4)for(o=C.head,jl(o),C=o.firstChild;C;){var k=C.nextSibling,Y=C.nodeName;C[si]||Y==="SCRIPT"||Y==="STYLE"||Y==="LINK"&&C.rel.toLowerCase()==="stylesheet"||o.removeChild(C),C=k}}if(d===0){n.removeChild(m),Ql(s);return}d--}else o==="$"||o==="$?"||o==="$!"?d++:u=o.charCodeAt(0)-48;else u=0;o=m}while(o);Ql(s)}function Ep(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Ep(o),ji(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function iA(n,s,o,u){for(;n.nodeType===1;){var d=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[si])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==d.rel||n.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||n.getAttribute("title")!==(d.title==null?null:d.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(d.src==null?null:d.src)||n.getAttribute("type")!==(d.type==null?null:d.type)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var m=d.name==null?null:""+d.name;if(d.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Ar(n.nextSibling),n===null)break}return null}function sA(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Ar(n.nextSibling),n===null))return null;return n}function Tp(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function aA(n,s){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Ar(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}var wp=null;function p_(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return n;s--}else o==="/$"&&s++}n=n.previousSibling}return null}function g_(n,s,o){switch(s=Qc(o),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function jl(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);ji(n)}var gr=new Map,m_=new Set;function Yc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ii=De.d;De.d={f:oA,r:lA,D:uA,C:cA,L:hA,m:fA,X:pA,S:dA,M:gA};function oA(){var n=Ii.f(),s=jc();return n||s}function lA(n){var s=Pr(n);s!==null&&s.tag===5&&s.type==="form"?P0(s):Ii.r(n)}var yo=typeof document>"u"?null:document;function y_(n,s,o){var u=yo;if(u&&typeof s=="string"&&s){var d=Zt(s);d='link[rel="'+n+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),m_.has(d)||(m_.add(d),n={rel:n,crossOrigin:o,href:s},u.querySelector(d)===null&&(s=u.createElement("link"),Sn(s,"link",n),Qt(s),u.head.appendChild(s)))}}function uA(n){Ii.D(n),y_("dns-prefetch",n,null)}function cA(n,s){Ii.C(n,s),y_("preconnect",n,s)}function hA(n,s,o){Ii.L(n,s,o);var u=yo;if(u&&n&&s){var d='link[rel="preload"][as="'+Zt(s)+'"]';s==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+Zt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+Zt(o.imageSizes)+'"]')):d+='[href="'+Zt(n)+'"]';var m=d;switch(s){case"style":m=vo(n);break;case"script":m=_o(n)}gr.has(m)||(n=y({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),gr.set(m,n),u.querySelector(d)!==null||s==="style"&&u.querySelector(Fl(m))||s==="script"&&u.querySelector(ql(m))||(s=u.createElement("link"),Sn(s,"link",n),Qt(s),u.head.appendChild(s)))}}function fA(n,s){Ii.m(n,s);var o=yo;if(o&&n){var u=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+Zt(u)+'"][href="'+Zt(n)+'"]',m=d;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=_o(n)}if(!gr.has(m)&&(n=y({rel:"modulepreload",href:n},s),gr.set(m,n),o.querySelector(d)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(ql(m)))return}u=o.createElement("link"),Sn(u,"link",n),Qt(u),o.head.appendChild(u)}}}function dA(n,s,o){Ii.S(n,s,o);var u=yo;if(u&&n){var d=Vn(u).hoistableStyles,m=vo(n);s=s||"default";var C=d.get(m);if(!C){var k={loading:0,preload:null};if(C=u.querySelector(Fl(m)))k.loading=5;else{n=y({rel:"stylesheet",href:n,"data-precedence":s},o),(o=gr.get(m))&&bp(n,o);var Y=C=u.createElement("link");Qt(Y),Sn(Y,"link",n),Y._p=new Promise(function(ce,Ee){Y.onload=ce,Y.onerror=Ee}),Y.addEventListener("load",function(){k.loading|=1}),Y.addEventListener("error",function(){k.loading|=2}),k.loading|=4,Wc(C,s,u)}C={type:"stylesheet",instance:C,count:1,state:k},d.set(m,C)}}}function pA(n,s){Ii.X(n,s);var o=yo;if(o&&n){var u=Vn(o).hoistableScripts,d=_o(n),m=u.get(d);m||(m=o.querySelector(ql(d)),m||(n=y({src:n,async:!0},s),(s=gr.get(d))&&Sp(n,s),m=o.createElement("script"),Qt(m),Sn(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(d,m))}}function gA(n,s){Ii.M(n,s);var o=yo;if(o&&n){var u=Vn(o).hoistableScripts,d=_o(n),m=u.get(d);m||(m=o.querySelector(ql(d)),m||(n=y({src:n,async:!0,type:"module"},s),(s=gr.get(d))&&Sp(n,s),m=o.createElement("script"),Qt(m),Sn(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(d,m))}}function v_(n,s,o,u){var d=(d=re.current)?Yc(d):null;if(!d)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=vo(o.href),o=Vn(d).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=vo(o.href);var m=Vn(d).hoistableStyles,C=m.get(n);if(C||(d=d.ownerDocument||d,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,C),(m=d.querySelector(Fl(n)))&&!m._p&&(C.instance=m,C.state.loading=5),gr.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},gr.set(n,o),m||mA(d,n,o,C.state))),s&&u===null)throw Error(i(528,""));return C}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=_o(o),o=Vn(d).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function vo(n){return'href="'+Zt(n)+'"'}function Fl(n){return'link[rel="stylesheet"]['+n+"]"}function __(n){return y({},n,{"data-precedence":n.precedence,precedence:null})}function mA(n,s,o,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Sn(s,"link",o),Qt(s),n.head.appendChild(s))}function _o(n){return'[src="'+Zt(n)+'"]'}function ql(n){return"script[async]"+n}function E_(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+Zt(o.href)+'"]');if(u)return s.instance=u,Qt(u),u;var d=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Qt(u),Sn(u,"style",d),Wc(u,o.precedence,n),s.instance=u;case"stylesheet":d=vo(o.href);var m=n.querySelector(Fl(d));if(m)return s.state.loading|=4,s.instance=m,Qt(m),m;u=__(o),(d=gr.get(d))&&bp(u,d),m=(n.ownerDocument||n).createElement("link"),Qt(m);var C=m;return C._p=new Promise(function(k,Y){C.onload=k,C.onerror=Y}),Sn(m,"link",u),s.state.loading|=4,Wc(m,o.precedence,n),s.instance=m;case"script":return m=_o(o.src),(d=n.querySelector(ql(m)))?(s.instance=d,Qt(d),d):(u=o,(d=gr.get(m))&&(u=y({},o),Sp(u,d)),n=n.ownerDocument||n,d=n.createElement("script"),Qt(d),Sn(d,"link",u),n.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Wc(u,o.precedence,n));return s.instance}function Wc(n,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=u.length?u[u.length-1]:null,m=d,C=0;C<u.length;C++){var k=u[C];if(k.dataset.precedence===s)m=k;else if(m!==d)break}m?m.parentNode.insertBefore(n,m.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function bp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Sp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Xc=null;function T_(n,s,o){if(Xc===null){var u=new Map,d=Xc=new Map;d.set(o,u)}else d=Xc,u=d.get(o),u||(u=new Map,d.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),d=0;d<o.length;d++){var m=o[d];if(!(m[si]||m[$t]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var C=m.getAttribute(s)||"";C=n+C;var k=u.get(C);k?k.push(m):u.set(C,[m])}}return u}function w_(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function yA(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function b_(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var zl=null;function vA(){}function _A(n,s,o){if(zl===null)throw Error(i(475));var u=zl;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var d=vo(o.href),m=n.querySelector(Fl(d));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=Zc.bind(u),n.then(u,u)),s.state.loading|=4,s.instance=m,Qt(m);return}m=n.ownerDocument||n,o=__(o),(d=gr.get(d))&&bp(o,d),m=m.createElement("link"),Qt(m);var C=m;C._p=new Promise(function(k,Y){C.onload=k,C.onerror=Y}),Sn(m,"link",o),s.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=Zc.bind(u),n.addEventListener("load",s),n.addEventListener("error",s))}}function EA(){if(zl===null)throw Error(i(475));var n=zl;return n.stylesheets&&n.count===0&&Rp(n,n.stylesheets),0<n.count?function(s){var o=setTimeout(function(){if(n.stylesheets&&Rp(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(o)}}:null}function Zc(){if(this.count--,this.count===0){if(this.stylesheets)Rp(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Jc=null;function Rp(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Jc=new Map,s.forEach(TA,n),Jc=null,Zc.call(n))}function TA(n,s){if(!(s.state.loading&4)){var o=Jc.get(n);if(o)var u=o.get(null);else{o=new Map,Jc.set(n,o);for(var d=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<d.length;m++){var C=d[m];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(o.set(C.dataset.precedence,C),u=C)}u&&o.set(null,u)}d=s.instance,C=d.getAttribute("data-precedence"),m=o.get(C)||u,m===u&&o.set(null,d),o.set(C,d),this.count++,u=Zc.bind(this),d.addEventListener("load",u),d.addEventListener("error",u),m?m.parentNode.insertBefore(d,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(d,n.firstChild)),s.state.loading|=4}}var Hl={$$typeof:j,Provider:null,Consumer:null,_currentValue:Me,_currentValue2:Me,_threadCount:0};function wA(n,s,o,u,d,m,C,k){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Er(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Er(0),this.hiddenUpdates=Er(null),this.identifierPrefix=u,this.onUncaughtError=d,this.onCaughtError=m,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function S_(n,s,o,u,d,m,C,k,Y,ce,Ee,Se){return n=new wA(n,s,o,C,k,Y,ce,Se),s=1,m===!0&&(s|=24),m=Jn(3,null,null,s),n.current=m,m.stateNode=n,s=ad(),s.refCount++,n.pooledCache=s,s.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:s},cd(m),n}function R_(n){return n?(n=Ya,n):Ya}function A_(n,s,o,u,d,m){d=R_(d),u.context===null?u.context=d:u.pendingContext=d,u=$i(s),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=Ki(n,u,s),o!==null&&(ir(o,n,s),El(o,n,s))}function C_(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function Ap(n,s){C_(n,s),(n=n.alternate)&&C_(n,s)}function I_(n){if(n.tag===13){var s=Qa(n,67108864);s!==null&&ir(s,n,67108864),Ap(n,67108864)}}var eh=!0;function bA(n,s,o,u){var d=ge.T;ge.T=null;var m=De.p;try{De.p=2,Cp(n,s,o,u)}finally{De.p=m,ge.T=d}}function SA(n,s,o,u){var d=ge.T;ge.T=null;var m=De.p;try{De.p=8,Cp(n,s,o,u)}finally{De.p=m,ge.T=d}}function Cp(n,s,o,u){if(eh){var d=Ip(u);if(d===null)pp(n,s,u,th,o),O_(n,u);else if(AA(d,n,s,o,u))u.stopPropagation();else if(O_(n,u),s&4&&-1<RA.indexOf(n)){for(;d!==null;){var m=Pr(d);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var C=pt(m.pendingLanes);if(C!==0){var k=m;for(k.pendingLanes|=2,k.entangledLanes|=2;C;){var Y=1<<31-w(C);k.entanglements[1]|=Y,C&=~Y}Wr(m),(Dt&6)===0&&(Vc=b()+500,Ul(0))}}break;case 13:k=Qa(m,2),k!==null&&ir(k,m,2),jc(),Ap(m,2)}if(m=Ip(u),m===null&&pp(n,s,u,th,o),m===d)break;d=m}d!==null&&u.stopPropagation()}else pp(n,s,u,null,o)}}function Ip(n){return n=ar(n),Dp(n)}var th=null;function Dp(n){if(th=null,n=ai(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=c(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return th=n,null}function D_(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(R()){case $:return 2;case oe:return 8;case be:case Ae:return 32;case qe:return 268435456;default:return 32}default:return 32}}var Op=!1,as=null,os=null,ls=null,Gl=new Map,$l=new Map,us=[],RA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function O_(n,s){switch(n){case"focusin":case"focusout":as=null;break;case"dragenter":case"dragleave":os=null;break;case"mouseover":case"mouseout":ls=null;break;case"pointerover":case"pointerout":Gl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":$l.delete(s.pointerId)}}function Kl(n,s,o,u,d,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[d]},s!==null&&(s=Pr(s),s!==null&&I_(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function AA(n,s,o,u,d){switch(s){case"focusin":return as=Kl(as,n,s,o,u,d),!0;case"dragenter":return os=Kl(os,n,s,o,u,d),!0;case"mouseover":return ls=Kl(ls,n,s,o,u,d),!0;case"pointerover":var m=d.pointerId;return Gl.set(m,Kl(Gl.get(m)||null,n,s,o,u,d)),!0;case"gotpointercapture":return m=d.pointerId,$l.set(m,Kl($l.get(m)||null,n,s,o,u,d)),!0}return!1}function x_(n){var s=ai(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){n.blockedOn=s,Oa(n.priority,function(){if(o.tag===13){var u=rr();u=Wn(u);var d=Qa(o,u);d!==null&&ir(d,o,u),Ap(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function nh(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=Ip(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);ci=u,o.target.dispatchEvent(u),ci=null}else return s=Pr(o),s!==null&&I_(s),n.blockedOn=o,!1;s.shift()}return!0}function N_(n,s,o){nh(n)&&o.delete(s)}function CA(){Op=!1,as!==null&&nh(as)&&(as=null),os!==null&&nh(os)&&(os=null),ls!==null&&nh(ls)&&(ls=null),Gl.forEach(N_),$l.forEach(N_)}function rh(n,s){n.blockedOn===s&&(n.blockedOn=null,Op||(Op=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,CA)))}var ih=null;function M_(n){ih!==n&&(ih=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){ih===n&&(ih=null);for(var s=0;s<n.length;s+=3){var o=n[s],u=n[s+1],d=n[s+2];if(typeof u!="function"){if(Dp(u||o)===null)continue;break}var m=Pr(o);m!==null&&(n.splice(s,3),s-=3,Dd(m,{pending:!0,data:d,method:o.method,action:u},u,d))}}))}function Ql(n){function s(Y){return rh(Y,n)}as!==null&&rh(as,n),os!==null&&rh(os,n),ls!==null&&rh(ls,n),Gl.forEach(s),$l.forEach(s);for(var o=0;o<us.length;o++){var u=us[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<us.length&&(o=us[0],o.blockedOn===null);)x_(o),o.blockedOn===null&&us.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var d=o[u],m=o[u+1],C=d[Je]||null;if(typeof m=="function")C||M_(o);else if(C){var k=null;if(m&&m.hasAttribute("formAction")){if(d=m,C=m[Je]||null)k=C.formAction;else if(Dp(d)!==null)continue}else k=C.action;typeof k=="function"?o[u+1]=k:(o.splice(u,3),u-=3),M_(o)}}}function xp(n){this._internalRoot=n}sh.prototype.render=xp.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=rr();A_(o,u,n,s,null,null)},sh.prototype.unmount=xp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;A_(n.current,2,null,n,null,null),jc(),s[vt]=null}};function sh(n){this._internalRoot=n}sh.prototype.unstable_scheduleHydration=function(n){if(n){var s=Lr();n={blockedOn:null,target:n,priority:s};for(var o=0;o<us.length&&s!==0&&s<us[o].priority;o++);us.splice(o,0,n),o===0&&x_(n)}};var k_=e.version;if(k_!=="19.1.0")throw Error(i(527,k_,"19.1.0"));De.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=p(s),n=n!==null?g(n):null,n=n===null?null:n.stateNode,n};var IA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ge,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ah=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ah.isDisabled&&ah.supportsFiber)try{He=ah.inject(IA),x=ah}catch{}}return Wl.createRoot=function(n,s){if(!a(n))throw Error(i(299));var o=!1,u="",d=W0,m=X0,C=Z0,k=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(C=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(k=s.unstable_transitionCallbacks)),s=S_(n,1,!1,null,null,o,u,d,m,C,k,null),n[vt]=s.current,dp(n),new xp(s)},Wl.hydrateRoot=function(n,s,o){if(!a(n))throw Error(i(299));var u=!1,d="",m=W0,C=X0,k=Z0,Y=null,ce=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(C=o.onCaughtError),o.onRecoverableError!==void 0&&(k=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(Y=o.unstable_transitionCallbacks),o.formState!==void 0&&(ce=o.formState)),s=S_(n,1,!0,s,o??null,u,d,m,C,k,Y,ce),s.context=R_(null),o=s.current,u=rr(),u=Wn(u),d=$i(u),d.callback=null,Ki(o,d,u),o=u,s.current.lanes=o,Tr(s,o),Wr(s),n[vt]=s.current,dp(n),new sh(s)},Wl.version="19.1.0",Wl}var G_;function GA(){if(G_)return Lp.exports;G_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Lp.exports=HA(),Lp.exports}var $A=GA();const KA=lf($A);var Xl={},$_;function QA(){if($_)return Xl;$_=1,Object.defineProperty(Xl,"__esModule",{value:!0}),Xl.parse=c,Xl.serialize=g;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,l=(()=>{const T=function(){};return T.prototype=Object.create(null),T})();function c(T,D){const E=new l,I=T.length;if(I<2)return E;const N=(D==null?void 0:D.decode)||y;let O=0;do{const B=T.indexOf("=",O);if(B===-1)break;const j=T.indexOf(";",O),G=j===-1?I:j;if(B>G){O=T.lastIndexOf(";",B-1)+1;continue}const q=h(T,O,B),X=p(T,B,q),V=T.slice(q,X);if(E[V]===void 0){let M=h(T,B+1,G),P=p(T,G,M);const K=N(T.slice(M,P));E[V]=K}O=G+1}while(O<I);return E}function h(T,D,E){do{const I=T.charCodeAt(D);if(I!==32&&I!==9)return D}while(++D<E);return E}function p(T,D,E){for(;D>E;){const I=T.charCodeAt(--D);if(I!==32&&I!==9)return D+1}return E}function g(T,D,E){const I=(E==null?void 0:E.encode)||encodeURIComponent;if(!r.test(T))throw new TypeError(`argument name is invalid: ${T}`);const N=I(D);if(!e.test(N))throw new TypeError(`argument val is invalid: ${D}`);let O=T+"="+N;if(!E)return O;if(E.maxAge!==void 0){if(!Number.isInteger(E.maxAge))throw new TypeError(`option maxAge is invalid: ${E.maxAge}`);O+="; Max-Age="+E.maxAge}if(E.domain){if(!t.test(E.domain))throw new TypeError(`option domain is invalid: ${E.domain}`);O+="; Domain="+E.domain}if(E.path){if(!i.test(E.path))throw new TypeError(`option path is invalid: ${E.path}`);O+="; Path="+E.path}if(E.expires){if(!S(E.expires)||!Number.isFinite(E.expires.valueOf()))throw new TypeError(`option expires is invalid: ${E.expires}`);O+="; Expires="+E.expires.toUTCString()}if(E.httpOnly&&(O+="; HttpOnly"),E.secure&&(O+="; Secure"),E.partitioned&&(O+="; Partitioned"),E.priority)switch(typeof E.priority=="string"?E.priority.toLowerCase():void 0){case"low":O+="; Priority=Low";break;case"medium":O+="; Priority=Medium";break;case"high":O+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${E.priority}`)}if(E.sameSite)switch(typeof E.sameSite=="string"?E.sameSite.toLowerCase():E.sameSite){case!0:case"strict":O+="; SameSite=Strict";break;case"lax":O+="; SameSite=Lax";break;case"none":O+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${E.sameSite}`)}return O}function y(T){if(T.indexOf("%")===-1)return T;try{return decodeURIComponent(T)}catch{return T}}function S(T){return a.call(T)==="[object Date]"}return Xl}QA();var K_="popstate";function YA(r={}){function e(i,a){let{pathname:l,search:c,hash:h}=i.location;return Mg("",{pathname:l,search:c,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){return typeof a=="string"?a:gu(a)}return XA(e,t,null,r)}function jt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Or(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function WA(){return Math.random().toString(36).substring(2,10)}function Q_(r,e){return{usr:r.state,key:r.key,idx:e}}function Mg(r,e,t=null,i){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Bo(e):e,state:t,key:e&&e.key||i||WA()}}function gu({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Bo(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substring(i),r=r.substring(0,i)),r&&(e.pathname=r)}return e}function XA(r,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,c=a.history,h="POP",p=null,g=y();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function y(){return(c.state||{idx:null}).idx}function S(){h="POP";let N=y(),O=N==null?null:N-g;g=N,p&&p({action:h,location:I.location,delta:O})}function T(N,O){h="PUSH";let B=Mg(I.location,N,O);g=y()+1;let j=Q_(B,g),G=I.createHref(B);try{c.pushState(j,"",G)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;a.location.assign(G)}l&&p&&p({action:h,location:I.location,delta:1})}function D(N,O){h="REPLACE";let B=Mg(I.location,N,O);g=y();let j=Q_(B,g),G=I.createHref(B);c.replaceState(j,"",G),l&&p&&p({action:h,location:I.location,delta:0})}function E(N){return ZA(N)}let I={get action(){return h},get location(){return r(a,c)},listen(N){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(K_,S),p=N,()=>{a.removeEventListener(K_,S),p=null}},createHref(N){return e(a,N)},createURL:E,encodeLocation(N){let O=E(N);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:T,replace:D,go(N){return c.go(N)}};return I}function ZA(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),jt(t,"No window.location.(origin|href) available to create URL");let i=typeof r=="string"?r:gu(r);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function kT(r,e,t="/"){return JA(r,e,t,!1)}function JA(r,e,t,i){let a=typeof e=="string"?Bo(e):e,l=Ni(a.pathname||"/",t);if(l==null)return null;let c=LT(r);eC(c);let h=null;for(let p=0;h==null&&p<c.length;++p){let g=hC(l);h=uC(c[p],g,i)}return h}function LT(r,e=[],t=[],i=""){let a=(l,c,h)=>{let p={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};p.relativePath.startsWith("/")&&(jt(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length));let g=xi([i,p.relativePath]),y=t.concat(p);l.children&&l.children.length>0&&(jt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),LT(l.children,e,y,g)),!(l.path==null&&!l.index)&&e.push({path:g,score:oC(g,l.index),routesMeta:y})};return r.forEach((l,c)=>{var h;if(l.path===""||!((h=l.path)!=null&&h.includes("?")))a(l,c);else for(let p of PT(l.path))a(l,c,p)}),e}function PT(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let c=PT(i.join("/")),h=[];return h.push(...c.map(p=>p===""?l:[l,p].join("/"))),a&&h.push(...c),h.map(p=>r.startsWith("/")&&p===""?"/":p)}function eC(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:lC(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var tC=/^:[\w-]+$/,nC=3,rC=2,iC=1,sC=10,aC=-2,Y_=r=>r==="*";function oC(r,e){let t=r.split("/"),i=t.length;return t.some(Y_)&&(i+=aC),e&&(i+=rC),t.filter(a=>!Y_(a)).reduce((a,l)=>a+(tC.test(l)?nC:l===""?iC:sC),i)}function lC(r,e){return r.length===e.length&&r.slice(0,-1).every((i,a)=>i===e[a])?r[r.length-1]-e[e.length-1]:0}function uC(r,e,t=!1){let{routesMeta:i}=r,a={},l="/",c=[];for(let h=0;h<i.length;++h){let p=i[h],g=h===i.length-1,y=l==="/"?e:e.slice(l.length)||"/",S=Fh({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},y),T=p.route;if(!S&&g&&t&&!i[i.length-1].route.index&&(S=Fh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},y)),!S)return null;Object.assign(a,S.params),c.push({params:a,pathname:xi([l,S.pathname]),pathnameBase:gC(xi([l,S.pathnameBase])),route:T}),S.pathnameBase!=="/"&&(l=xi([l,S.pathnameBase]))}return c}function Fh(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=cC(r.path,r.caseSensitive,r.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:i.reduce((g,{paramName:y,isOptional:S},T)=>{if(y==="*"){let E=h[T]||"";c=l.slice(0,l.length-E.length).replace(/(.)\/+$/,"$1")}const D=h[T];return S&&!D?g[y]=void 0:g[y]=(D||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:r}}function cC(r,e=!1,t=!0){Or(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let i=[],a="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,p)=>(i.push({paramName:h,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(i.push({paramName:"*"}),a+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":r!==""&&r!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function hC(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Or(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Ni(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}function fC(r,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof r=="string"?Bo(r):r;return{pathname:t?t.startsWith("/")?t:dC(t,e):e,search:mC(i),hash:yC(a)}}function dC(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Bp(r,e,t,i){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function pC(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function mm(r){let e=pC(r);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function ym(r,e,t,i=!1){let a;typeof r=="string"?a=Bo(r):(a={...r},jt(!a.pathname||!a.pathname.includes("?"),Bp("?","pathname","search",a)),jt(!a.pathname||!a.pathname.includes("#"),Bp("#","pathname","hash",a)),jt(!a.search||!a.search.includes("#"),Bp("#","search","hash",a)));let l=r===""||a.pathname==="",c=l?"/":a.pathname,h;if(c==null)h=t;else{let S=e.length-1;if(!i&&c.startsWith("..")){let T=c.split("/");for(;T[0]==="..";)T.shift(),S-=1;a.pathname=T.join("/")}h=S>=0?e[S]:"/"}let p=fC(a,h),g=c&&c!=="/"&&c.endsWith("/"),y=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||y)&&(p.pathname+="/"),p}var xi=r=>r.join("/").replace(/\/\/+/g,"/"),gC=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),mC=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,yC=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function vC(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var UT=["POST","PUT","PATCH","DELETE"];new Set(UT);var _C=["GET",...UT];new Set(_C);var jo=W.createContext(null);jo.displayName="DataRouter";var uf=W.createContext(null);uf.displayName="DataRouterState";var VT=W.createContext({isTransitioning:!1});VT.displayName="ViewTransition";var EC=W.createContext(new Map);EC.displayName="Fetchers";var TC=W.createContext(null);TC.displayName="Await";var Nr=W.createContext(null);Nr.displayName="Navigation";var Du=W.createContext(null);Du.displayName="Location";var Mr=W.createContext({outlet:null,matches:[],isDataRoute:!1});Mr.displayName="Route";var vm=W.createContext(null);vm.displayName="RouteError";function wC(r,{relative:e}={}){jt(Fo(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=W.useContext(Nr),{hash:a,pathname:l,search:c}=Ou(r,{relative:e}),h=l;return t!=="/"&&(h=l==="/"?t:xi([t,l])),i.createHref({pathname:h,search:c,hash:a})}function Fo(){return W.useContext(Du)!=null}function ks(){return jt(Fo(),"useLocation() may be used only in the context of a <Router> component."),W.useContext(Du).location}var BT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function jT(r){W.useContext(Nr).static||W.useLayoutEffect(r)}function _m(){let{isDataRoute:r}=W.useContext(Mr);return r?PC():bC()}function bC(){jt(Fo(),"useNavigate() may be used only in the context of a <Router> component.");let r=W.useContext(jo),{basename:e,navigator:t}=W.useContext(Nr),{matches:i}=W.useContext(Mr),{pathname:a}=ks(),l=JSON.stringify(mm(i)),c=W.useRef(!1);return jT(()=>{c.current=!0}),W.useCallback((p,g={})=>{if(Or(c.current,BT),!c.current)return;if(typeof p=="number"){t.go(p);return}let y=ym(p,JSON.parse(l),a,g.relative==="path");r==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:xi([e,y.pathname])),(g.replace?t.replace:t.push)(y,g.state,g)},[e,t,l,a,r])}W.createContext(null);function SC(){let{matches:r}=W.useContext(Mr),e=r[r.length-1];return e?e.params:{}}function Ou(r,{relative:e}={}){let{matches:t}=W.useContext(Mr),{pathname:i}=ks(),a=JSON.stringify(mm(t));return W.useMemo(()=>ym(r,JSON.parse(a),i,e==="path"),[r,a,i,e])}function RC(r,e){return FT(r,e)}function FT(r,e,t,i){var B;jt(Fo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:l}=W.useContext(Nr),{matches:c}=W.useContext(Mr),h=c[c.length-1],p=h?h.params:{},g=h?h.pathname:"/",y=h?h.pathnameBase:"/",S=h&&h.route;{let j=S&&S.path||"";qT(g,!S||j.endsWith("*")||j.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${j}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${j}"> to <Route path="${j==="/"?"*":`${j}/*`}">.`)}let T=ks(),D;if(e){let j=typeof e=="string"?Bo(e):e;jt(y==="/"||((B=j.pathname)==null?void 0:B.startsWith(y)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${j.pathname}" was given in the \`location\` prop.`),D=j}else D=T;let E=D.pathname||"/",I=E;if(y!=="/"){let j=y.replace(/^\//,"").split("/");I="/"+E.replace(/^\//,"").split("/").slice(j.length).join("/")}let N=!l&&t&&t.matches&&t.matches.length>0?t.matches:kT(r,{pathname:I});Or(S||N!=null,`No routes matched location "${D.pathname}${D.search}${D.hash}" `),Or(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${D.pathname}${D.search}${D.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let O=OC(N&&N.map(j=>Object.assign({},j,{params:Object.assign({},p,j.params),pathname:xi([y,a.encodeLocation?a.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?y:xi([y,a.encodeLocation?a.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),c,t,i);return e&&O?W.createElement(Du.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...D},navigationType:"POP"}},O):O}function AC(){let r=LC(),e=vC(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",r),c=W.createElement(W.Fragment,null,W.createElement("p",null," Hey developer "),W.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",W.createElement("code",{style:l},"ErrorBoundary")," or"," ",W.createElement("code",{style:l},"errorElement")," prop on your route.")),W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},e),t?W.createElement("pre",{style:a},t):null,c)}var CC=W.createElement(AC,null),IC=class extends W.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?W.createElement(Mr.Provider,{value:this.props.routeContext},W.createElement(vm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function DC({routeContext:r,match:e,children:t}){let i=W.useContext(jo);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),W.createElement(Mr.Provider,{value:r},t)}function OC(r,e=[],t=null,i=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let a=r,l=t==null?void 0:t.errors;if(l!=null){let p=a.findIndex(g=>g.route.id&&(l==null?void 0:l[g.route.id])!==void 0);jt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,p+1))}let c=!1,h=-1;if(t)for(let p=0;p<a.length;p++){let g=a[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=p),g.route.id){let{loaderData:y,errors:S}=t,T=g.route.loader&&!y.hasOwnProperty(g.route.id)&&(!S||S[g.route.id]===void 0);if(g.route.lazy||T){c=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((p,g,y)=>{let S,T=!1,D=null,E=null;t&&(S=l&&g.route.id?l[g.route.id]:void 0,D=g.route.errorElement||CC,c&&(h<0&&y===0?(qT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,E=null):h===y&&(T=!0,E=g.route.hydrateFallbackElement||null)));let I=e.concat(a.slice(0,y+1)),N=()=>{let O;return S?O=D:T?O=E:g.route.Component?O=W.createElement(g.route.Component,null):g.route.element?O=g.route.element:O=p,W.createElement(DC,{match:g,routeContext:{outlet:p,matches:I,isDataRoute:t!=null},children:O})};return t&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?W.createElement(IC,{location:t.location,revalidation:t.revalidation,component:D,error:S,children:N(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):N()},null)}function Em(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xC(r){let e=W.useContext(jo);return jt(e,Em(r)),e}function NC(r){let e=W.useContext(uf);return jt(e,Em(r)),e}function MC(r){let e=W.useContext(Mr);return jt(e,Em(r)),e}function Tm(r){let e=MC(r),t=e.matches[e.matches.length-1];return jt(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function kC(){return Tm("useRouteId")}function LC(){var i;let r=W.useContext(vm),e=NC("useRouteError"),t=Tm("useRouteError");return r!==void 0?r:(i=e.errors)==null?void 0:i[t]}function PC(){let{router:r}=xC("useNavigate"),e=Tm("useNavigate"),t=W.useRef(!1);return jT(()=>{t.current=!0}),W.useCallback(async(a,l={})=>{Or(t.current,BT),t.current&&(typeof a=="number"?r.navigate(a):await r.navigate(a,{fromRouteId:e,...l}))},[r,e])}var W_={};function qT(r,e,t){!e&&!W_[r]&&(W_[r]=!0,Or(!1,t))}W.memo(UC);function UC({routes:r,future:e,state:t}){return FT(r,void 0,t,e)}function VC({to:r,replace:e,state:t,relative:i}){jt(Fo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=W.useContext(Nr);Or(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=W.useContext(Mr),{pathname:c}=ks(),h=_m(),p=ym(r,mm(l),c,i==="path"),g=JSON.stringify(p);return W.useEffect(()=>{h(JSON.parse(g),{replace:e,state:t,relative:i})},[h,g,i,e,t]),null}function Rh(r){jt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function BC({basename:r="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1}){jt(!Fo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=r.replace(/^\/*/,"/"),h=W.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof t=="string"&&(t=Bo(t));let{pathname:p="/",search:g="",hash:y="",state:S=null,key:T="default"}=t,D=W.useMemo(()=>{let E=Ni(p,c);return E==null?null:{location:{pathname:E,search:g,hash:y,state:S,key:T},navigationType:i}},[c,p,g,y,S,T,i]);return Or(D!=null,`<Router basename="${c}"> is not able to match the URL "${p}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),D==null?null:W.createElement(Nr.Provider,{value:h},W.createElement(Du.Provider,{children:e,value:D}))}function jC({children:r,location:e}){return RC(kg(r),e)}function kg(r,e=[]){let t=[];return W.Children.forEach(r,(i,a)=>{if(!W.isValidElement(i))return;let l=[...e,a];if(i.type===W.Fragment){t.push.apply(t,kg(i.props.children,l));return}jt(i.type===Rh,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),jt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=kg(i.props.children,l)),t.push(c)}),t}var Ah="get",Ch="application/x-www-form-urlencoded";function cf(r){return r!=null&&typeof r.tagName=="string"}function FC(r){return cf(r)&&r.tagName.toLowerCase()==="button"}function qC(r){return cf(r)&&r.tagName.toLowerCase()==="form"}function zC(r){return cf(r)&&r.tagName.toLowerCase()==="input"}function HC(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function GC(r,e){return r.button===0&&(!e||e==="_self")&&!HC(r)}var oh=null;function $C(){if(oh===null)try{new FormData(document.createElement("form"),0),oh=!1}catch{oh=!0}return oh}var KC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function jp(r){return r!=null&&!KC.has(r)?(Or(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ch}"`),null):r}function QC(r,e){let t,i,a,l,c;if(qC(r)){let h=r.getAttribute("action");i=h?Ni(h,e):null,t=r.getAttribute("method")||Ah,a=jp(r.getAttribute("enctype"))||Ch,l=new FormData(r)}else if(FC(r)||zC(r)&&(r.type==="submit"||r.type==="image")){let h=r.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||h.getAttribute("action");if(i=p?Ni(p,e):null,t=r.getAttribute("formmethod")||h.getAttribute("method")||Ah,a=jp(r.getAttribute("formenctype"))||jp(h.getAttribute("enctype"))||Ch,l=new FormData(h,r),!$C()){let{name:g,type:y,value:S}=r;if(y==="image"){let T=g?`${g}.`:"";l.append(`${T}x`,"0"),l.append(`${T}y`,"0")}else g&&l.append(g,S)}}else{if(cf(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Ah,i=null,a=Ch,c=r}return l&&a==="text/plain"&&(c=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:c}}function wm(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function YC(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function WC(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function XC(r,e,t){let i=await Promise.all(r.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await YC(l,t);return c.links?c.links():[]}return[]}));return tI(i.flat(1).filter(WC).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function X_(r,e,t,i,a,l){let c=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,h=(p,g)=>{var y;return t[g].pathname!==p.pathname||((y=t[g].route.path)==null?void 0:y.endsWith("*"))&&t[g].params["*"]!==p.params["*"]};return l==="assets"?e.filter((p,g)=>c(p,g)||h(p,g)):l==="data"?e.filter((p,g)=>{var S;let y=i.routes[p.route.id];if(!y||!y.hasLoader)return!1;if(c(p,g)||h(p,g))return!0;if(p.route.shouldRevalidate){let T=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((S=t[0])==null?void 0:S.params)||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function ZC(r,e,{includeHydrateFallback:t}={}){return JC(r.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function JC(r){return[...new Set(r)]}function eI(r){let e={},t=Object.keys(r).sort();for(let i of t)e[i]=r[i];return e}function tI(r,e){let t=new Set;return new Set(e),r.reduce((i,a)=>{let l=JSON.stringify(eI(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var nI=new Set([100,101,204,205]);function rI(r,e){let t=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return t.pathname==="/"?t.pathname="_root.data":e&&Ni(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function zT(){let r=W.useContext(jo);return wm(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function iI(){let r=W.useContext(uf);return wm(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var bm=W.createContext(void 0);bm.displayName="FrameworkContext";function HT(){let r=W.useContext(bm);return wm(r,"You must render this element inside a <HydratedRouter> element"),r}function sI(r,e){let t=W.useContext(bm),[i,a]=W.useState(!1),[l,c]=W.useState(!1),{onFocus:h,onBlur:p,onMouseEnter:g,onMouseLeave:y,onTouchStart:S}=e,T=W.useRef(null);W.useEffect(()=>{if(r==="render"&&c(!0),r==="viewport"){let I=O=>{O.forEach(B=>{c(B.isIntersecting)})},N=new IntersectionObserver(I,{threshold:.5});return T.current&&N.observe(T.current),()=>{N.disconnect()}}},[r]),W.useEffect(()=>{if(i){let I=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(I)}}},[i]);let D=()=>{a(!0)},E=()=>{a(!1),c(!1)};return t?r!=="intent"?[l,T,{}]:[l,T,{onFocus:Zl(h,D),onBlur:Zl(p,E),onMouseEnter:Zl(g,D),onMouseLeave:Zl(y,E),onTouchStart:Zl(S,D)}]:[!1,T,{}]}function Zl(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function aI({page:r,...e}){let{router:t}=zT(),i=W.useMemo(()=>kT(t.routes,r,t.basename),[t.routes,r,t.basename]);return i?W.createElement(lI,{page:r,matches:i,...e}):null}function oI(r){let{manifest:e,routeModules:t}=HT(),[i,a]=W.useState([]);return W.useEffect(()=>{let l=!1;return XC(r,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[r,e,t]),i}function lI({page:r,matches:e,...t}){let i=ks(),{manifest:a,routeModules:l}=HT(),{basename:c}=zT(),{loaderData:h,matches:p}=iI(),g=W.useMemo(()=>X_(r,e,p,a,i,"data"),[r,e,p,a,i]),y=W.useMemo(()=>X_(r,e,p,a,i,"assets"),[r,e,p,a,i]),S=W.useMemo(()=>{if(r===i.pathname+i.search+i.hash)return[];let E=new Set,I=!1;if(e.forEach(O=>{var j;let B=a.routes[O.route.id];!B||!B.hasLoader||(!g.some(G=>G.route.id===O.route.id)&&O.route.id in h&&((j=l[O.route.id])!=null&&j.shouldRevalidate)||B.hasClientLoader?I=!0:E.add(O.route.id))}),E.size===0)return[];let N=rI(r,c);return I&&E.size>0&&N.searchParams.set("_routes",e.filter(O=>E.has(O.route.id)).map(O=>O.route.id).join(",")),[N.pathname+N.search]},[c,h,i,a,g,e,r,l]),T=W.useMemo(()=>ZC(y,a),[y,a]),D=oI(y);return W.createElement(W.Fragment,null,S.map(E=>W.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...t})),T.map(E=>W.createElement("link",{key:E,rel:"modulepreload",href:E,...t})),D.map(({key:E,link:I})=>W.createElement("link",{key:E,...I})))}function uI(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var GT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{GT&&(window.__reactRouterVersion="7.6.0")}catch{}function cI({basename:r,children:e,window:t}){let i=W.useRef();i.current==null&&(i.current=YA({window:t,v5Compat:!0}));let a=i.current,[l,c]=W.useState({action:a.action,location:a.location}),h=W.useCallback(p=>{W.startTransition(()=>c(p))},[c]);return W.useLayoutEffect(()=>a.listen(h),[a,h]),W.createElement(BC,{basename:r,children:e,location:l.location,navigationType:l.action,navigator:a})}var $T=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,KT=W.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:c,state:h,target:p,to:g,preventScrollReset:y,viewTransition:S,...T},D){let{basename:E}=W.useContext(Nr),I=typeof g=="string"&&$T.test(g),N,O=!1;if(typeof g=="string"&&I&&(N=g,GT))try{let P=new URL(window.location.href),K=g.startsWith("//")?new URL(P.protocol+g):new URL(g),J=Ni(K.pathname,E);K.origin===P.origin&&J!=null?g=J+K.search+K.hash:O=!0}catch{Or(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let B=wC(g,{relative:a}),[j,G,q]=sI(i,T),X=pI(g,{replace:c,state:h,target:p,preventScrollReset:y,relative:a,viewTransition:S});function V(P){e&&e(P),P.defaultPrevented||X(P)}let M=W.createElement("a",{...T,...q,href:N||B,onClick:O||l?e:V,ref:uI(D,G),target:p,"data-discover":!I&&t==="render"?"true":void 0});return j&&!I?W.createElement(W.Fragment,null,M,W.createElement(aI,{page:B})):M});KT.displayName="Link";var hI=W.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:h,children:p,...g},y){let S=Ou(c,{relative:g.relative}),T=ks(),D=W.useContext(uf),{navigator:E,basename:I}=W.useContext(Nr),N=D!=null&&_I(S)&&h===!0,O=E.encodeLocation?E.encodeLocation(S).pathname:S.pathname,B=T.pathname,j=D&&D.navigation&&D.navigation.location?D.navigation.location.pathname:null;t||(B=B.toLowerCase(),j=j?j.toLowerCase():null,O=O.toLowerCase()),j&&I&&(j=Ni(j,I)||j);const G=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let q=B===O||!a&&B.startsWith(O)&&B.charAt(G)==="/",X=j!=null&&(j===O||!a&&j.startsWith(O)&&j.charAt(O.length)==="/"),V={isActive:q,isPending:X,isTransitioning:N},M=q?e:void 0,P;typeof i=="function"?P=i(V):P=[i,q?"active":null,X?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let K=typeof l=="function"?l(V):l;return W.createElement(KT,{...g,"aria-current":M,className:P,ref:y,style:K,to:c,viewTransition:h},typeof p=="function"?p(V):p)});hI.displayName="NavLink";var fI=W.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:c=Ah,action:h,onSubmit:p,relative:g,preventScrollReset:y,viewTransition:S,...T},D)=>{let E=yI(),I=vI(h,{relative:g}),N=c.toLowerCase()==="get"?"get":"post",O=typeof h=="string"&&$T.test(h),B=j=>{if(p&&p(j),j.defaultPrevented)return;j.preventDefault();let G=j.nativeEvent.submitter,q=(G==null?void 0:G.getAttribute("formmethod"))||c;E(G||j.currentTarget,{fetcherKey:e,method:q,navigate:t,replace:a,state:l,relative:g,preventScrollReset:y,viewTransition:S})};return W.createElement("form",{ref:D,method:N,action:I,onSubmit:i?p:B,...T,"data-discover":!O&&r==="render"?"true":void 0})});fI.displayName="Form";function dI(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QT(r){let e=W.useContext(jo);return jt(e,dI(r)),e}function pI(r,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:c}={}){let h=_m(),p=ks(),g=Ou(r,{relative:l});return W.useCallback(y=>{if(GC(y,e)){y.preventDefault();let S=t!==void 0?t:gu(p)===gu(g);h(r,{replace:S,state:i,preventScrollReset:a,relative:l,viewTransition:c})}},[p,h,g,t,i,e,r,a,l,c])}var gI=0,mI=()=>`__${String(++gI)}__`;function yI(){let{router:r}=QT("useSubmit"),{basename:e}=W.useContext(Nr),t=kC();return W.useCallback(async(i,a={})=>{let{action:l,method:c,encType:h,formData:p,body:g}=QC(i,e);if(a.navigate===!1){let y=a.fetcherKey||mI();await r.fetch(y,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:p,body:g,formMethod:a.method||c,formEncType:a.encType||h,flushSync:a.flushSync})}else await r.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:p,body:g,formMethod:a.method||c,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[r,e,t])}function vI(r,{relative:e}={}){let{basename:t}=W.useContext(Nr),i=W.useContext(Mr);jt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...Ou(r||".",{relative:e})},c=ks();if(r==null){l.search=c.search;let h=new URLSearchParams(l.search),p=h.getAll("index");if(p.some(y=>y==="")){h.delete("index"),p.filter(S=>S).forEach(S=>h.append("index",S));let y=h.toString();l.search=y?`?${y}`:""}}return(!r||r===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:xi([t,l.pathname])),gu(l)}function _I(r,e={}){let t=W.useContext(VT);jt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=QT("useViewTransitionState"),a=Ou(r,{relative:e.relative});if(!t.isTransitioning)return!1;let l=Ni(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=Ni(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Fh(a.pathname,c)!=null||Fh(a.pathname,l)!=null}[...nI];const Rn=[];for(let r=0;r<256;++r)Rn.push((r+256).toString(16).slice(1));function EI(r,e=0){return(Rn[r[e+0]]+Rn[r[e+1]]+Rn[r[e+2]]+Rn[r[e+3]]+"-"+Rn[r[e+4]]+Rn[r[e+5]]+"-"+Rn[r[e+6]]+Rn[r[e+7]]+"-"+Rn[r[e+8]]+Rn[r[e+9]]+"-"+Rn[r[e+10]]+Rn[r[e+11]]+Rn[r[e+12]]+Rn[r[e+13]]+Rn[r[e+14]]+Rn[r[e+15]]).toLowerCase()}let Fp;const TI=new Uint8Array(16);function wI(){if(!Fp){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Fp=crypto.getRandomValues.bind(crypto)}return Fp(TI)}const bI=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Z_={randomUUID:bI};function SI(r,e,t){var a;if(Z_.randomUUID&&!r)return Z_.randomUUID();r=r||{};const i=r.random??((a=r.rng)==null?void 0:a.call(r))??wI();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,EI(i)}function RI(){const r=_m();return W.useEffect(()=>{const e=SI();r(`/play/${e}`)},[r]),se.jsx("div",{children:"Creating game"})}var lh={exports:{}},qp,J_;function AI(){if(J_)return qp;J_=1;var r=1e3,e=r*60,t=e*60,i=t*24,a=i*7,l=i*365.25;qp=function(y,S){S=S||{};var T=typeof y;if(T==="string"&&y.length>0)return c(y);if(T==="number"&&isFinite(y))return S.long?p(y):h(y);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(y))};function c(y){if(y=String(y),!(y.length>100)){var S=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(y);if(S){var T=parseFloat(S[1]),D=(S[2]||"ms").toLowerCase();switch(D){case"years":case"year":case"yrs":case"yr":case"y":return T*l;case"weeks":case"week":case"w":return T*a;case"days":case"day":case"d":return T*i;case"hours":case"hour":case"hrs":case"hr":case"h":return T*t;case"minutes":case"minute":case"mins":case"min":case"m":return T*e;case"seconds":case"second":case"secs":case"sec":case"s":return T*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return T;default:return}}}}function h(y){var S=Math.abs(y);return S>=i?Math.round(y/i)+"d":S>=t?Math.round(y/t)+"h":S>=e?Math.round(y/e)+"m":S>=r?Math.round(y/r)+"s":y+"ms"}function p(y){var S=Math.abs(y);return S>=i?g(y,S,i,"day"):S>=t?g(y,S,t,"hour"):S>=e?g(y,S,e,"minute"):S>=r?g(y,S,r,"second"):y+" ms"}function g(y,S,T,D){var E=S>=T*1.5;return Math.round(y/T)+" "+D+(E?"s":"")}return qp}var zp,eE;function CI(){if(eE)return zp;eE=1;function r(e){i.debug=i,i.default=i,i.coerce=g,i.disable=h,i.enable=l,i.enabled=p,i.humanize=AI(),i.destroy=y,Object.keys(e).forEach(S=>{i[S]=e[S]}),i.names=[],i.skips=[],i.formatters={};function t(S){let T=0;for(let D=0;D<S.length;D++)T=(T<<5)-T+S.charCodeAt(D),T|=0;return i.colors[Math.abs(T)%i.colors.length]}i.selectColor=t;function i(S){let T,D=null,E,I;function N(...O){if(!N.enabled)return;const B=N,j=Number(new Date),G=j-(T||j);B.diff=G,B.prev=T,B.curr=j,T=j,O[0]=i.coerce(O[0]),typeof O[0]!="string"&&O.unshift("%O");let q=0;O[0]=O[0].replace(/%([a-zA-Z%])/g,(V,M)=>{if(V==="%%")return"%";q++;const P=i.formatters[M];if(typeof P=="function"){const K=O[q];V=P.call(B,K),O.splice(q,1),q--}return V}),i.formatArgs.call(B,O),(B.log||i.log).apply(B,O)}return N.namespace=S,N.useColors=i.useColors(),N.color=i.selectColor(S),N.extend=a,N.destroy=i.destroy,Object.defineProperty(N,"enabled",{enumerable:!0,configurable:!1,get:()=>D!==null?D:(E!==i.namespaces&&(E=i.namespaces,I=i.enabled(S)),I),set:O=>{D=O}}),typeof i.init=="function"&&i.init(N),N}function a(S,T){const D=i(this.namespace+(typeof T>"u"?":":T)+S);return D.log=this.log,D}function l(S){i.save(S),i.namespaces=S,i.names=[],i.skips=[];const T=(typeof S=="string"?S:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const D of T)D[0]==="-"?i.skips.push(D.slice(1)):i.names.push(D)}function c(S,T){let D=0,E=0,I=-1,N=0;for(;D<S.length;)if(E<T.length&&(T[E]===S[D]||T[E]==="*"))T[E]==="*"?(I=E,N=D,E++):(D++,E++);else if(I!==-1)E=I+1,N++,D=N;else return!1;for(;E<T.length&&T[E]==="*";)E++;return E===T.length}function h(){const S=[...i.names,...i.skips.map(T=>"-"+T)].join(",");return i.enable(""),S}function p(S){for(const T of i.skips)if(c(S,T))return!1;for(const T of i.names)if(c(S,T))return!0;return!1}function g(S){return S instanceof Error?S.stack||S.message:S}function y(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}return zp=r,zp}var tE;function II(){return tE||(tE=1,function(r,e){var t={};e.formatArgs=a,e.save=l,e.load=c,e.useColors=i,e.storage=h(),e.destroy=(()=>{let g=!1;return()=>{g||(g=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let g;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(g=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(g[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function a(g){if(g[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+g[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;const y="color: "+this.color;g.splice(1,0,y,"color: inherit");let S=0,T=0;g[0].replace(/%[a-zA-Z%]/g,D=>{D!=="%%"&&(S++,D==="%c"&&(T=S))}),g.splice(T,0,y)}e.log=console.debug||console.log||(()=>{});function l(g){try{g?e.storage.setItem("debug",g):e.storage.removeItem("debug")}catch{}}function c(){let g;try{g=e.storage.getItem("debug")||e.storage.getItem("DEBUG")}catch{}return!g&&typeof process<"u"&&"env"in process&&(g=t.DEBUG),g}function h(){try{return localStorage}catch{}}r.exports=CI()(e);const{formatters:p}=r.exports;p.j=function(g){try{return JSON.stringify(g)}catch(y){return"[UnexpectedJSONParseError]: "+y.message}}}(lh,lh.exports)),lh.exports}var Hp,nE;function DI(){return nE||(nE=1,Hp=function(){if(typeof globalThis>"u")return null;var e={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}),Hp}var uh={exports:{}},ch={exports:{}},Gp={},Jl={},rE;function YT(){if(rE)return Jl;rE=1,Jl.byteLength=h,Jl.toByteArray=g,Jl.fromByteArray=T;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=i.length;a<l;++a)r[a]=i[a],e[i.charCodeAt(a)]=a;e[45]=62,e[95]=63;function c(D){var E=D.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var I=D.indexOf("=");I===-1&&(I=E);var N=I===E?0:4-I%4;return[I,N]}function h(D){var E=c(D),I=E[0],N=E[1];return(I+N)*3/4-N}function p(D,E,I){return(E+I)*3/4-I}function g(D){var E,I=c(D),N=I[0],O=I[1],B=new t(p(D,N,O)),j=0,G=O>0?N-4:N,q;for(q=0;q<G;q+=4)E=e[D.charCodeAt(q)]<<18|e[D.charCodeAt(q+1)]<<12|e[D.charCodeAt(q+2)]<<6|e[D.charCodeAt(q+3)],B[j++]=E>>16&255,B[j++]=E>>8&255,B[j++]=E&255;return O===2&&(E=e[D.charCodeAt(q)]<<2|e[D.charCodeAt(q+1)]>>4,B[j++]=E&255),O===1&&(E=e[D.charCodeAt(q)]<<10|e[D.charCodeAt(q+1)]<<4|e[D.charCodeAt(q+2)]>>2,B[j++]=E>>8&255,B[j++]=E&255),B}function y(D){return r[D>>18&63]+r[D>>12&63]+r[D>>6&63]+r[D&63]}function S(D,E,I){for(var N,O=[],B=E;B<I;B+=3)N=(D[B]<<16&16711680)+(D[B+1]<<8&65280)+(D[B+2]&255),O.push(y(N));return O.join("")}function T(D){for(var E,I=D.length,N=I%3,O=[],B=16383,j=0,G=I-N;j<G;j+=B)O.push(S(D,j,j+B>G?G:j+B));return N===1?(E=D[I-1],O.push(r[E>>2]+r[E<<4&63]+"==")):N===2&&(E=(D[I-2]<<8)+D[I-1],O.push(r[E>>10]+r[E>>4&63]+r[E<<2&63]+"=")),O.join("")}return Jl}var hh={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var iE;function WT(){return iE||(iE=1,hh.read=function(r,e,t,i,a){var l,c,h=a*8-i-1,p=(1<<h)-1,g=p>>1,y=-7,S=t?a-1:0,T=t?-1:1,D=r[e+S];for(S+=T,l=D&(1<<-y)-1,D>>=-y,y+=h;y>0;l=l*256+r[e+S],S+=T,y-=8);for(c=l&(1<<-y)-1,l>>=-y,y+=i;y>0;c=c*256+r[e+S],S+=T,y-=8);if(l===0)l=1-g;else{if(l===p)return c?NaN:(D?-1:1)*(1/0);c=c+Math.pow(2,i),l=l-g}return(D?-1:1)*c*Math.pow(2,l-i)},hh.write=function(r,e,t,i,a,l){var c,h,p,g=l*8-a-1,y=(1<<g)-1,S=y>>1,T=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,D=i?0:l-1,E=i?1:-1,I=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(h=isNaN(e)?1:0,c=y):(c=Math.floor(Math.log(e)/Math.LN2),e*(p=Math.pow(2,-c))<1&&(c--,p*=2),c+S>=1?e+=T/p:e+=T*Math.pow(2,1-S),e*p>=2&&(c++,p/=2),c+S>=y?(h=0,c=y):c+S>=1?(h=(e*p-1)*Math.pow(2,a),c=c+S):(h=e*Math.pow(2,S-1)*Math.pow(2,a),c=0));a>=8;r[t+D]=h&255,D+=E,h/=256,a-=8);for(c=c<<a|h,g+=a;g>0;r[t+D]=c&255,D+=E,c/=256,g-=8);r[t+D-E]|=I*128}),hh}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var sE;function OI(){return sE||(sE=1,function(r){var e=YT(),t=WT(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=h,r.SlowBuffer=B,r.INSPECT_MAX_BYTES=50;var a=2147483647;r.kMaxLength=a,h.TYPED_ARRAY_SUPPORT=l(),!h.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{var L=new Uint8Array(1),b={foo:function(){return 42}};return Object.setPrototypeOf(b,Uint8Array.prototype),Object.setPrototypeOf(L,b),L.foo()===42}catch{return!1}}Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}});function c(L){if(L>a)throw new RangeError('The value "'+L+'" is invalid for option "size"');var b=new Uint8Array(L);return Object.setPrototypeOf(b,h.prototype),b}function h(L,b,R){if(typeof L=="number"){if(typeof b=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return S(L)}return p(L,b,R)}h.poolSize=8192;function p(L,b,R){if(typeof L=="string")return T(L,b);if(ArrayBuffer.isView(L))return E(L);if(L==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L);if(ve(L,ArrayBuffer)||L&&ve(L.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ve(L,SharedArrayBuffer)||L&&ve(L.buffer,SharedArrayBuffer)))return I(L,b,R);if(typeof L=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var $=L.valueOf&&L.valueOf();if($!=null&&$!==L)return h.from($,b,R);var oe=N(L);if(oe)return oe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof L[Symbol.toPrimitive]=="function")return h.from(L[Symbol.toPrimitive]("string"),b,R);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L)}h.from=function(L,b,R){return p(L,b,R)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array);function g(L){if(typeof L!="number")throw new TypeError('"size" argument must be of type number');if(L<0)throw new RangeError('The value "'+L+'" is invalid for option "size"')}function y(L,b,R){return g(L),L<=0?c(L):b!==void 0?typeof R=="string"?c(L).fill(b,R):c(L).fill(b):c(L)}h.alloc=function(L,b,R){return y(L,b,R)};function S(L){return g(L),c(L<0?0:O(L)|0)}h.allocUnsafe=function(L){return S(L)},h.allocUnsafeSlow=function(L){return S(L)};function T(L,b){if((typeof b!="string"||b==="")&&(b="utf8"),!h.isEncoding(b))throw new TypeError("Unknown encoding: "+b);var R=j(L,b)|0,$=c(R),oe=$.write(L,b);return oe!==R&&($=$.slice(0,oe)),$}function D(L){for(var b=L.length<0?0:O(L.length)|0,R=c(b),$=0;$<b;$+=1)R[$]=L[$]&255;return R}function E(L){if(ve(L,Uint8Array)){var b=new Uint8Array(L);return I(b.buffer,b.byteOffset,b.byteLength)}return D(L)}function I(L,b,R){if(b<0||L.byteLength<b)throw new RangeError('"offset" is outside of buffer bounds');if(L.byteLength<b+(R||0))throw new RangeError('"length" is outside of buffer bounds');var $;return b===void 0&&R===void 0?$=new Uint8Array(L):R===void 0?$=new Uint8Array(L,b):$=new Uint8Array(L,b,R),Object.setPrototypeOf($,h.prototype),$}function N(L){if(h.isBuffer(L)){var b=O(L.length)|0,R=c(b);return R.length===0||L.copy(R,0,0,b),R}if(L.length!==void 0)return typeof L.length!="number"||Oe(L.length)?c(0):D(L);if(L.type==="Buffer"&&Array.isArray(L.data))return D(L.data)}function O(L){if(L>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return L|0}function B(L){return+L!=L&&(L=0),h.alloc(+L)}h.isBuffer=function(b){return b!=null&&b._isBuffer===!0&&b!==h.prototype},h.compare=function(b,R){if(ve(b,Uint8Array)&&(b=h.from(b,b.offset,b.byteLength)),ve(R,Uint8Array)&&(R=h.from(R,R.offset,R.byteLength)),!h.isBuffer(b)||!h.isBuffer(R))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(b===R)return 0;for(var $=b.length,oe=R.length,be=0,Ae=Math.min($,oe);be<Ae;++be)if(b[be]!==R[be]){$=b[be],oe=R[be];break}return $<oe?-1:oe<$?1:0},h.isEncoding=function(b){switch(String(b).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(b,R){if(!Array.isArray(b))throw new TypeError('"list" argument must be an Array of Buffers');if(b.length===0)return h.alloc(0);var $;if(R===void 0)for(R=0,$=0;$<b.length;++$)R+=b[$].length;var oe=h.allocUnsafe(R),be=0;for($=0;$<b.length;++$){var Ae=b[$];if(ve(Ae,Uint8Array))be+Ae.length>oe.length?h.from(Ae).copy(oe,be):Uint8Array.prototype.set.call(oe,Ae,be);else if(h.isBuffer(Ae))Ae.copy(oe,be);else throw new TypeError('"list" argument must be an Array of Buffers');be+=Ae.length}return oe};function j(L,b){if(h.isBuffer(L))return L.length;if(ArrayBuffer.isView(L)||ve(L,ArrayBuffer))return L.byteLength;if(typeof L!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof L);var R=L.length,$=arguments.length>2&&arguments[2]===!0;if(!$&&R===0)return 0;for(var oe=!1;;)switch(b){case"ascii":case"latin1":case"binary":return R;case"utf8":case"utf-8":return ye(L).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R*2;case"hex":return R>>>1;case"base64":return F(L).length;default:if(oe)return $?-1:ye(L).length;b=(""+b).toLowerCase(),oe=!0}}h.byteLength=j;function G(L,b,R){var $=!1;if((b===void 0||b<0)&&(b=0),b>this.length||((R===void 0||R>this.length)&&(R=this.length),R<=0)||(R>>>=0,b>>>=0,R<=b))return"";for(L||(L="utf8");;)switch(L){case"hex":return Xe(this,b,R);case"utf8":case"utf-8":return ct(this,b,R);case"ascii":return De(this,b,R);case"latin1":case"binary":return Me(this,b,R);case"base64":return Q(this,b,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,b,R);default:if($)throw new TypeError("Unknown encoding: "+L);L=(L+"").toLowerCase(),$=!0}}h.prototype._isBuffer=!0;function q(L,b,R){var $=L[b];L[b]=L[R],L[R]=$}h.prototype.swap16=function(){var b=this.length;if(b%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var R=0;R<b;R+=2)q(this,R,R+1);return this},h.prototype.swap32=function(){var b=this.length;if(b%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var R=0;R<b;R+=4)q(this,R,R+3),q(this,R+1,R+2);return this},h.prototype.swap64=function(){var b=this.length;if(b%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var R=0;R<b;R+=8)q(this,R,R+7),q(this,R+1,R+6),q(this,R+2,R+5),q(this,R+3,R+4);return this},h.prototype.toString=function(){var b=this.length;return b===0?"":arguments.length===0?ct(this,0,b):G.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(b){if(!h.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?!0:h.compare(this,b)===0},h.prototype.inspect=function(){var b="",R=r.INSPECT_MAX_BYTES;return b=this.toString("hex",0,R).replace(/(.{2})/g,"$1 ").trim(),this.length>R&&(b+=" ... "),"<Buffer "+b+">"},i&&(h.prototype[i]=h.prototype.inspect),h.prototype.compare=function(b,R,$,oe,be){if(ve(b,Uint8Array)&&(b=h.from(b,b.offset,b.byteLength)),!h.isBuffer(b))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof b);if(R===void 0&&(R=0),$===void 0&&($=b?b.length:0),oe===void 0&&(oe=0),be===void 0&&(be=this.length),R<0||$>b.length||oe<0||be>this.length)throw new RangeError("out of range index");if(oe>=be&&R>=$)return 0;if(oe>=be)return-1;if(R>=$)return 1;if(R>>>=0,$>>>=0,oe>>>=0,be>>>=0,this===b)return 0;for(var Ae=be-oe,qe=$-R,rt=Math.min(Ae,qe),ze=this.slice(oe,be),He=b.slice(R,$),x=0;x<rt;++x)if(ze[x]!==He[x]){Ae=ze[x],qe=He[x];break}return Ae<qe?-1:qe<Ae?1:0};function X(L,b,R,$,oe){if(L.length===0)return-1;if(typeof R=="string"?($=R,R=0):R>2147483647?R=2147483647:R<-2147483648&&(R=-2147483648),R=+R,Oe(R)&&(R=oe?0:L.length-1),R<0&&(R=L.length+R),R>=L.length){if(oe)return-1;R=L.length-1}else if(R<0)if(oe)R=0;else return-1;if(typeof b=="string"&&(b=h.from(b,$)),h.isBuffer(b))return b.length===0?-1:V(L,b,R,$,oe);if(typeof b=="number")return b=b&255,typeof Uint8Array.prototype.indexOf=="function"?oe?Uint8Array.prototype.indexOf.call(L,b,R):Uint8Array.prototype.lastIndexOf.call(L,b,R):V(L,[b],R,$,oe);throw new TypeError("val must be string, number or Buffer")}function V(L,b,R,$,oe){var be=1,Ae=L.length,qe=b.length;if($!==void 0&&($=String($).toLowerCase(),$==="ucs2"||$==="ucs-2"||$==="utf16le"||$==="utf-16le")){if(L.length<2||b.length<2)return-1;be=2,Ae/=2,qe/=2,R/=2}function rt(w,z){return be===1?w[z]:w.readUInt16BE(z*be)}var ze;if(oe){var He=-1;for(ze=R;ze<Ae;ze++)if(rt(L,ze)===rt(b,He===-1?0:ze-He)){if(He===-1&&(He=ze),ze-He+1===qe)return He*be}else He!==-1&&(ze-=ze-He),He=-1}else for(R+qe>Ae&&(R=Ae-qe),ze=R;ze>=0;ze--){for(var x=!0,_=0;_<qe;_++)if(rt(L,ze+_)!==rt(b,_)){x=!1;break}if(x)return ze}return-1}h.prototype.includes=function(b,R,$){return this.indexOf(b,R,$)!==-1},h.prototype.indexOf=function(b,R,$){return X(this,b,R,$,!0)},h.prototype.lastIndexOf=function(b,R,$){return X(this,b,R,$,!1)};function M(L,b,R,$){R=Number(R)||0;var oe=L.length-R;$?($=Number($),$>oe&&($=oe)):$=oe;var be=b.length;$>be/2&&($=be/2);for(var Ae=0;Ae<$;++Ae){var qe=parseInt(b.substr(Ae*2,2),16);if(Oe(qe))return Ae;L[R+Ae]=qe}return Ae}function P(L,b,R,$){return H(ye(b,L.length-R),L,R,$)}function K(L,b,R,$){return H(Ne(b),L,R,$)}function J(L,b,R,$){return H(F(b),L,R,$)}function ee(L,b,R,$){return H(Be(b,L.length-R),L,R,$)}h.prototype.write=function(b,R,$,oe){if(R===void 0)oe="utf8",$=this.length,R=0;else if($===void 0&&typeof R=="string")oe=R,$=this.length,R=0;else if(isFinite(R))R=R>>>0,isFinite($)?($=$>>>0,oe===void 0&&(oe="utf8")):(oe=$,$=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var be=this.length-R;if(($===void 0||$>be)&&($=be),b.length>0&&($<0||R<0)||R>this.length)throw new RangeError("Attempt to write outside buffer bounds");oe||(oe="utf8");for(var Ae=!1;;)switch(oe){case"hex":return M(this,b,R,$);case"utf8":case"utf-8":return P(this,b,R,$);case"ascii":case"latin1":case"binary":return K(this,b,R,$);case"base64":return J(this,b,R,$);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,b,R,$);default:if(Ae)throw new TypeError("Unknown encoding: "+oe);oe=(""+oe).toLowerCase(),Ae=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Q(L,b,R){return b===0&&R===L.length?e.fromByteArray(L):e.fromByteArray(L.slice(b,R))}function ct(L,b,R){R=Math.min(L.length,R);for(var $=[],oe=b;oe<R;){var be=L[oe],Ae=null,qe=be>239?4:be>223?3:be>191?2:1;if(oe+qe<=R){var rt,ze,He,x;switch(qe){case 1:be<128&&(Ae=be);break;case 2:rt=L[oe+1],(rt&192)===128&&(x=(be&31)<<6|rt&63,x>127&&(Ae=x));break;case 3:rt=L[oe+1],ze=L[oe+2],(rt&192)===128&&(ze&192)===128&&(x=(be&15)<<12|(rt&63)<<6|ze&63,x>2047&&(x<55296||x>57343)&&(Ae=x));break;case 4:rt=L[oe+1],ze=L[oe+2],He=L[oe+3],(rt&192)===128&&(ze&192)===128&&(He&192)===128&&(x=(be&15)<<18|(rt&63)<<12|(ze&63)<<6|He&63,x>65535&&x<1114112&&(Ae=x))}}Ae===null?(Ae=65533,qe=1):Ae>65535&&(Ae-=65536,$.push(Ae>>>10&1023|55296),Ae=56320|Ae&1023),$.push(Ae),oe+=qe}return ge($)}var nt=4096;function ge(L){var b=L.length;if(b<=nt)return String.fromCharCode.apply(String,L);for(var R="",$=0;$<b;)R+=String.fromCharCode.apply(String,L.slice($,$+=nt));return R}function De(L,b,R){var $="";R=Math.min(L.length,R);for(var oe=b;oe<R;++oe)$+=String.fromCharCode(L[oe]&127);return $}function Me(L,b,R){var $="";R=Math.min(L.length,R);for(var oe=b;oe<R;++oe)$+=String.fromCharCode(L[oe]);return $}function Xe(L,b,R){var $=L.length;(!b||b<0)&&(b=0),(!R||R<0||R>$)&&(R=$);for(var oe="",be=b;be<R;++be)oe+=dt[L[be]];return oe}function Z(L,b,R){for(var $=L.slice(b,R),oe="",be=0;be<$.length-1;be+=2)oe+=String.fromCharCode($[be]+$[be+1]*256);return oe}h.prototype.slice=function(b,R){var $=this.length;b=~~b,R=R===void 0?$:~~R,b<0?(b+=$,b<0&&(b=0)):b>$&&(b=$),R<0?(R+=$,R<0&&(R=0)):R>$&&(R=$),R<b&&(R=b);var oe=this.subarray(b,R);return Object.setPrototypeOf(oe,h.prototype),oe};function de(L,b,R){if(L%1!==0||L<0)throw new RangeError("offset is not uint");if(L+b>R)throw new RangeError("Trying to access beyond buffer length")}h.prototype.readUintLE=h.prototype.readUIntLE=function(b,R,$){b=b>>>0,R=R>>>0,$||de(b,R,this.length);for(var oe=this[b],be=1,Ae=0;++Ae<R&&(be*=256);)oe+=this[b+Ae]*be;return oe},h.prototype.readUintBE=h.prototype.readUIntBE=function(b,R,$){b=b>>>0,R=R>>>0,$||de(b,R,this.length);for(var oe=this[b+--R],be=1;R>0&&(be*=256);)oe+=this[b+--R]*be;return oe},h.prototype.readUint8=h.prototype.readUInt8=function(b,R){return b=b>>>0,R||de(b,1,this.length),this[b]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(b,R){return b=b>>>0,R||de(b,2,this.length),this[b]|this[b+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(b,R){return b=b>>>0,R||de(b,2,this.length),this[b]<<8|this[b+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(b,R){return b=b>>>0,R||de(b,4,this.length),(this[b]|this[b+1]<<8|this[b+2]<<16)+this[b+3]*16777216},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(b,R){return b=b>>>0,R||de(b,4,this.length),this[b]*16777216+(this[b+1]<<16|this[b+2]<<8|this[b+3])},h.prototype.readIntLE=function(b,R,$){b=b>>>0,R=R>>>0,$||de(b,R,this.length);for(var oe=this[b],be=1,Ae=0;++Ae<R&&(be*=256);)oe+=this[b+Ae]*be;return be*=128,oe>=be&&(oe-=Math.pow(2,8*R)),oe},h.prototype.readIntBE=function(b,R,$){b=b>>>0,R=R>>>0,$||de(b,R,this.length);for(var oe=R,be=1,Ae=this[b+--oe];oe>0&&(be*=256);)Ae+=this[b+--oe]*be;return be*=128,Ae>=be&&(Ae-=Math.pow(2,8*R)),Ae},h.prototype.readInt8=function(b,R){return b=b>>>0,R||de(b,1,this.length),this[b]&128?(255-this[b]+1)*-1:this[b]},h.prototype.readInt16LE=function(b,R){b=b>>>0,R||de(b,2,this.length);var $=this[b]|this[b+1]<<8;return $&32768?$|4294901760:$},h.prototype.readInt16BE=function(b,R){b=b>>>0,R||de(b,2,this.length);var $=this[b+1]|this[b]<<8;return $&32768?$|4294901760:$},h.prototype.readInt32LE=function(b,R){return b=b>>>0,R||de(b,4,this.length),this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24},h.prototype.readInt32BE=function(b,R){return b=b>>>0,R||de(b,4,this.length),this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]},h.prototype.readFloatLE=function(b,R){return b=b>>>0,R||de(b,4,this.length),t.read(this,b,!0,23,4)},h.prototype.readFloatBE=function(b,R){return b=b>>>0,R||de(b,4,this.length),t.read(this,b,!1,23,4)},h.prototype.readDoubleLE=function(b,R){return b=b>>>0,R||de(b,8,this.length),t.read(this,b,!0,52,8)},h.prototype.readDoubleBE=function(b,R){return b=b>>>0,R||de(b,8,this.length),t.read(this,b,!1,52,8)};function we(L,b,R,$,oe,be){if(!h.isBuffer(L))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>oe||b<be)throw new RangeError('"value" argument is out of bounds');if(R+$>L.length)throw new RangeError("Index out of range")}h.prototype.writeUintLE=h.prototype.writeUIntLE=function(b,R,$,oe){if(b=+b,R=R>>>0,$=$>>>0,!oe){var be=Math.pow(2,8*$)-1;we(this,b,R,$,be,0)}var Ae=1,qe=0;for(this[R]=b&255;++qe<$&&(Ae*=256);)this[R+qe]=b/Ae&255;return R+$},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(b,R,$,oe){if(b=+b,R=R>>>0,$=$>>>0,!oe){var be=Math.pow(2,8*$)-1;we(this,b,R,$,be,0)}var Ae=$-1,qe=1;for(this[R+Ae]=b&255;--Ae>=0&&(qe*=256);)this[R+Ae]=b/qe&255;return R+$},h.prototype.writeUint8=h.prototype.writeUInt8=function(b,R,$){return b=+b,R=R>>>0,$||we(this,b,R,1,255,0),this[R]=b&255,R+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(b,R,$){return b=+b,R=R>>>0,$||we(this,b,R,2,65535,0),this[R]=b&255,this[R+1]=b>>>8,R+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(b,R,$){return b=+b,R=R>>>0,$||we(this,b,R,2,65535,0),this[R]=b>>>8,this[R+1]=b&255,R+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(b,R,$){return b=+b,R=R>>>0,$||we(this,b,R,4,4294967295,0),this[R+3]=b>>>24,this[R+2]=b>>>16,this[R+1]=b>>>8,this[R]=b&255,R+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(b,R,$){return b=+b,R=R>>>0,$||we(this,b,R,4,4294967295,0),this[R]=b>>>24,this[R+1]=b>>>16,this[R+2]=b>>>8,this[R+3]=b&255,R+4},h.prototype.writeIntLE=function(b,R,$,oe){if(b=+b,R=R>>>0,!oe){var be=Math.pow(2,8*$-1);we(this,b,R,$,be-1,-be)}var Ae=0,qe=1,rt=0;for(this[R]=b&255;++Ae<$&&(qe*=256);)b<0&&rt===0&&this[R+Ae-1]!==0&&(rt=1),this[R+Ae]=(b/qe>>0)-rt&255;return R+$},h.prototype.writeIntBE=function(b,R,$,oe){if(b=+b,R=R>>>0,!oe){var be=Math.pow(2,8*$-1);we(this,b,R,$,be-1,-be)}var Ae=$-1,qe=1,rt=0;for(this[R+Ae]=b&255;--Ae>=0&&(qe*=256);)b<0&&rt===0&&this[R+Ae+1]!==0&&(rt=1),this[R+Ae]=(b/qe>>0)-rt&255;return R+$},h.prototype.writeInt8=function(b,R,$){return b=+b,R=R>>>0,$||we(this,b,R,1,127,-128),b<0&&(b=255+b+1),this[R]=b&255,R+1},h.prototype.writeInt16LE=function(b,R,$){return b=+b,R=R>>>0,$||we(this,b,R,2,32767,-32768),this[R]=b&255,this[R+1]=b>>>8,R+2},h.prototype.writeInt16BE=function(b,R,$){return b=+b,R=R>>>0,$||we(this,b,R,2,32767,-32768),this[R]=b>>>8,this[R+1]=b&255,R+2},h.prototype.writeInt32LE=function(b,R,$){return b=+b,R=R>>>0,$||we(this,b,R,4,2147483647,-2147483648),this[R]=b&255,this[R+1]=b>>>8,this[R+2]=b>>>16,this[R+3]=b>>>24,R+4},h.prototype.writeInt32BE=function(b,R,$){return b=+b,R=R>>>0,$||we(this,b,R,4,2147483647,-2147483648),b<0&&(b=4294967295+b+1),this[R]=b>>>24,this[R+1]=b>>>16,this[R+2]=b>>>8,this[R+3]=b&255,R+4};function Ie(L,b,R,$,oe,be){if(R+$>L.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("Index out of range")}function ke(L,b,R,$,oe){return b=+b,R=R>>>0,oe||Ie(L,b,R,4),t.write(L,b,R,$,23,4),R+4}h.prototype.writeFloatLE=function(b,R,$){return ke(this,b,R,!0,$)},h.prototype.writeFloatBE=function(b,R,$){return ke(this,b,R,!1,$)};function Fe(L,b,R,$,oe){return b=+b,R=R>>>0,oe||Ie(L,b,R,8),t.write(L,b,R,$,52,8),R+8}h.prototype.writeDoubleLE=function(b,R,$){return Fe(this,b,R,!0,$)},h.prototype.writeDoubleBE=function(b,R,$){return Fe(this,b,R,!1,$)},h.prototype.copy=function(b,R,$,oe){if(!h.isBuffer(b))throw new TypeError("argument should be a Buffer");if($||($=0),!oe&&oe!==0&&(oe=this.length),R>=b.length&&(R=b.length),R||(R=0),oe>0&&oe<$&&(oe=$),oe===$||b.length===0||this.length===0)return 0;if(R<0)throw new RangeError("targetStart out of bounds");if($<0||$>=this.length)throw new RangeError("Index out of range");if(oe<0)throw new RangeError("sourceEnd out of bounds");oe>this.length&&(oe=this.length),b.length-R<oe-$&&(oe=b.length-R+$);var be=oe-$;return this===b&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(R,$,oe):Uint8Array.prototype.set.call(b,this.subarray($,oe),R),be},h.prototype.fill=function(b,R,$,oe){if(typeof b=="string"){if(typeof R=="string"?(oe=R,R=0,$=this.length):typeof $=="string"&&(oe=$,$=this.length),oe!==void 0&&typeof oe!="string")throw new TypeError("encoding must be a string");if(typeof oe=="string"&&!h.isEncoding(oe))throw new TypeError("Unknown encoding: "+oe);if(b.length===1){var be=b.charCodeAt(0);(oe==="utf8"&&be<128||oe==="latin1")&&(b=be)}}else typeof b=="number"?b=b&255:typeof b=="boolean"&&(b=Number(b));if(R<0||this.length<R||this.length<$)throw new RangeError("Out of range index");if($<=R)return this;R=R>>>0,$=$===void 0?this.length:$>>>0,b||(b=0);var Ae;if(typeof b=="number")for(Ae=R;Ae<$;++Ae)this[Ae]=b;else{var qe=h.isBuffer(b)?b:h.from(b,oe),rt=qe.length;if(rt===0)throw new TypeError('The value "'+b+'" is invalid for argument "value"');for(Ae=0;Ae<$-R;++Ae)this[Ae+R]=qe[Ae%rt]}return this};var re=/[^+/0-9A-Za-z-_]/g;function te(L){if(L=L.split("=")[0],L=L.trim().replace(re,""),L.length<2)return"";for(;L.length%4!==0;)L=L+"=";return L}function ye(L,b){b=b||1/0;for(var R,$=L.length,oe=null,be=[],Ae=0;Ae<$;++Ae){if(R=L.charCodeAt(Ae),R>55295&&R<57344){if(!oe){if(R>56319){(b-=3)>-1&&be.push(239,191,189);continue}else if(Ae+1===$){(b-=3)>-1&&be.push(239,191,189);continue}oe=R;continue}if(R<56320){(b-=3)>-1&&be.push(239,191,189),oe=R;continue}R=(oe-55296<<10|R-56320)+65536}else oe&&(b-=3)>-1&&be.push(239,191,189);if(oe=null,R<128){if((b-=1)<0)break;be.push(R)}else if(R<2048){if((b-=2)<0)break;be.push(R>>6|192,R&63|128)}else if(R<65536){if((b-=3)<0)break;be.push(R>>12|224,R>>6&63|128,R&63|128)}else if(R<1114112){if((b-=4)<0)break;be.push(R>>18|240,R>>12&63|128,R>>6&63|128,R&63|128)}else throw new Error("Invalid code point")}return be}function Ne(L){for(var b=[],R=0;R<L.length;++R)b.push(L.charCodeAt(R)&255);return b}function Be(L,b){for(var R,$,oe,be=[],Ae=0;Ae<L.length&&!((b-=2)<0);++Ae)R=L.charCodeAt(Ae),$=R>>8,oe=R%256,be.push(oe),be.push($);return be}function F(L){return e.toByteArray(te(L))}function H(L,b,R,$){for(var oe=0;oe<$&&!(oe+R>=b.length||oe>=L.length);++oe)b[oe+R]=L[oe];return oe}function ve(L,b){return L instanceof b||L!=null&&L.constructor!=null&&L.constructor.name!=null&&L.constructor.name===b.name}function Oe(L){return L!==L}var dt=function(){for(var L="0123456789abcdef",b=new Array(256),R=0;R<16;++R)for(var $=R*16,oe=0;oe<16;++oe)b[$+oe]=L[R]+L[oe];return b}()}(Gp)),Gp}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var aE;function XT(){return aE||(aE=1,function(r,e){var t=OI(),i=t.Buffer;function a(c,h){for(var p in c)h[p]=c[p]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?r.exports=t:(a(t,e),e.Buffer=l);function l(c,h,p){return i(c,h,p)}l.prototype=Object.create(i.prototype),a(i,l),l.from=function(c,h,p){if(typeof c=="number")throw new TypeError("Argument must not be a number");return i(c,h,p)},l.alloc=function(c,h,p){if(typeof c!="number")throw new TypeError("Argument must be a number");var g=i(c);return h!==void 0?typeof p=="string"?g.fill(h,p):g.fill(h):g.fill(0),g},l.allocUnsafe=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return i(c)},l.allocUnsafeSlow=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(c)}}(ch,ch.exports)),ch.exports}var oE;function xI(){if(oE)return uh.exports;oE=1;var r=65536,e=4294967295;function t(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var i=XT().Buffer,a=globalThis.crypto||globalThis.msCrypto;a&&a.getRandomValues?uh.exports=l:uh.exports=t;function l(c,h){if(c>e)throw new RangeError("requested too many random bytes");var p=i.allocUnsafe(c);if(c>0)if(c>r)for(var g=0;g<c;g+=r)a.getRandomValues(p.slice(g,g+r));else a.getRandomValues(p);return typeof h=="function"?process.nextTick(function(){h(null,p)}):p}return uh.exports}var fh={exports:{}},dh={exports:{}},lE;function ZT(){if(lE)return dh.exports;lE=1;var r=typeof Reflect=="object"?Reflect:null,e=r&&typeof r.apply=="function"?r.apply:function(q,X,V){return Function.prototype.apply.call(q,X,V)},t;r&&typeof r.ownKeys=="function"?t=r.ownKeys:Object.getOwnPropertySymbols?t=function(q){return Object.getOwnPropertyNames(q).concat(Object.getOwnPropertySymbols(q))}:t=function(q){return Object.getOwnPropertyNames(q)};function i(G){console&&console.warn&&console.warn(G)}var a=Number.isNaN||function(q){return q!==q};function l(){l.init.call(this)}dh.exports=l,dh.exports.once=O,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var c=10;function h(G){if(typeof G!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof G)}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(G){if(typeof G!="number"||G<0||a(G))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+G+".");c=G}}),l.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(q){if(typeof q!="number"||q<0||a(q))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+q+".");return this._maxListeners=q,this};function p(G){return G._maxListeners===void 0?l.defaultMaxListeners:G._maxListeners}l.prototype.getMaxListeners=function(){return p(this)},l.prototype.emit=function(q){for(var X=[],V=1;V<arguments.length;V++)X.push(arguments[V]);var M=q==="error",P=this._events;if(P!==void 0)M=M&&P.error===void 0;else if(!M)return!1;if(M){var K;if(X.length>0&&(K=X[0]),K instanceof Error)throw K;var J=new Error("Unhandled error."+(K?" ("+K.message+")":""));throw J.context=K,J}var ee=P[q];if(ee===void 0)return!1;if(typeof ee=="function")e(ee,this,X);else for(var Q=ee.length,ct=E(ee,Q),V=0;V<Q;++V)e(ct[V],this,X);return!0};function g(G,q,X,V){var M,P,K;if(h(X),P=G._events,P===void 0?(P=G._events=Object.create(null),G._eventsCount=0):(P.newListener!==void 0&&(G.emit("newListener",q,X.listener?X.listener:X),P=G._events),K=P[q]),K===void 0)K=P[q]=X,++G._eventsCount;else if(typeof K=="function"?K=P[q]=V?[X,K]:[K,X]:V?K.unshift(X):K.push(X),M=p(G),M>0&&K.length>M&&!K.warned){K.warned=!0;var J=new Error("Possible EventEmitter memory leak detected. "+K.length+" "+String(q)+" listeners added. Use emitter.setMaxListeners() to increase limit");J.name="MaxListenersExceededWarning",J.emitter=G,J.type=q,J.count=K.length,i(J)}return G}l.prototype.addListener=function(q,X){return g(this,q,X,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(q,X){return g(this,q,X,!0)};function y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function S(G,q,X){var V={fired:!1,wrapFn:void 0,target:G,type:q,listener:X},M=y.bind(V);return M.listener=X,V.wrapFn=M,M}l.prototype.once=function(q,X){return h(X),this.on(q,S(this,q,X)),this},l.prototype.prependOnceListener=function(q,X){return h(X),this.prependListener(q,S(this,q,X)),this},l.prototype.removeListener=function(q,X){var V,M,P,K,J;if(h(X),M=this._events,M===void 0)return this;if(V=M[q],V===void 0)return this;if(V===X||V.listener===X)--this._eventsCount===0?this._events=Object.create(null):(delete M[q],M.removeListener&&this.emit("removeListener",q,V.listener||X));else if(typeof V!="function"){for(P=-1,K=V.length-1;K>=0;K--)if(V[K]===X||V[K].listener===X){J=V[K].listener,P=K;break}if(P<0)return this;P===0?V.shift():I(V,P),V.length===1&&(M[q]=V[0]),M.removeListener!==void 0&&this.emit("removeListener",q,J||X)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(q){var X,V,M;if(V=this._events,V===void 0)return this;if(V.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):V[q]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete V[q]),this;if(arguments.length===0){var P=Object.keys(V),K;for(M=0;M<P.length;++M)K=P[M],K!=="removeListener"&&this.removeAllListeners(K);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(X=V[q],typeof X=="function")this.removeListener(q,X);else if(X!==void 0)for(M=X.length-1;M>=0;M--)this.removeListener(q,X[M]);return this};function T(G,q,X){var V=G._events;if(V===void 0)return[];var M=V[q];return M===void 0?[]:typeof M=="function"?X?[M.listener||M]:[M]:X?N(M):E(M,M.length)}l.prototype.listeners=function(q){return T(this,q,!0)},l.prototype.rawListeners=function(q){return T(this,q,!1)},l.listenerCount=function(G,q){return typeof G.listenerCount=="function"?G.listenerCount(q):D.call(G,q)},l.prototype.listenerCount=D;function D(G){var q=this._events;if(q!==void 0){var X=q[G];if(typeof X=="function")return 1;if(X!==void 0)return X.length}return 0}l.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function E(G,q){for(var X=new Array(q),V=0;V<q;++V)X[V]=G[V];return X}function I(G,q){for(;q+1<G.length;q++)G[q]=G[q+1];G.pop()}function N(G){for(var q=new Array(G.length),X=0;X<q.length;++X)q[X]=G[X].listener||G[X];return q}function O(G,q){return new Promise(function(X,V){function M(K){G.removeListener(q,P),V(K)}function P(){typeof G.removeListener=="function"&&G.removeListener("error",M),X([].slice.call(arguments))}j(G,q,P,{once:!0}),q!=="error"&&B(G,M,{once:!0})})}function B(G,q,X){typeof G.on=="function"&&j(G,"error",q,X)}function j(G,q,X,V){if(typeof G.on=="function")V.once?G.once(q,X):G.on(q,X);else if(typeof G.addEventListener=="function")G.addEventListener(q,function M(P){V.once&&G.removeEventListener(q,M),X(P)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof G)}return dh.exports}var $p,uE;function JT(){return uE||(uE=1,$p=ZT().EventEmitter),$p}var Kp={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var cE;function hf(){return cE||(cE=1,function(r){const e=YT(),t=WT(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=h,r.SlowBuffer=B,r.INSPECT_MAX_BYTES=50;const a=2147483647;r.kMaxLength=a,h.TYPED_ARRAY_SUPPORT=l(),!h.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const x=new Uint8Array(1),_={foo:function(){return 42}};return Object.setPrototypeOf(_,Uint8Array.prototype),Object.setPrototypeOf(x,_),x.foo()===42}catch{return!1}}Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}});function c(x){if(x>a)throw new RangeError('The value "'+x+'" is invalid for option "size"');const _=new Uint8Array(x);return Object.setPrototypeOf(_,h.prototype),_}function h(x,_,w){if(typeof x=="number"){if(typeof _=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return S(x)}return p(x,_,w)}h.poolSize=8192;function p(x,_,w){if(typeof x=="string")return T(x,_);if(ArrayBuffer.isView(x))return E(x);if(x==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof x);if(Ae(x,ArrayBuffer)||x&&Ae(x.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ae(x,SharedArrayBuffer)||x&&Ae(x.buffer,SharedArrayBuffer)))return I(x,_,w);if(typeof x=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const z=x.valueOf&&x.valueOf();if(z!=null&&z!==x)return h.from(z,_,w);const ie=N(x);if(ie)return ie;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof x[Symbol.toPrimitive]=="function")return h.from(x[Symbol.toPrimitive]("string"),_,w);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof x)}h.from=function(x,_,w){return p(x,_,w)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array);function g(x){if(typeof x!="number")throw new TypeError('"size" argument must be of type number');if(x<0)throw new RangeError('The value "'+x+'" is invalid for option "size"')}function y(x,_,w){return g(x),x<=0?c(x):_!==void 0?typeof w=="string"?c(x).fill(_,w):c(x).fill(_):c(x)}h.alloc=function(x,_,w){return y(x,_,w)};function S(x){return g(x),c(x<0?0:O(x)|0)}h.allocUnsafe=function(x){return S(x)},h.allocUnsafeSlow=function(x){return S(x)};function T(x,_){if((typeof _!="string"||_==="")&&(_="utf8"),!h.isEncoding(_))throw new TypeError("Unknown encoding: "+_);const w=j(x,_)|0;let z=c(w);const ie=z.write(x,_);return ie!==w&&(z=z.slice(0,ie)),z}function D(x){const _=x.length<0?0:O(x.length)|0,w=c(_);for(let z=0;z<_;z+=1)w[z]=x[z]&255;return w}function E(x){if(Ae(x,Uint8Array)){const _=new Uint8Array(x);return I(_.buffer,_.byteOffset,_.byteLength)}return D(x)}function I(x,_,w){if(_<0||x.byteLength<_)throw new RangeError('"offset" is outside of buffer bounds');if(x.byteLength<_+(w||0))throw new RangeError('"length" is outside of buffer bounds');let z;return _===void 0&&w===void 0?z=new Uint8Array(x):w===void 0?z=new Uint8Array(x,_):z=new Uint8Array(x,_,w),Object.setPrototypeOf(z,h.prototype),z}function N(x){if(h.isBuffer(x)){const _=O(x.length)|0,w=c(_);return w.length===0||x.copy(w,0,0,_),w}if(x.length!==void 0)return typeof x.length!="number"||qe(x.length)?c(0):D(x);if(x.type==="Buffer"&&Array.isArray(x.data))return D(x.data)}function O(x){if(x>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return x|0}function B(x){return+x!=x&&(x=0),h.alloc(+x)}h.isBuffer=function(_){return _!=null&&_._isBuffer===!0&&_!==h.prototype},h.compare=function(_,w){if(Ae(_,Uint8Array)&&(_=h.from(_,_.offset,_.byteLength)),Ae(w,Uint8Array)&&(w=h.from(w,w.offset,w.byteLength)),!h.isBuffer(_)||!h.isBuffer(w))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(_===w)return 0;let z=_.length,ie=w.length;for(let he=0,_e=Math.min(z,ie);he<_e;++he)if(_[he]!==w[he]){z=_[he],ie=w[he];break}return z<ie?-1:ie<z?1:0},h.isEncoding=function(_){switch(String(_).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(_,w){if(!Array.isArray(_))throw new TypeError('"list" argument must be an Array of Buffers');if(_.length===0)return h.alloc(0);let z;if(w===void 0)for(w=0,z=0;z<_.length;++z)w+=_[z].length;const ie=h.allocUnsafe(w);let he=0;for(z=0;z<_.length;++z){let _e=_[z];if(Ae(_e,Uint8Array))he+_e.length>ie.length?(h.isBuffer(_e)||(_e=h.from(_e)),_e.copy(ie,he)):Uint8Array.prototype.set.call(ie,_e,he);else if(h.isBuffer(_e))_e.copy(ie,he);else throw new TypeError('"list" argument must be an Array of Buffers');he+=_e.length}return ie};function j(x,_){if(h.isBuffer(x))return x.length;if(ArrayBuffer.isView(x)||Ae(x,ArrayBuffer))return x.byteLength;if(typeof x!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof x);const w=x.length,z=arguments.length>2&&arguments[2]===!0;if(!z&&w===0)return 0;let ie=!1;for(;;)switch(_){case"ascii":case"latin1":case"binary":return w;case"utf8":case"utf-8":return b(x).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w*2;case"hex":return w>>>1;case"base64":return oe(x).length;default:if(ie)return z?-1:b(x).length;_=(""+_).toLowerCase(),ie=!0}}h.byteLength=j;function G(x,_,w){let z=!1;if((_===void 0||_<0)&&(_=0),_>this.length||((w===void 0||w>this.length)&&(w=this.length),w<=0)||(w>>>=0,_>>>=0,w<=_))return"";for(x||(x="utf8");;)switch(x){case"hex":return Xe(this,_,w);case"utf8":case"utf-8":return ct(this,_,w);case"ascii":return De(this,_,w);case"latin1":case"binary":return Me(this,_,w);case"base64":return Q(this,_,w);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,_,w);default:if(z)throw new TypeError("Unknown encoding: "+x);x=(x+"").toLowerCase(),z=!0}}h.prototype._isBuffer=!0;function q(x,_,w){const z=x[_];x[_]=x[w],x[w]=z}h.prototype.swap16=function(){const _=this.length;if(_%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let w=0;w<_;w+=2)q(this,w,w+1);return this},h.prototype.swap32=function(){const _=this.length;if(_%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let w=0;w<_;w+=4)q(this,w,w+3),q(this,w+1,w+2);return this},h.prototype.swap64=function(){const _=this.length;if(_%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let w=0;w<_;w+=8)q(this,w,w+7),q(this,w+1,w+6),q(this,w+2,w+5),q(this,w+3,w+4);return this},h.prototype.toString=function(){const _=this.length;return _===0?"":arguments.length===0?ct(this,0,_):G.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(_){if(!h.isBuffer(_))throw new TypeError("Argument must be a Buffer");return this===_?!0:h.compare(this,_)===0},h.prototype.inspect=function(){let _="";const w=r.INSPECT_MAX_BYTES;return _=this.toString("hex",0,w).replace(/(.{2})/g,"$1 ").trim(),this.length>w&&(_+=" ... "),"<Buffer "+_+">"},i&&(h.prototype[i]=h.prototype.inspect),h.prototype.compare=function(_,w,z,ie,he){if(Ae(_,Uint8Array)&&(_=h.from(_,_.offset,_.byteLength)),!h.isBuffer(_))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof _);if(w===void 0&&(w=0),z===void 0&&(z=_?_.length:0),ie===void 0&&(ie=0),he===void 0&&(he=this.length),w<0||z>_.length||ie<0||he>this.length)throw new RangeError("out of range index");if(ie>=he&&w>=z)return 0;if(ie>=he)return-1;if(w>=z)return 1;if(w>>>=0,z>>>=0,ie>>>=0,he>>>=0,this===_)return 0;let _e=he-ie,$e=z-w;const pt=Math.min(_e,$e),bt=this.slice(ie,he),St=_.slice(w,z);for(let yt=0;yt<pt;++yt)if(bt[yt]!==St[yt]){_e=bt[yt],$e=St[yt];break}return _e<$e?-1:$e<_e?1:0};function X(x,_,w,z,ie){if(x.length===0)return-1;if(typeof w=="string"?(z=w,w=0):w>2147483647?w=2147483647:w<-2147483648&&(w=-2147483648),w=+w,qe(w)&&(w=ie?0:x.length-1),w<0&&(w=x.length+w),w>=x.length){if(ie)return-1;w=x.length-1}else if(w<0)if(ie)w=0;else return-1;if(typeof _=="string"&&(_=h.from(_,z)),h.isBuffer(_))return _.length===0?-1:V(x,_,w,z,ie);if(typeof _=="number")return _=_&255,typeof Uint8Array.prototype.indexOf=="function"?ie?Uint8Array.prototype.indexOf.call(x,_,w):Uint8Array.prototype.lastIndexOf.call(x,_,w):V(x,[_],w,z,ie);throw new TypeError("val must be string, number or Buffer")}function V(x,_,w,z,ie){let he=1,_e=x.length,$e=_.length;if(z!==void 0&&(z=String(z).toLowerCase(),z==="ucs2"||z==="ucs-2"||z==="utf16le"||z==="utf-16le")){if(x.length<2||_.length<2)return-1;he=2,_e/=2,$e/=2,w/=2}function pt(St,yt){return he===1?St[yt]:St.readUInt16BE(yt*he)}let bt;if(ie){let St=-1;for(bt=w;bt<_e;bt++)if(pt(x,bt)===pt(_,St===-1?0:bt-St)){if(St===-1&&(St=bt),bt-St+1===$e)return St*he}else St!==-1&&(bt-=bt-St),St=-1}else for(w+$e>_e&&(w=_e-$e),bt=w;bt>=0;bt--){let St=!0;for(let yt=0;yt<$e;yt++)if(pt(x,bt+yt)!==pt(_,yt)){St=!1;break}if(St)return bt}return-1}h.prototype.includes=function(_,w,z){return this.indexOf(_,w,z)!==-1},h.prototype.indexOf=function(_,w,z){return X(this,_,w,z,!0)},h.prototype.lastIndexOf=function(_,w,z){return X(this,_,w,z,!1)};function M(x,_,w,z){w=Number(w)||0;const ie=x.length-w;z?(z=Number(z),z>ie&&(z=ie)):z=ie;const he=_.length;z>he/2&&(z=he/2);let _e;for(_e=0;_e<z;++_e){const $e=parseInt(_.substr(_e*2,2),16);if(qe($e))return _e;x[w+_e]=$e}return _e}function P(x,_,w,z){return be(b(_,x.length-w),x,w,z)}function K(x,_,w,z){return be(R(_),x,w,z)}function J(x,_,w,z){return be(oe(_),x,w,z)}function ee(x,_,w,z){return be($(_,x.length-w),x,w,z)}h.prototype.write=function(_,w,z,ie){if(w===void 0)ie="utf8",z=this.length,w=0;else if(z===void 0&&typeof w=="string")ie=w,z=this.length,w=0;else if(isFinite(w))w=w>>>0,isFinite(z)?(z=z>>>0,ie===void 0&&(ie="utf8")):(ie=z,z=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const he=this.length-w;if((z===void 0||z>he)&&(z=he),_.length>0&&(z<0||w<0)||w>this.length)throw new RangeError("Attempt to write outside buffer bounds");ie||(ie="utf8");let _e=!1;for(;;)switch(ie){case"hex":return M(this,_,w,z);case"utf8":case"utf-8":return P(this,_,w,z);case"ascii":case"latin1":case"binary":return K(this,_,w,z);case"base64":return J(this,_,w,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,_,w,z);default:if(_e)throw new TypeError("Unknown encoding: "+ie);ie=(""+ie).toLowerCase(),_e=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Q(x,_,w){return _===0&&w===x.length?e.fromByteArray(x):e.fromByteArray(x.slice(_,w))}function ct(x,_,w){w=Math.min(x.length,w);const z=[];let ie=_;for(;ie<w;){const he=x[ie];let _e=null,$e=he>239?4:he>223?3:he>191?2:1;if(ie+$e<=w){let pt,bt,St,yt;switch($e){case 1:he<128&&(_e=he);break;case 2:pt=x[ie+1],(pt&192)===128&&(yt=(he&31)<<6|pt&63,yt>127&&(_e=yt));break;case 3:pt=x[ie+1],bt=x[ie+2],(pt&192)===128&&(bt&192)===128&&(yt=(he&15)<<12|(pt&63)<<6|bt&63,yt>2047&&(yt<55296||yt>57343)&&(_e=yt));break;case 4:pt=x[ie+1],bt=x[ie+2],St=x[ie+3],(pt&192)===128&&(bt&192)===128&&(St&192)===128&&(yt=(he&15)<<18|(pt&63)<<12|(bt&63)<<6|St&63,yt>65535&&yt<1114112&&(_e=yt))}}_e===null?(_e=65533,$e=1):_e>65535&&(_e-=65536,z.push(_e>>>10&1023|55296),_e=56320|_e&1023),z.push(_e),ie+=$e}return ge(z)}const nt=4096;function ge(x){const _=x.length;if(_<=nt)return String.fromCharCode.apply(String,x);let w="",z=0;for(;z<_;)w+=String.fromCharCode.apply(String,x.slice(z,z+=nt));return w}function De(x,_,w){let z="";w=Math.min(x.length,w);for(let ie=_;ie<w;++ie)z+=String.fromCharCode(x[ie]&127);return z}function Me(x,_,w){let z="";w=Math.min(x.length,w);for(let ie=_;ie<w;++ie)z+=String.fromCharCode(x[ie]);return z}function Xe(x,_,w){const z=x.length;(!_||_<0)&&(_=0),(!w||w<0||w>z)&&(w=z);let ie="";for(let he=_;he<w;++he)ie+=rt[x[he]];return ie}function Z(x,_,w){const z=x.slice(_,w);let ie="";for(let he=0;he<z.length-1;he+=2)ie+=String.fromCharCode(z[he]+z[he+1]*256);return ie}h.prototype.slice=function(_,w){const z=this.length;_=~~_,w=w===void 0?z:~~w,_<0?(_+=z,_<0&&(_=0)):_>z&&(_=z),w<0?(w+=z,w<0&&(w=0)):w>z&&(w=z),w<_&&(w=_);const ie=this.subarray(_,w);return Object.setPrototypeOf(ie,h.prototype),ie};function de(x,_,w){if(x%1!==0||x<0)throw new RangeError("offset is not uint");if(x+_>w)throw new RangeError("Trying to access beyond buffer length")}h.prototype.readUintLE=h.prototype.readUIntLE=function(_,w,z){_=_>>>0,w=w>>>0,z||de(_,w,this.length);let ie=this[_],he=1,_e=0;for(;++_e<w&&(he*=256);)ie+=this[_+_e]*he;return ie},h.prototype.readUintBE=h.prototype.readUIntBE=function(_,w,z){_=_>>>0,w=w>>>0,z||de(_,w,this.length);let ie=this[_+--w],he=1;for(;w>0&&(he*=256);)ie+=this[_+--w]*he;return ie},h.prototype.readUint8=h.prototype.readUInt8=function(_,w){return _=_>>>0,w||de(_,1,this.length),this[_]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(_,w){return _=_>>>0,w||de(_,2,this.length),this[_]|this[_+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(_,w){return _=_>>>0,w||de(_,2,this.length),this[_]<<8|this[_+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(_,w){return _=_>>>0,w||de(_,4,this.length),(this[_]|this[_+1]<<8|this[_+2]<<16)+this[_+3]*16777216},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(_,w){return _=_>>>0,w||de(_,4,this.length),this[_]*16777216+(this[_+1]<<16|this[_+2]<<8|this[_+3])},h.prototype.readBigUInt64LE=ze(function(_){_=_>>>0,ve(_,"offset");const w=this[_],z=this[_+7];(w===void 0||z===void 0)&&Oe(_,this.length-8);const ie=w+this[++_]*2**8+this[++_]*2**16+this[++_]*2**24,he=this[++_]+this[++_]*2**8+this[++_]*2**16+z*2**24;return BigInt(ie)+(BigInt(he)<<BigInt(32))}),h.prototype.readBigUInt64BE=ze(function(_){_=_>>>0,ve(_,"offset");const w=this[_],z=this[_+7];(w===void 0||z===void 0)&&Oe(_,this.length-8);const ie=w*2**24+this[++_]*2**16+this[++_]*2**8+this[++_],he=this[++_]*2**24+this[++_]*2**16+this[++_]*2**8+z;return(BigInt(ie)<<BigInt(32))+BigInt(he)}),h.prototype.readIntLE=function(_,w,z){_=_>>>0,w=w>>>0,z||de(_,w,this.length);let ie=this[_],he=1,_e=0;for(;++_e<w&&(he*=256);)ie+=this[_+_e]*he;return he*=128,ie>=he&&(ie-=Math.pow(2,8*w)),ie},h.prototype.readIntBE=function(_,w,z){_=_>>>0,w=w>>>0,z||de(_,w,this.length);let ie=w,he=1,_e=this[_+--ie];for(;ie>0&&(he*=256);)_e+=this[_+--ie]*he;return he*=128,_e>=he&&(_e-=Math.pow(2,8*w)),_e},h.prototype.readInt8=function(_,w){return _=_>>>0,w||de(_,1,this.length),this[_]&128?(255-this[_]+1)*-1:this[_]},h.prototype.readInt16LE=function(_,w){_=_>>>0,w||de(_,2,this.length);const z=this[_]|this[_+1]<<8;return z&32768?z|4294901760:z},h.prototype.readInt16BE=function(_,w){_=_>>>0,w||de(_,2,this.length);const z=this[_+1]|this[_]<<8;return z&32768?z|4294901760:z},h.prototype.readInt32LE=function(_,w){return _=_>>>0,w||de(_,4,this.length),this[_]|this[_+1]<<8|this[_+2]<<16|this[_+3]<<24},h.prototype.readInt32BE=function(_,w){return _=_>>>0,w||de(_,4,this.length),this[_]<<24|this[_+1]<<16|this[_+2]<<8|this[_+3]},h.prototype.readBigInt64LE=ze(function(_){_=_>>>0,ve(_,"offset");const w=this[_],z=this[_+7];(w===void 0||z===void 0)&&Oe(_,this.length-8);const ie=this[_+4]+this[_+5]*2**8+this[_+6]*2**16+(z<<24);return(BigInt(ie)<<BigInt(32))+BigInt(w+this[++_]*2**8+this[++_]*2**16+this[++_]*2**24)}),h.prototype.readBigInt64BE=ze(function(_){_=_>>>0,ve(_,"offset");const w=this[_],z=this[_+7];(w===void 0||z===void 0)&&Oe(_,this.length-8);const ie=(w<<24)+this[++_]*2**16+this[++_]*2**8+this[++_];return(BigInt(ie)<<BigInt(32))+BigInt(this[++_]*2**24+this[++_]*2**16+this[++_]*2**8+z)}),h.prototype.readFloatLE=function(_,w){return _=_>>>0,w||de(_,4,this.length),t.read(this,_,!0,23,4)},h.prototype.readFloatBE=function(_,w){return _=_>>>0,w||de(_,4,this.length),t.read(this,_,!1,23,4)},h.prototype.readDoubleLE=function(_,w){return _=_>>>0,w||de(_,8,this.length),t.read(this,_,!0,52,8)},h.prototype.readDoubleBE=function(_,w){return _=_>>>0,w||de(_,8,this.length),t.read(this,_,!1,52,8)};function we(x,_,w,z,ie,he){if(!h.isBuffer(x))throw new TypeError('"buffer" argument must be a Buffer instance');if(_>ie||_<he)throw new RangeError('"value" argument is out of bounds');if(w+z>x.length)throw new RangeError("Index out of range")}h.prototype.writeUintLE=h.prototype.writeUIntLE=function(_,w,z,ie){if(_=+_,w=w>>>0,z=z>>>0,!ie){const $e=Math.pow(2,8*z)-1;we(this,_,w,z,$e,0)}let he=1,_e=0;for(this[w]=_&255;++_e<z&&(he*=256);)this[w+_e]=_/he&255;return w+z},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(_,w,z,ie){if(_=+_,w=w>>>0,z=z>>>0,!ie){const $e=Math.pow(2,8*z)-1;we(this,_,w,z,$e,0)}let he=z-1,_e=1;for(this[w+he]=_&255;--he>=0&&(_e*=256);)this[w+he]=_/_e&255;return w+z},h.prototype.writeUint8=h.prototype.writeUInt8=function(_,w,z){return _=+_,w=w>>>0,z||we(this,_,w,1,255,0),this[w]=_&255,w+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(_,w,z){return _=+_,w=w>>>0,z||we(this,_,w,2,65535,0),this[w]=_&255,this[w+1]=_>>>8,w+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(_,w,z){return _=+_,w=w>>>0,z||we(this,_,w,2,65535,0),this[w]=_>>>8,this[w+1]=_&255,w+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(_,w,z){return _=+_,w=w>>>0,z||we(this,_,w,4,4294967295,0),this[w+3]=_>>>24,this[w+2]=_>>>16,this[w+1]=_>>>8,this[w]=_&255,w+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(_,w,z){return _=+_,w=w>>>0,z||we(this,_,w,4,4294967295,0),this[w]=_>>>24,this[w+1]=_>>>16,this[w+2]=_>>>8,this[w+3]=_&255,w+4};function Ie(x,_,w,z,ie){H(_,z,ie,x,w,7);let he=Number(_&BigInt(4294967295));x[w++]=he,he=he>>8,x[w++]=he,he=he>>8,x[w++]=he,he=he>>8,x[w++]=he;let _e=Number(_>>BigInt(32)&BigInt(4294967295));return x[w++]=_e,_e=_e>>8,x[w++]=_e,_e=_e>>8,x[w++]=_e,_e=_e>>8,x[w++]=_e,w}function ke(x,_,w,z,ie){H(_,z,ie,x,w,7);let he=Number(_&BigInt(4294967295));x[w+7]=he,he=he>>8,x[w+6]=he,he=he>>8,x[w+5]=he,he=he>>8,x[w+4]=he;let _e=Number(_>>BigInt(32)&BigInt(4294967295));return x[w+3]=_e,_e=_e>>8,x[w+2]=_e,_e=_e>>8,x[w+1]=_e,_e=_e>>8,x[w]=_e,w+8}h.prototype.writeBigUInt64LE=ze(function(_,w=0){return Ie(this,_,w,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=ze(function(_,w=0){return ke(this,_,w,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(_,w,z,ie){if(_=+_,w=w>>>0,!ie){const pt=Math.pow(2,8*z-1);we(this,_,w,z,pt-1,-pt)}let he=0,_e=1,$e=0;for(this[w]=_&255;++he<z&&(_e*=256);)_<0&&$e===0&&this[w+he-1]!==0&&($e=1),this[w+he]=(_/_e>>0)-$e&255;return w+z},h.prototype.writeIntBE=function(_,w,z,ie){if(_=+_,w=w>>>0,!ie){const pt=Math.pow(2,8*z-1);we(this,_,w,z,pt-1,-pt)}let he=z-1,_e=1,$e=0;for(this[w+he]=_&255;--he>=0&&(_e*=256);)_<0&&$e===0&&this[w+he+1]!==0&&($e=1),this[w+he]=(_/_e>>0)-$e&255;return w+z},h.prototype.writeInt8=function(_,w,z){return _=+_,w=w>>>0,z||we(this,_,w,1,127,-128),_<0&&(_=255+_+1),this[w]=_&255,w+1},h.prototype.writeInt16LE=function(_,w,z){return _=+_,w=w>>>0,z||we(this,_,w,2,32767,-32768),this[w]=_&255,this[w+1]=_>>>8,w+2},h.prototype.writeInt16BE=function(_,w,z){return _=+_,w=w>>>0,z||we(this,_,w,2,32767,-32768),this[w]=_>>>8,this[w+1]=_&255,w+2},h.prototype.writeInt32LE=function(_,w,z){return _=+_,w=w>>>0,z||we(this,_,w,4,2147483647,-2147483648),this[w]=_&255,this[w+1]=_>>>8,this[w+2]=_>>>16,this[w+3]=_>>>24,w+4},h.prototype.writeInt32BE=function(_,w,z){return _=+_,w=w>>>0,z||we(this,_,w,4,2147483647,-2147483648),_<0&&(_=4294967295+_+1),this[w]=_>>>24,this[w+1]=_>>>16,this[w+2]=_>>>8,this[w+3]=_&255,w+4},h.prototype.writeBigInt64LE=ze(function(_,w=0){return Ie(this,_,w,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=ze(function(_,w=0){return ke(this,_,w,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Fe(x,_,w,z,ie,he){if(w+z>x.length)throw new RangeError("Index out of range");if(w<0)throw new RangeError("Index out of range")}function re(x,_,w,z,ie){return _=+_,w=w>>>0,ie||Fe(x,_,w,4),t.write(x,_,w,z,23,4),w+4}h.prototype.writeFloatLE=function(_,w,z){return re(this,_,w,!0,z)},h.prototype.writeFloatBE=function(_,w,z){return re(this,_,w,!1,z)};function te(x,_,w,z,ie){return _=+_,w=w>>>0,ie||Fe(x,_,w,8),t.write(x,_,w,z,52,8),w+8}h.prototype.writeDoubleLE=function(_,w,z){return te(this,_,w,!0,z)},h.prototype.writeDoubleBE=function(_,w,z){return te(this,_,w,!1,z)},h.prototype.copy=function(_,w,z,ie){if(!h.isBuffer(_))throw new TypeError("argument should be a Buffer");if(z||(z=0),!ie&&ie!==0&&(ie=this.length),w>=_.length&&(w=_.length),w||(w=0),ie>0&&ie<z&&(ie=z),ie===z||_.length===0||this.length===0)return 0;if(w<0)throw new RangeError("targetStart out of bounds");if(z<0||z>=this.length)throw new RangeError("Index out of range");if(ie<0)throw new RangeError("sourceEnd out of bounds");ie>this.length&&(ie=this.length),_.length-w<ie-z&&(ie=_.length-w+z);const he=ie-z;return this===_&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(w,z,ie):Uint8Array.prototype.set.call(_,this.subarray(z,ie),w),he},h.prototype.fill=function(_,w,z,ie){if(typeof _=="string"){if(typeof w=="string"?(ie=w,w=0,z=this.length):typeof z=="string"&&(ie=z,z=this.length),ie!==void 0&&typeof ie!="string")throw new TypeError("encoding must be a string");if(typeof ie=="string"&&!h.isEncoding(ie))throw new TypeError("Unknown encoding: "+ie);if(_.length===1){const _e=_.charCodeAt(0);(ie==="utf8"&&_e<128||ie==="latin1")&&(_=_e)}}else typeof _=="number"?_=_&255:typeof _=="boolean"&&(_=Number(_));if(w<0||this.length<w||this.length<z)throw new RangeError("Out of range index");if(z<=w)return this;w=w>>>0,z=z===void 0?this.length:z>>>0,_||(_=0);let he;if(typeof _=="number")for(he=w;he<z;++he)this[he]=_;else{const _e=h.isBuffer(_)?_:h.from(_,ie),$e=_e.length;if($e===0)throw new TypeError('The value "'+_+'" is invalid for argument "value"');for(he=0;he<z-w;++he)this[he+w]=_e[he%$e]}return this};const ye={};function Ne(x,_,w){ye[x]=class extends w{constructor(){super(),Object.defineProperty(this,"message",{value:_.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${x}]`,this.stack,delete this.name}get code(){return x}set code(ie){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ie,writable:!0})}toString(){return`${this.name} [${x}]: ${this.message}`}}}Ne("ERR_BUFFER_OUT_OF_BOUNDS",function(x){return x?`${x} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ne("ERR_INVALID_ARG_TYPE",function(x,_){return`The "${x}" argument must be of type number. Received type ${typeof _}`},TypeError),Ne("ERR_OUT_OF_RANGE",function(x,_,w){let z=`The value of "${x}" is out of range.`,ie=w;return Number.isInteger(w)&&Math.abs(w)>2**32?ie=Be(String(w)):typeof w=="bigint"&&(ie=String(w),(w>BigInt(2)**BigInt(32)||w<-(BigInt(2)**BigInt(32)))&&(ie=Be(ie)),ie+="n"),z+=` It must be ${_}. Received ${ie}`,z},RangeError);function Be(x){let _="",w=x.length;const z=x[0]==="-"?1:0;for(;w>=z+4;w-=3)_=`_${x.slice(w-3,w)}${_}`;return`${x.slice(0,w)}${_}`}function F(x,_,w){ve(_,"offset"),(x[_]===void 0||x[_+w]===void 0)&&Oe(_,x.length-(w+1))}function H(x,_,w,z,ie,he){if(x>w||x<_){const _e=typeof _=="bigint"?"n":"";let $e;throw _===0||_===BigInt(0)?$e=`>= 0${_e} and < 2${_e} ** ${(he+1)*8}${_e}`:$e=`>= -(2${_e} ** ${(he+1)*8-1}${_e}) and < 2 ** ${(he+1)*8-1}${_e}`,new ye.ERR_OUT_OF_RANGE("value",$e,x)}F(z,ie,he)}function ve(x,_){if(typeof x!="number")throw new ye.ERR_INVALID_ARG_TYPE(_,"number",x)}function Oe(x,_,w){throw Math.floor(x)!==x?(ve(x,w),new ye.ERR_OUT_OF_RANGE("offset","an integer",x)):_<0?new ye.ERR_BUFFER_OUT_OF_BOUNDS:new ye.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${_}`,x)}const dt=/[^+/0-9A-Za-z-_]/g;function L(x){if(x=x.split("=")[0],x=x.trim().replace(dt,""),x.length<2)return"";for(;x.length%4!==0;)x=x+"=";return x}function b(x,_){_=_||1/0;let w;const z=x.length;let ie=null;const he=[];for(let _e=0;_e<z;++_e){if(w=x.charCodeAt(_e),w>55295&&w<57344){if(!ie){if(w>56319){(_-=3)>-1&&he.push(239,191,189);continue}else if(_e+1===z){(_-=3)>-1&&he.push(239,191,189);continue}ie=w;continue}if(w<56320){(_-=3)>-1&&he.push(239,191,189),ie=w;continue}w=(ie-55296<<10|w-56320)+65536}else ie&&(_-=3)>-1&&he.push(239,191,189);if(ie=null,w<128){if((_-=1)<0)break;he.push(w)}else if(w<2048){if((_-=2)<0)break;he.push(w>>6|192,w&63|128)}else if(w<65536){if((_-=3)<0)break;he.push(w>>12|224,w>>6&63|128,w&63|128)}else if(w<1114112){if((_-=4)<0)break;he.push(w>>18|240,w>>12&63|128,w>>6&63|128,w&63|128)}else throw new Error("Invalid code point")}return he}function R(x){const _=[];for(let w=0;w<x.length;++w)_.push(x.charCodeAt(w)&255);return _}function $(x,_){let w,z,ie;const he=[];for(let _e=0;_e<x.length&&!((_-=2)<0);++_e)w=x.charCodeAt(_e),z=w>>8,ie=w%256,he.push(ie),he.push(z);return he}function oe(x){return e.toByteArray(L(x))}function be(x,_,w,z){let ie;for(ie=0;ie<z&&!(ie+w>=_.length||ie>=x.length);++ie)_[ie+w]=x[ie];return ie}function Ae(x,_){return x instanceof _||x!=null&&x.constructor!=null&&x.constructor.name!=null&&x.constructor.name===_.name}function qe(x){return x!==x}const rt=function(){const x="0123456789abcdef",_=new Array(256);for(let w=0;w<16;++w){const z=w*16;for(let ie=0;ie<16;++ie)_[z+ie]=x[w]+x[ie]}return _}();function ze(x){return typeof BigInt>"u"?He:x}function He(){throw new Error("BigInt not supported")}}(Kp)),Kp}const NI={},MI=Object.freeze(Object.defineProperty({__proto__:null,default:NI},Symbol.toStringTag,{value:"Module"})),ew=NA(MI);var Qp,hE;function kI(){if(hE)return Qp;hE=1;function r(E,I){var N=Object.keys(E);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(E);I&&(O=O.filter(function(B){return Object.getOwnPropertyDescriptor(E,B).enumerable})),N.push.apply(N,O)}return N}function e(E){for(var I=1;I<arguments.length;I++){var N=arguments[I]!=null?arguments[I]:{};I%2?r(Object(N),!0).forEach(function(O){t(E,O,N[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(N)):r(Object(N)).forEach(function(O){Object.defineProperty(E,O,Object.getOwnPropertyDescriptor(N,O))})}return E}function t(E,I,N){return I=c(I),I in E?Object.defineProperty(E,I,{value:N,enumerable:!0,configurable:!0,writable:!0}):E[I]=N,E}function i(E,I){if(!(E instanceof I))throw new TypeError("Cannot call a class as a function")}function a(E,I){for(var N=0;N<I.length;N++){var O=I[N];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(E,c(O.key),O)}}function l(E,I,N){return I&&a(E.prototype,I),Object.defineProperty(E,"prototype",{writable:!1}),E}function c(E){var I=h(E,"string");return typeof I=="symbol"?I:String(I)}function h(E,I){if(typeof E!="object"||E===null)return E;var N=E[Symbol.toPrimitive];if(N!==void 0){var O=N.call(E,I);if(typeof O!="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(E)}var p=hf(),g=p.Buffer,y=ew,S=y.inspect,T=S&&S.custom||"inspect";function D(E,I,N){g.prototype.copy.call(E,I,N)}return Qp=function(){function E(){i(this,E),this.head=null,this.tail=null,this.length=0}return l(E,[{key:"push",value:function(N){var O={data:N,next:null};this.length>0?this.tail.next=O:this.head=O,this.tail=O,++this.length}},{key:"unshift",value:function(N){var O={data:N,next:this.head};this.length===0&&(this.tail=O),this.head=O,++this.length}},{key:"shift",value:function(){if(this.length!==0){var N=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,N}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(N){if(this.length===0)return"";for(var O=this.head,B=""+O.data;O=O.next;)B+=N+O.data;return B}},{key:"concat",value:function(N){if(this.length===0)return g.alloc(0);for(var O=g.allocUnsafe(N>>>0),B=this.head,j=0;B;)D(B.data,O,j),j+=B.data.length,B=B.next;return O}},{key:"consume",value:function(N,O){var B;return N<this.head.data.length?(B=this.head.data.slice(0,N),this.head.data=this.head.data.slice(N)):N===this.head.data.length?B=this.shift():B=O?this._getString(N):this._getBuffer(N),B}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(N){var O=this.head,B=1,j=O.data;for(N-=j.length;O=O.next;){var G=O.data,q=N>G.length?G.length:N;if(q===G.length?j+=G:j+=G.slice(0,N),N-=q,N===0){q===G.length?(++B,O.next?this.head=O.next:this.head=this.tail=null):(this.head=O,O.data=G.slice(q));break}++B}return this.length-=B,j}},{key:"_getBuffer",value:function(N){var O=g.allocUnsafe(N),B=this.head,j=1;for(B.data.copy(O),N-=B.data.length;B=B.next;){var G=B.data,q=N>G.length?G.length:N;if(G.copy(O,O.length-N,0,q),N-=q,N===0){q===G.length?(++j,B.next?this.head=B.next:this.head=this.tail=null):(this.head=B,B.data=G.slice(q));break}++j}return this.length-=j,O}},{key:T,value:function(N,O){return S(this,e(e({},O),{},{depth:0,customInspect:!1}))}}]),E}(),Qp}var Yp,fE;function tw(){if(fE)return Yp;fE=1;function r(c,h){var p=this,g=this._readableState&&this._readableState.destroyed,y=this._writableState&&this._writableState.destroyed;return g||y?(h?h(c):c&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(a,this,c)):process.nextTick(a,this,c)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(c||null,function(S){!h&&S?p._writableState?p._writableState.errorEmitted?process.nextTick(t,p):(p._writableState.errorEmitted=!0,process.nextTick(e,p,S)):process.nextTick(e,p,S):h?(process.nextTick(t,p),h(S)):process.nextTick(t,p)}),this)}function e(c,h){a(c,h),t(c)}function t(c){c._writableState&&!c._writableState.emitClose||c._readableState&&!c._readableState.emitClose||c.emit("close")}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function a(c,h){c.emit("error",h)}function l(c,h){var p=c._readableState,g=c._writableState;p&&p.autoDestroy||g&&g.autoDestroy?c.destroy(h):c.emit("error",h)}return Yp={destroy:r,undestroy:i,errorOrDestroy:l},Yp}var Wp={},dE;function qo(){if(dE)return Wp;dE=1;function r(h,p){h.prototype=Object.create(p.prototype),h.prototype.constructor=h,h.__proto__=p}var e={};function t(h,p,g){g||(g=Error);function y(T,D,E){return typeof p=="string"?p:p(T,D,E)}var S=function(T){r(D,T);function D(E,I,N){return T.call(this,y(E,I,N))||this}return D}(g);S.prototype.name=g.name,S.prototype.code=h,e[h]=S}function i(h,p){if(Array.isArray(h)){var g=h.length;return h=h.map(function(y){return String(y)}),g>2?"one of ".concat(p," ").concat(h.slice(0,g-1).join(", "),", or ")+h[g-1]:g===2?"one of ".concat(p," ").concat(h[0]," or ").concat(h[1]):"of ".concat(p," ").concat(h[0])}else return"of ".concat(p," ").concat(String(h))}function a(h,p,g){return h.substr(0,p.length)===p}function l(h,p,g){return(g===void 0||g>h.length)&&(g=h.length),h.substring(g-p.length,g)===p}function c(h,p,g){return typeof g!="number"&&(g=0),g+p.length>h.length?!1:h.indexOf(p,g)!==-1}return t("ERR_INVALID_OPT_VALUE",function(h,p){return'The value "'+p+'" is invalid for option "'+h+'"'},TypeError),t("ERR_INVALID_ARG_TYPE",function(h,p,g){var y;typeof p=="string"&&a(p,"not ")?(y="must not be",p=p.replace(/^not /,"")):y="must be";var S;if(l(h," argument"))S="The ".concat(h," ").concat(y," ").concat(i(p,"type"));else{var T=c(h,".")?"property":"argument";S='The "'.concat(h,'" ').concat(T," ").concat(y," ").concat(i(p,"type"))}return S+=". Received type ".concat(typeof g),S},TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",function(h){return"The "+h+" method is not implemented"}),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",function(h){return"Cannot call "+h+" after a stream was destroyed"}),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",function(h){return"Unknown encoding: "+h},TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Wp.codes=e,Wp}var Xp,pE;function nw(){if(pE)return Xp;pE=1;var r=qo().codes.ERR_INVALID_OPT_VALUE;function e(i,a,l){return i.highWaterMark!=null?i.highWaterMark:a?i[l]:null}function t(i,a,l,c){var h=e(a,c,l);if(h!=null){if(!(isFinite(h)&&Math.floor(h)===h)||h<0){var p=c?l:"highWaterMark";throw new r(p,h)}return Math.floor(h)}return i.objectMode?16:16*1024}return Xp={getHighWaterMark:t},Xp}var ph={exports:{}},gE;function xu(){return gE||(gE=1,typeof Object.create=="function"?ph.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:ph.exports=function(e,t){if(t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}}),ph.exports}var Zp,mE;function LI(){if(mE)return Zp;mE=1,Zp=r;function r(t,i){if(e("noDeprecation"))return t;var a=!1;function l(){if(!a){if(e("throwDeprecation"))throw new Error(i);e("traceDeprecation")?console.trace(i):console.warn(i),a=!0}return t.apply(this,arguments)}return l}function e(t){try{if(!globalThis.localStorage)return!1}catch{return!1}var i=globalThis.localStorage[t];return i==null?!1:String(i).toLowerCase()==="true"}return Zp}var Jp,yE;function rw(){if(yE)return Jp;yE=1,Jp=M;function r(re){var te=this;this.next=null,this.entry=null,this.finish=function(){Fe(te,re)}}var e;M.WritableState=X;var t={deprecate:LI()},i=JT(),a=hf().Buffer,l=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function c(re){return a.from(re)}function h(re){return a.isBuffer(re)||re instanceof l}var p=tw(),g=nw(),y=g.getHighWaterMark,S=qo().codes,T=S.ERR_INVALID_ARG_TYPE,D=S.ERR_METHOD_NOT_IMPLEMENTED,E=S.ERR_MULTIPLE_CALLBACK,I=S.ERR_STREAM_CANNOT_PIPE,N=S.ERR_STREAM_DESTROYED,O=S.ERR_STREAM_NULL_VALUES,B=S.ERR_STREAM_WRITE_AFTER_END,j=S.ERR_UNKNOWN_ENCODING,G=p.errorOrDestroy;xu()(M,i);function q(){}function X(re,te,ye){e=e||Oo(),re=re||{},typeof ye!="boolean"&&(ye=te instanceof e),this.objectMode=!!re.objectMode,ye&&(this.objectMode=this.objectMode||!!re.writableObjectMode),this.highWaterMark=y(this,re,"writableHighWaterMark",ye),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Ne=re.decodeStrings===!1;this.decodeStrings=!Ne,this.defaultEncoding=re.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Be){ge(te,Be)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=re.emitClose!==!1,this.autoDestroy=!!re.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}X.prototype.getBuffer=function(){for(var te=this.bufferedRequest,ye=[];te;)ye.push(te),te=te.next;return ye},function(){try{Object.defineProperty(X.prototype,"buffer",{get:t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var V;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(V=Function.prototype[Symbol.hasInstance],Object.defineProperty(M,Symbol.hasInstance,{value:function(te){return V.call(this,te)?!0:this!==M?!1:te&&te._writableState instanceof X}})):V=function(te){return te instanceof this};function M(re){e=e||Oo();var te=this instanceof e;if(!te&&!V.call(M,this))return new M(re);this._writableState=new X(re,this,te),this.writable=!0,re&&(typeof re.write=="function"&&(this._write=re.write),typeof re.writev=="function"&&(this._writev=re.writev),typeof re.destroy=="function"&&(this._destroy=re.destroy),typeof re.final=="function"&&(this._final=re.final)),i.call(this)}M.prototype.pipe=function(){G(this,new I)};function P(re,te){var ye=new B;G(re,ye),process.nextTick(te,ye)}function K(re,te,ye,Ne){var Be;return ye===null?Be=new O:typeof ye!="string"&&!te.objectMode&&(Be=new T("chunk",["string","Buffer"],ye)),Be?(G(re,Be),process.nextTick(Ne,Be),!1):!0}M.prototype.write=function(re,te,ye){var Ne=this._writableState,Be=!1,F=!Ne.objectMode&&h(re);return F&&!a.isBuffer(re)&&(re=c(re)),typeof te=="function"&&(ye=te,te=null),F?te="buffer":te||(te=Ne.defaultEncoding),typeof ye!="function"&&(ye=q),Ne.ending?P(this,ye):(F||K(this,Ne,re,ye))&&(Ne.pendingcb++,Be=ee(this,Ne,F,re,te,ye)),Be},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){var re=this._writableState;re.corked&&(re.corked--,!re.writing&&!re.corked&&!re.bufferProcessing&&re.bufferedRequest&&Xe(this,re))},M.prototype.setDefaultEncoding=function(te){if(typeof te=="string"&&(te=te.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((te+"").toLowerCase())>-1))throw new j(te);return this._writableState.defaultEncoding=te,this},Object.defineProperty(M.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function J(re,te,ye){return!re.objectMode&&re.decodeStrings!==!1&&typeof te=="string"&&(te=a.from(te,ye)),te}Object.defineProperty(M.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ee(re,te,ye,Ne,Be,F){if(!ye){var H=J(te,Ne,Be);Ne!==H&&(ye=!0,Be="buffer",Ne=H)}var ve=te.objectMode?1:Ne.length;te.length+=ve;var Oe=te.length<te.highWaterMark;if(Oe||(te.needDrain=!0),te.writing||te.corked){var dt=te.lastBufferedRequest;te.lastBufferedRequest={chunk:Ne,encoding:Be,isBuf:ye,callback:F,next:null},dt?dt.next=te.lastBufferedRequest:te.bufferedRequest=te.lastBufferedRequest,te.bufferedRequestCount+=1}else Q(re,te,!1,ve,Ne,Be,F);return Oe}function Q(re,te,ye,Ne,Be,F,H){te.writelen=Ne,te.writecb=H,te.writing=!0,te.sync=!0,te.destroyed?te.onwrite(new N("write")):ye?re._writev(Be,te.onwrite):re._write(Be,F,te.onwrite),te.sync=!1}function ct(re,te,ye,Ne,Be){--te.pendingcb,ye?(process.nextTick(Be,Ne),process.nextTick(Ie,re,te),re._writableState.errorEmitted=!0,G(re,Ne)):(Be(Ne),re._writableState.errorEmitted=!0,G(re,Ne),Ie(re,te))}function nt(re){re.writing=!1,re.writecb=null,re.length-=re.writelen,re.writelen=0}function ge(re,te){var ye=re._writableState,Ne=ye.sync,Be=ye.writecb;if(typeof Be!="function")throw new E;if(nt(ye),te)ct(re,ye,Ne,te,Be);else{var F=Z(ye)||re.destroyed;!F&&!ye.corked&&!ye.bufferProcessing&&ye.bufferedRequest&&Xe(re,ye),Ne?process.nextTick(De,re,ye,F,Be):De(re,ye,F,Be)}}function De(re,te,ye,Ne){ye||Me(re,te),te.pendingcb--,Ne(),Ie(re,te)}function Me(re,te){te.length===0&&te.needDrain&&(te.needDrain=!1,re.emit("drain"))}function Xe(re,te){te.bufferProcessing=!0;var ye=te.bufferedRequest;if(re._writev&&ye&&ye.next){var Ne=te.bufferedRequestCount,Be=new Array(Ne),F=te.corkedRequestsFree;F.entry=ye;for(var H=0,ve=!0;ye;)Be[H]=ye,ye.isBuf||(ve=!1),ye=ye.next,H+=1;Be.allBuffers=ve,Q(re,te,!0,te.length,Be,"",F.finish),te.pendingcb++,te.lastBufferedRequest=null,F.next?(te.corkedRequestsFree=F.next,F.next=null):te.corkedRequestsFree=new r(te),te.bufferedRequestCount=0}else{for(;ye;){var Oe=ye.chunk,dt=ye.encoding,L=ye.callback,b=te.objectMode?1:Oe.length;if(Q(re,te,!1,b,Oe,dt,L),ye=ye.next,te.bufferedRequestCount--,te.writing)break}ye===null&&(te.lastBufferedRequest=null)}te.bufferedRequest=ye,te.bufferProcessing=!1}M.prototype._write=function(re,te,ye){ye(new D("_write()"))},M.prototype._writev=null,M.prototype.end=function(re,te,ye){var Ne=this._writableState;return typeof re=="function"?(ye=re,re=null,te=null):typeof te=="function"&&(ye=te,te=null),re!=null&&this.write(re,te),Ne.corked&&(Ne.corked=1,this.uncork()),Ne.ending||ke(this,Ne,ye),this},Object.defineProperty(M.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Z(re){return re.ending&&re.length===0&&re.bufferedRequest===null&&!re.finished&&!re.writing}function de(re,te){re._final(function(ye){te.pendingcb--,ye&&G(re,ye),te.prefinished=!0,re.emit("prefinish"),Ie(re,te)})}function we(re,te){!te.prefinished&&!te.finalCalled&&(typeof re._final=="function"&&!te.destroyed?(te.pendingcb++,te.finalCalled=!0,process.nextTick(de,re,te)):(te.prefinished=!0,re.emit("prefinish")))}function Ie(re,te){var ye=Z(te);if(ye&&(we(re,te),te.pendingcb===0&&(te.finished=!0,re.emit("finish"),te.autoDestroy))){var Ne=re._readableState;(!Ne||Ne.autoDestroy&&Ne.endEmitted)&&re.destroy()}return ye}function ke(re,te,ye){te.ending=!0,Ie(re,te),ye&&(te.finished?process.nextTick(ye):re.once("finish",ye)),te.ended=!0,re.writable=!1}function Fe(re,te,ye){var Ne=re.entry;for(re.entry=null;Ne;){var Be=Ne.callback;te.pendingcb--,Be(ye),Ne=Ne.next}te.corkedRequestsFree.next=re}return Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(te){this._writableState&&(this._writableState.destroyed=te)}}),M.prototype.destroy=p.destroy,M.prototype._undestroy=p.undestroy,M.prototype._destroy=function(re,te){te(re)},Jp}var eg,vE;function Oo(){if(vE)return eg;vE=1;var r=Object.keys||function(g){var y=[];for(var S in g)y.push(S);return y};eg=c;var e=iw(),t=rw();xu()(c,e);for(var i=r(t.prototype),a=0;a<i.length;a++){var l=i[a];c.prototype[l]||(c.prototype[l]=t.prototype[l])}function c(g){if(!(this instanceof c))return new c(g);e.call(this,g),t.call(this,g),this.allowHalfOpen=!0,g&&(g.readable===!1&&(this.readable=!1),g.writable===!1&&(this.writable=!1),g.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",h)))}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function h(){this._writableState.ended||process.nextTick(p,this)}function p(g){g.end()}return Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(y){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=y,this._writableState.destroyed=y)}}),eg}var tg={},_E;function EE(){if(_E)return tg;_E=1;var r=XT().Buffer,e=r.isEncoding||function(O){switch(O=""+O,O&&O.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(O){if(!O)return"utf8";for(var B;;)switch(O){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return O;default:if(B)return;O=(""+O).toLowerCase(),B=!0}}function i(O){var B=t(O);if(typeof B!="string"&&(r.isEncoding===e||!e(O)))throw new Error("Unknown encoding: "+O);return B||O}tg.StringDecoder=a;function a(O){this.encoding=i(O);var B;switch(this.encoding){case"utf16le":this.text=S,this.end=T,B=4;break;case"utf8":this.fillLast=p,B=4;break;case"base64":this.text=D,this.end=E,B=3;break;default:this.write=I,this.end=N;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(B)}a.prototype.write=function(O){if(O.length===0)return"";var B,j;if(this.lastNeed){if(B=this.fillLast(O),B===void 0)return"";j=this.lastNeed,this.lastNeed=0}else j=0;return j<O.length?B?B+this.text(O,j):this.text(O,j):B||""},a.prototype.end=y,a.prototype.text=g,a.prototype.fillLast=function(O){if(this.lastNeed<=O.length)return O.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);O.copy(this.lastChar,this.lastTotal-this.lastNeed,0,O.length),this.lastNeed-=O.length};function l(O){return O<=127?0:O>>5===6?2:O>>4===14?3:O>>3===30?4:O>>6===2?-1:-2}function c(O,B,j){var G=B.length-1;if(G<j)return 0;var q=l(B[G]);return q>=0?(q>0&&(O.lastNeed=q-1),q):--G<j||q===-2?0:(q=l(B[G]),q>=0?(q>0&&(O.lastNeed=q-2),q):--G<j||q===-2?0:(q=l(B[G]),q>=0?(q>0&&(q===2?q=0:O.lastNeed=q-3),q):0))}function h(O,B,j){if((B[0]&192)!==128)return O.lastNeed=0,"";if(O.lastNeed>1&&B.length>1){if((B[1]&192)!==128)return O.lastNeed=1,"";if(O.lastNeed>2&&B.length>2&&(B[2]&192)!==128)return O.lastNeed=2,""}}function p(O){var B=this.lastTotal-this.lastNeed,j=h(this,O);if(j!==void 0)return j;if(this.lastNeed<=O.length)return O.copy(this.lastChar,B,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);O.copy(this.lastChar,B,0,O.length),this.lastNeed-=O.length}function g(O,B){var j=c(this,O,B);if(!this.lastNeed)return O.toString("utf8",B);this.lastTotal=j;var G=O.length-(j-this.lastNeed);return O.copy(this.lastChar,0,G),O.toString("utf8",B,G)}function y(O){var B=O&&O.length?this.write(O):"";return this.lastNeed?B+"":B}function S(O,B){if((O.length-B)%2===0){var j=O.toString("utf16le",B);if(j){var G=j.charCodeAt(j.length-1);if(G>=55296&&G<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=O[O.length-2],this.lastChar[1]=O[O.length-1],j.slice(0,-1)}return j}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=O[O.length-1],O.toString("utf16le",B,O.length-1)}function T(O){var B=O&&O.length?this.write(O):"";if(this.lastNeed){var j=this.lastTotal-this.lastNeed;return B+this.lastChar.toString("utf16le",0,j)}return B}function D(O,B){var j=(O.length-B)%3;return j===0?O.toString("base64",B):(this.lastNeed=3-j,this.lastTotal=3,j===1?this.lastChar[0]=O[O.length-1]:(this.lastChar[0]=O[O.length-2],this.lastChar[1]=O[O.length-1]),O.toString("base64",B,O.length-j))}function E(O){var B=O&&O.length?this.write(O):"";return this.lastNeed?B+this.lastChar.toString("base64",0,3-this.lastNeed):B}function I(O){return O.toString(this.encoding)}function N(O){return O&&O.length?this.write(O):""}return tg}var ng,TE;function Sm(){if(TE)return ng;TE=1;var r=qo().codes.ERR_STREAM_PREMATURE_CLOSE;function e(l){var c=!1;return function(){if(!c){c=!0;for(var h=arguments.length,p=new Array(h),g=0;g<h;g++)p[g]=arguments[g];l.apply(this,p)}}}function t(){}function i(l){return l.setHeader&&typeof l.abort=="function"}function a(l,c,h){if(typeof c=="function")return a(l,null,c);c||(c={}),h=e(h||t);var p=c.readable||c.readable!==!1&&l.readable,g=c.writable||c.writable!==!1&&l.writable,y=function(){l.writable||T()},S=l._writableState&&l._writableState.finished,T=function(){g=!1,S=!0,p||h.call(l)},D=l._readableState&&l._readableState.endEmitted,E=function(){p=!1,D=!0,g||h.call(l)},I=function(j){h.call(l,j)},N=function(){var j;if(p&&!D)return(!l._readableState||!l._readableState.ended)&&(j=new r),h.call(l,j);if(g&&!S)return(!l._writableState||!l._writableState.ended)&&(j=new r),h.call(l,j)},O=function(){l.req.on("finish",T)};return i(l)?(l.on("complete",T),l.on("abort",N),l.req?O():l.on("request",O)):g&&!l._writableState&&(l.on("end",y),l.on("close",y)),l.on("end",E),l.on("finish",T),c.error!==!1&&l.on("error",I),l.on("close",N),function(){l.removeListener("complete",T),l.removeListener("abort",N),l.removeListener("request",O),l.req&&l.req.removeListener("finish",T),l.removeListener("end",y),l.removeListener("close",y),l.removeListener("finish",T),l.removeListener("end",E),l.removeListener("error",I),l.removeListener("close",N)}}return ng=a,ng}var rg,wE;function PI(){if(wE)return rg;wE=1;var r;function e(j,G,q){return G=t(G),G in j?Object.defineProperty(j,G,{value:q,enumerable:!0,configurable:!0,writable:!0}):j[G]=q,j}function t(j){var G=i(j,"string");return typeof G=="symbol"?G:String(G)}function i(j,G){if(typeof j!="object"||j===null)return j;var q=j[Symbol.toPrimitive];if(q!==void 0){var X=q.call(j,G);if(typeof X!="object")return X;throw new TypeError("@@toPrimitive must return a primitive value.")}return(G==="string"?String:Number)(j)}var a=Sm(),l=Symbol("lastResolve"),c=Symbol("lastReject"),h=Symbol("error"),p=Symbol("ended"),g=Symbol("lastPromise"),y=Symbol("handlePromise"),S=Symbol("stream");function T(j,G){return{value:j,done:G}}function D(j){var G=j[l];if(G!==null){var q=j[S].read();q!==null&&(j[g]=null,j[l]=null,j[c]=null,G(T(q,!1)))}}function E(j){process.nextTick(D,j)}function I(j,G){return function(q,X){j.then(function(){if(G[p]){q(T(void 0,!0));return}G[y](q,X)},X)}}var N=Object.getPrototypeOf(function(){}),O=Object.setPrototypeOf((r={get stream(){return this[S]},next:function(){var G=this,q=this[h];if(q!==null)return Promise.reject(q);if(this[p])return Promise.resolve(T(void 0,!0));if(this[S].destroyed)return new Promise(function(P,K){process.nextTick(function(){G[h]?K(G[h]):P(T(void 0,!0))})});var X=this[g],V;if(X)V=new Promise(I(X,this));else{var M=this[S].read();if(M!==null)return Promise.resolve(T(M,!1));V=new Promise(this[y])}return this[g]=V,V}},e(r,Symbol.asyncIterator,function(){return this}),e(r,"return",function(){var G=this;return new Promise(function(q,X){G[S].destroy(null,function(V){if(V){X(V);return}q(T(void 0,!0))})})}),r),N),B=function(G){var q,X=Object.create(O,(q={},e(q,S,{value:G,writable:!0}),e(q,l,{value:null,writable:!0}),e(q,c,{value:null,writable:!0}),e(q,h,{value:null,writable:!0}),e(q,p,{value:G._readableState.endEmitted,writable:!0}),e(q,y,{value:function(M,P){var K=X[S].read();K?(X[g]=null,X[l]=null,X[c]=null,M(T(K,!1))):(X[l]=M,X[c]=P)},writable:!0}),q));return X[g]=null,a(G,function(V){if(V&&V.code!=="ERR_STREAM_PREMATURE_CLOSE"){var M=X[c];M!==null&&(X[g]=null,X[l]=null,X[c]=null,M(V)),X[h]=V;return}var P=X[l];P!==null&&(X[g]=null,X[l]=null,X[c]=null,P(T(void 0,!0))),X[p]=!0}),G.on("readable",E.bind(null,X)),X};return rg=B,rg}var ig,bE;function UI(){return bE||(bE=1,ig=function(){throw new Error("Readable.from is not available in the browser")}),ig}var sg,SE;function iw(){if(SE)return sg;SE=1,sg=P;var r;P.ReadableState=M,ZT().EventEmitter;var e=function(H,ve){return H.listeners(ve).length},t=JT(),i=hf().Buffer,a=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function l(F){return i.from(F)}function c(F){return i.isBuffer(F)||F instanceof a}var h=ew,p;h&&h.debuglog?p=h.debuglog("stream"):p=function(){};var g=kI(),y=tw(),S=nw(),T=S.getHighWaterMark,D=qo().codes,E=D.ERR_INVALID_ARG_TYPE,I=D.ERR_STREAM_PUSH_AFTER_EOF,N=D.ERR_METHOD_NOT_IMPLEMENTED,O=D.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,B,j,G;xu()(P,t);var q=y.errorOrDestroy,X=["error","close","destroy","pause","resume"];function V(F,H,ve){if(typeof F.prependListener=="function")return F.prependListener(H,ve);!F._events||!F._events[H]?F.on(H,ve):Array.isArray(F._events[H])?F._events[H].unshift(ve):F._events[H]=[ve,F._events[H]]}function M(F,H,ve){r=r||Oo(),F=F||{},typeof ve!="boolean"&&(ve=H instanceof r),this.objectMode=!!F.objectMode,ve&&(this.objectMode=this.objectMode||!!F.readableObjectMode),this.highWaterMark=T(this,F,"readableHighWaterMark",ve),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=F.emitClose!==!1,this.autoDestroy=!!F.autoDestroy,this.destroyed=!1,this.defaultEncoding=F.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,F.encoding&&(B||(B=EE().StringDecoder),this.decoder=new B(F.encoding),this.encoding=F.encoding)}function P(F){if(r=r||Oo(),!(this instanceof P))return new P(F);var H=this instanceof r;this._readableState=new M(F,this,H),this.readable=!0,F&&(typeof F.read=="function"&&(this._read=F.read),typeof F.destroy=="function"&&(this._destroy=F.destroy)),t.call(this)}Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(H){this._readableState&&(this._readableState.destroyed=H)}}),P.prototype.destroy=y.destroy,P.prototype._undestroy=y.undestroy,P.prototype._destroy=function(F,H){H(F)},P.prototype.push=function(F,H){var ve=this._readableState,Oe;return ve.objectMode?Oe=!0:typeof F=="string"&&(H=H||ve.defaultEncoding,H!==ve.encoding&&(F=i.from(F,H),H=""),Oe=!0),K(this,F,H,!1,Oe)},P.prototype.unshift=function(F){return K(this,F,null,!0,!1)};function K(F,H,ve,Oe,dt){p("readableAddChunk",H);var L=F._readableState;if(H===null)L.reading=!1,ge(F,L);else{var b;if(dt||(b=ee(L,H)),b)q(F,b);else if(L.objectMode||H&&H.length>0)if(typeof H!="string"&&!L.objectMode&&Object.getPrototypeOf(H)!==i.prototype&&(H=l(H)),Oe)L.endEmitted?q(F,new O):J(F,L,H,!0);else if(L.ended)q(F,new I);else{if(L.destroyed)return!1;L.reading=!1,L.decoder&&!ve?(H=L.decoder.write(H),L.objectMode||H.length!==0?J(F,L,H,!1):Xe(F,L)):J(F,L,H,!1)}else Oe||(L.reading=!1,Xe(F,L))}return!L.ended&&(L.length<L.highWaterMark||L.length===0)}function J(F,H,ve,Oe){H.flowing&&H.length===0&&!H.sync?(H.awaitDrain=0,F.emit("data",ve)):(H.length+=H.objectMode?1:ve.length,Oe?H.buffer.unshift(ve):H.buffer.push(ve),H.needReadable&&De(F)),Xe(F,H)}function ee(F,H){var ve;return!c(H)&&typeof H!="string"&&H!==void 0&&!F.objectMode&&(ve=new E("chunk",["string","Buffer","Uint8Array"],H)),ve}P.prototype.isPaused=function(){return this._readableState.flowing===!1},P.prototype.setEncoding=function(F){B||(B=EE().StringDecoder);var H=new B(F);this._readableState.decoder=H,this._readableState.encoding=this._readableState.decoder.encoding;for(var ve=this._readableState.buffer.head,Oe="";ve!==null;)Oe+=H.write(ve.data),ve=ve.next;return this._readableState.buffer.clear(),Oe!==""&&this._readableState.buffer.push(Oe),this._readableState.length=Oe.length,this};var Q=1073741824;function ct(F){return F>=Q?F=Q:(F--,F|=F>>>1,F|=F>>>2,F|=F>>>4,F|=F>>>8,F|=F>>>16,F++),F}function nt(F,H){return F<=0||H.length===0&&H.ended?0:H.objectMode?1:F!==F?H.flowing&&H.length?H.buffer.head.data.length:H.length:(F>H.highWaterMark&&(H.highWaterMark=ct(F)),F<=H.length?F:H.ended?H.length:(H.needReadable=!0,0))}P.prototype.read=function(F){p("read",F),F=parseInt(F,10);var H=this._readableState,ve=F;if(F!==0&&(H.emittedReadable=!1),F===0&&H.needReadable&&((H.highWaterMark!==0?H.length>=H.highWaterMark:H.length>0)||H.ended))return p("read: emitReadable",H.length,H.ended),H.length===0&&H.ended?ye(this):De(this),null;if(F=nt(F,H),F===0&&H.ended)return H.length===0&&ye(this),null;var Oe=H.needReadable;p("need readable",Oe),(H.length===0||H.length-F<H.highWaterMark)&&(Oe=!0,p("length less than watermark",Oe)),H.ended||H.reading?(Oe=!1,p("reading or ended",Oe)):Oe&&(p("do read"),H.reading=!0,H.sync=!0,H.length===0&&(H.needReadable=!0),this._read(H.highWaterMark),H.sync=!1,H.reading||(F=nt(ve,H)));var dt;return F>0?dt=te(F,H):dt=null,dt===null?(H.needReadable=H.length<=H.highWaterMark,F=0):(H.length-=F,H.awaitDrain=0),H.length===0&&(H.ended||(H.needReadable=!0),ve!==F&&H.ended&&ye(this)),dt!==null&&this.emit("data",dt),dt};function ge(F,H){if(p("onEofChunk"),!H.ended){if(H.decoder){var ve=H.decoder.end();ve&&ve.length&&(H.buffer.push(ve),H.length+=H.objectMode?1:ve.length)}H.ended=!0,H.sync?De(F):(H.needReadable=!1,H.emittedReadable||(H.emittedReadable=!0,Me(F)))}}function De(F){var H=F._readableState;p("emitReadable",H.needReadable,H.emittedReadable),H.needReadable=!1,H.emittedReadable||(p("emitReadable",H.flowing),H.emittedReadable=!0,process.nextTick(Me,F))}function Me(F){var H=F._readableState;p("emitReadable_",H.destroyed,H.length,H.ended),!H.destroyed&&(H.length||H.ended)&&(F.emit("readable"),H.emittedReadable=!1),H.needReadable=!H.flowing&&!H.ended&&H.length<=H.highWaterMark,re(F)}function Xe(F,H){H.readingMore||(H.readingMore=!0,process.nextTick(Z,F,H))}function Z(F,H){for(;!H.reading&&!H.ended&&(H.length<H.highWaterMark||H.flowing&&H.length===0);){var ve=H.length;if(p("maybeReadMore read 0"),F.read(0),ve===H.length)break}H.readingMore=!1}P.prototype._read=function(F){q(this,new N("_read()"))},P.prototype.pipe=function(F,H){var ve=this,Oe=this._readableState;switch(Oe.pipesCount){case 0:Oe.pipes=F;break;case 1:Oe.pipes=[Oe.pipes,F];break;default:Oe.pipes.push(F);break}Oe.pipesCount+=1,p("pipe count=%d opts=%j",Oe.pipesCount,H);var dt=(!H||H.end!==!1)&&F!==process.stdout&&F!==process.stderr,L=dt?R:He;Oe.endEmitted?process.nextTick(L):ve.once("end",L),F.on("unpipe",b);function b(x,_){p("onunpipe"),x===ve&&_&&_.hasUnpiped===!1&&(_.hasUnpiped=!0,be())}function R(){p("onend"),F.end()}var $=de(ve);F.on("drain",$);var oe=!1;function be(){p("cleanup"),F.removeListener("close",rt),F.removeListener("finish",ze),F.removeListener("drain",$),F.removeListener("error",qe),F.removeListener("unpipe",b),ve.removeListener("end",R),ve.removeListener("end",He),ve.removeListener("data",Ae),oe=!0,Oe.awaitDrain&&(!F._writableState||F._writableState.needDrain)&&$()}ve.on("data",Ae);function Ae(x){p("ondata");var _=F.write(x);p("dest.write",_),_===!1&&((Oe.pipesCount===1&&Oe.pipes===F||Oe.pipesCount>1&&Be(Oe.pipes,F)!==-1)&&!oe&&(p("false write response, pause",Oe.awaitDrain),Oe.awaitDrain++),ve.pause())}function qe(x){p("onerror",x),He(),F.removeListener("error",qe),e(F,"error")===0&&q(F,x)}V(F,"error",qe);function rt(){F.removeListener("finish",ze),He()}F.once("close",rt);function ze(){p("onfinish"),F.removeListener("close",rt),He()}F.once("finish",ze);function He(){p("unpipe"),ve.unpipe(F)}return F.emit("pipe",ve),Oe.flowing||(p("pipe resume"),ve.resume()),F};function de(F){return function(){var ve=F._readableState;p("pipeOnDrain",ve.awaitDrain),ve.awaitDrain&&ve.awaitDrain--,ve.awaitDrain===0&&e(F,"data")&&(ve.flowing=!0,re(F))}}P.prototype.unpipe=function(F){var H=this._readableState,ve={hasUnpiped:!1};if(H.pipesCount===0)return this;if(H.pipesCount===1)return F&&F!==H.pipes?this:(F||(F=H.pipes),H.pipes=null,H.pipesCount=0,H.flowing=!1,F&&F.emit("unpipe",this,ve),this);if(!F){var Oe=H.pipes,dt=H.pipesCount;H.pipes=null,H.pipesCount=0,H.flowing=!1;for(var L=0;L<dt;L++)Oe[L].emit("unpipe",this,{hasUnpiped:!1});return this}var b=Be(H.pipes,F);return b===-1?this:(H.pipes.splice(b,1),H.pipesCount-=1,H.pipesCount===1&&(H.pipes=H.pipes[0]),F.emit("unpipe",this,ve),this)},P.prototype.on=function(F,H){var ve=t.prototype.on.call(this,F,H),Oe=this._readableState;return F==="data"?(Oe.readableListening=this.listenerCount("readable")>0,Oe.flowing!==!1&&this.resume()):F==="readable"&&!Oe.endEmitted&&!Oe.readableListening&&(Oe.readableListening=Oe.needReadable=!0,Oe.flowing=!1,Oe.emittedReadable=!1,p("on readable",Oe.length,Oe.reading),Oe.length?De(this):Oe.reading||process.nextTick(Ie,this)),ve},P.prototype.addListener=P.prototype.on,P.prototype.removeListener=function(F,H){var ve=t.prototype.removeListener.call(this,F,H);return F==="readable"&&process.nextTick(we,this),ve},P.prototype.removeAllListeners=function(F){var H=t.prototype.removeAllListeners.apply(this,arguments);return(F==="readable"||F===void 0)&&process.nextTick(we,this),H};function we(F){var H=F._readableState;H.readableListening=F.listenerCount("readable")>0,H.resumeScheduled&&!H.paused?H.flowing=!0:F.listenerCount("data")>0&&F.resume()}function Ie(F){p("readable nexttick read 0"),F.read(0)}P.prototype.resume=function(){var F=this._readableState;return F.flowing||(p("resume"),F.flowing=!F.readableListening,ke(this,F)),F.paused=!1,this};function ke(F,H){H.resumeScheduled||(H.resumeScheduled=!0,process.nextTick(Fe,F,H))}function Fe(F,H){p("resume",H.reading),H.reading||F.read(0),H.resumeScheduled=!1,F.emit("resume"),re(F),H.flowing&&!H.reading&&F.read(0)}P.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function re(F){var H=F._readableState;for(p("flow",H.flowing);H.flowing&&F.read()!==null;);}P.prototype.wrap=function(F){var H=this,ve=this._readableState,Oe=!1;F.on("end",function(){if(p("wrapped end"),ve.decoder&&!ve.ended){var b=ve.decoder.end();b&&b.length&&H.push(b)}H.push(null)}),F.on("data",function(b){if(p("wrapped data"),ve.decoder&&(b=ve.decoder.write(b)),!(ve.objectMode&&b==null)&&!(!ve.objectMode&&(!b||!b.length))){var R=H.push(b);R||(Oe=!0,F.pause())}});for(var dt in F)this[dt]===void 0&&typeof F[dt]=="function"&&(this[dt]=function(R){return function(){return F[R].apply(F,arguments)}}(dt));for(var L=0;L<X.length;L++)F.on(X[L],this.emit.bind(this,X[L]));return this._read=function(b){p("wrapped _read",b),Oe&&(Oe=!1,F.resume())},this},typeof Symbol=="function"&&(P.prototype[Symbol.asyncIterator]=function(){return j===void 0&&(j=PI()),j(this)}),Object.defineProperty(P.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(P.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(P.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(H){this._readableState&&(this._readableState.flowing=H)}}),P._fromList=te,Object.defineProperty(P.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function te(F,H){if(H.length===0)return null;var ve;return H.objectMode?ve=H.buffer.shift():!F||F>=H.length?(H.decoder?ve=H.buffer.join(""):H.buffer.length===1?ve=H.buffer.first():ve=H.buffer.concat(H.length),H.buffer.clear()):ve=H.buffer.consume(F,H.decoder),ve}function ye(F){var H=F._readableState;p("endReadable",H.endEmitted),H.endEmitted||(H.ended=!0,process.nextTick(Ne,H,F))}function Ne(F,H){if(p("endReadableNT",F.endEmitted,F.length),!F.endEmitted&&F.length===0&&(F.endEmitted=!0,H.readable=!1,H.emit("end"),F.autoDestroy)){var ve=H._writableState;(!ve||ve.autoDestroy&&ve.finished)&&H.destroy()}}typeof Symbol=="function"&&(P.from=function(F,H){return G===void 0&&(G=UI()),G(P,F,H)});function Be(F,H){for(var ve=0,Oe=F.length;ve<Oe;ve++)if(F[ve]===H)return ve;return-1}return sg}var ag,RE;function sw(){if(RE)return ag;RE=1,ag=h;var r=qo().codes,e=r.ERR_METHOD_NOT_IMPLEMENTED,t=r.ERR_MULTIPLE_CALLBACK,i=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=r.ERR_TRANSFORM_WITH_LENGTH_0,l=Oo();xu()(h,l);function c(y,S){var T=this._transformState;T.transforming=!1;var D=T.writecb;if(D===null)return this.emit("error",new t);T.writechunk=null,T.writecb=null,S!=null&&this.push(S),D(y);var E=this._readableState;E.reading=!1,(E.needReadable||E.length<E.highWaterMark)&&this._read(E.highWaterMark)}function h(y){if(!(this instanceof h))return new h(y);l.call(this,y),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,y&&(typeof y.transform=="function"&&(this._transform=y.transform),typeof y.flush=="function"&&(this._flush=y.flush)),this.on("prefinish",p)}function p(){var y=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(S,T){g(y,S,T)}):g(this,null,null)}h.prototype.push=function(y,S){return this._transformState.needTransform=!1,l.prototype.push.call(this,y,S)},h.prototype._transform=function(y,S,T){T(new e("_transform()"))},h.prototype._write=function(y,S,T){var D=this._transformState;if(D.writecb=T,D.writechunk=y,D.writeencoding=S,!D.transforming){var E=this._readableState;(D.needTransform||E.needReadable||E.length<E.highWaterMark)&&this._read(E.highWaterMark)}},h.prototype._read=function(y){var S=this._transformState;S.writechunk!==null&&!S.transforming?(S.transforming=!0,this._transform(S.writechunk,S.writeencoding,S.afterTransform)):S.needTransform=!0},h.prototype._destroy=function(y,S){l.prototype._destroy.call(this,y,function(T){S(T)})};function g(y,S,T){if(S)return y.emit("error",S);if(T!=null&&y.push(T),y._writableState.length)throw new a;if(y._transformState.transforming)throw new i;return y.push(null)}return ag}var og,AE;function VI(){if(AE)return og;AE=1,og=e;var r=sw();xu()(e,r);function e(t){if(!(this instanceof e))return new e(t);r.call(this,t)}return e.prototype._transform=function(t,i,a){a(null,t)},og}var lg,CE;function BI(){if(CE)return lg;CE=1;var r;function e(T){var D=!1;return function(){D||(D=!0,T.apply(void 0,arguments))}}var t=qo().codes,i=t.ERR_MISSING_ARGS,a=t.ERR_STREAM_DESTROYED;function l(T){if(T)throw T}function c(T){return T.setHeader&&typeof T.abort=="function"}function h(T,D,E,I){I=e(I);var N=!1;T.on("close",function(){N=!0}),r===void 0&&(r=Sm()),r(T,{readable:D,writable:E},function(B){if(B)return I(B);N=!0,I()});var O=!1;return function(B){if(!N&&!O){if(O=!0,c(T))return T.abort();if(typeof T.destroy=="function")return T.destroy();I(B||new a("pipe"))}}}function p(T){T()}function g(T,D){return T.pipe(D)}function y(T){return!T.length||typeof T[T.length-1]!="function"?l:T.pop()}function S(){for(var T=arguments.length,D=new Array(T),E=0;E<T;E++)D[E]=arguments[E];var I=y(D);if(Array.isArray(D[0])&&(D=D[0]),D.length<2)throw new i("streams");var N,O=D.map(function(B,j){var G=j<D.length-1,q=j>0;return h(B,G,q,function(X){N||(N=X),X&&O.forEach(p),!G&&(O.forEach(p),I(N))})});return D.reduce(g)}return lg=S,lg}var IE;function jI(){return IE||(IE=1,function(r,e){e=r.exports=iw(),e.Stream=e,e.Readable=e,e.Writable=rw(),e.Duplex=Oo(),e.Transform=sw(),e.PassThrough=VI(),e.finished=Sm(),e.pipeline=BI()}(fh,fh.exports)),fh.exports}/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var ug,DE;function FI(){if(DE)return ug;DE=1;let r;return ug=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:globalThis):e=>(r||(r=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0)),ug}var cg,OE;function qI(){if(OE)return cg;OE=1;function r(t,i){for(const a in i)Object.defineProperty(t,a,{value:i[a],enumerable:!0,configurable:!0});return t}function e(t,i,a){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");a||(a={}),typeof i=="object"&&(a=i,i=""),i&&(a.code=i);try{return r(t,a)}catch{a.message=t.message,a.stack=t.stack;const c=function(){};return c.prototype=Object.create(Object.getPrototypeOf(t)),r(new c,a)}}return cg=e,cg}/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var hg,xE;function zI(){if(xE)return hg;xE=1;const r=II()("simple-peer"),e=DI(),t=xI(),i=jI(),a=FI(),l=qI(),{Buffer:c}=hf(),h=64*1024,p=5*1e3,g=5*1e3;function y(D){return D.replace(/a=ice-options:trickle\s\n/g,"")}function S(D){console.warn(D)}class T extends i.Duplex{constructor(E){if(E=Object.assign({allowHalfOpen:!1},E),super(E),this._id=t(4).toString("hex").slice(0,7),this._debug("new peer %o",E),this.channelName=E.initiator?E.channelName||t(20).toString("hex"):null,this.initiator=E.initiator||!1,this.channelConfig=E.channelConfig||T.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},T.config,E.config),this.offerOptions=E.offerOptions||{},this.answerOptions=E.answerOptions||{},this.sdpTransform=E.sdpTransform||(I=>I),this.streams=E.streams||(E.stream?[E.stream]:[]),this.trickle=E.trickle!==void 0?E.trickle:!0,this.allowHalfTrickle=E.allowHalfTrickle!==void 0?E.allowHalfTrickle:!1,this.iceCompleteTimeout=E.iceCompleteTimeout||p,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=E.wrtc&&typeof E.wrtc=="object"?E.wrtc:e(),!this._wrtc)throw l(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(I){this.destroy(l(I,"ERR_PC_CONSTRUCTOR"));return}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=I=>{this._onIceCandidate(I)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(I=>{this.destroy(l(I,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=I=>{this._setupData(I)},this.streams&&this.streams.forEach(I=>{this.addStream(I)}),this._pc.ontrack=I=>{this._onTrack(I)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(E){if(!this.destroying){if(this.destroyed)throw l(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof E=="string")try{E=JSON.parse(E)}catch{E={}}this._debug("signal()"),E.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),E.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(E.transceiverRequest.kind,E.transceiverRequest.init)),E.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(E.candidate):this._pendingCandidates.push(E.candidate)),E.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(E)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(I=>{this._addIceCandidate(I)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(I=>{this.destroy(l(I,"ERR_SET_REMOTE_DESCRIPTION"))}),!E.sdp&&!E.candidate&&!E.renegotiate&&!E.transceiverRequest&&this.destroy(l(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(E){const I=new this._wrtc.RTCIceCandidate(E);this._pc.addIceCandidate(I).catch(N=>{!I.address||I.address.endsWith(".local")?S("Ignoring unsupported ICE candidate."):this.destroy(l(N,"ERR_ADD_ICE_CANDIDATE"))})}send(E){if(!this.destroying){if(this.destroyed)throw l(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(E)}}addTransceiver(E,I){if(!this.destroying){if(this.destroyed)throw l(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(E,I),this._needsNegotiation()}catch(N){this.destroy(l(N,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:E,init:I}})}}addStream(E){if(!this.destroying){if(this.destroyed)throw l(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),E.getTracks().forEach(I=>{this.addTrack(I,E)})}}addTrack(E,I){if(this.destroying)return;if(this.destroyed)throw l(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const N=this._senderMap.get(E)||new Map;let O=N.get(I);if(!O)O=this._pc.addTrack(E,I),N.set(I,O),this._senderMap.set(E,N),this._needsNegotiation();else throw O.removed?l(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):l(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(E,I,N){if(this.destroying)return;if(this.destroyed)throw l(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const O=this._senderMap.get(E),B=O?O.get(N):null;if(!B)throw l(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");I&&this._senderMap.set(I,O),B.replaceTrack!=null?B.replaceTrack(I):this.destroy(l(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(E,I){if(this.destroying)return;if(this.destroyed)throw l(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const N=this._senderMap.get(E),O=N?N.get(I):null;if(!O)throw l(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{O.removed=!0,this._pc.removeTrack(O)}catch(B){B.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(O):this.destroy(l(B,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(E){if(!this.destroying){if(this.destroyed)throw l(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),E.getTracks().forEach(I=>{this.removeTrack(I,E)})}}_needsNegotiation(){this._debug("_needsNegotiation"),!this._batchedNegotiation&&(this._batchedNegotiation=!0,a(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw l(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(E){this._destroy(E,()=>{})}_destroy(E,I){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",E&&(E.message||E)),a(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",E&&(E.message||E)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,E&&this.emit("error",E),this.emit("close"),I()}))}_setupData(E){if(!E.channel)return this.destroy(l(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=E.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=h),this.channelName=this._channel.label,this._channel.onmessage=N=>{this._onChannelMessage(N)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=N=>{const O=N.error instanceof Error?N.error:new Error(`Datachannel error: ${N.message} ${N.filename}:${N.lineno}:${N.colno}`);this.destroy(l(O,"ERR_DATA_CHANNEL"))};let I=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(I&&this._onChannelClose(),I=!0):I=!1},g)}_read(){}_write(E,I,N){if(this.destroyed)return N(l(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(E)}catch(O){return this.destroy(l(O,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>h?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=N):N(null)}else this._debug("write before connect"),this._chunk=E,this._cb=N}_onFinish(){if(this.destroyed)return;const E=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?E():this.once("connect",E)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(E=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(E.sdp=y(E.sdp)),E.sdp=this.sdpTransform(E.sdp);const I=()=>{if(this.destroyed)return;const B=this._pc.localDescription||E;this._debug("signal"),this.emit("signal",{type:B.type,sdp:B.sdp})},N=()=>{this._debug("createOffer success"),!this.destroyed&&(this.trickle||this._iceComplete?I():this.once("_iceComplete",I))},O=B=>{this.destroy(l(B,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(E).then(N).catch(O)}).catch(E=>{this.destroy(l(E,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(E=>{!E.mid&&E.sender.track&&!E.requested&&(E.requested=!0,this.addTransceiver(E.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(E=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(E.sdp=y(E.sdp)),E.sdp=this.sdpTransform(E.sdp);const I=()=>{if(this.destroyed)return;const B=this._pc.localDescription||E;this._debug("signal"),this.emit("signal",{type:B.type,sdp:B.sdp}),this.initiator||this._requestMissingTransceivers()},N=()=>{this.destroyed||(this.trickle||this._iceComplete?I():this.once("_iceComplete",I))},O=B=>{this.destroy(l(B,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(E).then(N).catch(O)}).catch(E=>{this.destroy(l(E,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(l(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const E=this._pc.iceConnectionState,I=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",E,I),this.emit("iceStateChange",E,I),(E==="connected"||E==="completed")&&(this._pcReady=!0,this._maybeReady()),E==="failed"&&this.destroy(l(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),E==="closed"&&this.destroy(l(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(E){const I=N=>(Object.prototype.toString.call(N.values)==="[object Array]"&&N.values.forEach(O=>{Object.assign(N,O)}),N);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(N=>{const O=[];N.forEach(B=>{O.push(I(B))}),E(null,O)},N=>E(N)):this._pc.getStats.length>0?this._pc.getStats(N=>{if(this.destroyed)return;const O=[];N.result().forEach(B=>{const j={};B.names().forEach(G=>{j[G]=B.stat(G)}),j.id=B.id,j.type=B.type,j.timestamp=B.timestamp,O.push(I(j))}),E(null,O)},N=>E(N)):E(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const E=()=>{this.destroyed||this.getStats((I,N)=>{if(this.destroyed)return;I&&(N=[]);const O={},B={},j={};let G=!1;N.forEach(X=>{(X.type==="remotecandidate"||X.type==="remote-candidate")&&(O[X.id]=X),(X.type==="localcandidate"||X.type==="local-candidate")&&(B[X.id]=X),(X.type==="candidatepair"||X.type==="candidate-pair")&&(j[X.id]=X)});const q=X=>{G=!0;let V=B[X.localCandidateId];V&&(V.ip||V.address)?(this.localAddress=V.ip||V.address,this.localPort=Number(V.port)):V&&V.ipAddress?(this.localAddress=V.ipAddress,this.localPort=Number(V.portNumber)):typeof X.googLocalAddress=="string"&&(V=X.googLocalAddress.split(":"),this.localAddress=V[0],this.localPort=Number(V[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let M=O[X.remoteCandidateId];M&&(M.ip||M.address)?(this.remoteAddress=M.ip||M.address,this.remotePort=Number(M.port)):M&&M.ipAddress?(this.remoteAddress=M.ipAddress,this.remotePort=Number(M.portNumber)):typeof X.googRemoteAddress=="string"&&(M=X.googRemoteAddress.split(":"),this.remoteAddress=M[0],this.remotePort=Number(M[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(N.forEach(X=>{X.type==="transport"&&X.selectedCandidatePairId&&q(j[X.selectedCandidatePairId]),(X.type==="googCandidatePair"&&X.googActiveConnection==="true"||(X.type==="candidatepair"||X.type==="candidate-pair")&&X.selected)&&q(X)}),!G&&(!Object.keys(j).length||Object.keys(B).length)){setTimeout(E,100);return}else this._connecting=!1,this._connected=!0;if(this._chunk){try{this.send(this._chunk)}catch(V){return this.destroy(l(V,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const X=this._cb;this._cb=null,X(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};E()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>h||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(E=>{this._pc.removeTrack(E),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(E){this.destroyed||(E.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:E.candidate.candidate,sdpMLineIndex:E.candidate.sdpMLineIndex,sdpMid:E.candidate.sdpMid}}):!E.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),E.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(E){if(this.destroyed)return;let I=E.data;I instanceof ArrayBuffer&&(I=c.from(I)),this.push(I)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const E=this._cb;this._cb=null,E(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(E){this.destroyed||E.streams.forEach(I=>{this._debug("on track"),this.emit("track",E.track,I),this._remoteTracks.push({track:E.track,stream:I}),!this._remoteStreams.some(N=>N.id===I.id)&&(this._remoteStreams.push(I),a(()=>{this._debug("on stream"),this.emit("stream",I)}))})}_debug(){const E=[].slice.call(arguments);E[0]="["+this._id+"] "+E[0],r.apply(null,E)}}return T.WEBRTC_SUPPORT=!!e(),T.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},T.channelConfig={},hg=T,hg}var HI=zI();const GI=lf(HI),$I=()=>{};var NE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let a=r.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},KI=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const a=r[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=r[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=r[t++],c=r[t++],h=r[t++],p=((a&7)<<18|(l&63)<<12|(c&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=r[t++],c=r[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},ow={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<r.length;a+=3){const l=r[a],c=a+1<r.length,h=c?r[a+1]:0,p=a+2<r.length,g=p?r[a+2]:0,y=l>>2,S=(l&3)<<4|h>>4;let T=(h&15)<<2|g>>6,D=g&63;p||(D=64,c||(T=64)),i.push(t[y],t[S],t[T],t[D])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(aw(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):KI(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<r.length;){const l=t[r.charAt(a++)],h=a<r.length?t[r.charAt(a)]:0;++a;const g=a<r.length?t[r.charAt(a)]:64;++a;const S=a<r.length?t[r.charAt(a)]:64;if(++a,l==null||h==null||g==null||S==null)throw new QI;const T=l<<2|h>>4;if(i.push(T),g!==64){const D=h<<4&240|g>>2;if(i.push(D),S!==64){const E=g<<6&192|S;i.push(E)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class QI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const YI=function(r){const e=aw(r);return ow.encodeByteArray(e,!0)},qh=function(r){return YI(r).replace(/\./g,"")},lw=function(r){try{return ow.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI=()=>WI().__FIREBASE_DEFAULTS__,ZI=()=>{if(typeof process>"u"||typeof NE>"u")return;const r=NE.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},JI=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&lw(r[1]);return e&&JSON.parse(e)},ff=()=>{try{return $I()||XI()||ZI()||JI()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},uw=r=>{var e,t;return(t=(e=ff())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},eD=r=>{const e=uw(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},cw=()=>{var r;return(r=ff())===null||r===void 0?void 0:r.config},hw=r=>{var e;return(e=ff())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(r){return r.endsWith(".cloudworkstations.dev")}async function fw(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[qh(JSON.stringify(t)),qh(JSON.stringify(c)),""].join(".")}const ou={};function rD(){const r={prod:[],emulator:[]};for(const e of Object.keys(ou))ou[e]?r.emulator.push(e):r.prod.push(e);return r}function iD(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let ME=!1;function df(r,e){if(typeof window>"u"||typeof document>"u"||!Nu(window.location.host)||ou[r]===e||ou[r]||ME)return;ou[r]=e;function t(T){return`__firebase__banner__${T}`}const i="__firebase__banner",l=rD().prod.length>0;function c(){const T=document.getElementById(i);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,D){T.setAttribute("width","24"),T.setAttribute("id",D),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function g(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{ME=!0,c()},T}function y(T,D){T.setAttribute("id",D),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function S(){const T=iD(i),D=t("text"),E=document.getElementById(D)||document.createElement("span"),I=t("learnmore"),N=document.getElementById(I)||document.createElement("a"),O=t("preprendIcon"),B=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const j=T.element;h(j),y(N,I);const G=g();p(B,O),j.append(B,E,N,G),document.body.appendChild(j)}l?(E.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",D)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Un())}function aD(){var r;const e=(r=ff())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(globalThis.process)==="[object process]"}catch{return!1}}function oD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lD(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function uD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cD(){const r=Un();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function hD(){return!aD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fD(){try{return typeof indexedDB=="object"}catch{return!1}}function dD(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD="FirebaseError";class Vi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=pD,Object.setPrototypeOf(this,Vi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mu.prototype.create)}}class Mu{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?gD(l,i):"Error",h=`${this.serviceName}: ${c} (${a}).`;return new Vi(a,h,i)}}function gD(r,e){return r.replace(mD,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const mD=/\{\$([^}]+)}/g;function yD(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function va(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=r[a],c=e[a];if(kE(l)&&kE(c)){if(!va(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function kE(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ku(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function vD(r,e){const t=new _D(r,e);return t.subscribe.bind(t)}class _D{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");ED(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=fg),a.error===void 0&&(a.error=fg),a.complete===void 0&&(a.complete=fg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ED(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function fg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(r){return r&&r._delegate?r._delegate:r}class _a{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new tD;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bD(e))try{this.getOrInitializeService({instanceIdentifier:da})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=da){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=da){return this.instances.has(e)}getOptions(e=da){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);i===h&&c.resolve(a)}return a}onInit(e,t){var i;const a=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&e(c,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:wD(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=da){return this.component?this.component.multipleInstances?e:da:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wD(r){return r===da?void 0:r}function bD(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new TD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(gt||(gt={}));const RD={debug:gt.DEBUG,verbose:gt.VERBOSE,info:gt.INFO,warn:gt.WARN,error:gt.ERROR,silent:gt.SILENT},AD=gt.INFO,CD={[gt.DEBUG]:"log",[gt.VERBOSE]:"log",[gt.INFO]:"info",[gt.WARN]:"warn",[gt.ERROR]:"error"},ID=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),a=CD[e];if(a)console[a](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rm{constructor(e){this.name=e,this._logLevel=AD,this._logHandler=ID,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,gt.DEBUG,...e),this._logHandler(this,gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,gt.VERBOSE,...e),this._logHandler(this,gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,gt.INFO,...e),this._logHandler(this,gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,gt.WARN,...e),this._logHandler(this,gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,gt.ERROR,...e),this._logHandler(this,gt.ERROR,...e)}}const DD=(r,e)=>e.some(t=>r instanceof t);let LE,PE;function OD(){return LE||(LE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xD(){return PE||(PE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dw=new WeakMap,Lg=new WeakMap,pw=new WeakMap,dg=new WeakMap,Am=new WeakMap;function ND(r){const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("success",l),r.removeEventListener("error",c)},l=()=>{t(Es(r.result)),a()},c=()=>{i(r.error),a()};r.addEventListener("success",l),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&dw.set(t,r)}).catch(()=>{}),Am.set(e,r),e}function MD(r){if(Lg.has(r))return;const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",c),r.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{i(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",l),r.addEventListener("error",c),r.addEventListener("abort",c)});Lg.set(r,e)}let Pg={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Lg.get(r);if(e==="objectStoreNames")return r.objectStoreNames||pw.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Es(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function kD(r){Pg=r(Pg)}function LD(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(pg(this),e,...t);return pw.set(i,e.sort?e.sort():[e]),Es(i)}:xD().includes(r)?function(...e){return r.apply(pg(this),e),Es(dw.get(this))}:function(...e){return Es(r.apply(pg(this),e))}}function PD(r){return typeof r=="function"?LD(r):(r instanceof IDBTransaction&&MD(r),DD(r,OD())?new Proxy(r,Pg):r)}function Es(r){if(r instanceof IDBRequest)return ND(r);if(dg.has(r))return dg.get(r);const e=PD(r);return e!==r&&(dg.set(r,e),Am.set(e,r)),e}const pg=r=>Am.get(r);function UD(r,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(r,e),h=Es(c);return i&&c.addEventListener("upgradeneeded",p=>{i(Es(c.result),p.oldVersion,p.newVersion,Es(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),h.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const VD=["get","getKey","getAll","getAllKeys","count"],BD=["put","add","delete","clear"],gg=new Map;function UE(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(gg.get(e))return gg.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=BD.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||VD.includes(t)))return;const l=async function(c,...h){const p=this.transaction(c,a?"readwrite":"readonly");let g=p.store;return i&&(g=g.index(h.shift())),(await Promise.all([g[t](...h),a&&p.done]))[0]};return gg.set(e,l),l}kD(r=>({...r,get:(e,t,i)=>UE(e,t)||r.get(e,t,i),has:(e,t)=>!!UE(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(FD(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function FD(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ug="@firebase/app",VE="0.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=new Rm("@firebase/app"),qD="@firebase/app-compat",zD="@firebase/analytics-compat",HD="@firebase/analytics",GD="@firebase/app-check-compat",$D="@firebase/app-check",KD="@firebase/auth",QD="@firebase/auth-compat",YD="@firebase/database",WD="@firebase/data-connect",XD="@firebase/database-compat",ZD="@firebase/functions",JD="@firebase/functions-compat",eO="@firebase/installations",tO="@firebase/installations-compat",nO="@firebase/messaging",rO="@firebase/messaging-compat",iO="@firebase/performance",sO="@firebase/performance-compat",aO="@firebase/remote-config",oO="@firebase/remote-config-compat",lO="@firebase/storage",uO="@firebase/storage-compat",cO="@firebase/firestore",hO="@firebase/vertexai",fO="@firebase/firestore-compat",dO="firebase",pO="11.7.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg="[DEFAULT]",gO={[Ug]:"fire-core",[qD]:"fire-core-compat",[HD]:"fire-analytics",[zD]:"fire-analytics-compat",[$D]:"fire-app-check",[GD]:"fire-app-check-compat",[KD]:"fire-auth",[QD]:"fire-auth-compat",[YD]:"fire-rtdb",[WD]:"fire-data-connect",[XD]:"fire-rtdb-compat",[ZD]:"fire-fn",[JD]:"fire-fn-compat",[eO]:"fire-iid",[tO]:"fire-iid-compat",[nO]:"fire-fcm",[rO]:"fire-fcm-compat",[iO]:"fire-perf",[sO]:"fire-perf-compat",[aO]:"fire-rc",[oO]:"fire-rc-compat",[lO]:"fire-gcs",[uO]:"fire-gcs-compat",[cO]:"fire-fst",[fO]:"fire-fst-compat",[hO]:"fire-vertex","fire-js":"fire-js",[dO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh=new Map,mO=new Map,Bg=new Map;function BE(r,e){try{r.container.addComponent(e)}catch(t){Mi.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function xo(r){const e=r.name;if(Bg.has(e))return Mi.debug(`There were multiple attempts to register component ${e}.`),!1;Bg.set(e,r);for(const t of zh.values())BE(t,r);for(const t of mO.values())BE(t,r);return!0}function Cm(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Cr(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ts=new Mu("app","Firebase",yO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new _a("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ts.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo=pO;function gw(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Vg,automaticDataCollectionEnabled:!1},e),a=i.name;if(typeof a!="string"||!a)throw Ts.create("bad-app-name",{appName:String(a)});if(t||(t=cw()),!t)throw Ts.create("no-options");const l=zh.get(a);if(l){if(va(t,l.options)&&va(i,l.config))return l;throw Ts.create("duplicate-app",{appName:a})}const c=new SD(a);for(const p of Bg.values())c.addComponent(p);const h=new vO(t,i,c);return zh.set(a,h),h}function mw(r=Vg){const e=zh.get(r);if(!e&&r===Vg&&cw())return gw();if(!e)throw Ts.create("no-app",{appName:r});return e}function ws(r,e,t){var i;let a=(i=gO[r])!==null&&i!==void 0?i:r;t&&(a+=`-${t}`);const l=a.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const h=[`Unable to register library "${a}" with version "${e}":`];l&&h.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mi.warn(h.join(" "));return}xo(new _a(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O="firebase-heartbeat-database",EO=1,mu="firebase-heartbeat-store";let mg=null;function yw(){return mg||(mg=UD(_O,EO,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(mu)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ts.create("idb-open",{originalErrorMessage:r.message})})),mg}async function TO(r){try{const t=(await yw()).transaction(mu),i=await t.objectStore(mu).get(vw(r));return await t.done,i}catch(e){if(e instanceof Vi)Mi.warn(e.message);else{const t=Ts.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Mi.warn(t.message)}}}async function jE(r,e){try{const i=(await yw()).transaction(mu,"readwrite");await i.objectStore(mu).put(e,vw(r)),await i.done}catch(t){if(t instanceof Vi)Mi.warn(t.message);else{const i=Ts.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Mi.warn(i.message)}}}function vw(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO=1024,bO=30;class SO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new AO(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=FE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>bO){const c=CO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Mi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=FE(),{heartbeatsToSend:i,unsentEntries:a}=RO(this._heartbeatsCache.heartbeats),l=qh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Mi.warn(t),""}}}function FE(){return new Date().toISOString().substring(0,10)}function RO(r,e=wO){const t=[];let i=r.slice();for(const a of r){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),qE(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),qE(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class AO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fD()?dD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await TO(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return jE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return jE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function qE(r){return qh(JSON.stringify({version:2,heartbeats:r})).length}function CO(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IO(r){xo(new _a("platform-logger",e=>new jD(e),"PRIVATE")),xo(new _a("heartbeat",e=>new SO(e),"PRIVATE")),ws(Ug,VE,r),ws(Ug,VE,"esm2017"),ws("fire-js","")}IO("");var zE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bs,_w;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,M){function P(){}P.prototype=M.prototype,V.D=M.prototype,V.prototype=new P,V.prototype.constructor=V,V.C=function(K,J,ee){for(var Q=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)Q[ct-2]=arguments[ct];return M.prototype[J].apply(K,Q)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(V,M,P){P||(P=0);var K=Array(16);if(typeof M=="string")for(var J=0;16>J;++J)K[J]=M.charCodeAt(P++)|M.charCodeAt(P++)<<8|M.charCodeAt(P++)<<16|M.charCodeAt(P++)<<24;else for(J=0;16>J;++J)K[J]=M[P++]|M[P++]<<8|M[P++]<<16|M[P++]<<24;M=V.g[0],P=V.g[1],J=V.g[2];var ee=V.g[3],Q=M+(ee^P&(J^ee))+K[0]+3614090360&4294967295;M=P+(Q<<7&4294967295|Q>>>25),Q=ee+(J^M&(P^J))+K[1]+3905402710&4294967295,ee=M+(Q<<12&4294967295|Q>>>20),Q=J+(P^ee&(M^P))+K[2]+606105819&4294967295,J=ee+(Q<<17&4294967295|Q>>>15),Q=P+(M^J&(ee^M))+K[3]+3250441966&4294967295,P=J+(Q<<22&4294967295|Q>>>10),Q=M+(ee^P&(J^ee))+K[4]+4118548399&4294967295,M=P+(Q<<7&4294967295|Q>>>25),Q=ee+(J^M&(P^J))+K[5]+1200080426&4294967295,ee=M+(Q<<12&4294967295|Q>>>20),Q=J+(P^ee&(M^P))+K[6]+2821735955&4294967295,J=ee+(Q<<17&4294967295|Q>>>15),Q=P+(M^J&(ee^M))+K[7]+4249261313&4294967295,P=J+(Q<<22&4294967295|Q>>>10),Q=M+(ee^P&(J^ee))+K[8]+1770035416&4294967295,M=P+(Q<<7&4294967295|Q>>>25),Q=ee+(J^M&(P^J))+K[9]+2336552879&4294967295,ee=M+(Q<<12&4294967295|Q>>>20),Q=J+(P^ee&(M^P))+K[10]+4294925233&4294967295,J=ee+(Q<<17&4294967295|Q>>>15),Q=P+(M^J&(ee^M))+K[11]+2304563134&4294967295,P=J+(Q<<22&4294967295|Q>>>10),Q=M+(ee^P&(J^ee))+K[12]+1804603682&4294967295,M=P+(Q<<7&4294967295|Q>>>25),Q=ee+(J^M&(P^J))+K[13]+4254626195&4294967295,ee=M+(Q<<12&4294967295|Q>>>20),Q=J+(P^ee&(M^P))+K[14]+2792965006&4294967295,J=ee+(Q<<17&4294967295|Q>>>15),Q=P+(M^J&(ee^M))+K[15]+1236535329&4294967295,P=J+(Q<<22&4294967295|Q>>>10),Q=M+(J^ee&(P^J))+K[1]+4129170786&4294967295,M=P+(Q<<5&4294967295|Q>>>27),Q=ee+(P^J&(M^P))+K[6]+3225465664&4294967295,ee=M+(Q<<9&4294967295|Q>>>23),Q=J+(M^P&(ee^M))+K[11]+643717713&4294967295,J=ee+(Q<<14&4294967295|Q>>>18),Q=P+(ee^M&(J^ee))+K[0]+3921069994&4294967295,P=J+(Q<<20&4294967295|Q>>>12),Q=M+(J^ee&(P^J))+K[5]+3593408605&4294967295,M=P+(Q<<5&4294967295|Q>>>27),Q=ee+(P^J&(M^P))+K[10]+38016083&4294967295,ee=M+(Q<<9&4294967295|Q>>>23),Q=J+(M^P&(ee^M))+K[15]+3634488961&4294967295,J=ee+(Q<<14&4294967295|Q>>>18),Q=P+(ee^M&(J^ee))+K[4]+3889429448&4294967295,P=J+(Q<<20&4294967295|Q>>>12),Q=M+(J^ee&(P^J))+K[9]+568446438&4294967295,M=P+(Q<<5&4294967295|Q>>>27),Q=ee+(P^J&(M^P))+K[14]+3275163606&4294967295,ee=M+(Q<<9&4294967295|Q>>>23),Q=J+(M^P&(ee^M))+K[3]+4107603335&4294967295,J=ee+(Q<<14&4294967295|Q>>>18),Q=P+(ee^M&(J^ee))+K[8]+1163531501&4294967295,P=J+(Q<<20&4294967295|Q>>>12),Q=M+(J^ee&(P^J))+K[13]+2850285829&4294967295,M=P+(Q<<5&4294967295|Q>>>27),Q=ee+(P^J&(M^P))+K[2]+4243563512&4294967295,ee=M+(Q<<9&4294967295|Q>>>23),Q=J+(M^P&(ee^M))+K[7]+1735328473&4294967295,J=ee+(Q<<14&4294967295|Q>>>18),Q=P+(ee^M&(J^ee))+K[12]+2368359562&4294967295,P=J+(Q<<20&4294967295|Q>>>12),Q=M+(P^J^ee)+K[5]+4294588738&4294967295,M=P+(Q<<4&4294967295|Q>>>28),Q=ee+(M^P^J)+K[8]+2272392833&4294967295,ee=M+(Q<<11&4294967295|Q>>>21),Q=J+(ee^M^P)+K[11]+1839030562&4294967295,J=ee+(Q<<16&4294967295|Q>>>16),Q=P+(J^ee^M)+K[14]+4259657740&4294967295,P=J+(Q<<23&4294967295|Q>>>9),Q=M+(P^J^ee)+K[1]+2763975236&4294967295,M=P+(Q<<4&4294967295|Q>>>28),Q=ee+(M^P^J)+K[4]+1272893353&4294967295,ee=M+(Q<<11&4294967295|Q>>>21),Q=J+(ee^M^P)+K[7]+4139469664&4294967295,J=ee+(Q<<16&4294967295|Q>>>16),Q=P+(J^ee^M)+K[10]+3200236656&4294967295,P=J+(Q<<23&4294967295|Q>>>9),Q=M+(P^J^ee)+K[13]+681279174&4294967295,M=P+(Q<<4&4294967295|Q>>>28),Q=ee+(M^P^J)+K[0]+3936430074&4294967295,ee=M+(Q<<11&4294967295|Q>>>21),Q=J+(ee^M^P)+K[3]+3572445317&4294967295,J=ee+(Q<<16&4294967295|Q>>>16),Q=P+(J^ee^M)+K[6]+76029189&4294967295,P=J+(Q<<23&4294967295|Q>>>9),Q=M+(P^J^ee)+K[9]+3654602809&4294967295,M=P+(Q<<4&4294967295|Q>>>28),Q=ee+(M^P^J)+K[12]+3873151461&4294967295,ee=M+(Q<<11&4294967295|Q>>>21),Q=J+(ee^M^P)+K[15]+530742520&4294967295,J=ee+(Q<<16&4294967295|Q>>>16),Q=P+(J^ee^M)+K[2]+3299628645&4294967295,P=J+(Q<<23&4294967295|Q>>>9),Q=M+(J^(P|~ee))+K[0]+4096336452&4294967295,M=P+(Q<<6&4294967295|Q>>>26),Q=ee+(P^(M|~J))+K[7]+1126891415&4294967295,ee=M+(Q<<10&4294967295|Q>>>22),Q=J+(M^(ee|~P))+K[14]+2878612391&4294967295,J=ee+(Q<<15&4294967295|Q>>>17),Q=P+(ee^(J|~M))+K[5]+4237533241&4294967295,P=J+(Q<<21&4294967295|Q>>>11),Q=M+(J^(P|~ee))+K[12]+1700485571&4294967295,M=P+(Q<<6&4294967295|Q>>>26),Q=ee+(P^(M|~J))+K[3]+2399980690&4294967295,ee=M+(Q<<10&4294967295|Q>>>22),Q=J+(M^(ee|~P))+K[10]+4293915773&4294967295,J=ee+(Q<<15&4294967295|Q>>>17),Q=P+(ee^(J|~M))+K[1]+2240044497&4294967295,P=J+(Q<<21&4294967295|Q>>>11),Q=M+(J^(P|~ee))+K[8]+1873313359&4294967295,M=P+(Q<<6&4294967295|Q>>>26),Q=ee+(P^(M|~J))+K[15]+4264355552&4294967295,ee=M+(Q<<10&4294967295|Q>>>22),Q=J+(M^(ee|~P))+K[6]+2734768916&4294967295,J=ee+(Q<<15&4294967295|Q>>>17),Q=P+(ee^(J|~M))+K[13]+1309151649&4294967295,P=J+(Q<<21&4294967295|Q>>>11),Q=M+(J^(P|~ee))+K[4]+4149444226&4294967295,M=P+(Q<<6&4294967295|Q>>>26),Q=ee+(P^(M|~J))+K[11]+3174756917&4294967295,ee=M+(Q<<10&4294967295|Q>>>22),Q=J+(M^(ee|~P))+K[2]+718787259&4294967295,J=ee+(Q<<15&4294967295|Q>>>17),Q=P+(ee^(J|~M))+K[9]+3951481745&4294967295,V.g[0]=V.g[0]+M&4294967295,V.g[1]=V.g[1]+(J+(Q<<21&4294967295|Q>>>11))&4294967295,V.g[2]=V.g[2]+J&4294967295,V.g[3]=V.g[3]+ee&4294967295}i.prototype.u=function(V,M){M===void 0&&(M=V.length);for(var P=M-this.blockSize,K=this.B,J=this.h,ee=0;ee<M;){if(J==0)for(;ee<=P;)a(this,V,ee),ee+=this.blockSize;if(typeof V=="string"){for(;ee<M;)if(K[J++]=V.charCodeAt(ee++),J==this.blockSize){a(this,K),J=0;break}}else for(;ee<M;)if(K[J++]=V[ee++],J==this.blockSize){a(this,K),J=0;break}}this.h=J,this.o+=M},i.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var M=1;M<V.length-8;++M)V[M]=0;var P=8*this.o;for(M=V.length-8;M<V.length;++M)V[M]=P&255,P/=256;for(this.u(V),V=Array(16),M=P=0;4>M;++M)for(var K=0;32>K;K+=8)V[P++]=this.g[M]>>>K&255;return V};function l(V,M){var P=h;return Object.prototype.hasOwnProperty.call(P,V)?P[V]:P[V]=M(V)}function c(V,M){this.h=M;for(var P=[],K=!0,J=V.length-1;0<=J;J--){var ee=V[J]|0;K&&ee==M||(P[J]=ee,K=!1)}this.g=P}var h={};function p(V){return-128<=V&&128>V?l(V,function(M){return new c([M|0],0>M?-1:0)}):new c([V|0],0>V?-1:0)}function g(V){if(isNaN(V)||!isFinite(V))return S;if(0>V)return N(g(-V));for(var M=[],P=1,K=0;V>=P;K++)M[K]=V/P|0,P*=4294967296;return new c(M,0)}function y(V,M){if(V.length==0)throw Error("number format error: empty string");if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(V.charAt(0)=="-")return N(y(V.substring(1),M));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=g(Math.pow(M,8)),K=S,J=0;J<V.length;J+=8){var ee=Math.min(8,V.length-J),Q=parseInt(V.substring(J,J+ee),M);8>ee?(ee=g(Math.pow(M,ee)),K=K.j(ee).add(g(Q))):(K=K.j(P),K=K.add(g(Q)))}return K}var S=p(0),T=p(1),D=p(16777216);r=c.prototype,r.m=function(){if(I(this))return-N(this).m();for(var V=0,M=1,P=0;P<this.g.length;P++){var K=this.i(P);V+=(0<=K?K:4294967296+K)*M,M*=4294967296}return V},r.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(E(this))return"0";if(I(this))return"-"+N(this).toString(V);for(var M=g(Math.pow(V,6)),P=this,K="";;){var J=G(P,M).g;P=O(P,J.j(M));var ee=((0<P.g.length?P.g[0]:P.h)>>>0).toString(V);if(P=J,E(P))return ee+K;for(;6>ee.length;)ee="0"+ee;K=ee+K}},r.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function E(V){if(V.h!=0)return!1;for(var M=0;M<V.g.length;M++)if(V.g[M]!=0)return!1;return!0}function I(V){return V.h==-1}r.l=function(V){return V=O(this,V),I(V)?-1:E(V)?0:1};function N(V){for(var M=V.g.length,P=[],K=0;K<M;K++)P[K]=~V.g[K];return new c(P,~V.h).add(T)}r.abs=function(){return I(this)?N(this):this},r.add=function(V){for(var M=Math.max(this.g.length,V.g.length),P=[],K=0,J=0;J<=M;J++){var ee=K+(this.i(J)&65535)+(V.i(J)&65535),Q=(ee>>>16)+(this.i(J)>>>16)+(V.i(J)>>>16);K=Q>>>16,ee&=65535,Q&=65535,P[J]=Q<<16|ee}return new c(P,P[P.length-1]&-2147483648?-1:0)};function O(V,M){return V.add(N(M))}r.j=function(V){if(E(this)||E(V))return S;if(I(this))return I(V)?N(this).j(N(V)):N(N(this).j(V));if(I(V))return N(this.j(N(V)));if(0>this.l(D)&&0>V.l(D))return g(this.m()*V.m());for(var M=this.g.length+V.g.length,P=[],K=0;K<2*M;K++)P[K]=0;for(K=0;K<this.g.length;K++)for(var J=0;J<V.g.length;J++){var ee=this.i(K)>>>16,Q=this.i(K)&65535,ct=V.i(J)>>>16,nt=V.i(J)&65535;P[2*K+2*J]+=Q*nt,B(P,2*K+2*J),P[2*K+2*J+1]+=ee*nt,B(P,2*K+2*J+1),P[2*K+2*J+1]+=Q*ct,B(P,2*K+2*J+1),P[2*K+2*J+2]+=ee*ct,B(P,2*K+2*J+2)}for(K=0;K<M;K++)P[K]=P[2*K+1]<<16|P[2*K];for(K=M;K<2*M;K++)P[K]=0;return new c(P,0)};function B(V,M){for(;(V[M]&65535)!=V[M];)V[M+1]+=V[M]>>>16,V[M]&=65535,M++}function j(V,M){this.g=V,this.h=M}function G(V,M){if(E(M))throw Error("division by zero");if(E(V))return new j(S,S);if(I(V))return M=G(N(V),M),new j(N(M.g),N(M.h));if(I(M))return M=G(V,N(M)),new j(N(M.g),M.h);if(30<V.g.length){if(I(V)||I(M))throw Error("slowDivide_ only works with positive integers.");for(var P=T,K=M;0>=K.l(V);)P=q(P),K=q(K);var J=X(P,1),ee=X(K,1);for(K=X(K,2),P=X(P,2);!E(K);){var Q=ee.add(K);0>=Q.l(V)&&(J=J.add(P),ee=Q),K=X(K,1),P=X(P,1)}return M=O(V,J.j(M)),new j(J,M)}for(J=S;0<=V.l(M);){for(P=Math.max(1,Math.floor(V.m()/M.m())),K=Math.ceil(Math.log(P)/Math.LN2),K=48>=K?1:Math.pow(2,K-48),ee=g(P),Q=ee.j(M);I(Q)||0<Q.l(V);)P-=K,ee=g(P),Q=ee.j(M);E(ee)&&(ee=T),J=J.add(ee),V=O(V,Q)}return new j(J,V)}r.A=function(V){return G(this,V).h},r.and=function(V){for(var M=Math.max(this.g.length,V.g.length),P=[],K=0;K<M;K++)P[K]=this.i(K)&V.i(K);return new c(P,this.h&V.h)},r.or=function(V){for(var M=Math.max(this.g.length,V.g.length),P=[],K=0;K<M;K++)P[K]=this.i(K)|V.i(K);return new c(P,this.h|V.h)},r.xor=function(V){for(var M=Math.max(this.g.length,V.g.length),P=[],K=0;K<M;K++)P[K]=this.i(K)^V.i(K);return new c(P,this.h^V.h)};function q(V){for(var M=V.g.length+1,P=[],K=0;K<M;K++)P[K]=V.i(K)<<1|V.i(K-1)>>>31;return new c(P,V.h)}function X(V,M){var P=M>>5;M%=32;for(var K=V.g.length-P,J=[],ee=0;ee<K;ee++)J[ee]=0<M?V.i(ee+P)>>>M|V.i(ee+P+1)<<32-M:V.i(ee+P);return new c(J,V.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,_w=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=y,bs=c}).apply(typeof zE<"u"?zE:typeof self<"u"?self:typeof window<"u"?window:{});var gh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ew,nu,Tw,Ih,jg,ww,bw,Sw;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,v,A){return f==Array.prototype||f==Object.prototype||(f[v]=A.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof gh=="object"&&gh];for(var v=0;v<f.length;++v){var A=f[v];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var i=t(this);function a(f,v){if(v)e:{var A=i;f=f.split(".");for(var U=0;U<f.length-1;U++){var le=f[U];if(!(le in A))break e;A=A[le]}f=f[f.length-1],U=A[f],v=v(U),v!=U&&v!=null&&e(A,f,{configurable:!0,writable:!0,value:v})}}function l(f,v){f instanceof String&&(f+="");var A=0,U=!1,le={next:function(){if(!U&&A<f.length){var me=A++;return{value:v(me,f[me]),done:!1}}return U=!0,{done:!0,value:void 0}}};return le[Symbol.iterator]=function(){return le},le}a("Array.prototype.values",function(f){return f||function(){return l(this,function(v,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function p(f){var v=typeof f;return v=v!="object"?v:f?Array.isArray(f)?"array":v:"null",v=="array"||v=="object"&&typeof f.length=="number"}function g(f){var v=typeof f;return v=="object"&&f!=null||v=="function"}function y(f,v,A){return f.call.apply(f.bind,arguments)}function S(f,v,A){if(!f)throw Error();if(2<arguments.length){var U=Array.prototype.slice.call(arguments,2);return function(){var le=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(le,U),f.apply(v,le)}}return function(){return f.apply(v,arguments)}}function T(f,v,A){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:S,T.apply(null,arguments)}function D(f,v){var A=Array.prototype.slice.call(arguments,1);return function(){var U=A.slice();return U.push.apply(U,arguments),f.apply(this,U)}}function E(f,v){function A(){}A.prototype=v.prototype,f.aa=v.prototype,f.prototype=new A,f.prototype.constructor=f,f.Qb=function(U,le,me){for(var xe=Array(arguments.length-2),_t=2;_t<arguments.length;_t++)xe[_t-2]=arguments[_t];return v.prototype[le].apply(U,xe)}}function I(f){const v=f.length;if(0<v){const A=Array(v);for(let U=0;U<v;U++)A[U]=f[U];return A}return[]}function N(f,v){for(let A=1;A<arguments.length;A++){const U=arguments[A];if(p(U)){const le=f.length||0,me=U.length||0;f.length=le+me;for(let xe=0;xe<me;xe++)f[le+xe]=U[xe]}else f.push(U)}}class O{constructor(v,A){this.i=v,this.j=A,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function B(f){return/^[\s\xa0]*$/.test(f)}function j(){var f=h.navigator;return f&&(f=f.userAgent)?f:""}function G(f){return G[" "](f),f}G[" "]=function(){};var q=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function X(f,v,A){for(const U in f)v.call(A,f[U],U,f)}function V(f,v){for(const A in f)v.call(void 0,f[A],A,f)}function M(f){const v={};for(const A in f)v[A]=f[A];return v}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function K(f,v){let A,U;for(let le=1;le<arguments.length;le++){U=arguments[le];for(A in U)f[A]=U[A];for(let me=0;me<P.length;me++)A=P[me],Object.prototype.hasOwnProperty.call(U,A)&&(f[A]=U[A])}}function J(f){var v=1;f=f.split(":");const A=[];for(;0<v&&f.length;)A.push(f.shift()),v--;return f.length&&A.push(f.join(":")),A}function ee(f){h.setTimeout(()=>{throw f},0)}function Q(){var f=Xe;let v=null;return f.g&&(v=f.g,f.g=f.g.next,f.g||(f.h=null),v.next=null),v}class ct{constructor(){this.h=this.g=null}add(v,A){const U=nt.get();U.set(v,A),this.h?this.h.next=U:this.g=U,this.h=U}}var nt=new O(()=>new ge,f=>f.reset());class ge{constructor(){this.next=this.g=this.h=null}set(v,A){this.h=v,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let De,Me=!1,Xe=new ct,Z=()=>{const f=h.Promise.resolve(void 0);De=()=>{f.then(de)}};var de=()=>{for(var f;f=Q();){try{f.h.call(f.g)}catch(A){ee(A)}var v=nt;v.j(f),100>v.h&&(v.h++,f.next=v.g,v.g=f)}Me=!1};function we(){this.s=this.s,this.C=this.C}we.prototype.s=!1,we.prototype.ma=function(){this.s||(this.s=!0,this.N())},we.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(f,v){this.type=f,this.g=this.target=v,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var ke=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var f=!1,v=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const A=()=>{};h.addEventListener("test",A,v),h.removeEventListener("test",A,v)}catch{}return f}();function Fe(f,v){if(Ie.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var A=this.type=f.type,U=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=v,v=f.relatedTarget){if(q){e:{try{G(v.nodeName);var le=!0;break e}catch{}le=!1}le||(v=null)}}else A=="mouseover"?v=f.fromElement:A=="mouseout"&&(v=f.toElement);this.relatedTarget=v,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:re[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Fe.aa.h.call(this)}}E(Fe,Ie);var re={2:"touch",3:"pen",4:"mouse"};Fe.prototype.h=function(){Fe.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var te="closure_listenable_"+(1e6*Math.random()|0),ye=0;function Ne(f,v,A,U,le){this.listener=f,this.proxy=null,this.src=v,this.type=A,this.capture=!!U,this.ha=le,this.key=++ye,this.da=this.fa=!1}function Be(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function F(f){this.src=f,this.g={},this.h=0}F.prototype.add=function(f,v,A,U,le){var me=f.toString();f=this.g[me],f||(f=this.g[me]=[],this.h++);var xe=ve(f,v,U,le);return-1<xe?(v=f[xe],A||(v.fa=!1)):(v=new Ne(v,this.src,me,!!U,le),v.fa=A,f.push(v)),v};function H(f,v){var A=v.type;if(A in f.g){var U=f.g[A],le=Array.prototype.indexOf.call(U,v,void 0),me;(me=0<=le)&&Array.prototype.splice.call(U,le,1),me&&(Be(v),f.g[A].length==0&&(delete f.g[A],f.h--))}}function ve(f,v,A,U){for(var le=0;le<f.length;++le){var me=f[le];if(!me.da&&me.listener==v&&me.capture==!!A&&me.ha==U)return le}return-1}var Oe="closure_lm_"+(1e6*Math.random()|0),dt={};function L(f,v,A,U,le){if(Array.isArray(v)){for(var me=0;me<v.length;me++)L(f,v[me],A,U,le);return null}return A=ze(A),f&&f[te]?f.K(v,A,g(U)?!!U.capture:!1,le):b(f,v,A,!1,U,le)}function b(f,v,A,U,le,me){if(!v)throw Error("Invalid event type");var xe=g(le)?!!le.capture:!!le,_t=qe(f);if(_t||(f[Oe]=_t=new F(f)),A=_t.add(v,A,U,xe,me),A.proxy)return A;if(U=R(),A.proxy=U,U.src=f,U.listener=A,f.addEventListener)ke||(le=xe),le===void 0&&(le=!1),f.addEventListener(v.toString(),U,le);else if(f.attachEvent)f.attachEvent(be(v.toString()),U);else if(f.addListener&&f.removeListener)f.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return A}function R(){function f(A){return v.call(f.src,f.listener,A)}const v=Ae;return f}function $(f,v,A,U,le){if(Array.isArray(v))for(var me=0;me<v.length;me++)$(f,v[me],A,U,le);else U=g(U)?!!U.capture:!!U,A=ze(A),f&&f[te]?(f=f.i,v=String(v).toString(),v in f.g&&(me=f.g[v],A=ve(me,A,U,le),-1<A&&(Be(me[A]),Array.prototype.splice.call(me,A,1),me.length==0&&(delete f.g[v],f.h--)))):f&&(f=qe(f))&&(v=f.g[v.toString()],f=-1,v&&(f=ve(v,A,U,le)),(A=-1<f?v[f]:null)&&oe(A))}function oe(f){if(typeof f!="number"&&f&&!f.da){var v=f.src;if(v&&v[te])H(v.i,f);else{var A=f.type,U=f.proxy;v.removeEventListener?v.removeEventListener(A,U,f.capture):v.detachEvent?v.detachEvent(be(A),U):v.addListener&&v.removeListener&&v.removeListener(U),(A=qe(v))?(H(A,f),A.h==0&&(A.src=null,v[Oe]=null)):Be(f)}}}function be(f){return f in dt?dt[f]:dt[f]="on"+f}function Ae(f,v){if(f.da)f=!0;else{v=new Fe(v,this);var A=f.listener,U=f.ha||f.src;f.fa&&oe(f),f=A.call(U,v)}return f}function qe(f){return f=f[Oe],f instanceof F?f:null}var rt="__closure_events_fn_"+(1e9*Math.random()>>>0);function ze(f){return typeof f=="function"?f:(f[rt]||(f[rt]=function(v){return f.handleEvent(v)}),f[rt])}function He(){we.call(this),this.i=new F(this),this.M=this,this.F=null}E(He,we),He.prototype[te]=!0,He.prototype.removeEventListener=function(f,v,A,U){$(this,f,v,A,U)};function x(f,v){var A,U=f.F;if(U)for(A=[];U;U=U.F)A.push(U);if(f=f.M,U=v.type||v,typeof v=="string")v=new Ie(v,f);else if(v instanceof Ie)v.target=v.target||f;else{var le=v;v=new Ie(U,f),K(v,le)}if(le=!0,A)for(var me=A.length-1;0<=me;me--){var xe=v.g=A[me];le=_(xe,U,!0,v)&&le}if(xe=v.g=f,le=_(xe,U,!0,v)&&le,le=_(xe,U,!1,v)&&le,A)for(me=0;me<A.length;me++)xe=v.g=A[me],le=_(xe,U,!1,v)&&le}He.prototype.N=function(){if(He.aa.N.call(this),this.i){var f=this.i,v;for(v in f.g){for(var A=f.g[v],U=0;U<A.length;U++)Be(A[U]);delete f.g[v],f.h--}}this.F=null},He.prototype.K=function(f,v,A,U){return this.i.add(String(f),v,!1,A,U)},He.prototype.L=function(f,v,A,U){return this.i.add(String(f),v,!0,A,U)};function _(f,v,A,U){if(v=f.i.g[String(v)],!v)return!0;v=v.concat();for(var le=!0,me=0;me<v.length;++me){var xe=v[me];if(xe&&!xe.da&&xe.capture==A){var _t=xe.listener,rn=xe.ha||xe.src;xe.fa&&H(f.i,xe),le=_t.call(rn,U)!==!1&&le}}return le&&!U.defaultPrevented}function w(f,v,A){if(typeof f=="function")A&&(f=T(f,A));else if(f&&typeof f.handleEvent=="function")f=T(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:h.setTimeout(f,v||0)}function z(f){f.g=w(()=>{f.g=null,f.i&&(f.i=!1,z(f))},f.l);const v=f.h;f.h=null,f.m.apply(null,v)}class ie extends we{constructor(v,A){super(),this.m=v,this.l=A,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:z(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function he(f){we.call(this),this.h=f,this.g={}}E(he,we);var _e=[];function $e(f){X(f.g,function(v,A){this.g.hasOwnProperty(A)&&oe(v)},f),f.g={}}he.prototype.N=function(){he.aa.N.call(this),$e(this)},he.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pt=h.JSON.stringify,bt=h.JSON.parse,St=class{stringify(f){return h.JSON.stringify(f,void 0)}parse(f){return h.JSON.parse(f,void 0)}};function yt(){}yt.prototype.h=null;function ii(f){return f.h||(f.h=f.i())}function Ls(){}var Er={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Tr(){Ie.call(this,"d")}E(Tr,Ie);function Ps(){Ie.call(this,"c")}E(Ps,Ie);var qn={},Us=null;function Wn(){return Us=Us||new He}qn.La="serverreachability";function kr(f){Ie.call(this,qn.La,f)}E(kr,Ie);function Lr(f){const v=Wn();x(v,new kr(v))}qn.STAT_EVENT="statevent";function Oa(f,v){Ie.call(this,qn.STAT_EVENT,f),this.stat=v}E(Oa,Ie);function Pt(f){const v=Wn();x(v,new Oa(v,f))}qn.Ma="timingevent";function $t(f,v){Ie.call(this,qn.Ma,f),this.size=v}E($t,Ie);function Je(f,v){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){f()},v)}function vt(){this.g=!0}vt.prototype.xa=function(){this.g=!1};function hn(f,v,A,U,le,me){f.info(function(){if(f.g)if(me)for(var xe="",_t=me.split("&"),rn=0;rn<_t.length;rn++){var Et=_t[rn].split("=");if(1<Et.length){var dn=Et[0];Et=Et[1];var sn=dn.split("_");xe=2<=sn.length&&sn[1]=="type"?xe+(dn+"="+Et+"&"):xe+(dn+"=redacted&")}}else xe=null;else xe=me;return"XMLHTTP REQ ("+U+") [attempt "+le+"]: "+v+`
`+A+`
`+xe})}function Kt(f,v,A,U,le,me,xe){f.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+le+"]: "+v+`
`+A+`
`+me+" "+xe})}function _n(f,v,A,U){f.info(function(){return"XMLHTTP TEXT ("+v+"): "+si(f,A)+(U?" "+U:"")})}function On(f,v){f.info(function(){return"TIMEOUT: "+v})}vt.prototype.info=function(){};function si(f,v){if(!f.g)return v;if(!v)return null;try{var A=JSON.parse(v);if(A){for(f=0;f<A.length;f++)if(Array.isArray(A[f])){var U=A[f];if(!(2>U.length)){var le=U[1];if(Array.isArray(le)&&!(1>le.length)){var me=le[0];if(me!="noop"&&me!="stop"&&me!="close")for(var xe=1;xe<le.length;xe++)le[xe]=""}}}}return pt(A)}catch{return v}}var ji={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ai={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Pr;function Ur(){}E(Ur,yt),Ur.prototype.g=function(){return new XMLHttpRequest},Ur.prototype.i=function(){return{}},Pr=new Ur;function Vn(f,v,A,U){this.j=f,this.i=v,this.l=A,this.R=U||1,this.U=new he(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qt}function Qt(){this.i=null,this.g="",this.h=!1}var Wo={},xa={};function wr(f,v,A){f.L=1,f.v=qs(Xn(v)),f.m=A,f.P=!0,oi(f,null)}function oi(f,v){f.F=Date.now(),Vs(f),f.A=Xn(f.v);var A=f.A,U=f.R;Array.isArray(U)||(U=[String(U)]),nl(A.i,"t",U),f.C=0,A=f.j.J,f.h=new Qt,f.g=rc(f.j,A?v:null,!f.m),0<f.O&&(f.M=new ie(T(f.Y,f,f.g),f.O)),v=f.U,A=f.g,U=f.ca;var le="readystatechange";Array.isArray(le)||(le&&(_e[0]=le.toString()),le=_e);for(var me=0;me<le.length;me++){var xe=L(A,le[me],U||v.handleEvent,!1,v.h||v);if(!xe)break;v.g[xe.key]=xe}v=f.H?M(f.H):{},f.m?(f.u||(f.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,v)):(f.u="GET",f.g.ea(f.A,f.u,null,v)),Lr(),hn(f.i,f.u,f.A,f.l,f.R,f.m)}Vn.prototype.ca=function(f){f=f.target;const v=this.M;v&&lr(f)==3?v.j():this.Y(f)},Vn.prototype.Y=function(f){try{if(f==this.g)e:{const sn=lr(this.g);var v=this.g.Ba();const gi=this.g.Z();if(!(3>sn)&&(sn!=3||this.g&&(this.h.h||this.g.oa()||Yu(this.g)))){this.J||sn!=4||v==7||(v==8||0>=gi?Lr(3):Lr(2)),Fi(this);var A=this.g.Z();this.X=A;t:if(qu(this)){var U=Yu(this.g);f="";var le=U.length,me=lr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){En(this),Vr(this);var xe="";break t}this.h.i=new h.TextDecoder}for(v=0;v<le;v++)this.h.h=!0,f+=this.h.i.decode(U[v],{stream:!(me&&v==le-1)});U.length=0,this.h.g+=f,this.C=0,xe=this.h.g}else xe=this.g.oa();if(this.o=A==200,Kt(this.i,this.u,this.A,this.l,this.R,sn,A),this.o){if(this.T&&!this.K){t:{if(this.g){var _t,rn=this.g;if((_t=rn.g?rn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(_t)){var Et=_t;break t}}Et=null}if(A=Et)_n(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Bs(this,A);else{this.o=!1,this.s=3,Pt(12),En(this),Vr(this);break e}}if(this.P){A=!0;let Tn;for(;!this.J&&this.C<xe.length;)if(Tn=zu(this,xe),Tn==xa){sn==4&&(this.s=4,Pt(14),A=!1),_n(this.i,this.l,null,"[Incomplete Response]");break}else if(Tn==Wo){this.s=4,Pt(15),_n(this.i,this.l,xe,"[Invalid Chunk]"),A=!1;break}else _n(this.i,this.l,Tn,null),Bs(this,Tn);if(qu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),sn!=4||xe.length!=0||this.h.h||(this.s=1,Pt(16),A=!1),this.o=this.o&&A,!A)_n(this.i,this.l,xe,"[Invalid Chunked Response]"),En(this),Vr(this);else if(0<xe.length&&!this.W){this.W=!0;var dn=this.j;dn.g==this&&dn.ba&&!dn.M&&(dn.j.info("Great, no buffering proxy detected. Bytes received: "+xe.length),Ws(dn),dn.M=!0,Pt(11))}}else _n(this.i,this.l,xe,null),Bs(this,xe);sn==4&&En(this),this.o&&!this.J&&(sn==4?ec(this.j,this):(this.o=!1,Vs(this)))}else jf(this.g),A==400&&0<xe.indexOf("Unknown SID")?(this.s=3,Pt(12)):(this.s=0,Pt(13)),En(this),Vr(this)}}}catch{}finally{}};function qu(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function zu(f,v){var A=f.C,U=v.indexOf(`
`,A);return U==-1?xa:(A=Number(v.substring(A,U)),isNaN(A)?Wo:(U+=1,U+A>v.length?xa:(v=v.slice(U,U+A),f.C=U+A,v)))}Vn.prototype.cancel=function(){this.J=!0,En(this)};function Vs(f){f.S=Date.now()+f.I,Hu(f,f.I)}function Hu(f,v){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Je(T(f.ba,f),v)}function Fi(f){f.B&&(h.clearTimeout(f.B),f.B=null)}Vn.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(On(this.i,this.A),this.L!=2&&(Lr(),Pt(17)),En(this),this.s=2,Vr(this)):Hu(this,this.S-f)};function Vr(f){f.j.G==0||f.J||ec(f.j,f)}function En(f){Fi(f);var v=f.M;v&&typeof v.ma=="function"&&v.ma(),f.M=null,$e(f.U),f.g&&(v=f.g,f.g=null,v.abort(),v.ma())}function Bs(f,v){try{var A=f.j;if(A.G!=0&&(A.g==f||Xo(A.h,f))){if(!f.K&&Xo(A.h,f)&&A.G==3){try{var U=A.Da.g.parse(v)}catch{U=null}if(Array.isArray(U)&&U.length==3){var le=U;if(le[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<f.F)za(A),Fa(A);else break e;ol(A),Pt(18)}}else A.za=le[1],0<A.za-A.T&&37500>le[2]&&A.F&&A.v==0&&!A.C&&(A.C=Je(T(A.Za,A),6e3));if(1>=Ma(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else pi(A,11)}else if((f.K||A.g==f)&&za(A),!B(v))for(le=A.Da.g.parse(v),v=0;v<le.length;v++){let Et=le[v];if(A.T=Et[0],Et=Et[1],A.G==2)if(Et[0]=="c"){A.K=Et[1],A.ia=Et[2];const dn=Et[3];dn!=null&&(A.la=dn,A.j.info("VER="+A.la));const sn=Et[4];sn!=null&&(A.Aa=sn,A.j.info("SVER="+A.Aa));const gi=Et[5];gi!=null&&typeof gi=="number"&&0<gi&&(U=1.5*gi,A.L=U,A.j.info("backChannelRequestTimeoutMs_="+U)),U=A;const Tn=f.g;if(Tn){const Gr=Tn.g?Tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gr){var me=U.h;me.g||Gr.indexOf("spdy")==-1&&Gr.indexOf("quic")==-1&&Gr.indexOf("h2")==-1||(me.j=me.l,me.g=new Set,me.h&&(ka(me,me.h),me.h=null))}if(U.D){const ul=Tn.g?Tn.g.getResponseHeader("X-HTTP-Session-Id"):null;ul&&(U.ya=ul,xt(U.I,U.D,ul))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-f.F,A.j.info("Handshake RTT: "+A.R+"ms")),U=A;var xe=f;if(U.qa=nc(U,U.J?U.ia:null,U.W),xe.K){Bn(U.h,xe);var _t=xe,rn=U.L;rn&&(_t.I=rn),_t.B&&(Fi(_t),Vs(_t)),U.g=xe}else Zu(U);0<A.i.length&&qa(A)}else Et[0]!="stop"&&Et[0]!="close"||pi(A,7);else A.G==3&&(Et[0]=="stop"||Et[0]=="close"?Et[0]=="stop"?pi(A,7):sl(A):Et[0]!="noop"&&A.l&&A.l.ta(Et),A.v=0)}}Lr(4)}catch{}}var Gu=class{constructor(f,v){this.g=f,this.map=v}};function li(f){this.l=f||10,h.PerformanceNavigationTiming?(f=h.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Na(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Ma(f){return f.h?1:f.g?f.g.size:0}function Xo(f,v){return f.h?f.h==v:f.g?f.g.has(v):!1}function ka(f,v){f.g?f.g.add(v):f.h=v}function Bn(f,v){f.h&&f.h==v?f.h=null:f.g&&f.g.has(v)&&f.g.delete(v)}li.prototype.cancel=function(){if(this.i=Zo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Zo(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let v=f.i;for(const A of f.g.values())v=v.concat(A.D);return v}return I(f.i)}function Pf(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(p(f)){for(var v=[],A=f.length,U=0;U<A;U++)v.push(f[U]);return v}v=[],A=0;for(U in f)v[A++]=f[U];return v}function La(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(p(f)||typeof f=="string"){var v=[];f=f.length;for(var A=0;A<f;A++)v.push(A);return v}v=[],A=0;for(const U in f)v[A++]=U;return v}}}function Jo(f,v){if(f.forEach&&typeof f.forEach=="function")f.forEach(v,void 0);else if(p(f)||typeof f=="string")Array.prototype.forEach.call(f,v,void 0);else for(var A=La(f),U=Pf(f),le=U.length,me=0;me<le;me++)v.call(void 0,U[me],A&&A[me],f)}var js=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Uf(f,v){if(f){f=f.split("&");for(var A=0;A<f.length;A++){var U=f[A].indexOf("="),le=null;if(0<=U){var me=f[A].substring(0,U);le=f[A].substring(U+1)}else me=f[A];v(me,le?decodeURIComponent(le.replace(/\+/g," ")):"")}}}function Zt(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Zt){this.h=f.h,Fs(this,f.j),this.o=f.o,this.g=f.g,qi(this,f.s),this.l=f.l;var v=f.i,A=new ci;A.i=v.i,v.g&&(A.g=new Map(v.g),A.h=v.h),ui(this,A),this.m=f.m}else f&&(v=String(f).match(js))?(this.h=!1,Fs(this,v[1]||"",!0),this.o=sr(v[2]||""),this.g=sr(v[3]||"",!0),qi(this,v[4]),this.l=sr(v[5]||"",!0),ui(this,v[6]||"",!0),this.m=sr(v[7]||"")):(this.h=!1,this.i=new ci(null,this.h))}Zt.prototype.toString=function(){var f=[],v=this.j;v&&f.push(zs(v,el,!0),":");var A=this.g;return(A||v=="file")&&(f.push("//"),(v=this.o)&&f.push(zs(v,el,!0),"@"),f.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&f.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&f.push("/"),f.push(zs(A,A.charAt(0)=="/"?Vf:tl,!0))),(A=this.i.toString())&&f.push("?",A),(A=this.m)&&f.push("#",zs(A,Pa)),f.join("")};function Xn(f){return new Zt(f)}function Fs(f,v,A){f.j=A?sr(v,!0):v,f.j&&(f.j=f.j.replace(/:$/,""))}function qi(f,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);f.s=v}else f.s=null}function ui(f,v,A){v instanceof ci?(f.i=v,Ku(f.i,f.h)):(A||(v=zs(v,Bf)),f.i=new ci(v,f.h))}function xt(f,v,A){f.i.set(v,A)}function qs(f){return xt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function sr(f,v){return f?v?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function zs(f,v,A){return typeof f=="string"?(f=encodeURI(f).replace(v,$u),A&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function $u(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var el=/[#\/\?@]/g,tl=/[#\?:]/g,Vf=/[#\?]/g,Bf=/[#\?@]/g,Pa=/#/g;function ci(f,v){this.h=this.g=null,this.i=f||null,this.j=!!v}function ar(f){f.g||(f.g=new Map,f.h=0,f.i&&Uf(f.i,function(v,A){f.add(decodeURIComponent(v.replace(/\+/g," ")),A)}))}r=ci.prototype,r.add=function(f,v){ar(this),this.i=null,f=Br(this,f);var A=this.g.get(f);return A||this.g.set(f,A=[]),A.push(v),this.h+=1,this};function hi(f,v){ar(f),v=Br(f,v),f.g.has(v)&&(f.i=null,f.h-=f.g.get(v).length,f.g.delete(v))}function fi(f,v){return ar(f),v=Br(f,v),f.g.has(v)}r.forEach=function(f,v){ar(this),this.g.forEach(function(A,U){A.forEach(function(le){f.call(v,le,U,this)},this)},this)},r.na=function(){ar(this);const f=Array.from(this.g.values()),v=Array.from(this.g.keys()),A=[];for(let U=0;U<v.length;U++){const le=f[U];for(let me=0;me<le.length;me++)A.push(v[U])}return A},r.V=function(f){ar(this);let v=[];if(typeof f=="string")fi(this,f)&&(v=v.concat(this.g.get(Br(this,f))));else{f=Array.from(this.g.values());for(let A=0;A<f.length;A++)v=v.concat(f[A])}return v},r.set=function(f,v){return ar(this),this.i=null,f=Br(this,f),fi(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[v]),this.h+=1,this},r.get=function(f,v){return f?(f=this.V(f),0<f.length?String(f[0]):v):v};function nl(f,v,A){hi(f,v),0<A.length&&(f.i=null,f.g.set(Br(f,v),I(A)),f.h+=A.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],v=Array.from(this.g.keys());for(var A=0;A<v.length;A++){var U=v[A];const me=encodeURIComponent(String(U)),xe=this.V(U);for(U=0;U<xe.length;U++){var le=me;xe[U]!==""&&(le+="="+encodeURIComponent(String(xe[U]))),f.push(le)}}return this.i=f.join("&")};function Br(f,v){return v=String(v),f.j&&(v=v.toLowerCase()),v}function Ku(f,v){v&&!f.j&&(ar(f),f.i=null,f.g.forEach(function(A,U){var le=U.toLowerCase();U!=le&&(hi(this,U),nl(this,le,A))},f)),f.j=v}function Hs(f,v){const A=new vt;if(h.Image){const U=new Image;U.onload=D(or,A,"TestLoadImage: loaded",!0,v,U),U.onerror=D(or,A,"TestLoadImage: error",!1,v,U),U.onabort=D(or,A,"TestLoadImage: abort",!1,v,U),U.ontimeout=D(or,A,"TestLoadImage: timeout",!1,v,U),h.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=f}else v(!1)}function br(f,v){const A=new vt,U=new AbortController,le=setTimeout(()=>{U.abort(),or(A,"TestPingServer: timeout",!1,v)},1e4);fetch(f,{signal:U.signal}).then(me=>{clearTimeout(le),me.ok?or(A,"TestPingServer: ok",!0,v):or(A,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(le),or(A,"TestPingServer: error",!1,v)})}function or(f,v,A,U,le){try{le&&(le.onload=null,le.onerror=null,le.onabort=null,le.ontimeout=null),U(A)}catch{}}function Gs(){this.g=new St}function jr(f,v,A){const U=A||"";try{Jo(f,function(le,me){let xe=le;g(le)&&(xe=pt(le)),v.push(U+me+"="+encodeURIComponent(xe))})}catch(le){throw v.push(U+"type="+encodeURIComponent("_badmap")),le}}function zi(f){this.l=f.Ub||null,this.j=f.eb||!1}E(zi,yt),zi.prototype.g=function(){return new di(this.l,this.j)},zi.prototype.i=function(f){return function(){return f}}({});function di(f,v){He.call(this),this.D=f,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(di,He),r=di.prototype,r.open=function(f,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=v,this.readyState=1,qr(this)},r.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(v.body=f),(this.D||h).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fr(this)),this.readyState=0},r.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,qr(this)),this.g&&(this.readyState=3,qr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;rl(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function rl(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}r.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var v=f.value?f.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!f.done}))&&(this.response=this.responseText+=v)}f.done?Fr(this):qr(this),this.readyState==3&&rl(this)}},r.Ra=function(f){this.g&&(this.response=this.responseText=f,Fr(this))},r.Qa=function(f){this.g&&(this.response=f,Fr(this))},r.ga=function(){this.g&&Fr(this)};function Fr(f){f.readyState=4,f.l=null,f.j=null,f.v=null,qr(f)}r.setRequestHeader=function(f,v){this.u.append(f,v)},r.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],v=this.h.entries();for(var A=v.next();!A.done;)A=A.value,f.push(A[0]+": "+A[1]),A=v.next();return f.join(`\r
`)};function qr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(di.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function il(f){let v="";return X(f,function(A,U){v+=U,v+=":",v+=A,v+=`\r
`}),v}function fn(f,v,A){e:{for(U in A){var U=!1;break e}U=!0}U||(A=il(A),typeof f=="string"?A!=null&&encodeURIComponent(String(A)):xt(f,v,A))}function Ct(f){He.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Ct,He);var Ua=/^https?$/i,$s=["POST","PUT"];r=Ct.prototype,r.Ha=function(f){this.J=f},r.ea=function(f,v,A,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);v=v?v.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pr.g(),this.v=this.o?ii(this.o):ii(Pr),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(v,String(f),!0),this.B=!1}catch(me){Qu(this,me);return}if(f=A||"",A=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var le in U)A.set(le,U[le]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const me of U.keys())A.set(me,U.get(me));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(A.keys()).find(me=>me.toLowerCase()=="content-type"),le=h.FormData&&f instanceof h.FormData,!(0<=Array.prototype.indexOf.call($s,v,void 0))||U||le||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[me,xe]of A)this.g.setRequestHeader(me,xe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ks(this),this.u=!0,this.g.send(f),this.u=!1}catch(me){Qu(this,me)}};function Qu(f,v){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=v,f.m=5,Va(f),zr(f)}function Va(f){f.A||(f.A=!0,x(f,"complete"),x(f,"error"))}r.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,x(this,"complete"),x(this,"abort"),zr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zr(this,!0)),Ct.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Ba(this):this.bb())},r.bb=function(){Ba(this)};function Ba(f){if(f.h&&typeof c<"u"&&(!f.v[1]||lr(f)!=4||f.Z()!=2)){if(f.u&&lr(f)==4)w(f.Ea,0,f);else if(x(f,"readystatechange"),lr(f)==4){f.h=!1;try{const xe=f.Z();e:switch(xe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var A;if(!(A=v)){var U;if(U=xe===0){var le=String(f.D).match(js)[1]||null;!le&&h.self&&h.self.location&&(le=h.self.location.protocol.slice(0,-1)),U=!Ua.test(le?le.toLowerCase():"")}A=U}if(A)x(f,"complete"),x(f,"success");else{f.m=6;try{var me=2<lr(f)?f.g.statusText:""}catch{me=""}f.l=me+" ["+f.Z()+"]",Va(f)}}finally{zr(f)}}}}function zr(f,v){if(f.g){Ks(f);const A=f.g,U=f.v[0]?()=>{}:null;f.g=null,f.v=null,v||x(f,"ready");try{A.onreadystatechange=U}catch{}}}function Ks(f){f.I&&(h.clearTimeout(f.I),f.I=null)}r.isActive=function(){return!!this.g};function lr(f){return f.g?f.g.readyState:0}r.Z=function(){try{return 2<lr(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(f){if(this.g){var v=this.g.responseText;return f&&v.indexOf(f)==0&&(v=v.substring(f.length)),bt(v)}};function Yu(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function jf(f){const v={};f=(f.g&&2<=lr(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<f.length;U++){if(B(f[U]))continue;var A=J(f[U]);const le=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const me=v[le]||[];v[le]=me,me.push(A)}V(v,function(U){return U.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qs(f,v,A){return A&&A.internalChannelParams&&A.internalChannelParams[f]||v}function ja(f){this.Aa=0,this.i=[],this.j=new vt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qs("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qs("baseRetryDelayMs",5e3,f),this.cb=Qs("retryDelaySeedMs",1e4,f),this.Wa=Qs("forwardChannelMaxRetries",2,f),this.wa=Qs("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new li(f&&f.concurrentRequestLimit),this.Da=new Gs,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ja.prototype,r.la=8,r.G=1,r.connect=function(f,v,A,U){Pt(0),this.W=f,this.H=v||{},A&&U!==void 0&&(this.H.OSID=A,this.H.OAID=U),this.F=this.X,this.I=nc(this,null,this.W),qa(this)};function sl(f){if(Wu(f),f.G==3){var v=f.U++,A=Xn(f.I);if(xt(A,"SID",f.K),xt(A,"RID",v),xt(A,"TYPE","terminate"),Ys(f,A),v=new Vn(f,f.j,v),v.L=2,v.v=qs(Xn(A)),A=!1,h.navigator&&h.navigator.sendBeacon)try{A=h.navigator.sendBeacon(v.v.toString(),"")}catch{}!A&&h.Image&&(new Image().src=v.v,A=!0),A||(v.g=rc(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Vs(v)}tc(f)}function Fa(f){f.g&&(Ws(f),f.g.cancel(),f.g=null)}function Wu(f){Fa(f),f.u&&(h.clearTimeout(f.u),f.u=null),za(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&h.clearTimeout(f.s),f.s=null)}function qa(f){if(!Na(f.h)&&!f.s){f.s=!0;var v=f.Ga;De||Z(),Me||(De(),Me=!0),Xe.add(v,f),f.B=0}}function Ff(f,v){return Ma(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=v.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Je(T(f.Ga,f,v),ll(f,f.B)),f.B++,!0)}r.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const le=new Vn(this,this.j,f);let me=this.o;if(this.S&&(me?(me=M(me),K(me,this.S)):me=this.S),this.m!==null||this.O||(le.H=me,me=null),this.P)e:{for(var v=0,A=0;A<this.i.length;A++){t:{var U=this.i[A];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(v+=U,4096<v){v=A;break e}if(v===4096||A===this.i.length-1){v=A+1;break e}}v=1e3}else v=1e3;v=Xu(this,le,v),A=Xn(this.I),xt(A,"RID",f),xt(A,"CVER",22),this.D&&xt(A,"X-HTTP-Session-Id",this.D),Ys(this,A),me&&(this.O?v="headers="+encodeURIComponent(String(il(me)))+"&"+v:this.m&&fn(A,this.m,me)),ka(this.h,le),this.Ua&&xt(A,"TYPE","init"),this.P?(xt(A,"$req",v),xt(A,"SID","null"),le.T=!0,wr(le,A,null)):wr(le,A,v),this.G=2}}else this.G==3&&(f?al(this,f):this.i.length==0||Na(this.h)||al(this))};function al(f,v){var A;v?A=v.l:A=f.U++;const U=Xn(f.I);xt(U,"SID",f.K),xt(U,"RID",A),xt(U,"AID",f.T),Ys(f,U),f.m&&f.o&&fn(U,f.m,f.o),A=new Vn(f,f.j,A,f.B+1),f.m===null&&(A.H=f.o),v&&(f.i=v.D.concat(f.i)),v=Xu(f,A,1e3),A.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),ka(f.h,A),wr(A,U,v)}function Ys(f,v){f.H&&X(f.H,function(A,U){xt(v,U,A)}),f.l&&Jo({},function(A,U){xt(v,U,A)})}function Xu(f,v,A){A=Math.min(f.i.length,A);var U=f.l?T(f.l.Na,f.l,f):null;e:{var le=f.i;let me=-1;for(;;){const xe=["count="+A];me==-1?0<A?(me=le[0].g,xe.push("ofs="+me)):me=0:xe.push("ofs="+me);let _t=!0;for(let rn=0;rn<A;rn++){let Et=le[rn].g;const dn=le[rn].map;if(Et-=me,0>Et)me=Math.max(0,le[rn].g-100),_t=!1;else try{jr(dn,xe,"req"+Et+"_")}catch{U&&U(dn)}}if(_t){U=xe.join("&");break e}}}return f=f.i.splice(0,A),v.D=f,U}function Zu(f){if(!f.g&&!f.u){f.Y=1;var v=f.Fa;De||Z(),Me||(De(),Me=!0),Xe.add(v,f),f.v=0}}function ol(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Je(T(f.Fa,f),ll(f,f.v)),f.v++,!0)}r.Fa=function(){if(this.u=null,Ju(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Je(T(this.ab,this),f)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Pt(10),Fa(this),Ju(this))};function Ws(f){f.A!=null&&(h.clearTimeout(f.A),f.A=null)}function Ju(f){f.g=new Vn(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var v=Xn(f.qa);xt(v,"RID","rpc"),xt(v,"SID",f.K),xt(v,"AID",f.T),xt(v,"CI",f.F?"0":"1"),!f.F&&f.ja&&xt(v,"TO",f.ja),xt(v,"TYPE","xmlhttp"),Ys(f,v),f.m&&f.o&&fn(v,f.m,f.o),f.L&&(f.g.I=f.L);var A=f.g;f=f.ia,A.L=1,A.v=qs(Xn(v)),A.m=null,A.P=!0,oi(A,f)}r.Za=function(){this.C!=null&&(this.C=null,Fa(this),ol(this),Pt(19))};function za(f){f.C!=null&&(h.clearTimeout(f.C),f.C=null)}function ec(f,v){var A=null;if(f.g==v){za(f),Ws(f),f.g=null;var U=2}else if(Xo(f.h,v))A=v.D,Bn(f.h,v),U=1;else return;if(f.G!=0){if(v.o)if(U==1){A=v.m?v.m.length:0,v=Date.now()-v.F;var le=f.B;U=Wn(),x(U,new $t(U,A)),qa(f)}else Zu(f);else if(le=v.s,le==3||le==0&&0<v.X||!(U==1&&Ff(f,v)||U==2&&ol(f)))switch(A&&0<A.length&&(v=f.h,v.i=v.i.concat(A)),le){case 1:pi(f,5);break;case 4:pi(f,10);break;case 3:pi(f,6);break;default:pi(f,2)}}}function ll(f,v){let A=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(A*=2),A*v}function pi(f,v){if(f.j.info("Error code "+v),v==2){var A=T(f.fb,f),U=f.Xa;const le=!U;U=new Zt(U||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Fs(U,"https"),qs(U),le?Hs(U.toString(),A):br(U.toString(),A)}else Pt(2);f.G=0,f.l&&f.l.sa(v),tc(f),Wu(f)}r.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function tc(f){if(f.G=0,f.ka=[],f.l){const v=Zo(f.h);(v.length!=0||f.i.length!=0)&&(N(f.ka,v),N(f.ka,f.i),f.h.i.length=0,I(f.i),f.i.length=0),f.l.ra()}}function nc(f,v,A){var U=A instanceof Zt?Xn(A):new Zt(A);if(U.g!="")v&&(U.g=v+"."+U.g),qi(U,U.s);else{var le=h.location;U=le.protocol,v=v?v+"."+le.hostname:le.hostname,le=+le.port;var me=new Zt(null);U&&Fs(me,U),v&&(me.g=v),le&&qi(me,le),A&&(me.l=A),U=me}return A=f.D,v=f.ya,A&&v&&xt(U,A,v),xt(U,"VER",f.la),Ys(f,U),U}function rc(f,v,A){if(v&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=f.Ca&&!f.pa?new Ct(new zi({eb:A})):new Ct(f.pa),v.Ha(f.J),v}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ic(){}r=ic.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Ha(){}Ha.prototype.g=function(f,v){return new jn(f,v)};function jn(f,v){He.call(this),this.g=new ja(v),this.l=f,this.h=v&&v.messageUrlParams||null,f=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(f?f["X-WebChannel-Content-Type"]=v.messageContentType:f={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(f?f["X-WebChannel-Client-Profile"]=v.va:f={"X-WebChannel-Client-Profile":v.va}),this.g.S=f,(f=v&&v.Sb)&&!B(f)&&(this.g.m=f),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!B(v)&&(this.g.D=v,f=this.h,f!==null&&v in f&&(f=this.h,v in f&&delete f[v])),this.j=new Hr(this)}E(jn,He),jn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jn.prototype.close=function(){sl(this.g)},jn.prototype.o=function(f){var v=this.g;if(typeof f=="string"){var A={};A.__data__=f,f=A}else this.u&&(A={},A.__data__=pt(f),f=A);v.i.push(new Gu(v.Ya++,f)),v.G==3&&qa(v)},jn.prototype.N=function(){this.g.l=null,delete this.j,sl(this.g),delete this.g,jn.aa.N.call(this)};function sc(f){Tr.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var v=f.__sm__;if(v){e:{for(const A in v){f=A;break e}f=void 0}(this.i=f)&&(f=this.i,v=v!==null&&f in v?v[f]:void 0),this.data=v}else this.data=f}E(sc,Tr);function ac(){Ps.call(this),this.status=1}E(ac,Ps);function Hr(f){this.g=f}E(Hr,ic),Hr.prototype.ua=function(){x(this.g,"a")},Hr.prototype.ta=function(f){x(this.g,new sc(f))},Hr.prototype.sa=function(f){x(this.g,new ac)},Hr.prototype.ra=function(){x(this.g,"b")},Ha.prototype.createWebChannel=Ha.prototype.g,jn.prototype.send=jn.prototype.o,jn.prototype.open=jn.prototype.m,jn.prototype.close=jn.prototype.close,Sw=function(){return new Ha},bw=function(){return Wn()},ww=qn,jg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ji.NO_ERROR=0,ji.TIMEOUT=8,ji.HTTP_ERROR=6,Ih=ji,ai.COMPLETE="complete",Tw=ai,Ls.EventType=Er,Er.OPEN="a",Er.CLOSE="b",Er.ERROR="c",Er.MESSAGE="d",He.prototype.listen=He.prototype.K,nu=Ls,Ct.prototype.listenOnce=Ct.prototype.L,Ct.prototype.getLastError=Ct.prototype.Ka,Ct.prototype.getLastErrorCode=Ct.prototype.Ba,Ct.prototype.getStatus=Ct.prototype.Z,Ct.prototype.getResponseJson=Ct.prototype.Oa,Ct.prototype.getResponseText=Ct.prototype.oa,Ct.prototype.send=Ct.prototype.ea,Ct.prototype.setWithCredentials=Ct.prototype.Ha,Ew=Ct}).apply(typeof gh<"u"?gh:typeof self<"u"?self:typeof window<"u"?window:{});const HE="@firebase/firestore",GE="4.7.14";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ln.UNAUTHENTICATED=new Ln(null),Ln.GOOGLE_CREDENTIALS=new Ln("google-credentials-uid"),Ln.FIRST_PARTY=new Ln("first-party-uid"),Ln.MOCK_USER=new Ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ho="11.7.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=new Rm("@firebase/firestore");function To(){return Ea.logLevel}function Le(r,...e){if(Ea.logLevel<=gt.DEBUG){const t=e.map(Im);Ea.debug(`Firestore (${Ho}): ${r}`,...t)}}function ki(r,...e){if(Ea.logLevel<=gt.ERROR){const t=e.map(Im);Ea.error(`Firestore (${Ho}): ${r}`,...t)}}function No(r,...e){if(Ea.logLevel<=gt.WARN){const t=e.map(Im);Ea.warn(`Firestore (${Ho}): ${r}`,...t)}}function Im(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Rw(r,i,t)}function Rw(r,e,t){let i=`FIRESTORE (${Ho}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw ki(i),new Error(i)}function It(r,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,r||Rw(e,a,i)}function tt(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends Vi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class DO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ln.UNAUTHENTICATED))}shutdown(){}}class OO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class xO{constructor(e){this.t=e,this.currentUser=Ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){It(this.o===void 0,42304);let i=this.i;const a=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new ga;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ga,e.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await a(this.currentUser)})},h=p=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>h(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?h(p):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ga)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(It(typeof i.accessToken=="string",31837,{l:i}),new Aw(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return It(e===null||typeof e=="string",2055,{h:e}),new Ln(e)}}class NO{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class MO{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new NO(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $E{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kO{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Cr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){It(this.o===void 0,3512);const i=l=>{l.error!=null&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Le("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const a=l=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new $E(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(It(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new $E(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LO(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=LO(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function lt(r,e){return r<e?-1:r>e?1:0}function Fg(r,e){let t=0;for(;t<r.length&&t<e.length;){const i=r.codePointAt(t),a=e.codePointAt(t);if(i!==a){if(i<128&&a<128)return lt(i,a);{const l=Cw(),c=PO(l.encode(KE(r,t)),l.encode(KE(e,t)));return c!==0?c:lt(i,a)}}t+=i>65535?2:1}return lt(r.length,e.length)}function KE(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function PO(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return lt(r[t],e[t]);return lt(r.length,e.length)}function Mo(r,e,t){return r.length===e.length&&r.every((i,a)=>t(i,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE=-62135596800,YE=1e6;class un{static now(){return un.fromMillis(Date.now())}static fromDate(e){return un.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*YE);return new un(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ue(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ue(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<QE)throw new Ue(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ue(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/YE}_compareTo(e){return this.seconds===e.seconds?lt(this.nanoseconds,e.nanoseconds):lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-QE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{static fromTimestamp(e){return new et(e)}static min(){return new et(new un(0,0))}static max(){return new et(new un(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE="__name__";class Xr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Qe(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Qe(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Xr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xr?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=Xr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return lt(e.length,t.length)}static compareSegments(e,t){const i=Xr.isNumericId(e),a=Xr.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?Xr.extractNumericId(e).compare(Xr.extractNumericId(t)):Fg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return bs.fromString(e.substring(4,e.length-2))}}class Vt extends Xr{construct(e,t,i){return new Vt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ue(Ce.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(a=>a.length>0))}return new Vt(t)}static emptyPath(){return new Vt([])}}const UO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class In extends Xr{construct(e,t,i){return new In(e,t,i)}static isValidIdentifier(e){return UO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),In.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===WE}static keyField(){return new In([WE])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new Ue(Ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new Ue(Ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Ue(Ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,a+=2}else h==="`"?(c=!c,a++):h!=="."||c?(i+=h,a++):(l(),a++)}if(l(),c)throw new Ue(Ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new In(t)}static emptyPath(){return new In([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.path=e}static fromPath(e){return new je(Vt.fromString(e))}static fromName(e){return new je(Vt.fromString(e).popFirst(5))}static empty(){return new je(Vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Vt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new Vt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yu=-1;function VO(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,a=et.fromTimestamp(i===1e9?new un(t+1,0):new un(t,i));return new Cs(a,je.empty(),e)}function BO(r){return new Cs(r.readTime,r.key,yu)}class Cs{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Cs(et.min(),je.empty(),yu)}static max(){return new Cs(et.max(),je.empty(),yu)}}function jO(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=je.comparator(r.documentKey,e.documentKey),t!==0?t:lt(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Go(r){if(r.code!==Ce.FAILED_PRECONDITION||r.message!==FO)throw r;Le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Qe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Re((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Re?t:Re.resolve(t)}catch(t){return Re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Re.reject(t)}static resolve(e){return new Re((t,i)=>{t(e)})}static reject(e){return new Re((t,i)=>{i(e)})}static waitFor(e){return new Re((t,i)=>{let a=0,l=0,c=!1;e.forEach(h=>{++a,h.next(()=>{++l,c&&l===a&&t()},p=>i(p))}),c=!0,l===a&&t()})}static or(e){let t=Re.resolve(!1);for(const i of e)t=t.next(a=>a?Re.resolve(a):i());return t}static forEach(e,t){const i=[];return e.forEach((a,l)=>{i.push(t.call(this,a,l))}),this.waitFor(i)}static mapArray(e,t){return new Re((i,a)=>{const l=e.length,c=new Array(l);let h=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next(y=>{c[g]=y,++h,h===l&&i(c)},y=>a(y))}})}static doWhile(e,t){return new Re((i,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):i()};l()})}}function zO(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function $o(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>t.writeSequenceNumber(i))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}pf.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm=-1;function gf(r){return r==null}function Hh(r){return r===0&&1/r==-1/0}function HO(r){return typeof r=="number"&&Number.isInteger(r)&&!Hh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw="";function GO(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=XE(e)),e=$O(r.get(t),e);return XE(e)}function $O(r,e){let t=e;const i=r.length;for(let a=0;a<i;a++){const l=r.charAt(a);switch(l){case"\0":t+="";break;case Dw:t+="";break;default:t+=l}}return t}function XE(r){return r+Dw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Sa(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Ow(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,t){this.comparator=e,this.root=t||Cn.EMPTY}insert(e,t){return new zt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Cn.BLACK,null,null))}remove(e){return new zt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mh(this.root,e,this.comparator,!1)}getReverseIterator(){return new mh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mh(this.root,e,this.comparator,!0)}}class mh{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Cn{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??Cn.RED,this.left=a??Cn.EMPTY,this.right=l??Cn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new Cn(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Cn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Cn.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Qe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Qe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Qe(27949);return e+(this.isRed()?0:1)}}Cn.EMPTY=null,Cn.RED=!0,Cn.BLACK=!1;Cn.EMPTY=new class{constructor(){this.size=0}get key(){throw Qe(57766)}get value(){throw Qe(16141)}get color(){throw Qe(16727)}get left(){throw Qe(29726)}get right(){throw Qe(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new Cn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.comparator=e,this.data=new zt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new JE(this.data.getIterator())}getIteratorFrom(e){return new JE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof cn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new cn(this.comparator);return t.data=e,t}}class JE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this.fields=e,e.sort(In.comparator)}static empty(){return new Ir([])}unionWith(e){let t=new cn(In.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Ir(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Mo(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new xw("Invalid base64 string: "+l):l}}(e);return new Dn(t)}static fromUint8Array(e){const t=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(e);return new Dn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dn.EMPTY_BYTE_STRING=new Dn("");const KO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Is(r){if(It(!!r,39018),typeof r=="string"){let e=0;const t=KO.exec(r);if(It(!!t,46558,{timestamp:r}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Xt(r.seconds),nanos:Xt(r.nanos)}}function Xt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ds(r){return typeof r=="string"?Dn.fromBase64String(r):Dn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw="server_timestamp",Mw="__type__",kw="__previous_value__",Lw="__local_write_time__";function Om(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[Mw])===null||t===void 0?void 0:t.stringValue)===Nw}function mf(r){const e=r.mapValue.fields[kw];return Om(e)?mf(e):e}function vu(r){const e=Is(r.mapValue.fields[Lw].timestampValue);return new un(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e,t,i,a,l,c,h,p,g,y){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=y}}const Gh="(default)";class _u{constructor(e,t){this.projectId=e,this.database=t||Gh}static empty(){return new _u("","")}get isDefaultDatabase(){return this.database===Gh}isEqual(e){return e instanceof _u&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw="__type__",YO="__max__",yh={mapValue:{}},Uw="__vector__",$h="value";function Os(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Om(r)?4:XO(r)?9007199254740991:WO(r)?10:11:Qe(28295,{value:r})}function ri(r,e){if(r===e)return!0;const t=Os(r);if(t!==Os(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return vu(r).isEqual(vu(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Is(a.timestampValue),h=Is(l.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(a,l){return Ds(a.bytesValue).isEqual(Ds(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(a,l){return Xt(a.geoPointValue.latitude)===Xt(l.geoPointValue.latitude)&&Xt(a.geoPointValue.longitude)===Xt(l.geoPointValue.longitude)}(r,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return Xt(a.integerValue)===Xt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Xt(a.doubleValue),h=Xt(l.doubleValue);return c===h?Hh(c)===Hh(h):isNaN(c)&&isNaN(h)}return!1}(r,e);case 9:return Mo(r.arrayValue.values||[],e.arrayValue.values||[],ri);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},h=l.mapValue.fields||{};if(ZE(c)!==ZE(h))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(h[p]===void 0||!ri(c[p],h[p])))return!1;return!0}(r,e);default:return Qe(52216,{left:r})}}function Eu(r,e){return(r.values||[]).find(t=>ri(t,e))!==void 0}function ko(r,e){if(r===e)return 0;const t=Os(r),i=Os(e);if(t!==i)return lt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return lt(r.booleanValue,e.booleanValue);case 2:return function(l,c){const h=Xt(l.integerValue||l.doubleValue),p=Xt(c.integerValue||c.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1}(r,e);case 3:return e1(r.timestampValue,e.timestampValue);case 4:return e1(vu(r),vu(e));case 5:return Fg(r.stringValue,e.stringValue);case 6:return function(l,c){const h=Ds(l),p=Ds(c);return h.compareTo(p)}(r.bytesValue,e.bytesValue);case 7:return function(l,c){const h=l.split("/"),p=c.split("/");for(let g=0;g<h.length&&g<p.length;g++){const y=lt(h[g],p[g]);if(y!==0)return y}return lt(h.length,p.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,c){const h=lt(Xt(l.latitude),Xt(c.latitude));return h!==0?h:lt(Xt(l.longitude),Xt(c.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return t1(r.arrayValue,e.arrayValue);case 10:return function(l,c){var h,p,g,y;const S=l.fields||{},T=c.fields||{},D=(h=S[$h])===null||h===void 0?void 0:h.arrayValue,E=(p=T[$h])===null||p===void 0?void 0:p.arrayValue,I=lt(((g=D==null?void 0:D.values)===null||g===void 0?void 0:g.length)||0,((y=E==null?void 0:E.values)===null||y===void 0?void 0:y.length)||0);return I!==0?I:t1(D,E)}(r.mapValue,e.mapValue);case 11:return function(l,c){if(l===yh.mapValue&&c===yh.mapValue)return 0;if(l===yh.mapValue)return 1;if(c===yh.mapValue)return-1;const h=l.fields||{},p=Object.keys(h),g=c.fields||{},y=Object.keys(g);p.sort(),y.sort();for(let S=0;S<p.length&&S<y.length;++S){const T=Fg(p[S],y[S]);if(T!==0)return T;const D=ko(h[p[S]],g[y[S]]);if(D!==0)return D}return lt(p.length,y.length)}(r.mapValue,e.mapValue);default:throw Qe(23264,{Pe:t})}}function e1(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return lt(r,e);const t=Is(r),i=Is(e),a=lt(t.seconds,i.seconds);return a!==0?a:lt(t.nanos,i.nanos)}function t1(r,e){const t=r.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=ko(t[a],i[a]);if(l)return l}return lt(t.length,i.length)}function Lo(r){return qg(r)}function qg(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const i=Is(t);return`time(${i.seconds},${i.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return Ds(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return je.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=qg(l);return i+"]"}(r.arrayValue):"mapValue"in r?function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${qg(t.fields[c])}`;return a+"}"}(r.mapValue):Qe(61005,{value:r})}function Dh(r){switch(Os(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=mf(r);return e?16+Dh(e):16;case 5:return 2*r.stringValue.length;case 6:return Ds(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((a,l)=>a+Dh(l),0)}(r.arrayValue);case 10:case 11:return function(i){let a=0;return Sa(i.fields,(l,c)=>{a+=l.length+Dh(c)}),a}(r.mapValue);default:throw Qe(13486,{value:r})}}function n1(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function zg(r){return!!r&&"integerValue"in r}function xm(r){return!!r&&"arrayValue"in r}function r1(r){return!!r&&"nullValue"in r}function i1(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Oh(r){return!!r&&"mapValue"in r}function WO(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[Pw])===null||t===void 0?void 0:t.stringValue)===Uw}function lu(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Sa(r.mapValue.fields,(t,i)=>e.mapValue.fields[t]=lu(i)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=lu(r.arrayValue.values[t]);return e}return Object.assign({},r)}function XO(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===YO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.value=e}static empty(){return new _r({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Oh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lu(t)}setAll(e){let t=In.emptyPath(),i={},a=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,i,a),i={},a=[],t=h.popLast()}c?i[h.lastSegment()]=lu(c):a.push(h.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());Oh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ri(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Oh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Sa(t,(a,l)=>e[a]=l);for(const a of i)delete e[a]}clone(){return new _r(lu(this.value))}}function Vw(r){const e=[];return Sa(r.fields,(t,i)=>{const a=new In([t]);if(Oh(i)){const l=Vw(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)}),new Ir(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,t,i,a,l,c,h){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=h}static newInvalidDocument(e){return new Pn(e,0,et.min(),et.min(),et.min(),_r.empty(),0)}static newFoundDocument(e,t,i,a){return new Pn(e,1,t,et.min(),i,a,0)}static newNoDocument(e,t){return new Pn(e,2,t,et.min(),et.min(),_r.empty(),0)}static newUnknownDocument(e,t){return new Pn(e,3,t,et.min(),et.min(),_r.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_r.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_r.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,t){this.position=e,this.inclusive=t}}function s1(r,e,t){let i=0;for(let a=0;a<r.position.length;a++){const l=e[a],c=r.position[a];if(l.field.isKeyField()?i=je.comparator(je.fromName(c.referenceValue),t.key):i=ko(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function a1(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!ri(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,t="asc"){this.field=e,this.dir=t}}function ZO(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{}class nn extends Bw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new ex(e,t,i):t==="array-contains"?new rx(e,i):t==="in"?new ix(e,i):t==="not-in"?new sx(e,i):t==="array-contains-any"?new ax(e,i):new nn(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new tx(e,i):new nx(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ko(t,this.value)):t!==null&&Os(this.value)===Os(t)&&this.matchesComparison(ko(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Qe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xr extends Bw{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new xr(e,t)}matches(e){return jw(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function jw(r){return r.op==="and"}function Fw(r){return JO(r)&&jw(r)}function JO(r){for(const e of r.filters)if(e instanceof xr)return!1;return!0}function Hg(r){if(r instanceof nn)return r.field.canonicalString()+r.op.toString()+Lo(r.value);if(Fw(r))return r.filters.map(e=>Hg(e)).join(",");{const e=r.filters.map(t=>Hg(t)).join(",");return`${r.op}(${e})`}}function qw(r,e){return r instanceof nn?function(i,a){return a instanceof nn&&i.op===a.op&&i.field.isEqual(a.field)&&ri(i.value,a.value)}(r,e):r instanceof xr?function(i,a){return a instanceof xr&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce((l,c,h)=>l&&qw(c,a.filters[h]),!0):!1}(r,e):void Qe(19439)}function zw(r){return r instanceof nn?function(t){return`${t.field.canonicalString()} ${t.op} ${Lo(t.value)}`}(r):r instanceof xr?function(t){return t.op.toString()+" {"+t.getFilters().map(zw).join(" ,")+"}"}(r):"Filter"}class ex extends nn{constructor(e,t,i){super(e,t,i),this.key=je.fromName(i.referenceValue)}matches(e){const t=je.comparator(e.key,this.key);return this.matchesComparison(t)}}class tx extends nn{constructor(e,t){super(e,"in",t),this.keys=Hw("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class nx extends nn{constructor(e,t){super(e,"not-in",t),this.keys=Hw("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Hw(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>je.fromName(i.referenceValue))}class rx extends nn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xm(t)&&Eu(t.arrayValue,this.value)}}class ix extends nn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Eu(this.value.arrayValue,t)}}class sx extends nn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Eu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Eu(this.value.arrayValue,t)}}class ax extends nn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Eu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,t=null,i=[],a=[],l=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=h,this.Ie=null}}function o1(r,e=null,t=[],i=[],a=null,l=null,c=null){return new ox(r,e,t,i,a,l,c)}function Nm(r){const e=tt(r);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Hg(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),gf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Lo(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Lo(i)).join(",")),e.Ie=t}return e.Ie}function Mm(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!ZO(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!qw(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!a1(r.startAt,e.startAt)&&a1(r.endAt,e.endAt)}function Gg(r){return je.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,t=null,i=[],a=[],l=null,c="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=h,this.endAt=p,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function lx(r,e,t,i,a,l,c,h){return new Ko(r,e,t,i,a,l,c,h)}function km(r){return new Ko(r)}function l1(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Gw(r){return r.collectionGroup!==null}function uu(r){const e=tt(r);if(e.Ee===null){e.Ee=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ee.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new cn(In.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(h=h.add(g.field))})}),h})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ee.push(new Tu(l,i))}),t.has(In.keyField().canonicalString())||e.Ee.push(new Tu(In.keyField(),i))}return e.Ee}function Zr(r){const e=tt(r);return e.de||(e.de=ux(e,uu(r))),e.de}function ux(r,e){if(r.limitType==="F")return o1(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new Tu(a.field,l)});const t=r.endAt?new Kh(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new Kh(r.startAt.position,r.startAt.inclusive):null;return o1(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function $g(r,e){const t=r.filters.concat([e]);return new Ko(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Kg(r,e,t){return new Ko(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function yf(r,e){return Mm(Zr(r),Zr(e))&&r.limitType===e.limitType}function $w(r){return`${Nm(Zr(r))}|lt:${r.limitType}`}function wo(r){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(a=>zw(a)).join(", ")}]`),gf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(a=>Lo(a)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(a=>Lo(a)).join(",")),`Target(${i})`}(Zr(r))}; limitType=${r.limitType})`}function vf(r,e){return e.isFoundDocument()&&function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):je.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(r,e)&&function(i,a){for(const l of uu(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(r,e)&&function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0}(r,e)&&function(i,a){return!(i.startAt&&!function(c,h,p){const g=s1(c,h,p);return c.inclusive?g<=0:g<0}(i.startAt,uu(i),a)||i.endAt&&!function(c,h,p){const g=s1(c,h,p);return c.inclusive?g>=0:g>0}(i.endAt,uu(i),a))}(r,e)}function cx(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Kw(r){return(e,t)=>{let i=!1;for(const a of uu(r)){const l=hx(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function hx(r,e,t){const i=r.field.isKeyField()?je.comparator(e.key,t.key):function(l,c,h){const p=c.data.field(l),g=h.data.field(l);return p!==null&&g!==null?ko(p,g):Qe(42886)}(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Qe(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Sa(this.inner,(t,i)=>{for(const[a,l]of i)e(a,l)})}isEmpty(){return Ow(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx=new zt(je.comparator);function Li(){return fx}const Qw=new zt(je.comparator);function ru(...r){let e=Qw;for(const t of r)e=e.insert(t.key,t);return e}function Yw(r){let e=Qw;return r.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function pa(){return cu()}function Ww(){return cu()}function cu(){return new Ra(r=>r.toString(),(r,e)=>r.isEqual(e))}const dx=new zt(je.comparator),px=new cn(je.comparator);function mt(...r){let e=px;for(const t of r)e=e.add(t);return e}const gx=new cn(lt);function mx(){return gx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hh(e)?"-0":e}}function Xw(r){return{integerValue:""+r}}function yx(r,e){return HO(e)?Xw(e):Lm(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(){this._=void 0}}function vx(r,e,t){return r instanceof wu?function(a,l){const c={fields:{[Mw]:{stringValue:Nw},[Lw]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Om(l)&&(l=mf(l)),l&&(c.fields[kw]=l),{mapValue:c}}(t,e):r instanceof bu?Jw(r,e):r instanceof Su?eb(r,e):function(a,l){const c=Zw(a,l),h=u1(c)+u1(a.Re);return zg(c)&&zg(a.Re)?Xw(h):Lm(a.serializer,h)}(r,e)}function _x(r,e,t){return r instanceof bu?Jw(r,e):r instanceof Su?eb(r,e):t}function Zw(r,e){return r instanceof Qh?function(i){return zg(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class wu extends _f{}class bu extends _f{constructor(e){super(),this.elements=e}}function Jw(r,e){const t=tb(e);for(const i of r.elements)t.some(a=>ri(a,i))||t.push(i);return{arrayValue:{values:t}}}class Su extends _f{constructor(e){super(),this.elements=e}}function eb(r,e){let t=tb(e);for(const i of r.elements)t=t.filter(a=>!ri(a,i));return{arrayValue:{values:t}}}class Qh extends _f{constructor(e,t){super(),this.serializer=e,this.Re=t}}function u1(r){return Xt(r.integerValue||r.doubleValue)}function tb(r){return xm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,t){this.field=e,this.transform=t}}function Tx(r,e){return r.field.isEqual(e.field)&&function(i,a){return i instanceof bu&&a instanceof bu||i instanceof Su&&a instanceof Su?Mo(i.elements,a.elements,ri):i instanceof Qh&&a instanceof Qh?ri(i.Re,a.Re):i instanceof wu&&a instanceof wu}(r.transform,e.transform)}class wx{constructor(e,t){this.version=e,this.transformResults=t}}class Jr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Jr}static exists(e){return new Jr(void 0,e)}static updateTime(e){return new Jr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Ef{}function nb(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new ib(r.key,Jr.none()):new Lu(r.key,r.data,Jr.none());{const t=r.data,i=_r.empty();let a=new cn(In.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new Aa(r.key,i,new Ir(a.toArray()),Jr.none())}}function bx(r,e,t){r instanceof Lu?function(a,l,c){const h=a.value.clone(),p=h1(a.fieldTransforms,l,c.transformResults);h.setAll(p),l.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(r,e,t):r instanceof Aa?function(a,l,c){if(!xh(a.precondition,l))return void l.convertToUnknownDocument(c.version);const h=h1(a.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(rb(a)),p.setAll(h),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(r,e,t):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function hu(r,e,t,i){return r instanceof Lu?function(l,c,h,p){if(!xh(l.precondition,c))return h;const g=l.value.clone(),y=f1(l.fieldTransforms,p,c);return g.setAll(y),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null}(r,e,t,i):r instanceof Aa?function(l,c,h,p){if(!xh(l.precondition,c))return h;const g=f1(l.fieldTransforms,p,c),y=c.data;return y.setAll(rb(l)),y.setAll(g),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(S=>S.field))}(r,e,t,i):function(l,c,h){return xh(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h}(r,e,t)}function Sx(r,e){let t=null;for(const i of r.fieldTransforms){const a=e.data.field(i.field),l=Zw(i.transform,a||null);l!=null&&(t===null&&(t=_r.empty()),t.set(i.field,l))}return t||null}function c1(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Mo(i,a,(l,c)=>Tx(l,c))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Lu extends Ef{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Aa extends Ef{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function rb(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}}),e}function h1(r,e,t){const i=new Map;It(r.length===t.length,32656,{Ve:t.length,me:r.length});for(let a=0;a<t.length;a++){const l=r[a],c=l.transform,h=e.data.field(l.field);i.set(l.field,_x(c,h,t[a]))}return i}function f1(r,e,t){const i=new Map;for(const a of r){const l=a.transform,c=t.data.field(a.field);i.set(a.field,vx(l,c,e))}return i}class ib extends Ef{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Rx extends Ef{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&bx(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=hu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=hu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Ww();return this.mutations.forEach(a=>{const l=e.get(a.key),c=l.overlayedDocument;let h=this.applyToLocalView(c,l.mutatedFields);h=t.has(a.key)?null:h;const p=nb(c,h);p!==null&&i.set(a.key,p),c.isValidDocument()||c.convertToNoDocument(et.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),mt())}isEqual(e){return this.batchId===e.batchId&&Mo(this.mutations,e.mutations,(t,i)=>c1(t,i))&&Mo(this.baseMutations,e.baseMutations,(t,i)=>c1(t,i))}}class Pm{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){It(e.mutations.length===i.length,58842,{fe:e.mutations.length,ge:i.length});let a=function(){return dx}();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new Pm(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tn,wt;function Dx(r){switch(r){case Ce.OK:return Qe(64938);case Ce.CANCELLED:case Ce.UNKNOWN:case Ce.DEADLINE_EXCEEDED:case Ce.RESOURCE_EXHAUSTED:case Ce.INTERNAL:case Ce.UNAVAILABLE:case Ce.UNAUTHENTICATED:return!1;case Ce.INVALID_ARGUMENT:case Ce.NOT_FOUND:case Ce.ALREADY_EXISTS:case Ce.PERMISSION_DENIED:case Ce.FAILED_PRECONDITION:case Ce.ABORTED:case Ce.OUT_OF_RANGE:case Ce.UNIMPLEMENTED:case Ce.DATA_LOSS:return!0;default:return Qe(15467,{code:r})}}function sb(r){if(r===void 0)return ki("GRPC error has no .code"),Ce.UNKNOWN;switch(r){case tn.OK:return Ce.OK;case tn.CANCELLED:return Ce.CANCELLED;case tn.UNKNOWN:return Ce.UNKNOWN;case tn.DEADLINE_EXCEEDED:return Ce.DEADLINE_EXCEEDED;case tn.RESOURCE_EXHAUSTED:return Ce.RESOURCE_EXHAUSTED;case tn.INTERNAL:return Ce.INTERNAL;case tn.UNAVAILABLE:return Ce.UNAVAILABLE;case tn.UNAUTHENTICATED:return Ce.UNAUTHENTICATED;case tn.INVALID_ARGUMENT:return Ce.INVALID_ARGUMENT;case tn.NOT_FOUND:return Ce.NOT_FOUND;case tn.ALREADY_EXISTS:return Ce.ALREADY_EXISTS;case tn.PERMISSION_DENIED:return Ce.PERMISSION_DENIED;case tn.FAILED_PRECONDITION:return Ce.FAILED_PRECONDITION;case tn.ABORTED:return Ce.ABORTED;case tn.OUT_OF_RANGE:return Ce.OUT_OF_RANGE;case tn.UNIMPLEMENTED:return Ce.UNIMPLEMENTED;case tn.DATA_LOSS:return Ce.DATA_LOSS;default:return Qe(39323,{code:r})}}(wt=tn||(tn={}))[wt.OK=0]="OK",wt[wt.CANCELLED=1]="CANCELLED",wt[wt.UNKNOWN=2]="UNKNOWN",wt[wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wt[wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wt[wt.NOT_FOUND=5]="NOT_FOUND",wt[wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",wt[wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",wt[wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",wt[wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wt[wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wt[wt.ABORTED=10]="ABORTED",wt[wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",wt[wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",wt[wt.INTERNAL=13]="INTERNAL",wt[wt.UNAVAILABLE=14]="UNAVAILABLE",wt[wt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox=new bs([4294967295,4294967295],0);function d1(r){const e=Cw().encode(r),t=new _w;return t.update(e),new Uint8Array(t.digest())}function p1(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new bs([t,i],0),new bs([a,l],0)]}class Um{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new iu(`Invalid padding: ${t}`);if(i<0)throw new iu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new iu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new iu(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=bs.fromNumber(this.pe)}we(e,t,i){let a=e.add(t.multiply(bs.fromNumber(i)));return a.compare(Ox)===1&&(a=new bs([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=d1(e),[i,a]=p1(t);for(let l=0;l<this.hashCount;l++){const c=this.we(i,a,l);if(!this.be(c))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Um(l,a,t);return i.forEach(h=>c.insert(h)),c}insert(e){if(this.pe===0)return;const t=d1(e),[i,a]=p1(t);for(let l=0;l<this.hashCount;l++){const c=this.we(i,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class iu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Pu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Tf(et.min(),a,new zt(lt),Li(),mt())}}class Pu{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Pu(i,t,mt(),mt(),mt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,t,i,a){this.De=e,this.removedTargetIds=t,this.key=i,this.ve=a}}class ab{constructor(e,t){this.targetId=e,this.Ce=t}}class ob{constructor(e,t,i=Dn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class g1{constructor(){this.Fe=0,this.Me=m1(),this.xe=Dn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=mt(),t=mt(),i=mt();return this.Me.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:Qe(38017,{changeType:l})}}),new Pu(this.xe,this.Oe,e,t,i)}Qe(){this.Ne=!1,this.Me=m1()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,It(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class xx{constructor(e){this.ze=e,this.je=new Map,this.He=Li(),this.Je=vh(),this.Ye=vh(),this.Ze=new zt(lt)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const i=this.rt(t);switch(e.state){case 0:this.it(t)&&i.ke(e.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(e.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(t);break;case 3:this.it(t)&&(i.Ge(),i.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),i.ke(e.resumeToken));break;default:Qe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((i,a)=>{this.it(a)&&t(a)})}ot(e){const t=e.targetId,i=e.Ce.count,a=this._t(t);if(a){const l=a.target;if(Gg(l))if(i===0){const c=new je(l.path);this.tt(t,c,Pn.newNoDocument(c,et.min()))}else It(i===1,20013,{expectedCount:i});else{const c=this.ut(t);if(c!==i){const h=this.ct(e),p=h?this.lt(h,e,c):1;if(p!==0){this.st(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let c,h;try{c=Ds(i).toUint8Array()}catch(p){if(p instanceof xw)return No("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new Um(c,a,l)}catch(p){return No(p instanceof iu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.pe===0?null:h}lt(e,t,i){return t.Ce.count===i-this.Tt(e,t.targetId)?0:2}Tt(e,t){const i=this.ze.getRemoteKeysForTarget(t);let a=0;return i.forEach(l=>{const c=this.ze.Pt(),h=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.tt(t,l,null),a++)}),a}It(e){const t=new Map;this.je.forEach((l,c)=>{const h=this._t(c);if(h){if(l.current&&Gg(h.target)){const p=new je(h.target.path);this.Et(p).has(c)||this.dt(c,p)||this.tt(c,p,Pn.newNoDocument(p,e))}l.Le&&(t.set(c,l.qe()),l.Qe())}});let i=mt();this.Ye.forEach((l,c)=>{let h=!0;c.forEachWhile(p=>{const g=this._t(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(l))}),this.He.forEach((l,c)=>c.setReadTime(e));const a=new Tf(e,t,this.Ze,this.He,i);return this.He=Li(),this.Je=vh(),this.Ye=vh(),this.Ze=new zt(lt),a}et(e,t){if(!this.it(e))return;const i=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,i),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,i){if(!this.it(e))return;const a=this.rt(e);this.dt(e,t)?a.$e(t,1):a.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),i&&(this.He=this.He.insert(t,i))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new g1,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new cn(lt),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new cn(lt),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||Le("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new g1),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function vh(){return new zt(je.comparator)}function m1(){return new zt(je.comparator)}const Nx={asc:"ASCENDING",desc:"DESCENDING"},Mx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kx={and:"AND",or:"OR"};class Lx{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Qg(r,e){return r.useProto3Json||gf(e)?e:{value:e}}function Yh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lb(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Px(r,e){return Yh(r,e.toTimestamp())}function ei(r){return It(!!r,49232),et.fromTimestamp(function(t){const i=Is(t);return new un(i.seconds,i.nanos)}(r))}function Vm(r,e){return Yg(r,e).canonicalString()}function Yg(r,e){const t=function(a){return new Vt(["projects",a.projectId,"databases",a.database])}(r).child("documents");return e===void 0?t:t.child(e)}function ub(r){const e=Vt.fromString(r);return It(pb(e),10190,{key:e.toString()}),e}function Wg(r,e){return Vm(r.databaseId,e.path)}function yg(r,e){const t=ub(e);if(t.get(1)!==r.databaseId.projectId)throw new Ue(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Ue(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new je(hb(t))}function cb(r,e){return Vm(r.databaseId,e)}function Ux(r){const e=ub(r);return e.length===4?Vt.emptyPath():hb(e)}function Xg(r){return new Vt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function hb(r){return It(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function y1(r,e,t){return{name:Wg(r,e),fields:t.value.mapValue.fields}}function Vx(r,e){let t;if("targetChange"in e){e.targetChange;const i=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Qe(39313,{state:g})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(g,y){return g.useProto3Json?(It(y===void 0||typeof y=="string",58123),Dn.fromBase64String(y||"")):(It(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Dn.fromUint8Array(y||new Uint8Array))}(r,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(g){const y=g.code===void 0?Ce.UNKNOWN:sb(g.code);return new Ue(y,g.message||"")}(c);t=new ob(i,a,l,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=yg(r,i.document.name),l=ei(i.document.updateTime),c=i.document.createTime?ei(i.document.createTime):et.min(),h=new _r({mapValue:{fields:i.document.fields}}),p=Pn.newFoundDocument(a,l,c,h),g=i.targetIds||[],y=i.removedTargetIds||[];t=new Nh(g,y,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=yg(r,i.document),l=i.readTime?ei(i.readTime):et.min(),c=Pn.newNoDocument(a,l),h=i.removedTargetIds||[];t=new Nh([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=yg(r,i.document),l=i.removedTargetIds||[];t=new Nh([],l,a,null)}else{if(!("filter"in e))return Qe(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new Ix(a,l),h=i.targetId;t=new ab(h,c)}}return t}function Bx(r,e){let t;if(e instanceof Lu)t={update:y1(r,e.key,e.value)};else if(e instanceof ib)t={delete:Wg(r,e.key)};else if(e instanceof Aa)t={update:y1(r,e.key,e.data),updateMask:Qx(e.fieldMask)};else{if(!(e instanceof Rx))return Qe(16599,{ft:e.type});t={verify:Wg(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,c){const h=c.transform;if(h instanceof wu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof bu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Su)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Qh)return{fieldPath:c.field.canonicalString(),increment:h.Re};throw Qe(20930,{transform:c.transform})}(0,i))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:Px(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Qe(27497)}(r,e.precondition)),t}function jx(r,e){return r&&r.length>0?(It(e!==void 0,14353),r.map(t=>function(a,l){let c=a.updateTime?ei(a.updateTime):ei(l);return c.isEqual(et.min())&&(c=ei(l)),new wx(c,a.transformResults||[])}(t,e))):[]}function Fx(r,e){return{documents:[cb(r,e.path)]}}function qx(r,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=cb(r,a);const l=function(g){if(g.length!==0)return db(xr.create(g,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(g){if(g.length!==0)return g.map(y=>function(T){return{field:bo(T.field),direction:Gx(T.dir)}}(y))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=Qg(r,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{gt:t,parent:a}}function zx(r){let e=Ux(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){It(i===1,65062);const y=t.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=function(S){const T=fb(S);return T instanceof xr&&Fw(T)?T.getFilters():[T]}(t.where));let c=[];t.orderBy&&(c=function(S){return S.map(T=>function(E){return new Tu(So(E.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(T))}(t.orderBy));let h=null;t.limit&&(h=function(S){let T;return T=typeof S=="object"?S.value:S,gf(T)?null:T}(t.limit));let p=null;t.startAt&&(p=function(S){const T=!!S.before,D=S.values||[];return new Kh(D,T)}(t.startAt));let g=null;return t.endAt&&(g=function(S){const T=!S.before,D=S.values||[];return new Kh(D,T)}(t.endAt)),lx(e,a,c,l,h,"F",p,g)}function Hx(r,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qe(28987,{purpose:a})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function fb(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=So(t.unaryFilter.field);return nn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=So(t.unaryFilter.field);return nn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=So(t.unaryFilter.field);return nn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=So(t.unaryFilter.field);return nn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Qe(61313);default:return Qe(60726)}}(r):r.fieldFilter!==void 0?function(t){return nn.create(So(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Qe(58110);default:return Qe(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return xr.create(t.compositeFilter.filters.map(i=>fb(i)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Qe(1026)}}(t.compositeFilter.op))}(r):Qe(30097,{filter:r})}function Gx(r){return Nx[r]}function $x(r){return Mx[r]}function Kx(r){return kx[r]}function bo(r){return{fieldPath:r.canonicalString()}}function So(r){return In.fromServerFormat(r.fieldPath)}function db(r){return r instanceof nn?function(t){if(t.op==="=="){if(i1(t.value))return{unaryFilter:{field:bo(t.field),op:"IS_NAN"}};if(r1(t.value))return{unaryFilter:{field:bo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(i1(t.value))return{unaryFilter:{field:bo(t.field),op:"IS_NOT_NAN"}};if(r1(t.value))return{unaryFilter:{field:bo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bo(t.field),op:$x(t.op),value:t.value}}}(r):r instanceof xr?function(t){const i=t.getFilters().map(a=>db(a));return i.length===1?i[0]:{compositeFilter:{op:Kx(t.op),filters:i}}}(r):Qe(54877,{filter:r})}function Qx(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function pb(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,t,i,a,l=et.min(),c=et.min(),h=Dn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new _s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e){this.wt=e}}function Wx(r){const e=zx({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Kg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(){this.yn=new Zx}addToCollectionParentIndex(e,t){return this.yn.add(t),Re.resolve()}getCollectionParents(e,t){return Re.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return Re.resolve()}deleteFieldIndex(e,t){return Re.resolve()}deleteAllFieldIndexes(e){return Re.resolve()}createTargetIndexes(e,t){return Re.resolve()}getDocumentsMatchingTarget(e,t){return Re.resolve(null)}getIndexType(e,t){return Re.resolve(0)}getFieldIndexes(e,t){return Re.resolve([])}getNextCollectionGroupToUpdate(e){return Re.resolve(null)}getMinOffset(e,t){return Re.resolve(Cs.min())}getMinOffsetFromCollectionGroup(e,t){return Re.resolve(Cs.min())}updateCollectionGroup(e,t,i){return Re.resolve()}updateIndexEntries(e,t){return Re.resolve()}}class Zx{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new cn(Vt.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new cn(Vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gb=41943040;class Kn{static withCacheSize(e){return new Kn(e,Kn.DEFAULT_COLLECTION_PERCENTILE,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kn.DEFAULT_COLLECTION_PERCENTILE=10,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kn.DEFAULT=new Kn(gb,Kn.DEFAULT_COLLECTION_PERCENTILE,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kn.DISABLED=new Kn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Po(0)}static ir(){return new Po(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1="LruGarbageCollector",Jx=1048576;function E1([r,e],[t,i]){const a=lt(r,t);return a===0?lt(e,i):a}class e3{constructor(e){this.cr=e,this.buffer=new cn(E1),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();E1(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class t3{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){Le(_1,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){$o(t)?Le(_1,"Ignoring IndexedDB error during garbage collection: ",t):await Go(t)}await this.Ir(3e5)})}}class n3{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return Re.resolve(pf.le);const i=new e3(t);return this.Er.forEachTarget(e,a=>i.Pr(a.sequenceNumber)).next(()=>this.Er.Ar(e,a=>i.Pr(a))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Er.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),Re.resolve(v1)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),v1):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let i,a,l,c,h,p,g;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),a=this.params.maximumSequenceNumbersToCollect):a=S,c=Date.now(),this.nthSequenceNumber(e,a))).next(S=>(i=S,h=Date.now(),this.removeTargets(e,i,t))).next(S=>(l=S,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(S=>(g=Date.now(),To()<=gt.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(h-c)+`ms
	Removed ${l} targets in `+(p-h)+`ms
	Removed ${S} documents in `+(g-p)+`ms
Total Duration: ${g-y}ms`),Re.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:S})))}}function r3(r,e){return new n3(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(){this.changes=new Ra(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?Re.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(i=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(i!==null&&hu(i.mutation,a,Ir.empty(),un.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,mt()).next(()=>i))}getLocalViewOfDocuments(e,t,i=mt()){const a=pa();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,i).next(l=>{let c=ru();return l.forEach((h,p)=>{c=c.insert(h,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const i=pa();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,mt()))}populateOverlays(e,t,i){const a=[];return i.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,i,a){let l=Li();const c=cu(),h=function(){return cu()}();return t.forEach((p,g)=>{const y=i.get(g.key);a.has(g.key)&&(y===void 0||y.mutation instanceof Aa)?l=l.insert(g.key,g):y!==void 0?(c.set(g.key,y.mutation.getFieldMask()),hu(y.mutation,g,y.mutation.getFieldMask(),un.now())):c.set(g.key,Ir.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((g,y)=>c.set(g,y)),t.forEach((g,y)=>{var S;return h.set(g,new s3(y,(S=c.get(g))!==null&&S!==void 0?S:null))}),h))}recalculateAndSaveOverlays(e,t){const i=cu();let a=new zt((c,h)=>c-h),l=mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(p=>{const g=t.get(p);if(g===null)return;let y=i.get(p)||Ir.empty();y=h.applyToLocalView(g,y),i.set(p,y);const S=(a.get(h.batchId)||mt()).add(p);a=a.insert(h.batchId,S)})}).next(()=>{const c=[],h=a.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),g=p.key,y=p.value,S=Ww();y.forEach(T=>{if(!l.has(T)){const D=nb(t.get(T),i.get(T));D!==null&&S.set(T,D),l=l.add(T)}}),c.push(this.documentOverlayCache.saveOverlays(e,g,S))}return Re.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,a){return function(c){return je.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Gw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):Re.resolve(pa());let h=yu,p=l;return c.next(g=>Re.forEach(g,(y,S)=>(h<S.largestBatchId&&(h=S.largestBatchId),l.get(y)?Re.resolve():this.remoteDocumentCache.getEntry(e,y).next(T=>{p=p.insert(y,T)}))).next(()=>this.populateOverlays(e,g,l)).next(()=>this.computeViews(e,p,g,mt())).next(y=>({batchId:h,changes:Yw(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new je(t)).next(i=>{let a=ru();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let c=ru();return this.indexManager.getCollectionParents(e,l).next(h=>Re.forEach(h,p=>{const g=function(S,T){return new Ko(T,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,i,a).next(y=>{y.forEach((S,T)=>{c=c.insert(S,T)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a))).next(c=>{l.forEach((p,g)=>{const y=g.getKey();c.get(y)===null&&(c=c.insert(y,Pn.newInvalidDocument(y)))});let h=ru();return c.forEach((p,g)=>{const y=l.get(p);y!==void 0&&hu(y.mutation,g,Ir.empty(),un.now()),vf(t,g)&&(h=h.insert(p,g))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return Re.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:ei(a.createTime)}}(t)),Re.resolve()}getNamedQuery(e,t){return Re.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(a){return{name:a.name,query:Wx(a.bundledQuery),readTime:ei(a.readTime)}}(t)),Re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(){this.overlays=new zt(je.comparator),this.Or=new Map}getOverlay(e,t){return Re.resolve(this.overlays.get(t))}getOverlays(e,t){const i=pa();return Re.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&i.set(a,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((a,l)=>{this.St(e,t,l)}),Re.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.Or.get(i);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Or.delete(i)),Re.resolve()}getOverlaysForCollection(e,t,i){const a=pa(),l=t.length+1,c=new je(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const p=h.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>i&&a.set(p.getKey(),p)}return Re.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new zt((g,y)=>g-y);const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>i){let y=l.get(g.largestBatchId);y===null&&(y=pa(),l=l.insert(g.largestBatchId,y)),y.set(g.getKey(),g)}}const h=pa(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,y)=>h.set(g,y)),!(h.size()>=a)););return Re.resolve(h)}St(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.Or.get(a.largestBatchId).delete(i.key);this.Or.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new Cx(t,i));let l=this.Or.get(t);l===void 0&&(l=mt(),this.Or.set(t,l)),this.Or.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(){this.sessionToken=Dn.EMPTY_BYTE_STRING}getSessionToken(e){return Re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(){this.Nr=new cn(vn.Br),this.Lr=new cn(vn.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const i=new vn(e,t);this.Nr=this.Nr.add(i),this.Lr=this.Lr.add(i)}qr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Qr(new vn(e,t))}$r(e,t){e.forEach(i=>this.removeReference(i,t))}Ur(e){const t=new je(new Vt([])),i=new vn(t,e),a=new vn(t,e+1),l=[];return this.Lr.forEachInRange([i,a],c=>{this.Qr(c),l.push(c.key)}),l}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new je(new Vt([])),i=new vn(t,e),a=new vn(t,e+1);let l=mt();return this.Lr.forEachInRange([i,a],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new vn(e,0),i=this.Nr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class vn{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return je.comparator(e.key,t.key)||lt(e.Gr,t.Gr)}static kr(e,t){return lt(e.Gr,t.Gr)||je.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new cn(vn.Br)}checkEmpty(e){return Re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Ax(l,t,i,a);this.mutationQueue.push(c);for(const h of a)this.zr=this.zr.add(new vn(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return Re.resolve(c)}lookupMutationBatch(e,t){return Re.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.Hr(i),l=a<0?0:a;return Re.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Re.resolve(this.mutationQueue.length===0?Dm:this.Jn-1)}getAllMutationBatches(e){return Re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new vn(t,0),a=new vn(t,Number.POSITIVE_INFINITY),l=[];return this.zr.forEachInRange([i,a],c=>{const h=this.jr(c.Gr);l.push(h)}),Re.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new cn(lt);return t.forEach(a=>{const l=new vn(a,0),c=new vn(a,Number.POSITIVE_INFINITY);this.zr.forEachInRange([l,c],h=>{i=i.add(h.Gr)})}),Re.resolve(this.Jr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;je.isDocumentKey(l)||(l=l.child(""));const c=new vn(new je(l),0);let h=new cn(lt);return this.zr.forEachWhile(p=>{const g=p.key.path;return!!i.isPrefixOf(g)&&(g.length===a&&(h=h.add(p.Gr)),!0)},c),Re.resolve(this.Jr(h))}Jr(e){const t=[];return e.forEach(i=>{const a=this.jr(i);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){It(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.zr;return Re.forEach(t.mutations,a=>{const l=new vn(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.zr=i})}Xn(e){}containsKey(e,t){const i=new vn(t,0),a=this.zr.firstAfterOrEqual(i);return Re.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Re.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(e){this.Zr=e,this.docs=function(){return new zt(je.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,c=this.Zr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Re.resolve(i?i.document.mutableCopy():Pn.newInvalidDocument(t))}getEntries(e,t){let i=Li();return t.forEach(a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():Pn.newInvalidDocument(a))}),Re.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=Li();const c=t.path,h=new je(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:g,value:{document:y}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||jO(BO(y),i)<=0||(a.has(y.key)||vf(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return Re.resolve(l)}getAllFromCollectionGroup(e,t,i,a){Qe(9500)}Xr(e,t){return Re.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new f3(this)}getSize(e){return Re.resolve(this.size)}}class f3 extends i3{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?t.push(this.vr.addEntry(e,a)):this.vr.removeEntry(i)}),Re.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e){this.persistence=e,this.ei=new Ra(t=>Nm(t),Mm),this.lastRemoteSnapshotVersion=et.min(),this.highestTargetId=0,this.ti=0,this.ni=new Bm,this.targetCount=0,this.ri=Po.rr()}forEachTarget(e,t){return this.ei.forEach((i,a)=>t(a)),Re.resolve()}getLastRemoteSnapshotVersion(e){return Re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Re.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),Re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ti&&(this.ti=t),Re.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new Po(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,Re.resolve()}updateTargetData(e,t){return this.ar(t),Re.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,Re.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.ei.forEach((c,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.ei.delete(c),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)}),Re.waitFor(l).next(()=>a)}getTargetCount(e){return Re.resolve(this.targetCount)}getTargetData(e,t){const i=this.ei.get(t)||null;return Re.resolve(i)}addMatchingKeys(e,t,i){return this.ni.qr(t,i),Re.resolve()}removeMatchingKeys(e,t,i){this.ni.$r(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(c=>{l.push(a.markPotentiallyOrphaned(e,c))}),Re.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),Re.resolve()}getMatchingKeysForTargetId(e,t){const i=this.ni.Wr(t);return Re.resolve(i)}containsKey(e,t){return Re.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,t){this.ii={},this.overlays={},this.si=new pf(0),this.oi=!1,this.oi=!0,this._i=new u3,this.referenceDelegate=e(this),this.ai=new d3(this),this.indexManager=new Xx,this.remoteDocumentCache=function(a){return new h3(a)}(i=>this.referenceDelegate.ui(i)),this.serializer=new Yx(t),this.ci=new o3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new l3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ii[e.toKey()];return i||(i=new c3(t,this.referenceDelegate),this.ii[e.toKey()]=i),i}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,i){Le("MemoryPersistence","Starting transaction:",e);const a=new p3(this.si.next());return this.referenceDelegate.li(),i(a).next(l=>this.referenceDelegate.hi(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Pi(e,t){return Re.or(Object.values(this.ii).map(i=>()=>i.containsKey(e,t)))}}class p3 extends qO{constructor(e){super(),this.currentSequenceNumber=e}}class jm{constructor(e){this.persistence=e,this.Ti=new Bm,this.Ii=null}static Ei(e){return new jm(e)}get di(){if(this.Ii)return this.Ii;throw Qe(60996)}addReference(e,t,i){return this.Ti.addReference(i,t),this.di.delete(i.toString()),Re.resolve()}removeReference(e,t,i){return this.Ti.removeReference(i,t),this.di.add(i.toString()),Re.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),Re.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(a=>this.di.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.di.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Re.forEach(this.di,i=>{const a=je.fromPath(i);return this.Ai(e,a).next(l=>{l||t.removeEntry(a,et.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return Re.or([()=>Re.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class Wh{constructor(e,t){this.persistence=e,this.Ri=new Ra(i=>GO(i.path),(i,a)=>i.isEqual(a)),this.garbageCollector=r3(this,t)}static Ei(e,t){return new Wh(e,t)}li(){}hi(e){return Re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(a=>i+a))}Vr(e){let t=0;return this.Ar(e,i=>{t++}).next(()=>t)}Ar(e,t){return Re.forEach(this.Ri,(i,a)=>this.gr(e,i,a).next(l=>l?Re.resolve():t(a)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.Xr(e,c=>this.gr(e,c,t).next(h=>{h||(i++,l.removeEntry(c,et.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),Re.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.Ri.set(i,e.currentSequenceNumber),Re.resolve()}removeReference(e,t,i){return this.Ri.set(i,e.currentSequenceNumber),Re.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),Re.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Dh(e.data.value)),t}gr(e,t,i){return Re.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.Ri.get(t);return Re.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.ls=i,this.hs=a}static Ps(e,t){let i=mt(),a=mt();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Fm(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return hD()?8:zO(Un())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.Rs(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.Vs(e,t,a,i).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new g3;return this.fs(e,t,c).next(h=>{if(l.result=h,this.Is)return this.gs(e,t,c,h.size)})}).next(()=>l.result)}gs(e,t,i,a){return i.documentReadCount<this.Es?(To()<=gt.DEBUG&&Le("QueryEngine","SDK will not create cache indexes for query:",wo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),Re.resolve()):(To()<=gt.DEBUG&&Le("QueryEngine","Query:",wo(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ds*a?(To()<=gt.DEBUG&&Le("QueryEngine","The SDK decides to create cache indexes for query:",wo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zr(t))):Re.resolve())}Rs(e,t){if(l1(t))return Re.resolve(null);let i=Zr(t);return this.indexManager.getIndexType(e,i).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=Kg(t,null,"F"),i=Zr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const c=mt(...l);return this.As.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,i).next(p=>{const g=this.ps(t,h);return this.ys(t,g,c,p.readTime)?this.Rs(e,Kg(t,null,"F")):this.ws(e,g,t,p)}))})))}Vs(e,t,i,a){return l1(t)||a.isEqual(et.min())?Re.resolve(null):this.As.getDocuments(e,i).next(l=>{const c=this.ps(t,l);return this.ys(t,c,i,a)?Re.resolve(null):(To()<=gt.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),wo(t)),this.ws(e,c,t,VO(a,yu)).next(h=>h))})}ps(e,t){let i=new cn(Kw(e));return t.forEach((a,l)=>{vf(e,l)&&(i=i.add(l))}),i}ys(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}fs(e,t,i){return To()<=gt.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",wo(t)),this.As.getDocumentsMatchingQuery(e,t,Cs.min(),i)}ws(e,t,i,a){return this.As.getDocumentsMatchingQuery(e,i,a).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm="LocalStore",y3=3e8;class v3{constructor(e,t,i,a){this.persistence=e,this.bs=t,this.serializer=a,this.Ss=new zt(lt),this.Ds=new Ra(l=>Nm(l),Mm),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(i)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new a3(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function _3(r,e,t,i){return new v3(r,e,t,i)}async function yb(r,e){const t=tt(r);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next(l=>(a=l,t.Fs(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const c=[],h=[];let p=mt();for(const g of a){c.push(g.batchId);for(const y of g.mutations)p=p.add(y.key)}for(const g of l){h.push(g.batchId);for(const y of g.mutations)p=p.add(y.key)}return t.localDocuments.getDocuments(i,p).next(g=>({Ms:g,removedBatchIds:c,addedBatchIds:h}))})})}function E3(r,e){const t=tt(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),l=t.Cs.newChangeBuffer({trackRemovals:!0});return function(h,p,g,y){const S=g.batch,T=S.keys();let D=Re.resolve();return T.forEach(E=>{D=D.next(()=>y.getEntry(p,E)).next(I=>{const N=g.docVersions.get(E);It(N!==null,48541),I.version.compareTo(N)<0&&(S.applyToRemoteDocument(I,g),I.isValidDocument()&&(I.setReadTime(g.commitVersion),y.addEntry(I)))})}),D.next(()=>h.mutationQueue.removeMutationBatch(p,S))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let p=mt();for(let g=0;g<h.mutationResults.length;++g)h.mutationResults[g].transformResults.length>0&&(p=p.add(h.batch.mutations[g].key));return p}(e))).next(()=>t.localDocuments.getDocuments(i,a))})}function vb(r){const e=tt(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function T3(r,e){const t=tt(r),i=e.snapshotVersion;let a=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.Cs.newChangeBuffer({trackRemovals:!0});a=t.Ss;const h=[];e.targetChanges.forEach((y,S)=>{const T=a.get(S);if(!T)return;h.push(t.ai.removeMatchingKeys(l,y.removedDocuments,S).next(()=>t.ai.addMatchingKeys(l,y.addedDocuments,S)));let D=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(S)!==null?D=D.withResumeToken(Dn.EMPTY_BYTE_STRING,et.min()).withLastLimboFreeSnapshotVersion(et.min()):y.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(y.resumeToken,i)),a=a.insert(S,D),function(I,N,O){return I.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=y3?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(T,D,y)&&h.push(t.ai.updateTargetData(l,D))});let p=Li(),g=mt();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))}),h.push(w3(l,c,e.documentUpdates).next(y=>{p=y.xs,g=y.Os})),!i.isEqual(et.min())){const y=t.ai.getLastRemoteSnapshotVersion(l).next(S=>t.ai.setTargetsMetadata(l,l.currentSequenceNumber,i));h.push(y)}return Re.waitFor(h).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,g)).next(()=>p)}).then(l=>(t.Ss=a,l))}function w3(r,e,t){let i=mt(),a=mt();return t.forEach(l=>i=i.add(l)),e.getEntries(r,i).next(l=>{let c=Li();return t.forEach((h,p)=>{const g=l.get(h);p.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(h)),p.isNoDocument()&&p.version.isEqual(et.min())?(e.removeEntry(h,p.readTime),c=c.insert(h,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(h,p)):Le(qm,"Ignoring outdated watch update for ",h,". Current version:",g.version," Watch version:",p.version)}),{xs:c,Os:a}})}function b3(r,e){const t=tt(r);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Dm),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function S3(r,e){const t=tt(r);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return t.ai.getTargetData(i,e).next(l=>l?(a=l,Re.resolve(a)):t.ai.allocateTargetId(i).next(c=>(a=new _s(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.ai.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=t.Ss.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(i.targetId,i),t.Ds.set(e,i.targetId)),i})}async function Zg(r,e,t){const i=tt(r),a=i.Ss.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,c=>i.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!$o(c))throw c;Le(qm,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ss=i.Ss.remove(e),i.Ds.delete(a.target)}function T1(r,e,t){const i=tt(r);let a=et.min(),l=mt();return i.persistence.runTransaction("Execute query","readwrite",c=>function(p,g,y){const S=tt(p),T=S.Ds.get(y);return T!==void 0?Re.resolve(S.Ss.get(T)):S.ai.getTargetData(g,y)}(i,c,Zr(e)).next(h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,i.ai.getMatchingKeysForTargetId(c,h.targetId).next(p=>{l=p})}).next(()=>i.bs.getDocumentsMatchingQuery(c,e,t?a:et.min(),t?l:mt())).next(h=>(R3(i,cx(e),h),{documents:h,Ns:l})))}function R3(r,e,t){let i=r.vs.get(e)||et.min();t.forEach((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),r.vs.set(e,i)}class w1{constructor(){this.activeTargetIds=mx()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class A3{constructor(){this.So=new w1,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,i){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new w1,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="ConnectivityMonitor";class S1{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){Le(b1,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){Le(b1,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _h=null;function Jg(){return _h===null?_h=function(){return 268435456+Math.round(2147483648*Math.random())}():_h++,"0x"+_h.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg="RestConnection",I3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class D3{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${i}/databases/${a}`,this.qo=this.databaseId.database===Gh?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Qo(e,t,i,a,l){const c=Jg(),h=this.$o(e,t.toUriEncodedString());Le(vg,`Sending RPC '${e}' ${c}:`,h,i);const p={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(p,a,l);const{host:g}=new URL(h),y=Nu(g);return this.Ko(e,h,p,i,y).then(S=>(Le(vg,`Received RPC '${e}' ${c}: `,S),S),S=>{throw No(vg,`RPC '${e}' ${c} failed with error: `,S,"url: ",h,"request:",i),S})}Wo(e,t,i,a,l,c){return this.Qo(e,t,i,a,l)}Uo(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ho}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),i&&i.headers.forEach((a,l)=>e[l]=a)}$o(e,t){const i=I3[e];return`${this.Lo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn="WebChannelConnection";class x3 extends D3{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,i,a,l){const c=Jg();return new Promise((h,p)=>{const g=new Ew;g.setWithCredentials(!0),g.listenOnce(Tw.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Ih.NO_ERROR:const S=g.getResponseJson();Le(Mn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(S)),h(S);break;case Ih.TIMEOUT:Le(Mn,`RPC '${e}' ${c} timed out`),p(new Ue(Ce.DEADLINE_EXCEEDED,"Request time out"));break;case Ih.HTTP_ERROR:const T=g.getStatus();if(Le(Mn,`RPC '${e}' ${c} failed with status:`,T,"response text:",g.getResponseText()),T>0){let D=g.getResponseJson();Array.isArray(D)&&(D=D[0]);const E=D==null?void 0:D.error;if(E&&E.status&&E.message){const I=function(O){const B=O.toLowerCase().replace(/_/g,"-");return Object.values(Ce).indexOf(B)>=0?B:Ce.UNKNOWN}(E.status);p(new Ue(I,E.message))}else p(new Ue(Ce.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new Ue(Ce.UNAVAILABLE,"Connection failed."));break;default:Qe(9055,{s_:e,streamId:c,o_:g.getLastErrorCode(),__:g.getLastError()})}}finally{Le(Mn,`RPC '${e}' ${c} completed.`)}});const y=JSON.stringify(a);Le(Mn,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",y,i,15)})}a_(e,t,i){const a=Jg(),l=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Sw(),h=bw(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Uo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const y=l.join("");Le(Mn,`Creating RPC '${e}' stream ${a}: ${y}`,p);const S=c.createWebChannel(y,p);let T=!1,D=!1;const E=new O3({Go:N=>{D?Le(Mn,`Not sending because RPC '${e}' stream ${a} is closed:`,N):(T||(Le(Mn,`Opening RPC '${e}' stream ${a} transport.`),S.open(),T=!0),Le(Mn,`RPC '${e}' stream ${a} sending:`,N),S.send(N))},zo:()=>S.close()}),I=(N,O,B)=>{N.listen(O,j=>{try{B(j)}catch(G){setTimeout(()=>{throw G},0)}})};return I(S,nu.EventType.OPEN,()=>{D||(Le(Mn,`RPC '${e}' stream ${a} transport opened.`),E.t_())}),I(S,nu.EventType.CLOSE,()=>{D||(D=!0,Le(Mn,`RPC '${e}' stream ${a} transport closed`),E.r_())}),I(S,nu.EventType.ERROR,N=>{D||(D=!0,No(Mn,`RPC '${e}' stream ${a} transport errored. Name:`,N.name,"Message:",N.message),E.r_(new Ue(Ce.UNAVAILABLE,"The operation could not be completed")))}),I(S,nu.EventType.MESSAGE,N=>{var O;if(!D){const B=N.data[0];It(!!B,16349);const j=B,G=(j==null?void 0:j.error)||((O=j[0])===null||O===void 0?void 0:O.error);if(G){Le(Mn,`RPC '${e}' stream ${a} received error:`,G);const q=G.status;let X=function(P){const K=tn[P];if(K!==void 0)return sb(K)}(q),V=G.message;X===void 0&&(X=Ce.INTERNAL,V="Unknown error status: "+q+" with message "+G.message),D=!0,E.r_(new Ue(X,V)),S.close()}else Le(Mn,`RPC '${e}' stream ${a} received:`,B),E.i_(B)}}),I(h,ww.STAT_EVENT,N=>{N.stat===jg.PROXY?Le(Mn,`RPC '${e}' stream ${a} detected buffering proxy`):N.stat===jg.NOPROXY&&Le(Mn,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{E.n_()},0),E}}function _g(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(r){return new Lx(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e,t,i=1e3,a=1.5,l=6e4){this.bi=e,this.timerId=t,this.u_=i,this.c_=a,this.l_=l,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),i=Math.max(0,Date.now()-this.T_),a=Math.max(0,t-i);a>0&&Le("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,a,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1="PersistentStream";class Eb{constructor(e,t,i,a,l,c,h,p){this.bi=e,this.R_=i,this.V_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new _b(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===Ce.RESOURCE_EXHAUSTED?(ki(t.toString()),ki("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===Ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.m_===t&&this.B_(i,a)},i=>{e(()=>{const a=new Ue(Ce.UNKNOWN,"Fetching auth token failed: "+i.message);return this.L_(a)})})}B_(e,t){const i=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{i(()=>this.listener.jo())}),this.stream.Jo(()=>{i(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(a=>{i(()=>this.L_(a))}),this.stream.onMessage(a=>{i(()=>++this.p_==1?this.q_(a):this.onNext(a))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return Le(R1,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(Le(R1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class N3 extends Eb{constructor(e,t,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=Vx(this.serializer,e),i=function(l){if(!("targetChange"in l))return et.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?et.min():c.readTime?ei(c.readTime):et.min()}(e);return this.listener.Q_(t,i)}U_(e){const t={};t.database=Xg(this.serializer),t.addTarget=function(l,c){let h;const p=c.target;if(h=Gg(p)?{documents:Fx(l,p)}:{query:qx(l,p).gt},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=lb(l,c.resumeToken);const g=Qg(l,c.expectedCount);g!==null&&(h.expectedCount=g)}else if(c.snapshotVersion.compareTo(et.min())>0){h.readTime=Yh(l,c.snapshotVersion.toTimestamp());const g=Qg(l,c.expectedCount);g!==null&&(h.expectedCount=g)}return h}(this.serializer,e);const i=Hx(this.serializer,e);i&&(t.labels=i),this.F_(t)}K_(e){const t={};t.database=Xg(this.serializer),t.removeTarget=e,this.F_(t)}}class M3 extends Eb{constructor(e,t,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return It(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,It(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){It(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=jx(e.writeResults,e.commitTime),i=ei(e.commitTime);return this.listener.j_(i,t)}H_(){const e={};e.database=Xg(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>Bx(this.serializer,i))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{}class L3 extends k3{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.J_=!1}Y_(){if(this.J_)throw new Ue(Ce.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,i,a){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Qo(e,Yg(t,i),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ue(Ce.UNKNOWN,l.toString())})}Wo(e,t,i,a,l){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Wo(e,Yg(t,i),a,c,h,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ue(Ce.UNKNOWN,c.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class P3{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(ki(t),this.ea=!1):Le("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta="RemoteStore";class U3{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=l,this.ca.vo(c=>{i.enqueueAndForget(async()=>{Ca(this)&&(Le(Ta,"Restarting streams for network reachability change."),await async function(p){const g=tt(p);g.aa.add(4),await Uu(g),g.la.set("Unknown"),g.aa.delete(4),await bf(g)}(this))})}),this.la=new P3(i,a)}}async function bf(r){if(Ca(r))for(const e of r.ua)await e(!0)}async function Uu(r){for(const e of r.ua)await e(!1)}function Tb(r,e){const t=tt(r);t._a.has(e.targetId)||(t._a.set(e.targetId,e),$m(t)?Gm(t):Qo(t).b_()&&Hm(t,e))}function zm(r,e){const t=tt(r),i=Qo(t);t._a.delete(e),i.b_()&&wb(t,e),t._a.size===0&&(i.b_()?i.v_():Ca(t)&&t.la.set("Unknown"))}function Hm(r,e){if(r.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(et.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Qo(r).U_(e)}function wb(r,e){r.ha.Ke(e),Qo(r).K_(e)}function Gm(r){r.ha=new xx({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>r._a.get(e)||null,Pt:()=>r.datastore.serializer.databaseId}),Qo(r).start(),r.la.ta()}function $m(r){return Ca(r)&&!Qo(r).w_()&&r._a.size>0}function Ca(r){return tt(r).aa.size===0}function bb(r){r.ha=void 0}async function V3(r){r.la.set("Online")}async function B3(r){r._a.forEach((e,t)=>{Hm(r,e)})}async function j3(r,e){bb(r),$m(r)?(r.la.ia(e),Gm(r)):r.la.set("Unknown")}async function F3(r,e,t){if(r.la.set("Online"),e instanceof ob&&e.state===2&&e.cause)try{await async function(a,l){const c=l.cause;for(const h of l.targetIds)a._a.has(h)&&(await a.remoteSyncer.rejectListen(h,c),a._a.delete(h),a.ha.removeTarget(h))}(r,e)}catch(i){Le(Ta,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Xh(r,i)}else if(e instanceof Nh?r.ha.Xe(e):e instanceof ab?r.ha.ot(e):r.ha.nt(e),!t.isEqual(et.min()))try{const i=await vb(r.localStore);t.compareTo(i)>=0&&await function(l,c){const h=l.ha.It(c);return h.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const y=l._a.get(g);y&&l._a.set(g,y.withResumeToken(p.resumeToken,c))}}),h.targetMismatches.forEach((p,g)=>{const y=l._a.get(p);if(!y)return;l._a.set(p,y.withResumeToken(Dn.EMPTY_BYTE_STRING,y.snapshotVersion)),wb(l,p);const S=new _s(y.target,p,g,y.sequenceNumber);Hm(l,S)}),l.remoteSyncer.applyRemoteEvent(h)}(r,t)}catch(i){Le(Ta,"Failed to raise snapshot:",i),await Xh(r,i)}}async function Xh(r,e,t){if(!$o(e))throw e;r.aa.add(1),await Uu(r),r.la.set("Offline"),t||(t=()=>vb(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{Le(Ta,"Retrying IndexedDB access"),await t(),r.aa.delete(1),await bf(r)})}function Sb(r,e){return e().catch(t=>Xh(r,t,e))}async function Sf(r){const e=tt(r),t=xs(e);let i=e.oa.length>0?e.oa[e.oa.length-1].batchId:Dm;for(;q3(e);)try{const a=await b3(e.localStore,i);if(a===null){e.oa.length===0&&t.v_();break}i=a.batchId,z3(e,a)}catch(a){await Xh(e,a)}Rb(e)&&Ab(e)}function q3(r){return Ca(r)&&r.oa.length<10}function z3(r,e){r.oa.push(e);const t=xs(r);t.b_()&&t.W_&&t.G_(e.mutations)}function Rb(r){return Ca(r)&&!xs(r).w_()&&r.oa.length>0}function Ab(r){xs(r).start()}async function H3(r){xs(r).H_()}async function G3(r){const e=xs(r);for(const t of r.oa)e.G_(t.mutations)}async function $3(r,e,t){const i=r.oa.shift(),a=Pm.from(i,e,t);await Sb(r,()=>r.remoteSyncer.applySuccessfulWrite(a)),await Sf(r)}async function K3(r,e){e&&xs(r).W_&&await async function(i,a){if(function(c){return Dx(c)&&c!==Ce.ABORTED}(a.code)){const l=i.oa.shift();xs(i).D_(),await Sb(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a)),await Sf(i)}}(r,e),Rb(r)&&Ab(r)}async function A1(r,e){const t=tt(r);t.asyncQueue.verifyOperationInProgress(),Le(Ta,"RemoteStore received new credentials");const i=Ca(t);t.aa.add(3),await Uu(t),i&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await bf(t)}async function Q3(r,e){const t=tt(r);e?(t.aa.delete(2),await bf(t)):e||(t.aa.add(2),await Uu(t),t.la.set("Unknown"))}function Qo(r){return r.Pa||(r.Pa=function(t,i,a){const l=tt(t);return l.Y_(),new N3(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(r.datastore,r.asyncQueue,{jo:V3.bind(null,r),Jo:B3.bind(null,r),Zo:j3.bind(null,r),Q_:F3.bind(null,r)}),r.ua.push(async e=>{e?(r.Pa.D_(),$m(r)?Gm(r):r.la.set("Unknown")):(await r.Pa.stop(),bb(r))})),r.Pa}function xs(r){return r.Ta||(r.Ta=function(t,i,a){const l=tt(t);return l.Y_(),new M3(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(r.datastore,r.asyncQueue,{jo:()=>Promise.resolve(),Jo:H3.bind(null,r),Zo:K3.bind(null,r),z_:G3.bind(null,r),j_:$3.bind(null,r)}),r.ua.push(async e=>{e?(r.Ta.D_(),await Sf(r)):(await r.Ta.stop(),r.oa.length>0&&(Le(Ta,`Stopping write stream with ${r.oa.length} pending writes`),r.oa=[]))})),r.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new ga,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const c=Date.now()+i,h=new Km(e,t,c,a,l);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ue(Ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qm(r,e){if(ki("AsyncQueue",`${e}: ${r}`),$o(r))return new Ue(Ce.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{static emptySet(e){return new Ao(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||je.comparator(t.key,i.key):(t,i)=>je.comparator(t.key,i.key),this.keyedMap=ru(),this.sortedSet=new zt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ao)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Ao;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(){this.Ia=new zt(je.comparator)}track(e){const t=e.doc.key,i=this.Ia.get(t);i?e.type!==0&&i.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&i.type!==1?this.Ia=this.Ia.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Ia=this.Ia.remove(t):e.type===1&&i.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):Qe(63341,{Vt:e,Ea:i}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,i)=>{e.push(i)}),e}}class Uo{constructor(e,t,i,a,l,c,h,p,g){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,i,a,l){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new Uo(e,t,Ao.emptySet(t),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class W3{constructor(){this.queries=I1(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,i){const a=tt(t),l=a.queries;a.queries=I1(),l.forEach((c,h)=>{for(const p of h.Ra)p.onError(i)})})(this,new Ue(Ce.ABORTED,"Firestore shutting down"))}}function I1(){return new Ra(r=>$w(r),yf)}async function X3(r,e){const t=tt(r);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.Va()&&e.ma()&&(i=2):(l=new Y3,i=e.ma()?0:1);try{switch(i){case 0:l.Aa=await t.onListen(a,!0);break;case 1:l.Aa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const h=Qm(c,`Initialization of query '${wo(e.query)}' failed`);return void e.onError(h)}t.queries.set(a,l),l.Ra.push(e),e.ga(t.onlineState),l.Aa&&e.pa(l.Aa)&&Ym(t)}async function Z3(r,e){const t=tt(r),i=e.query;let a=3;const l=t.queries.get(i);if(l){const c=l.Ra.indexOf(e);c>=0&&(l.Ra.splice(c,1),l.Ra.length===0?a=e.ma()?0:1:!l.Va()&&e.ma()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function J3(r,e){const t=tt(r);let i=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const h of c.Ra)h.pa(a)&&(i=!0);c.Aa=a}}i&&Ym(t)}function eN(r,e,t){const i=tt(r),a=i.queries.get(e);if(a)for(const l of a.Ra)l.onError(t);i.queries.delete(e)}function Ym(r){r.fa.forEach(e=>{e.next()})}var em,D1;(D1=em||(em={})).ya="default",D1.Cache="cache";class tN{constructor(e,t,i){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=i||{}}pa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Uo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const i=t!=="Offline";return(!this.options.Fa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=Uo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==em.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e){this.key=e}}class Ib{constructor(e){this.key=e}}class nN{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=mt(),this.mutatedKeys=mt(),this.Ua=Kw(e),this.Ka=new Ao(this.Ua)}get Wa(){return this.qa}Ga(e,t){const i=t?t.za:new C1,a=t?t.Ka:this.Ka;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,h=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((y,S)=>{const T=a.get(y),D=vf(this.query,S)?S:null,E=!!T&&this.mutatedKeys.has(T.key),I=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let N=!1;T&&D?T.data.isEqual(D.data)?E!==I&&(i.track({type:3,doc:D}),N=!0):this.ja(T,D)||(i.track({type:2,doc:D}),N=!0,(p&&this.Ua(D,p)>0||g&&this.Ua(D,g)<0)&&(h=!0)):!T&&D?(i.track({type:0,doc:D}),N=!0):T&&!D&&(i.track({type:1,doc:T}),N=!0,(p||g)&&(h=!0)),N&&(D?(c=c.add(D),l=I?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),i.track({type:1,doc:y})}return{Ka:c,za:i,ys:h,mutatedKeys:l}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const c=e.za.da();c.sort((y,S)=>function(D,E){const I=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qe(20277,{Vt:N})}};return I(D)-I(E)}(y.type,S.type)||this.Ua(y.doc,S.doc)),this.Ha(i),a=a!=null&&a;const h=t&&!a?this.Ja():[],p=this.$a.size===0&&this.current&&!a?1:0,g=p!==this.Qa;return this.Qa=p,c.length!==0||g?{snapshot:new Uo(this.query,e.Ka,l,c,e.mutatedKeys,p===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ya:h}:{Ya:h}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new C1,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=mt(),this.Ka.forEach(i=>{this.Za(i.key)&&(this.$a=this.$a.add(i.key))});const t=[];return e.forEach(i=>{this.$a.has(i)||t.push(new Ib(i))}),this.$a.forEach(i=>{e.has(i)||t.push(new Cb(i))}),t}Xa(e){this.qa=e.Ns,this.$a=mt();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return Uo.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const Wm="SyncEngine";class rN{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class iN{constructor(e){this.key=e,this.tu=!1}}class sN{constructor(e,t,i,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.nu={},this.ru=new Ra(h=>$w(h),yf),this.iu=new Map,this.su=new Set,this.ou=new zt(je.comparator),this._u=new Map,this.au=new Bm,this.uu={},this.cu=new Map,this.lu=Po.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function aN(r,e,t=!0){const i=kb(r);let a;const l=i.ru.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.eu()):a=await Db(i,e,t,!0),a}async function oN(r,e){const t=kb(r);await Db(t,e,!0,!1)}async function Db(r,e,t,i){const a=await S3(r.localStore,Zr(e)),l=a.targetId,c=r.sharedClientState.addLocalQueryTarget(l,t);let h;return i&&(h=await lN(r,e,l,c==="current",a.resumeToken)),r.isPrimaryClient&&t&&Tb(r.remoteStore,a),h}async function lN(r,e,t,i,a){r.Pu=(S,T,D)=>async function(I,N,O,B){let j=N.view.Ga(O);j.ys&&(j=await T1(I.localStore,N.query,!1).then(({documents:V})=>N.view.Ga(V,j)));const G=B&&B.targetChanges.get(N.targetId),q=B&&B.targetMismatches.get(N.targetId)!=null,X=N.view.applyChanges(j,I.isPrimaryClient,G,q);return x1(I,N.targetId,X.Ya),X.snapshot}(r,S,T,D);const l=await T1(r.localStore,e,!0),c=new nN(e,l.Ns),h=c.Ga(l.documents),p=Pu.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",a),g=c.applyChanges(h,r.isPrimaryClient,p);x1(r,t,g.Ya);const y=new rN(e,t,c);return r.ru.set(e,y),r.iu.has(t)?r.iu.get(t).push(e):r.iu.set(t,[e]),g.snapshot}async function uN(r,e,t){const i=tt(r),a=i.ru.get(e),l=i.iu.get(a.targetId);if(l.length>1)return i.iu.set(a.targetId,l.filter(c=>!yf(c,e))),void i.ru.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await Zg(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),t&&zm(i.remoteStore,a.targetId),tm(i,a.targetId)}).catch(Go)):(tm(i,a.targetId),await Zg(i.localStore,a.targetId,!0))}async function cN(r,e){const t=tt(r),i=t.ru.get(e),a=t.iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),zm(t.remoteStore,i.targetId))}async function hN(r,e,t){const i=vN(r);try{const a=await function(c,h){const p=tt(c),g=un.now(),y=h.reduce((D,E)=>D.add(E.key),mt());let S,T;return p.persistence.runTransaction("Locally write mutations","readwrite",D=>{let E=Li(),I=mt();return p.Cs.getEntries(D,y).next(N=>{E=N,E.forEach((O,B)=>{B.isValidDocument()||(I=I.add(O))})}).next(()=>p.localDocuments.getOverlayedDocuments(D,E)).next(N=>{S=N;const O=[];for(const B of h){const j=Sx(B,S.get(B.key).overlayedDocument);j!=null&&O.push(new Aa(B.key,j,Vw(j.value.mapValue),Jr.exists(!0)))}return p.mutationQueue.addMutationBatch(D,g,O,h)}).next(N=>{T=N;const O=N.applyToLocalDocumentSet(S,I);return p.documentOverlayCache.saveOverlays(D,N.batchId,O)})}).then(()=>({batchId:T.batchId,changes:Yw(S)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(c,h,p){let g=c.uu[c.currentUser.toKey()];g||(g=new zt(lt)),g=g.insert(h,p),c.uu[c.currentUser.toKey()]=g}(i,a.batchId,t),await Vu(i,a.changes),await Sf(i.remoteStore)}catch(a){const l=Qm(a,"Failed to persist write");t.reject(l)}}async function Ob(r,e){const t=tt(r);try{const i=await T3(t.localStore,e);e.targetChanges.forEach((a,l)=>{const c=t._u.get(l);c&&(It(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.tu=!0:a.modifiedDocuments.size>0?It(c.tu,14607):a.removedDocuments.size>0&&(It(c.tu,42227),c.tu=!1))}),await Vu(t,i,e)}catch(i){await Go(i)}}function O1(r,e,t){const i=tt(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.ru.forEach((l,c)=>{const h=c.view.ga(e);h.snapshot&&a.push(h.snapshot)}),function(c,h){const p=tt(c);p.onlineState=h;let g=!1;p.queries.forEach((y,S)=>{for(const T of S.Ra)T.ga(h)&&(g=!0)}),g&&Ym(p)}(i.eventManager,e),a.length&&i.nu.Q_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function fN(r,e,t){const i=tt(r);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i._u.get(e),l=a&&a.key;if(l){let c=new zt(je.comparator);c=c.insert(l,Pn.newNoDocument(l,et.min()));const h=mt().add(l),p=new Tf(et.min(),new Map,new zt(lt),c,h);await Ob(i,p),i.ou=i.ou.remove(l),i._u.delete(e),Xm(i)}else await Zg(i.localStore,e,!1).then(()=>tm(i,e,t)).catch(Go)}async function dN(r,e){const t=tt(r),i=e.batch.batchId;try{const a=await E3(t.localStore,e);Nb(t,i,null),xb(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Vu(t,a)}catch(a){await Go(a)}}async function pN(r,e,t){const i=tt(r);try{const a=await function(c,h){const p=tt(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let y;return p.mutationQueue.lookupMutationBatch(g,h).next(S=>(It(S!==null,37113),y=S.keys(),p.mutationQueue.removeMutationBatch(g,S))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,y,h)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y)).next(()=>p.localDocuments.getDocuments(g,y))})}(i.localStore,e);Nb(i,e,t),xb(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Vu(i,a)}catch(a){await Go(a)}}function xb(r,e){(r.cu.get(e)||[]).forEach(t=>{t.resolve()}),r.cu.delete(e)}function Nb(r,e,t){const i=tt(r);let a=i.uu[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.uu[i.currentUser.toKey()]=a}}function tm(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.iu.get(e))r.ru.delete(i),t&&r.nu.Tu(i,t);r.iu.delete(e),r.isPrimaryClient&&r.au.Ur(e).forEach(i=>{r.au.containsKey(i)||Mb(r,i)})}function Mb(r,e){r.su.delete(e.path.canonicalString());const t=r.ou.get(e);t!==null&&(zm(r.remoteStore,t),r.ou=r.ou.remove(e),r._u.delete(t),Xm(r))}function x1(r,e,t){for(const i of t)i instanceof Cb?(r.au.addReference(i.key,e),gN(r,i)):i instanceof Ib?(Le(Wm,"Document no longer in limbo: "+i.key),r.au.removeReference(i.key,e),r.au.containsKey(i.key)||Mb(r,i.key)):Qe(19791,{Iu:i})}function gN(r,e){const t=e.key,i=t.path.canonicalString();r.ou.get(t)||r.su.has(i)||(Le(Wm,"New document in limbo: "+t),r.su.add(i),Xm(r))}function Xm(r){for(;r.su.size>0&&r.ou.size<r.maxConcurrentLimboResolutions;){const e=r.su.values().next().value;r.su.delete(e);const t=new je(Vt.fromString(e)),i=r.lu.next();r._u.set(i,new iN(t)),r.ou=r.ou.insert(t,i),Tb(r.remoteStore,new _s(Zr(km(t.path)),i,"TargetPurposeLimboResolution",pf.le))}}async function Vu(r,e,t){const i=tt(r),a=[],l=[],c=[];i.ru.isEmpty()||(i.ru.forEach((h,p)=>{c.push(i.Pu(p,e,t).then(g=>{var y;if((g||t)&&i.isPrimaryClient){const S=g?!g.fromCache:(y=t==null?void 0:t.targetChanges.get(p.targetId))===null||y===void 0?void 0:y.current;i.sharedClientState.updateQueryState(p.targetId,S?"current":"not-current")}if(g){a.push(g);const S=Fm.Ps(p.targetId,g);l.push(S)}}))}),await Promise.all(c),i.nu.Q_(a),await async function(p,g){const y=tt(p);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>Re.forEach(g,T=>Re.forEach(T.ls,D=>y.persistence.referenceDelegate.addReference(S,T.targetId,D)).next(()=>Re.forEach(T.hs,D=>y.persistence.referenceDelegate.removeReference(S,T.targetId,D)))))}catch(S){if(!$o(S))throw S;Le(qm,"Failed to update sequence numbers: "+S)}for(const S of g){const T=S.targetId;if(!S.fromCache){const D=y.Ss.get(T),E=D.snapshotVersion,I=D.withLastLimboFreeSnapshotVersion(E);y.Ss=y.Ss.insert(T,I)}}}(i.localStore,l))}async function mN(r,e){const t=tt(r);if(!t.currentUser.isEqual(e)){Le(Wm,"User change. New user:",e.toKey());const i=await yb(t.localStore,e);t.currentUser=e,function(l,c){l.cu.forEach(h=>{h.forEach(p=>{p.reject(new Ue(Ce.CANCELLED,c))})}),l.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Vu(t,i.Ms)}}function yN(r,e){const t=tt(r),i=t._u.get(e);if(i&&i.tu)return mt().add(i.key);{let a=mt();const l=t.iu.get(e);if(!l)return a;for(const c of l){const h=t.ru.get(c);a=a.unionWith(h.view.Wa)}return a}}function kb(r){const e=tt(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ob.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fN.bind(null,e),e.nu.Q_=J3.bind(null,e.eventManager),e.nu.Tu=eN.bind(null,e.eventManager),e}function vN(r){const e=tt(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pN.bind(null,e),e}class Zh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wf(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return _3(this.persistence,new m3,e.initialUser,this.serializer)}Ru(e){return new mb(jm.Ei,this.serializer)}Au(e){return new A3}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zh.provider={build:()=>new Zh};class _N extends Zh{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){It(this.persistence.referenceDelegate instanceof Wh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new t3(i,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?Kn.withCacheSize(this.cacheSizeBytes):Kn.DEFAULT;return new mb(i=>Wh.Ei(i,t),this.serializer)}}class nm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>O1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=mN.bind(null,this.syncEngine),await Q3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new W3}()}createDatastore(e){const t=wf(e.databaseInfo.databaseId),i=function(l){return new x3(l)}(e.databaseInfo);return function(l,c,h,p){return new L3(l,c,h,p)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,a,l,c,h){return new U3(i,a,l,c,h)}(this.localStore,this.datastore,e.asyncQueue,t=>O1(this.syncEngine,t,0),function(){return S1.C()?new S1:new C3}())}createSyncEngine(e,t){return function(a,l,c,h,p,g,y){const S=new sN(a,l,c,h,p,g);return y&&(S.hu=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const l=tt(a);Le(Ta,"RemoteStore shutting down."),l.aa.add(5),await Uu(l),l.ca.shutdown(),l.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}nm.provider={build:()=>new nm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):ki("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns="FirestoreClient";class TN{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=Ln.UNAUTHENTICATED,this.clientId=Iw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async c=>{Le(Ns,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(Le(Ns,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ga;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Qm(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Eg(r,e){r.asyncQueue.verifyOperationInProgress(),Le(Ns,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener(async a=>{i.isEqual(a)||(await yb(e.localStore,a),i=a)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function N1(r,e){r.asyncQueue.verifyOperationInProgress();const t=await wN(r);Le(Ns,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(i=>A1(e.remoteStore,i)),r.setAppCheckTokenChangeListener((i,a)=>A1(e.remoteStore,a)),r._onlineComponents=e}async function wN(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Le(Ns,"Using user provided OfflineComponentProvider");try{await Eg(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===Ce.FAILED_PRECONDITION||a.code===Ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;No("Error using user provided cache. Falling back to memory cache: "+t),await Eg(r,new Zh)}}else Le(Ns,"Using default OfflineComponentProvider"),await Eg(r,new _N(void 0));return r._offlineComponents}async function Lb(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Le(Ns,"Using user provided OnlineComponentProvider"),await N1(r,r._uninitializedComponentsProvider._online)):(Le(Ns,"Using default OnlineComponentProvider"),await N1(r,new nm))),r._onlineComponents}function bN(r){return Lb(r).then(e=>e.syncEngine)}async function M1(r){const e=await Lb(r),t=e.eventManager;return t.onListen=aN.bind(null,e.syncEngine),t.onUnlisten=uN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=oN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=cN.bind(null,e.syncEngine),t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(r,e,t){if(!t)throw new Ue(Ce.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function SN(r,e,t,i){if(e===!0&&i===!0)throw new Ue(Ce.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function L1(r){if(!je.isDocumentKey(r))throw new Ue(Ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function P1(r){if(je.isDocumentKey(r))throw new Ue(Ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Rf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Qe(12329,{type:typeof r})}function ma(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Ue(Ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Rf(r);throw new Ue(Ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb="firestore.googleapis.com",U1=!0;class V1{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Ue(Ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Vb,this.ssl=U1}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:U1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=gb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Jx)throw new Ue(Ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Pb((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Ue(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Ue(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Ue(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,a){return i.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Af{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new V1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ue(Ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ue(Ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new V1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new DO;switch(i.type){case"firstParty":return new MO(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ue(Ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,df("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=k1.get(t);i&&(Le("ComponentProvider","Removing Datastore"),k1.delete(t),i.terminate())}(this),Promise.resolve()}}function RN(r,e,t,i={}){var a;r=ma(r,Af);const l=Nu(e),c=r._getSettings(),h=Object.assign(Object.assign({},c),{emulatorOptions:r._getEmulatorOptions()}),p=`${e}:${t}`;c.host!==Vb&&c.host!==p&&No("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},c),{host:p,ssl:l,emulatorOptions:i});if(!va(g,h)&&(r._setSettings(g),l&&(fw(`https://${p}`),df("Firestore",!0)),i.mockUserToken)){let y,S;if(typeof i.mockUserToken=="string")y=i.mockUserToken,S=Ln.MOCK_USER;else{y=nD(i.mockUserToken,(a=r._app)===null||a===void 0?void 0:a.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new Ue(Ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Ln(T)}r._authCredentials=new OO(new Aw(y,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ia(this.firestore,e,this._query)}}class Qn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ss(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qn(this.firestore,e,this._key)}}class Ss extends Ia{constructor(e,t,i){super(e,t,km(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qn(this.firestore,null,new je(e))}withConverter(e){return new Ss(this.firestore,e,this._path)}}function AN(r,e,...t){if(r=Yn(r),Ub("collection","path",e),r instanceof Af){const i=Vt.fromString(e,...t);return P1(i),new Ss(r,null,i)}{if(!(r instanceof Qn||r instanceof Ss))throw new Ue(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Vt.fromString(e,...t));return P1(i),new Ss(r.firestore,null,i)}}function rm(r,e,...t){if(r=Yn(r),arguments.length===1&&(e=Iw.newId()),Ub("doc","path",e),r instanceof Af){const i=Vt.fromString(e,...t);return L1(i),new Qn(r,null,new je(i))}{if(!(r instanceof Qn||r instanceof Ss))throw new Ue(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Vt.fromString(e,...t));return L1(i),new Qn(r.firestore,r instanceof Ss?r.converter:null,new je(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1="AsyncQueue";class j1{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new _b(this,"async_queue_retry"),this.ju=()=>{const i=_g();i&&Le(B1,"Visibility state changed to "+i.visibilityState),this.y_.A_()},this.Hu=e;const t=_g();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=_g();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new ga;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!$o(e))throw e;Le(B1,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(i=>{throw this.Ku=i,this.Wu=!1,ki("INTERNAL UNHANDLED ERROR: ",F1(i)),i}).then(i=>(this.Wu=!1,i))));return this.Hu=t,t}enqueueAfterDelay(e,t,i){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const a=Km.createAndSchedule(this,e,t,i,l=>this.Xu(l));return this.Uu.push(a),a}Ju(){this.Ku&&Qe(47125,{ec:F1(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function F1(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(r){return function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1}(r,["next","error","complete"])}class Ru extends Af{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new j1,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new j1(e),this._firestoreClient=void 0,await e}}}function Bb(r,e){const t=typeof r=="object"?r:mw(),i=typeof r=="string"?r:Gh,a=Cm(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=eD("firestore");l&&RN(a,...l)}return a}function jb(r){if(r._terminated)throw new Ue(Ce.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||CN(r),r._firestoreClient}function CN(r){var e,t,i;const a=r._freezeSettings(),l=function(h,p,g,y){return new QO(h,p,g,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,Pb(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,a);r._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(r._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),r._firestoreClient=new TN(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&function(h){const p=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(p),_online:p}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vo(Dn.fromBase64String(e))}catch(t){throw new Ue(Ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Vo(Dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ue(Ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new In(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ue(Ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ue(Ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return lt(this._lat,e._lat)||lt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN=/^__.*__$/;class DN{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Aa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Lu(e,this.data,t,this.fieldTransforms)}}function Fb(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qe(40011,{oc:r})}}class ny{constructor(e,t,i,a,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this._c(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new ny(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ac({path:i,cc:!1});return a.lc(e),a}hc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ac({path:i,cc:!1});return a._c(),a}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return Jh(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(Fb(this.oc)&&IN.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class ON{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||wf(e)}dc(e,t,i,a=!1){return new ny({oc:e,methodName:t,Ec:i,path:In.emptyPath(),cc:!1,Ic:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ry(r){const e=r._freezeSettings(),t=wf(r._databaseId);return new ON(r._databaseId,!!e.ignoreUndefinedProperties,t)}function qb(r,e,t,i,a,l={}){const c=r.dc(l.merge||l.mergeFields?2:0,e,t,a);Gb("Data must be an object, but it was:",c,i);const h=zb(i,c);let p,g;if(l.merge)p=new Ir(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const S of l.mergeFields){const T=NN(e,S,t);if(!c.contains(T))throw new Ue(Ce.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);kN(y,T)||y.push(T)}p=new Ir(y),g=c.fieldTransforms.filter(S=>p.covers(S.field))}else p=null,g=c.fieldTransforms;return new DN(new _r(h),p,g)}class iy extends Jm{_toFieldTransform(e){return new Ex(e.path,new wu)}isEqual(e){return e instanceof iy}}function xN(r,e,t,i=!1){return sy(t,r.dc(i?4:3,e))}function sy(r,e){if(Hb(r=Yn(r)))return Gb("Unsupported field value:",e,r),zb(r,e);if(r instanceof Jm)return function(i,a){if(!Fb(a.oc))throw a.Tc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Tc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(i,a){const l=[];let c=0;for(const h of i){let p=sy(h,a.Pc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}}(r,e)}return function(i,a){if((i=Yn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return yx(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=un.fromDate(i);return{timestampValue:Yh(a.serializer,l)}}if(i instanceof un){const l=new un(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Yh(a.serializer,l)}}if(i instanceof ey)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Vo)return{bytesValue:lb(a.serializer,i._byteString)};if(i instanceof Qn){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.Tc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Vm(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof ty)return function(c,h){return{mapValue:{fields:{[Pw]:{stringValue:Uw},[$h]:{arrayValue:{values:c.toArray().map(g=>{if(typeof g!="number")throw h.Tc("VectorValues must only contain numeric values.");return Lm(h.serializer,g)})}}}}}}(i,a);throw a.Tc(`Unsupported field value: ${Rf(i)}`)}(r,e)}function zb(r,e){const t={};return Ow(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sa(r,(i,a)=>{const l=sy(a,e.uc(i));l!=null&&(t[i]=l)}),{mapValue:{fields:t}}}function Hb(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof un||r instanceof ey||r instanceof Vo||r instanceof Qn||r instanceof Jm||r instanceof ty)}function Gb(r,e,t){if(!Hb(t)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(t)){const i=Rf(t);throw i==="an object"?e.Tc(r+" a custom object"):e.Tc(r+" "+i)}}function NN(r,e,t){if((e=Yn(e))instanceof Zm)return e._internalPath;if(typeof e=="string")return $b(r,e);throw Jh("Field path arguments must be of type string or ",r,!1,void 0,t)}const MN=new RegExp("[~\\*/\\[\\]]");function $b(r,e,t){if(e.search(MN)>=0)throw Jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Zm(...e.split("."))._internalPath}catch{throw Jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Jh(r,e,t,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${a}`),p+=")"),new Ue(Ce.INVALID_ARGUMENT,h+r+p)}function kN(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Qn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new LN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ay("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class LN extends Kb{data(){return super.data()}}function ay(r,e){return typeof e=="string"?$b(r,e):e instanceof Zm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Ue(Ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class oy{}class Qb extends oy{}function UN(r,e,...t){let i=[];e instanceof oy&&i.push(e),i=i.concat(t),function(l){const c=l.filter(p=>p instanceof uy).length,h=l.filter(p=>p instanceof ly).length;if(c>1||c>0&&h>0)throw new Ue(Ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const a of i)r=a._apply(r);return r}class ly extends Qb{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new ly(e,t,i)}_apply(e){const t=this._parse(e);return Yb(e._query,t),new Ia(e.firestore,e.converter,$g(e._query,t))}_parse(e){const t=ry(e.firestore);return function(l,c,h,p,g,y,S){let T;if(g.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Ue(Ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){H1(S,y);const E=[];for(const I of S)E.push(z1(p,l,I));T={arrayValue:{values:E}}}else T=z1(p,l,S)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||H1(S,y),T=xN(h,c,S,y==="in"||y==="not-in");return nn.create(g,y,T)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class uy extends oy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new uy(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:xr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,l){let c=a;const h=l.getFlattenedFilters();for(const p of h)Yb(c,p),c=$g(c,p)}(e._query,t),new Ia(e.firestore,e.converter,$g(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class cy extends Qb{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new cy(e,t)}_apply(e){const t=function(a,l,c){if(a.startAt!==null)throw new Ue(Ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Ue(Ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Tu(l,c)}(e._query,this._field,this._direction);return new Ia(e.firestore,e.converter,function(a,l){const c=a.explicitOrderBy.concat([l]);return new Ko(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}function VN(r,e="asc"){const t=e,i=ay("orderBy",r);return cy._create(i,t)}function z1(r,e,t){if(typeof(t=Yn(t))=="string"){if(t==="")throw new Ue(Ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gw(e)&&t.indexOf("/")!==-1)throw new Ue(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Vt.fromString(t));if(!je.isDocumentKey(i))throw new Ue(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return n1(r,new je(i))}if(t instanceof Qn)return n1(r,t._key);throw new Ue(Ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rf(t)}.`)}function H1(r,e){if(!Array.isArray(r)||r.length===0)throw new Ue(Ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Yb(r,e){const t=function(a,l){for(const c of a)for(const h of c.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null}(r.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Ue(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ue(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class BN{convertValue(e,t="none"){switch(Os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ds(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Qe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Sa(e,(a,l)=>{i[a]=this.convertValue(l,t)}),i}convertVectorValue(e){var t,i,a;const l=(a=(i=(t=e.fields)===null||t===void 0?void 0:t[$h].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map(c=>Xt(c.doubleValue));return new ty(l)}convertGeoPoint(e){return new ey(Xt(e.latitude),Xt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=mf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(vu(e));default:return null}}convertTimestamp(e){const t=Is(e);return new un(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Vt.fromString(e);It(pb(i),9688,{name:e});const a=new _u(i.get(1),i.get(3)),l=new je(i.popFirst(5));return a.isEqual(t)||ki(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xb extends Kb{constructor(e,t,i,a,l,c){super(e,t,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Mh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(ay("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Mh extends Xb{data(e={}){return super.data(e)}}class jN{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new su(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Mh(this._firestore,this._userDataWriter,i.key,i,new su(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ue(Ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(h=>{const p=new Mh(a._firestore,a._userDataWriter,h.doc.key,h.doc,new su(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(h=>l||h.type!==3).map(h=>{const p=new Mh(a._firestore,a._userDataWriter,h.doc.key,h.doc,new su(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,y=-1;return h.type!==0&&(g=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),y=c.indexOf(h.doc.key)),{type:FN(h.type),doc:p,oldIndex:g,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function FN(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qe(61501,{type:r})}}class Zb extends BN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qn(this.firestore,null,t)}}function qN(r,e,t){r=ma(r,Qn);const i=ma(r.firestore,Ru),a=Wb(r.converter,e,t);return eS(i,[qb(ry(i),"setDoc",r._key,a,r.converter!==null,t).toMutation(r._key,Jr.none())])}function zN(r,e){const t=ma(r.firestore,Ru),i=rm(r),a=Wb(r.converter,e);return eS(t,[qb(ry(r.firestore),"addDoc",i._key,a,r.converter!==null,{}).toMutation(i._key,Jr.exists(!1))]).then(()=>i)}function Jb(r,...e){var t,i,a;r=Yn(r);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||q1(e[c])||(l=e[c],c++);const h={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(q1(e[c])){const S=e[c];e[c]=(t=S.next)===null||t===void 0?void 0:t.bind(S),e[c+1]=(i=S.error)===null||i===void 0?void 0:i.bind(S),e[c+2]=(a=S.complete)===null||a===void 0?void 0:a.bind(S)}let p,g,y;if(r instanceof Qn)g=ma(r.firestore,Ru),y=km(r._key.path),p={next:S=>{e[c]&&e[c](HN(g,r,S))},error:e[c+1],complete:e[c+2]};else{const S=ma(r,Ia);g=ma(S.firestore,Ru),y=S._query;const T=new Zb(g);p={next:D=>{e[c]&&e[c](new jN(g,T,S,D))},error:e[c+1],complete:e[c+2]},PN(r._query)}return function(T,D,E,I){const N=new EN(I),O=new tN(D,N,E);return T.asyncQueue.enqueueAndForget(async()=>X3(await M1(T),O)),()=>{N.yu(),T.asyncQueue.enqueueAndForget(async()=>Z3(await M1(T),O))}}(jb(g),y,h,p)}function eS(r,e){return function(i,a){const l=new ga;return i.asyncQueue.enqueueAndForget(async()=>hN(await bN(i),a,l)),l.promise}(jb(r),e)}function HN(r,e,t){const i=t.docs.get(e._key),a=new Zb(r);return new Xb(r,a,e._key,i,new su(t.hasPendingWrites,t.fromCache),e.converter)}function GN(){return new iy("serverTimestamp")}(function(e,t=!0){(function(a){Ho=a})(zo),xo(new _a("firestore",(i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),h=new Ru(new xO(i.getProvider("auth-internal")),new kO(c,i.getProvider("app-check-internal")),function(g,y){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Ue(Ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _u(g.options.projectId,y)}(c,a),c);return l=Object.assign({useFetchStreams:t},l),h._setSettings(l),h},"PUBLIC").setMultipleInstances(!0)),ws(HE,GE,e),ws(HE,GE,"esm2017")})();var $N="firebase",KN="11.7.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ws($N,KN,"app");function hy(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(r);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(r,i[a])&&(t[i[a]]=r[i[a]]);return t}function tS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const QN=tS,nS=new Mu("auth","Firebase",tS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef=new Rm("@firebase/auth");function YN(r,...e){ef.logLevel<=gt.WARN&&ef.warn(`Auth (${zo}): ${r}`,...e)}function kh(r,...e){ef.logLevel<=gt.ERROR&&ef.error(`Auth (${zo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(r,...e){throw fy(r,...e)}function ti(r,...e){return fy(r,...e)}function rS(r,e,t){const i=Object.assign(Object.assign({},QN()),{[e]:t});return new Mu("auth","Firebase",i).create(e,{appName:r.name})}function Rs(r){return rS(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fy(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return nS.create(r,...e)}function We(r,e,...t){if(!r)throw fy(e,...t)}function Di(r){const e="INTERNAL ASSERTION FAILED: "+r;throw kh(e),new Error(e)}function Ui(r,e){r||Di(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function WN(){return G1()==="http:"||G1()==="https:"}function G1(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WN()||lD()||"connection"in navigator)?navigator.onLine:!0}function ZN(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ui(t>e,"Short delay should be less than long delay!"),this.isMobile=sD()||uD()}get(){return XN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(r,e){Ui(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Di("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Di("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Di("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tM=new Bu(3e4,6e4);function Cf(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Yo(r,e,t,i,a={}){return sS(r,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const h=ku(Object.assign({key:r.config.apiKey},c)).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const g=Object.assign({method:e,headers:p},l);return oD()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&Nu(r.emulatorConfig.host)&&(g.credentials="include"),iS.fetch()(await oS(r,r.config.apiHost,t,h),g)})}async function sS(r,e,t){r._canInitEmulator=!1;const i=Object.assign(Object.assign({},JN),e);try{const a=new nM(r),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Eh(r,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const h=l.ok?c.errorMessage:c.error.message,[p,g]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Eh(r,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Eh(r,"email-already-in-use",c);if(p==="USER_DISABLED")throw Eh(r,"user-disabled",c);const y=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw rS(r,y,g);Pi(r,y)}}catch(a){if(a instanceof Vi)throw a;Pi(r,"network-request-failed",{message:String(a)})}}async function aS(r,e,t,i,a={}){const l=await Yo(r,e,t,i,a);return"mfaPendingCredential"in l&&Pi(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function oS(r,e,t,i){const a=`${e}${t}?${i}`,l=r,c=l.config.emulator?dy(r.config,a):`${r.config.apiScheme}://${a}`;return eM.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class nM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(ti(this.auth,"network-request-failed")),tM.get())})}}function Eh(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=ti(r,e,i);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rM(r,e){return Yo(r,"POST","/v1/accounts:delete",e)}async function tf(r,e){return Yo(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function iM(r,e=!1){const t=Yn(r),i=await t.getIdToken(e),a=py(i);We(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:i,authTime:fu(Tg(a.auth_time)),issuedAtTime:fu(Tg(a.iat)),expirationTime:fu(Tg(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Tg(r){return Number(r)*1e3}function py(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return kh("JWT malformed, contained fewer than 3 sections"),null;try{const a=lw(t);return a?JSON.parse(a):(kh("Failed to decode base64 JWT payload"),null)}catch(a){return kh("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function $1(r){const e=py(r);return We(e,"internal-error"),We(typeof e.exp<"u","internal-error"),We(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Au(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Vi&&sM(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function sM({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=fu(this.lastLoginAt),this.creationTime=fu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nf(r){var e;const t=r.auth,i=await r.getIdToken(),a=await Au(r,tf(t,{idToken:i}));We(a==null?void 0:a.users.length,t,"internal-error");const l=a.users[0];r._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?lS(l.providerUserInfo):[],h=lM(r.providerData,c),p=r.isAnonymous,g=!(r.email&&l.passwordHash)&&!(h!=null&&h.length),y=p?g:!1,S={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new sm(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(r,S)}async function oM(r){const e=Yn(r);await nf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function lM(r,e){return[...r.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function lS(r){return r.map(e=>{var{providerId:t}=e,i=hy(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uM(r,e){const t=await sS(r,{},async()=>{const i=ku({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=r.config,c=await oS(r,a,"/v1/token",`key=${l}`),h=await r._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",iS.fetch()(c,{method:"POST",headers:h,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function cM(r,e){return Yo(r,"POST","/v2/accounts:revokeToken",Cf(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){We(e.idToken,"internal-error"),We(typeof e.idToken<"u","internal-error"),We(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){We(e.length!==0,"internal-error");const t=$1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(We(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await uM(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,c=new Co;return i&&(We(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(We(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(We(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Co,this.toJSON())}_performRefresh(){return Di("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(r,e){We(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Dr{constructor(e){var{uid:t,auth:i,stsTokenManager:a}=e,l=hy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new aM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new sm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Au(this,this.stsTokenManager.getToken(this.auth,e));return We(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return iM(this,e)}reload(){return oM(this)}_assign(e){this!==e&&(We(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Dr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){We(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await nf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Cr(this.auth.app))return Promise.reject(Rs(this.auth));const e=await this.getIdToken();return await Au(this,rM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,a,l,c,h,p,g,y;const S=(i=t.displayName)!==null&&i!==void 0?i:void 0,T=(a=t.email)!==null&&a!==void 0?a:void 0,D=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,E=(c=t.photoURL)!==null&&c!==void 0?c:void 0,I=(h=t.tenantId)!==null&&h!==void 0?h:void 0,N=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,O=(g=t.createdAt)!==null&&g!==void 0?g:void 0,B=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:j,emailVerified:G,isAnonymous:q,providerData:X,stsTokenManager:V}=t;We(j&&V,e,"internal-error");const M=Co.fromJSON(this.name,V);We(typeof j=="string",e,"internal-error"),hs(S,e.name),hs(T,e.name),We(typeof G=="boolean",e,"internal-error"),We(typeof q=="boolean",e,"internal-error"),hs(D,e.name),hs(E,e.name),hs(I,e.name),hs(N,e.name),hs(O,e.name),hs(B,e.name);const P=new Dr({uid:j,auth:e,email:T,emailVerified:G,displayName:S,isAnonymous:q,photoURL:E,phoneNumber:D,tenantId:I,stsTokenManager:M,createdAt:O,lastLoginAt:B});return X&&Array.isArray(X)&&(P.providerData=X.map(K=>Object.assign({},K))),N&&(P._redirectEventId=N),P}static async _fromIdTokenResponse(e,t,i=!1){const a=new Co;a.updateFromServerResponse(t);const l=new Dr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await nf(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];We(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?lS(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),h=new Co;h.updateFromIdToken(i);const p=new Dr({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new sm(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=new Map;function Oi(r){Ui(r instanceof Function,"Expected a class definition");let e=K1.get(r);return e?(Ui(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,K1.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}uS.type="NONE";const Q1=uS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(r,e,t){return`firebase:${r}:${e}:${t}`}class Io{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=Lh(this.userKey,a.apiKey,l),this.fullPersistenceKey=Lh("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await tf(this.auth,{idToken:e}).catch(()=>{});return t?Dr._fromGetAccountInfoResponse(this.auth,t,e):null}return Dr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Io(Oi(Q1),e,i);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||Oi(Q1);const c=Lh(i,e.config.apiKey,e.name);let h=null;for(const g of t)try{const y=await g._get(c);if(y){let S;if(typeof y=="string"){const T=await tf(e,{idToken:y}).catch(()=>{});if(!T)break;S=await Dr._fromGetAccountInfoResponse(e,T,y)}else S=Dr._fromJSON(e,y);g!==l&&(h=S),l=g;break}}catch{}const p=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Io(l,e,i):(l=p[0],h&&await l._set(c,h.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Io(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gS(e))return"Blackberry";if(mS(e))return"Webos";if(hS(e))return"Safari";if((e.includes("chrome/")||fS(e))&&!e.includes("edge/"))return"Chrome";if(pS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function cS(r=Un()){return/firefox\//i.test(r)}function hS(r=Un()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fS(r=Un()){return/crios\//i.test(r)}function dS(r=Un()){return/iemobile/i.test(r)}function pS(r=Un()){return/android/i.test(r)}function gS(r=Un()){return/blackberry/i.test(r)}function mS(r=Un()){return/webos/i.test(r)}function gy(r=Un()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function hM(r=Un()){var e;return gy(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function fM(){return cD()&&document.documentMode===10}function yS(r=Un()){return gy(r)||pS(r)||mS(r)||gS(r)||/windows phone/i.test(r)||dS(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(r,e=[]){let t;switch(r){case"Browser":t=Y1(Un());break;case"Worker":t=`${Y1(Un())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${zo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,h)=>{try{const p=e(l);c(p)}catch(p){h(p)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pM(r,e={}){return Yo(r,"GET","/v2/passwordPolicy",Cf(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM=6;class mM{constructor(e){var t,i,a,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:gM,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,a,l,c,h;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(a=p.containsLowercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(h=p.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new W1(this),this.idTokenSubscription=new W1(this),this.beforeStateQueue=new dM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Oi(t)),this._initializationPromise=this.queue(async()=>{var i,a,l;if(!this._deleted&&(this.persistenceManager=await Io.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await tf(this,{idToken:e}),i=await Dr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Cr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let a=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=a==null?void 0:a._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===h)&&(p!=null&&p.user)&&(a=p.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return We(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await nf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ZN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Cr(this.app))return Promise.reject(Rs(this));const t=e?Yn(e):null;return t&&We(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&We(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Cr(this.app)?Promise.reject(Rs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Cr(this.app)?Promise.reject(Rs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Oi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await pM(this),t=new mM(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Mu("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await cM(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Oi(e)||this._popupRedirectResolver;We(t,this,"argument-error"),this.redirectPersistenceManager=await Io.create(this,[Oi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(We(h,this,"internal-error"),h.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,a);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return We(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(Cr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&YN(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function If(r){return Yn(r)}class W1{constructor(e){this.auth=e,this.observer=null,this.addObserver=vD(t=>this.observer=t)}get next(){return We(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let my={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vM(r){my=r}function _M(r){return my.loadJS(r)}function EM(){return my.gapiScript}function TM(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wM(r,e){const t=Cm(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(va(l,e??{}))return a;Pi(a,"already-initialized")}return t.initialize({options:e})}function bM(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Oi);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function SM(r,e,t){const i=If(r);We(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=_S(e),{host:c,port:h}=RM(e),p=h===null?"":`:${h}`,g={url:`${l}//${c}${p}/`},y=Object.freeze({host:c,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){We(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),We(va(g,i.config.emulator)&&va(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,Nu(c)?(df("Auth",!0),fw(`${l}//${c}${p}`)):AM()}function _S(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function RM(r){const e=_S(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:X1(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:X1(c)}}}function X1(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function AM(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Di("not implemented")}_getIdTokenResponse(e){return Di("not implemented")}_linkToIdToken(e,t){return Di("not implemented")}_getReauthenticationResolver(e){return Di("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Do(r,e){return aS(r,"POST","/v1/accounts:signInWithIdp",Cf(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM="http://localhost";class wa extends ES{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new wa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Pi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a}=t,l=hy(t,["providerId","signInMethod"]);if(!i||!a)return null;const c=new wa(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Do(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Do(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Do(e,t)}buildRequest(){const e={requestUri:CM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ku(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju extends TS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends ju{constructor(){super("facebook.com")}static credential(e){return wa._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gs.credential(e.oauthAccessToken)}catch{return null}}}gs.FACEBOOK_SIGN_IN_METHOD="facebook.com";gs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends ju{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return wa._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ms.credential(t,i)}catch{return null}}}ms.GOOGLE_SIGN_IN_METHOD="google.com";ms.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends ju{constructor(){super("github.com")}static credential(e){return wa._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ys.credential(e.oauthAccessToken)}catch{return null}}}ys.GITHUB_SIGN_IN_METHOD="github.com";ys.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends ju{constructor(){super("twitter.com")}static credential(e,t){return wa._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return vs.credential(t,i)}catch{return null}}}vs.TWITTER_SIGN_IN_METHOD="twitter.com";vs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IM(r,e){return aS(r,"POST","/v1/accounts:signUp",Cf(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await Dr._fromIdTokenResponse(e,i,a),c=Z1(i);return new Ms({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=Z1(i);return new Ms({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function Z1(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DM(r){var e;if(Cr(r.app))return Promise.reject(Rs(r));const t=If(r);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new Ms({user:t.currentUser,providerId:null,operationType:"signIn"});const i=await IM(t,{returnSecureToken:!0}),a=await Ms._fromIdTokenResponse(t,"signIn",i,!0);return await t._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf extends Vi{constructor(e,t,i,a){var l;super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,rf.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new rf(e,t,i,a)}}function wS(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?rf._fromErrorAndOperation(r,l,e,i):l})}async function OM(r,e,t=!1){const i=await Au(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Ms._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xM(r,e,t=!1){const{auth:i}=r;if(Cr(i.app))return Promise.reject(Rs(i));const a="reauthenticate";try{const l=await Au(r,wS(i,a,e,r),t);We(l.idToken,i,"internal-error");const c=py(l.idToken);We(c,i,"internal-error");const{sub:h}=c;return We(r.uid===h,i,"user-mismatch"),Ms._forOperation(r,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Pi(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NM(r,e,t=!1){if(Cr(r.app))return Promise.reject(Rs(r));const i="signIn",a=await wS(r,i,e),l=await Ms._fromIdTokenResponse(r,i,a);return t||await r._updateCurrentUser(l.user),l}function MM(r,e,t,i){return Yn(r).onIdTokenChanged(e,t,i)}function kM(r,e,t){return Yn(r).beforeAuthStateChanged(e,t)}function LM(r,e,t,i){return Yn(r).onAuthStateChanged(e,t,i)}const sf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(sf,"1"),this.storage.removeItem(sf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM=1e3,UM=10;class SS extends bS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,p)=>{this.notifyListeners(c,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);fM()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,UM):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},PM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}SS.type="LOCAL";const VM=SS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS extends bS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}RS.type="SESSION";const AS=RS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BM(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new Df(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const h=Array.from(c).map(async g=>g(t.origin,l)),p=await BM(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Df.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((h,p)=>{const g=yy("",20);a.port1.start();const y=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(S){const T=S;if(T.data.eventId===g)switch(T.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(T.data.response);break;default:clearTimeout(y),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(){return window}function FM(r){ni().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(){return typeof ni().WorkerGlobalScope<"u"&&typeof ni().importScripts=="function"}async function qM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zM(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function HM(){return CS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS="firebaseLocalStorageDb",GM=1,af="firebaseLocalStorage",DS="fbase_key";class Fu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Of(r,e){return r.transaction([af],e?"readwrite":"readonly").objectStore(af)}function $M(){const r=indexedDB.deleteDatabase(IS);return new Fu(r).toPromise()}function am(){const r=indexedDB.open(IS,GM);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(af,{keyPath:DS})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(af)?e(i):(i.close(),await $M(),e(await am()))})})}async function J1(r,e,t){const i=Of(r,!0).put({[DS]:e,value:t});return new Fu(i).toPromise()}async function KM(r,e){const t=Of(r,!1).get(e),i=await new Fu(t).toPromise();return i===void 0?null:i.value}function eT(r,e){const t=Of(r,!0).delete(e);return new Fu(t).toPromise()}const QM=800,YM=3;class OS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await am(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>YM)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return CS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Df._getInstance(HM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await qM(),!this.activeServiceWorker)return;this.sender=new jM(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||zM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await am();return await J1(e,sf,"1"),await eT(e,sf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>J1(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>KM(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>eT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Of(a,!1).getAll();return new Fu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),QM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}OS.type="LOCAL";const WM=OS;new Bu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XM(r,e){return e?Oi(e):(We(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy extends ES{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Do(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Do(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Do(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ZM(r){return NM(r.auth,new vy(r),r.bypassAuthState)}function JM(r){const{auth:e,user:t}=r;return We(t,e,"internal-error"),xM(t,new vy(r),r.bypassAuthState)}async function e4(r){const{auth:e,user:t}=r;return We(t,e,"internal-error"),OM(t,new vy(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:c,type:h}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ZM;case"linkViaPopup":case"linkViaRedirect":return e4;case"reauthViaPopup":case"reauthViaRedirect":return JM;default:Pi(this.auth,"internal-error")}}resolve(e){Ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4=new Bu(2e3,1e4);class Ro extends xS{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,Ro.currentPopupAction&&Ro.currentPopupAction.cancel(),Ro.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return We(e,this.auth,"internal-error"),e}async onExecution(){Ui(this.filter.length===1,"Popup operations only handle one event");const e=yy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ro.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,t4.get())};e()}}Ro.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4="pendingRedirect",Ph=new Map;class r4 extends xS{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Ph.get(this.auth._key());if(!e){try{const i=await i4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Ph.set(this.auth._key(),e)}return this.bypassAuthState||Ph.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function i4(r,e){const t=o4(e),i=a4(r);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function s4(r,e){Ph.set(r._key(),e)}function a4(r){return Oi(r._redirectPersistence)}function o4(r){return Lh(n4,r.config.apiKey,r.name)}async function l4(r,e,t=!1){if(Cr(r.app))return Promise.reject(Rs(r));const i=If(r),a=XM(i,e),c=await new r4(i,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4=10*60*1e3;class c4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!h4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!NS(e)){const a=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(ti(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=u4&&this.cachedEventUids.clear(),this.cachedEventUids.has(tT(e))}saveEventToCache(e){this.cachedEventUids.add(tT(e)),this.lastProcessedEventTime=Date.now()}}function tT(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function NS({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function h4(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return NS(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f4(r,e={}){return Yo(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,p4=/^https?/;async function g4(r){if(r.config.emulator)return;const{authorizedDomains:e}=await f4(r);for(const t of e)try{if(m4(t))return}catch{}Pi(r,"unauthorized-domain")}function m4(r){const e=im(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!p4.test(t))return!1;if(d4.test(r))return i===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4=new Bu(3e4,6e4);function nT(){const r=ni().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function v4(r){return new Promise((e,t)=>{var i,a,l;function c(){nT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{nT(),t(ti(r,"network-request-failed"))},timeout:y4.get()})}if(!((a=(i=ni().gapi)===null||i===void 0?void 0:i.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=ni().gapi)===null||l===void 0)&&l.load)c();else{const h=TM("iframefcb");return ni()[h]=()=>{gapi.load?c():t(ti(r,"network-request-failed"))},_M(`${EM()}?onload=${h}`).catch(p=>t(p))}}).catch(e=>{throw Uh=null,e})}let Uh=null;function _4(r){return Uh=Uh||v4(r),Uh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4=new Bu(5e3,15e3),T4="__/auth/iframe",w4="emulator/auth/iframe",b4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},S4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function R4(r){const e=r.config;We(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?dy(e,w4):`https://${r.config.authDomain}/${T4}`,i={apiKey:e.apiKey,appName:r.name,v:zo},a=S4.get(r.config.apiHost);a&&(i.eid=a);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${ku(i).slice(1)}`}async function A4(r){const e=await _4(r),t=ni().gapi;return We(t,r,"internal-error"),e.open({where:document.body,url:R4(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:b4,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=ti(r,"network-request-failed"),h=ni().setTimeout(()=>{l(c)},E4.get());function p(){ni().clearTimeout(h),a(i)}i.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},I4=500,D4=600,O4="_blank",x4="http://localhost";class rT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function N4(r,e,t,i=I4,a=D4){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const p=Object.assign(Object.assign({},C4),{width:i.toString(),height:a.toString(),top:l,left:c}),g=Un().toLowerCase();t&&(h=fS(g)?O4:t),cS(g)&&(e=e||x4,p.scrollbars="yes");const y=Object.entries(p).reduce((T,[D,E])=>`${T}${D}=${E},`,"");if(hM(g)&&h!=="_self")return M4(e||"",h),new rT(null);const S=window.open(e||"",h,y);We(S,r,"popup-blocked");try{S.focus()}catch{}return new rT(S)}function M4(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4="__/auth/handler",L4="emulator/auth/handler",P4=encodeURIComponent("fac");async function iT(r,e,t,i,a,l){We(r.config.authDomain,r,"auth-domain-config-required"),We(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:zo,eventId:a};if(e instanceof TS){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",yD(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,S]of Object.entries({}))c[y]=S}if(e instanceof ju){const y=e.getScopes().filter(S=>S!=="");y.length>0&&(c.scopes=y.join(","))}r.tenantId&&(c.tid=r.tenantId);const h=c;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const p=await r._getAppCheckToken(),g=p?`#${P4}=${encodeURIComponent(p)}`:"";return`${U4(r)}?${ku(h).slice(1)}${g}`}function U4({config:r}){return r.emulator?dy(r,L4):`https://${r.authDomain}/${k4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg="webStorageSupport";class V4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AS,this._completeRedirectFn=l4,this._overrideRedirectResult=s4}async _openPopup(e,t,i,a){var l;Ui((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await iT(e,t,i,im(),a);return N4(e,c,yy())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await iT(e,t,i,im(),a);return FM(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Ui(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await A4(e),i=new c4(e);return t.register("authEvent",a=>(We(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(wg,{type:wg},a=>{var l;const c=(l=a==null?void 0:a[0])===null||l===void 0?void 0:l[wg];c!==void 0&&t(!!c),Pi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=g4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return yS()||hS()||gy()}}const B4=V4;var sT="@firebase/auth",aT="1.10.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){We(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function q4(r){xo(new _a("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=i.options;We(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:h,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vS(r)},g=new yM(i,a,l,p);return bM(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),xo(new _a("auth-internal",e=>{const t=If(e.getProvider("auth").getImmediate());return(i=>new j4(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ws(sT,aT,F4(r)),ws(sT,aT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4=5*60,H4=hw("authIdTokenMaxAge")||z4;let oT=null;const G4=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>H4)return;const a=t==null?void 0:t.token;oT!==a&&(oT=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function MS(r=mw()){const e=Cm(r,"auth");if(e.isInitialized())return e.getImmediate();const t=wM(r,{popupRedirectResolver:B4,persistence:[WM,VM,AS]}),i=hw("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=G4(l.toString());kM(t,c,()=>c(t.currentUser)),MM(t,h=>c(h))}}const a=uw("auth");return a?SM(t,`http://${a}`):df("Auth",!1),t}function $4(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}vM({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=a=>{const l=ti("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",$4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});q4("Browser");const kS={apiKey:"AIzaSyCnQUtyBKhXMIlKdL-OgDjmhvgQx2zP63k",authDomain:"chessapp-460407.firebaseapp.com",projectId:"chessapp-460407",storageBucket:"chessapp-460407.firebasestorage.app",messagingSenderId:"G-ZW6TXNTRYG",appId:"1:465781342413:web:937688a1a3150506d4e984"};console.log(" firebaseConfig",kS);const LS=gw(kS),lT=Bb(LS),PS=MS(LS);DM(PS).catch(console.error);function K4(){const[r,e]=W.useState(!1);return W.useEffect(()=>LM(PS,t=>{t&&e(!0)}),[]),r}function Q4(r,e,t,i){const a=W.useRef(e),l=W.useRef(t);W.useEffect(()=>{const c=rm(lT,"games",r);return Jb(c,h=>{if(h.metadata.hasPendingWrites||h.metadata.fromCache)return;const p=h.data();!(p!=null&&p.fen)||!p.clocks||p.fen===a.current&&p.clocks.w===l.current.w&&p.clocks.b===l.current.b||(a.current=p.fen,l.current=p.clocks,i({fen:p.fen,clocks:p.clocks}))})},[r,i]),W.useEffect(()=>{e===a.current&&t.w===l.current.w&&t.b===l.current.b||(a.current=e,l.current=t,qN(rm(lT,"games",r),{fen:e,clocks:t},{merge:!0}).catch(c=>{throw c}))},[r,e,t])}/**
 * @license
 * Copyright (c) 2025, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const kn="w",yr="b",yn="p",om="n",Vh="b",au="r",ps="q",ln="k",bg="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Th{constructor(e,t){qt(this,"color");qt(this,"from");qt(this,"to");qt(this,"piece");qt(this,"captured");qt(this,"promotion");qt(this,"flags");qt(this,"san");qt(this,"lan");qt(this,"before");qt(this,"after");const{color:i,piece:a,from:l,to:c,flags:h,captured:p,promotion:g}=t,y=An(l),S=An(c);this.color=i,this.piece=a,this.from=y,this.to=S,this.san=e._moveToSan(t,e._moves({legal:!0})),this.lan=y+S,this.before=e.fen(),e._makeMove(t),this.after=e.fen(),e._undoMove(),this.flags="";for(const T in at)at[T]&h&&(this.flags+=fa[T]);p&&(this.captured=p),g&&(this.promotion=g,this.lan+=g)}isCapture(){return this.flags.indexOf(fa.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(fa.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(fa.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(fa.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(fa.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(fa.BIG_PAWN)>-1}}const $n=-1,fa={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},at={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},lm={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},Y4={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},W4={...lm,...Y4},Ze={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},Sg={b:[16,32,17,15],w:[-16,-32,-17,-15]},uT={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},X4=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],Z4=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],J4={p:1,n:2,b:4,r:8,q:16,k:32},e5="pnbrqkPNBRQK",cT=[om,Vh,au,ps],t5=7,n5=6,r5=1,i5=0,wh={[ln]:at.KSIDE_CASTLE,[ps]:at.QSIDE_CASTLE},fs={w:[{square:Ze.a1,flag:at.QSIDE_CASTLE},{square:Ze.h1,flag:at.KSIDE_CASTLE}],b:[{square:Ze.a8,flag:at.QSIDE_CASTLE},{square:Ze.h8,flag:at.KSIDE_CASTLE}]},s5={b:r5,w:n5},a5=["1-0","0-1","1/2-1/2","*"];function ya(r){return r>>4}function Cu(r){return r&15}function US(r){return"0123456789".indexOf(r)!==-1}function An(r){const e=Cu(r),t=ya(r);return"abcdefgh".substring(e,e+1)+"87654321".substring(t,t+1)}function eu(r){return r===kn?yr:kn}function o5(r){const e=r.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const t=parseInt(e[5],10);if(isNaN(t)||t<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const i=parseInt(e[4],10);if(isNaN(i)||i<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const a=e[0].split("/");if(a.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let c=0;c<a.length;c++){let h=0,p=!1;for(let g=0;g<a[c].length;g++)if(US(a[c][g])){if(p)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};h+=parseInt(a[c][g],10),p=!0}else{if(!/^[prnbqkPRNBQK]$/.test(a[c][g]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};h+=1,p=!1}if(h!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const l=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:c,regex:h}of l){if(!h.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${c} king`};if((e[0].match(h)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${c} kings`}}return Array.from(a[0]+a[7]).some(c=>c.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function l5(r,e){const t=r.from,i=r.to,a=r.piece;let l=0,c=0,h=0;for(let p=0,g=e.length;p<g;p++){const y=e[p].from,S=e[p].to,T=e[p].piece;a===T&&t!==y&&i===S&&(l++,ya(t)===ya(y)&&c++,Cu(t)===Cu(y)&&h++)}return l>0?c>0&&h>0?An(t):h>0?An(t).charAt(1):An(t).charAt(0):""}function ds(r,e,t,i,a,l=void 0,c=at.NORMAL){const h=ya(i);if(a===yn&&(h===t5||h===i5))for(let p=0;p<cT.length;p++){const g=cT[p];r.push({color:e,from:t,to:i,piece:a,captured:l,promotion:g,flags:c|at.PROMOTION})}else r.push({color:e,from:t,to:i,piece:a,captured:l,flags:c})}function hT(r){let e=r.charAt(0);return e>="a"&&e<="h"?r.match(/[a-h]\d.*[a-h]\d/)?void 0:yn:(e=e.toLowerCase(),e==="o"?ln:e)}function Rg(r){return r.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function Ag(r){return r.split(" ").slice(0,4).join(" ")}class u5{constructor(e=bg,{skipValidation:t=!1}={}){qt(this,"_board",new Array(128));qt(this,"_turn",kn);qt(this,"_header",{});qt(this,"_kings",{w:$n,b:$n});qt(this,"_epSquare",-1);qt(this,"_halfMoves",0);qt(this,"_moveNumber",0);qt(this,"_history",[]);qt(this,"_comments",{});qt(this,"_castling",{w:0,b:0});qt(this,"_positionCount",{});this.load(e,{skipValidation:t})}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:$n,b:$n},this._turn=kn,this._castling={w:0,b:0},this._epSquare=$n,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{...W4},this._positionCount={},this._header.SetUp=null,this._header.FEN=null}load(e,{skipValidation:t=!1,preserveHeaders:i=!1}={}){let a=e.split(/\s+/);if(a.length>=2&&a.length<6){const h=["-","-","0","1"];e=a.concat(h.slice(-(6-a.length))).join(" ")}if(a=e.split(/\s+/),!t){const{ok:h,error:p}=o5(e);if(!h)throw new Error(p)}const l=a[0];let c=0;this.clear({preserveHeaders:i});for(let h=0;h<l.length;h++){const p=l.charAt(h);if(p==="/")c+=8;else if(US(p))c+=parseInt(p,10);else{const g=p<"a"?kn:yr;this._put({type:p.toLowerCase(),color:g},An(c)),c++}}this._turn=a[1],a[2].indexOf("K")>-1&&(this._castling.w|=at.KSIDE_CASTLE),a[2].indexOf("Q")>-1&&(this._castling.w|=at.QSIDE_CASTLE),a[2].indexOf("k")>-1&&(this._castling.b|=at.KSIDE_CASTLE),a[2].indexOf("q")>-1&&(this._castling.b|=at.QSIDE_CASTLE),this._epSquare=a[3]==="-"?$n:Ze[a[3]],this._halfMoves=parseInt(a[4],10),this._moveNumber=parseInt(a[5],10),this._updateSetup(e),this._incPositionCount(e)}fen(){var l,c;let e=0,t="";for(let h=Ze.a8;h<=Ze.h1;h++){if(this._board[h]){e>0&&(t+=e,e=0);const{color:p,type:g}=this._board[h];t+=p===kn?g.toUpperCase():g.toLowerCase()}else e++;h+1&136&&(e>0&&(t+=e),h!==Ze.h1&&(t+="/"),e=0,h+=8)}let i="";this._castling[kn]&at.KSIDE_CASTLE&&(i+="K"),this._castling[kn]&at.QSIDE_CASTLE&&(i+="Q"),this._castling[yr]&at.KSIDE_CASTLE&&(i+="k"),this._castling[yr]&at.QSIDE_CASTLE&&(i+="q"),i=i||"-";let a="-";if(this._epSquare!==$n){const h=this._epSquare+(this._turn===kn?16:-16),p=[h+1,h-1];for(const g of p){if(g&136)continue;const y=this._turn;if(((l=this._board[g])==null?void 0:l.color)===y&&((c=this._board[g])==null?void 0:c.type)===yn){this._makeMove({color:y,from:g,to:this._epSquare,piece:yn,captured:yn,flags:at.EP_CAPTURE});const S=!this._isKingAttacked(y);if(this._undoMove(),S){a=An(this._epSquare);break}}}}return[t,this._turn,i,a,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(e){this._history.length>0||(e!==bg?(this._header.SetUp="1",this._header.FEN=e):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(bg)}get(e){return this._board[Ze[e]]}findPiece(e){var i;const t=[];for(let a=Ze.a8;a<=Ze.h1;a++){if(a&136){a+=7;continue}!this._board[a]||((i=this._board[a])==null?void 0:i.color)!==e.color||this._board[a].color===e.color&&this._board[a].type===e.type&&t.push(An(a))}return t}put({type:e,color:t},i){return this._put({type:e,color:t},i)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_put({type:e,color:t},i){if(e5.indexOf(e.toLowerCase())===-1||!(i in Ze))return!1;const a=Ze[i];if(e==ln&&!(this._kings[t]==$n||this._kings[t]==a))return!1;const l=this._board[a];return l&&l.type===ln&&(this._kings[l.color]=$n),this._board[a]={type:e,color:t},e===ln&&(this._kings[t]=a),!0}remove(e){const t=this.get(e);return delete this._board[Ze[e]],t&&t.type===ln&&(this._kings[t.color]=$n),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),t}_updateCastlingRights(){var i,a,l,c,h,p,g,y,S,T,D,E;const e=((i=this._board[Ze.e1])==null?void 0:i.type)===ln&&((a=this._board[Ze.e1])==null?void 0:a.color)===kn,t=((l=this._board[Ze.e8])==null?void 0:l.type)===ln&&((c=this._board[Ze.e8])==null?void 0:c.color)===yr;(!e||((h=this._board[Ze.a1])==null?void 0:h.type)!==au||((p=this._board[Ze.a1])==null?void 0:p.color)!==kn)&&(this._castling.w&=-65),(!e||((g=this._board[Ze.h1])==null?void 0:g.type)!==au||((y=this._board[Ze.h1])==null?void 0:y.color)!==kn)&&(this._castling.w&=-33),(!t||((S=this._board[Ze.a8])==null?void 0:S.type)!==au||((T=this._board[Ze.a8])==null?void 0:T.color)!==yr)&&(this._castling.b&=-65),(!t||((D=this._board[Ze.h8])==null?void 0:D.type)!==au||((E=this._board[Ze.h8])==null?void 0:E.color)!==yr)&&(this._castling.b&=-33)}_updateEnPassantSquare(){var l,c;if(this._epSquare===$n)return;const e=this._epSquare+(this._turn===kn?-16:16),t=this._epSquare+(this._turn===kn?16:-16),i=[t+1,t-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||((l=this._board[t])==null?void 0:l.color)!==eu(this._turn)||((c=this._board[t])==null?void 0:c.type)!==yn){this._epSquare=$n;return}const a=h=>{var p,g;return!(h&136)&&((p=this._board[h])==null?void 0:p.color)===this._turn&&((g=this._board[h])==null?void 0:g.type)===yn};i.some(a)||(this._epSquare=$n)}_attacked(e,t,i){const a=[];for(let l=Ze.a8;l<=Ze.h1;l++){if(l&136){l+=7;continue}if(this._board[l]===void 0||this._board[l].color!==e)continue;const c=this._board[l],h=l-t;if(h===0)continue;const p=h+119;if(X4[p]&J4[c.type]){if(c.type===yn){if(h>0&&c.color===kn||h<=0&&c.color===yr)if(i)a.push(An(l));else return!0;continue}if(c.type==="n"||c.type==="k")if(i){a.push(An(l));continue}else return!0;const g=Z4[p];let y=l+g,S=!1;for(;y!==t;){if(this._board[y]!=null){S=!0;break}y+=g}if(!S)if(i){a.push(An(l));continue}else return!0}}return i?a:!1}attackers(e,t){return t?this._attacked(t,Ze[e],!0):this._attacked(this._turn,Ze[e],!0)}_isKingAttacked(e){const t=this._kings[e];return t===-1?!1:this._attacked(eu(e),t)}isAttacked(e,t){return this._attacked(t,Ze[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},t=[];let i=0,a=0;for(let l=Ze.a8;l<=Ze.h1;l++){if(a=(a+1)%2,l&136){l+=7;continue}const c=this._board[l];c&&(e[c.type]=c.type in e?e[c.type]+1:1,c.type===Vh&&t.push(a),i++)}if(i===2)return!0;if(i===3&&(e[Vh]===1||e[om]===1))return!0;if(i===e[Vh]+2){let l=0;const c=t.length;for(let h=0;h<c;h++)l+=t[h];if(l===0||l===c)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this.fen())>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:e=!1,square:t=void 0,piece:i=void 0}={}){const a=this._moves({square:t,piece:i});return e?a.map(l=>new Th(this,l)):a.map(l=>this._moveToSan(l,a))}_moves({legal:e=!0,piece:t=void 0,square:i=void 0}={}){var D;const a=i?i.toLowerCase():void 0,l=t==null?void 0:t.toLowerCase(),c=[],h=this._turn,p=eu(h);let g=Ze.a8,y=Ze.h1,S=!1;if(a)if(a in Ze)g=y=Ze[a],S=!0;else return[];for(let E=g;E<=y;E++){if(E&136){E+=7;continue}if(!this._board[E]||this._board[E].color===p)continue;const{type:I}=this._board[E];let N;if(I===yn){if(l&&l!==I)continue;N=E+Sg[h][0],this._board[N]||(ds(c,h,E,N,yn),N=E+Sg[h][1],s5[h]===ya(E)&&!this._board[N]&&ds(c,h,E,N,yn,void 0,at.BIG_PAWN));for(let O=2;O<4;O++)N=E+Sg[h][O],!(N&136)&&(((D=this._board[N])==null?void 0:D.color)===p?ds(c,h,E,N,yn,this._board[N].type,at.CAPTURE):N===this._epSquare&&ds(c,h,E,N,yn,yn,at.EP_CAPTURE))}else{if(l&&l!==I)continue;for(let O=0,B=uT[I].length;O<B;O++){const j=uT[I][O];for(N=E;N+=j,!(N&136);){if(!this._board[N])ds(c,h,E,N,I);else{if(this._board[N].color===h)break;ds(c,h,E,N,I,this._board[N].type,at.CAPTURE);break}if(I===om||I===ln)break}}}}if((l===void 0||l===ln)&&(!S||y===this._kings[h])){if(this._castling[h]&at.KSIDE_CASTLE){const E=this._kings[h],I=E+2;!this._board[E+1]&&!this._board[I]&&!this._attacked(p,this._kings[h])&&!this._attacked(p,E+1)&&!this._attacked(p,I)&&ds(c,h,this._kings[h],I,ln,void 0,at.KSIDE_CASTLE)}if(this._castling[h]&at.QSIDE_CASTLE){const E=this._kings[h],I=E-2;!this._board[E-1]&&!this._board[E-2]&&!this._board[E-3]&&!this._attacked(p,this._kings[h])&&!this._attacked(p,E-1)&&!this._attacked(p,I)&&ds(c,h,this._kings[h],I,ln,void 0,at.QSIDE_CASTLE)}}if(!e||this._kings[h]===-1)return c;const T=[];for(let E=0,I=c.length;E<I;E++)this._makeMove(c[E]),this._isKingAttacked(h)||T.push(c[E]),this._undoMove();return T}move(e,{strict:t=!1}={}){let i=null;if(typeof e=="string")i=this._moveFromSan(e,t);else if(typeof e=="object"){const l=this._moves();for(let c=0,h=l.length;c<h;c++)if(e.from===An(l[c].from)&&e.to===An(l[c].to)&&(!("promotion"in l[c])||e.promotion===l[c].promotion)){i=l[c];break}}if(!i)throw typeof e=="string"?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);const a=new Th(this,i);return this._makeMove(i),this._incPositionCount(a.after),a}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(e){const t=this._turn,i=eu(t);if(this._push(e),this._board[e.to]=this._board[e.from],delete this._board[e.from],e.flags&at.EP_CAPTURE&&(this._turn===yr?delete this._board[e.to-16]:delete this._board[e.to+16]),e.promotion&&(this._board[e.to]={type:e.promotion,color:t}),this._board[e.to].type===ln){if(this._kings[t]=e.to,e.flags&at.KSIDE_CASTLE){const a=e.to-1,l=e.to+1;this._board[a]=this._board[l],delete this._board[l]}else if(e.flags&at.QSIDE_CASTLE){const a=e.to+1,l=e.to-2;this._board[a]=this._board[l],delete this._board[l]}this._castling[t]=0}if(this._castling[t]){for(let a=0,l=fs[t].length;a<l;a++)if(e.from===fs[t][a].square&&this._castling[t]&fs[t][a].flag){this._castling[t]^=fs[t][a].flag;break}}if(this._castling[i]){for(let a=0,l=fs[i].length;a<l;a++)if(e.to===fs[i][a].square&&this._castling[i]&fs[i][a].flag){this._castling[i]^=fs[i][a].flag;break}}e.flags&at.BIG_PAWN?t===yr?this._epSquare=e.to-16:this._epSquare=e.to+16:this._epSquare=$n,e.piece===yn?this._halfMoves=0:e.flags&(at.CAPTURE|at.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,t===yr&&this._moveNumber++,this._turn=i}undo(){const e=this._undoMove();if(e){const t=new Th(this,e);return this._decPositionCount(t.after),t}return null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;const t=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber;const i=this._turn,a=eu(i);if(this._board[t.from]=this._board[t.to],this._board[t.from].type=t.piece,delete this._board[t.to],t.captured)if(t.flags&at.EP_CAPTURE){let l;i===yr?l=t.to-16:l=t.to+16,this._board[l]={type:yn,color:a}}else this._board[t.to]={type:t.captured,color:a};if(t.flags&(at.KSIDE_CASTLE|at.QSIDE_CASTLE)){let l,c;t.flags&at.KSIDE_CASTLE?(l=t.to+1,c=t.to-1):(l=t.to-2,c=t.to+1),this._board[l]=this._board[c],delete this._board[c]}return t}pgn({newline:e=`
`,maxWidth:t=0}={}){const i=[];let a=!1;for(const T in this._header)this._header[T]&&i.push(`[${T} "${this._header[T]}"]`+e),a=!0;a&&this._history.length&&i.push(e);const l=T=>{const D=this._comments[this.fen()];if(typeof D<"u"){const E=T.length>0?" ":"";T=`${T}${E}{${D}}`}return T},c=[];for(;this._history.length>0;)c.push(this._undoMove());const h=[];let p="";for(c.length===0&&h.push(l(""));c.length>0;){p=l(p);const T=c.pop();if(!T)break;if(!this._history.length&&T.color==="b"){const D=`${this._moveNumber}. ...`;p=p?`${p} ${D}`:D}else T.color==="w"&&(p.length&&h.push(p),p=this._moveNumber+".");p=p+" "+this._moveToSan(T,this._moves({legal:!0})),this._makeMove(T)}if(p.length&&h.push(l(p)),h.push(this._header.Result||"*"),t===0)return i.join("")+h.join(" ");const g=function(){return i.length>0&&i[i.length-1]===" "?(i.pop(),!0):!1},y=function(T,D){for(const E of D.split(" "))if(E){if(T+E.length>t){for(;g();)T--;i.push(e),T=0}i.push(E),T+=E.length,i.push(" "),T++}return g()&&T--,T};let S=0;for(let T=0;T<h.length;T++){if(S+h[T].length>t&&h[T].includes("{")){S=y(S,h[T]);continue}S+h[T].length>t&&T!==0?(i[i.length-1]===" "&&i.pop(),i.push(e),S=0):T!==0&&(i.push(" "),S++),i.push(h[T]),S+=h[T].length}return i.join("")}header(...e){for(let t=0;t<e.length;t+=2)typeof e[t]=="string"&&typeof e[t+1]=="string"&&(this._header[e[t]]=e[t+1]);return this._header}setHeader(e,t){return this._header[e]=t??lm[e]??null,this.getHeaders()}removeHeader(e){return e in this._header?(this._header[e]=lm[e]||null,!0):!1}getHeaders(){const e={};for(const[t,i]of Object.entries(this._header))i!==null&&(e[t]=i);return e}loadPgn(e,{strict:t=!1,newlineChar:i=`\r?
`}={}){function a(j){return j.replace(/\\/g,"\\")}function l(j){const G={},q=j.split(new RegExp(a(i)));let X="",V="";for(let M=0;M<q.length;M++){const P=/^\s*\[\s*([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;X=q[M].replace(P,"$1"),V=q[M].replace(P,"$2"),X.trim().length>0&&(G[X]=V)}return G}e=e.trim();const h=new RegExp("^(\\[((?:"+a(i)+")|.)*\\])((?:\\s*"+a(i)+"){2}|(?:\\s*"+a(i)+")*$)").exec(e),p=h&&h.length>=2?h[1]:"";this.reset();const g=l(p);let y="";for(const j in g)j.toLowerCase()==="fen"&&(y=g[j]),this.header(j,g[j]);if(!t)y&&this.load(y,{preserveHeaders:!0});else if(g.SetUp==="1"){if(!("FEN"in g))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(g.FEN,{preserveHeaders:!0})}function S(j){return Array.from(j).map(function(G){return G.charCodeAt(0)<128?G.charCodeAt(0).toString(16):encodeURIComponent(G).replace(/%/g,"").toLowerCase()}).join("")}function T(j){return j.length==0?"":decodeURIComponent("%"+(j.match(/.{1,2}/g)||[]).join("%"))}const D=function(j){return j=j.replace(new RegExp(a(i),"g")," "),`{${S(j.slice(1,j.length-1))}}`},E=function(j){if(j.startsWith("{")&&j.endsWith("}"))return T(j.slice(1,j.length-1))};let I=e.replace(p,"").replace(new RegExp(`({[^}]*})+?|;([^${a(i)}]*)`,"g"),function(j,G,q){return G!==void 0?D(G):" "+D(`{${q.slice(1)}}`)}).replace(new RegExp(a(i),"g")," ");const N=/(\([^()]+\))+?/g;for(;N.test(I);)I=I.replace(N,"");I=I.replace(/\d+\.(\.\.)?/g,""),I=I.replace(/\.\.\./g,""),I=I.replace(/\$\d+/g,"");let O=I.trim().split(new RegExp(/\s+/));O=O.filter(j=>j!=="");let B="";for(let j=0;j<O.length;j++){const G=E(O[j]);if(G!==void 0){this._comments[this.fen()]=G;continue}const q=this._moveFromSan(O[j],t);if(q==null)if(a5.indexOf(O[j])>-1)B=O[j];else throw new Error(`Invalid move in PGN: ${O[j]}`);else B="",this._makeMove(q),this._incPositionCount(this.fen())}B&&Object.keys(this._header).length&&this._header.Result!==B&&this.setHeader("Result",B)}_moveToSan(e,t){let i="";if(e.flags&at.KSIDE_CASTLE)i="O-O";else if(e.flags&at.QSIDE_CASTLE)i="O-O-O";else{if(e.piece!==yn){const a=l5(e,t);i+=e.piece.toUpperCase()+a}e.flags&(at.CAPTURE|at.EP_CAPTURE)&&(e.piece===yn&&(i+=An(e.from)[0]),i+="x"),i+=An(e.to),e.promotion&&(i+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?i+="#":i+="+"),this._undoMove(),i}_moveFromSan(e,t=!1){const i=Rg(e);let a=hT(i),l=this._moves({legal:!0,piece:a});for(let T=0,D=l.length;T<D;T++)if(i===Rg(this._moveToSan(l[T],l)))return l[T];if(t)return null;let c,h,p,g,y,S=!1;if(h=i.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),h?(c=h[1],p=h[2],g=h[3],y=h[4],p.length==1&&(S=!0)):(h=i.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),h&&(c=h[1],p=h[2],g=h[3],y=h[4],p.length==1&&(S=!0))),a=hT(i),l=this._moves({legal:!0,piece:c||a}),!g)return null;for(let T=0,D=l.length;T<D;T++)if(p){if((!c||c.toLowerCase()==l[T].piece)&&Ze[p]==l[T].from&&Ze[g]==l[T].to&&(!y||y.toLowerCase()==l[T].promotion))return l[T];if(S){const E=An(l[T].from);if((!c||c.toLowerCase()==l[T].piece)&&Ze[g]==l[T].to&&(p==E[0]||p==E[1])&&(!y||y.toLowerCase()==l[T].promotion))return l[T]}}else if(i===Rg(this._moveToSan(l[T],l)).replace("x",""))return l[T];return null}ascii(){let e=`   +------------------------+
`;for(let t=Ze.a8;t<=Ze.h1;t++){if(Cu(t)===0&&(e+=" "+"87654321"[ya(t)]+" |"),this._board[t]){const i=this._board[t].type,l=this._board[t].color===kn?i.toUpperCase():i.toLowerCase();e+=" "+l+" "}else e+=" . ";t+1&136&&(e+=`|
`,t+=8)}return e+=`   +------------------------+
`,e+="     a  b  c  d  e  f  g  h",e}perft(e){const t=this._moves({legal:!1});let i=0;const a=this._turn;for(let l=0,c=t.length;l<c;l++)this._makeMove(t[l]),this._isKingAttacked(a)||(e-1>0?i+=this.perft(e-1):i++),this._undoMove();return i}turn(){return this._turn}board(){const e=[];let t=[];for(let i=Ze.a8;i<=Ze.h1;i++)this._board[i]==null?t.push(null):t.push({square:An(i),type:this._board[i].type,color:this._board[i].color}),i+1&136&&(e.push(t),t=[],i+=8);return e}squareColor(e){if(e in Ze){const t=Ze[e];return(ya(t)+Cu(t))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const t=[],i=[];for(;this._history.length>0;)t.push(this._undoMove());for(;;){const a=t.pop();if(!a)break;e?i.push(new Th(this,a)):i.push(this._moveToSan(a,this._moves())),this._makeMove(a)}return i}_getPositionCount(e){const t=Ag(e);return this._positionCount[t]||0}_incPositionCount(e){const t=Ag(e);this._positionCount[t]===void 0&&(this._positionCount[t]=0),this._positionCount[t]+=1}_decPositionCount(e){const t=Ag(e);this._positionCount[t]===1?delete this._positionCount[t]:this._positionCount[t]-=1}_pruneComments(){const e=[],t={},i=a=>{a in this._comments&&(t[a]=this._comments[a])};for(;this._history.length>0;)e.push(this._undoMove());for(i(this.fen());;){const a=e.pop();if(!a)break;this._makeMove(a),i(this.fen())}this._comments=t}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const t=this._comments[e];return delete this._comments[e],{fen:e,comment:t}})}setCastlingRights(e,t){for(const a of[ln,ps])t[a]!==void 0&&(t[a]?this._castling[e]|=wh[a]:this._castling[e]&=~wh[a]);this._updateCastlingRights();const i=this.getCastlingRights(e);return(t[ln]===void 0||t[ln]===i[ln])&&(t[ps]===void 0||t[ps]===i[ps])}getCastlingRights(e){return{[ln]:(this._castling[e]&wh[ln])!==0,[ps]:(this._castling[e]&wh[ps])!==0}}moveNumber(){return this._moveNumber}}function c5(){const[r]=W.useState(()=>new u5),[e,t]=W.useState(r.fen()),[i,a]=W.useState([]),l=W.useCallback((p,g)=>r.move({from:p,to:g,promotion:"q"})?(t(r.fen()),a(r.history()),!0):!1,[r]),c=W.useCallback(()=>{r.reset(),t(r.fen()),a([])},[r]),h=W.useCallback(p=>{r.load(p),t(r.fen()),a(r.history())},[r]);return{fen:e,history:i,onDrop:l,reset:c,load:h}}function h5(r=300){const[e,t]=W.useState({w:r,b:r}),[i,a]=W.useState(!1),l=W.useRef("w");W.useEffect(()=>{if(!i)return;const g=setInterval(()=>{t(y=>({...y,[l.current]:y[l.current]-1}))},1e3);return()=>clearInterval(g)},[i]);const c=W.useCallback(g=>{l.current=g,a(!0)},[]),h=W.useCallback(()=>a(!1),[]),p=W.useCallback(()=>{a(!1),t({w:r,b:r})},[r]);return{clocks:e,active:l.current,start:c,pause:h,reset:p,setClocks:t}}function f5(r,e){const t=Bb(),i=MS().currentUser.uid,a=AN(t,"games",r,"signals");return W.useEffect(()=>{const c=UN(a,VN("timestamp"));return Jb(c,p=>{p.docChanges().forEach(g=>{if(g.type!=="added")return;const y=g.doc.data();y.sender!==i&&e(y)})})},[t,r,e,i]),W.useCallback(async c=>{const h={sender:i,type:c.type,timestamp:GN()};c.sdp!=null&&(h.sdp=c.sdp),c.candidate!=null&&(h.candidate=c.candidate),await zN(a,h),console.log("[SIGNAL][TX]",h.type)},[r,i])}function d5(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(r);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(r,i[a])&&(t[i[a]]=r[i[a]]);return t}const Iu="abcdefgh".split(""),Bh={a8:"bR",b8:"bN",c8:"bB",d8:"bQ",e8:"bK",f8:"bB",g8:"bN",h8:"bR",a7:"bP",b7:"bP",c7:"bP",d7:"bP",e7:"bP",f7:"bP",g7:"bP",h7:"bP",a2:"wP",b2:"wP",c2:"wP",d2:"wP",e2:"wP",f2:"wP",g2:"wP",h2:"wP",a1:"wR",b1:"wN",c1:"wB",d1:"wQ",e1:"wK",f1:"wB",g1:"wN",h1:"wR"},p5={a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},g5={a:7,b:6,c:5,d:4,e:3,f:2,g:1,h:0},m5=[7,6,5,4,3,2,1,0],y5=[0,1,2,3,4,5,6,7],fT={wP:se.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:se.jsx("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),wR:se.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:se.jsxs("g",Object.assign({style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[se.jsx("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),se.jsx("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),se.jsx("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14",style:{strokeLinecap:"butt"}}),se.jsx("path",{d:"M 34,14 L 31,17 L 14,17 L 11,14"}),se.jsx("path",{d:"M 31,17 L 31,29.5 L 14,29.5 L 14,17",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),se.jsx("path",{d:"M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5"}),se.jsx("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wN:se.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:se.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[se.jsx("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#ffffff",stroke:"#000000"}}),se.jsx("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#ffffff",stroke:"#000000"}}),se.jsx("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#000000",stroke:"#000000"}}),se.jsx("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#000000",stroke:"#000000"}})]}))})),wB:se.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:se.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[se.jsxs("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt"}},{children:[se.jsx("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),se.jsx("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),se.jsx("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),se.jsx("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wQ:se.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:se.jsxs("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeWidth:"1.5",strokeLinejoin:"round"}},{children:[se.jsx("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"}),se.jsx("path",{d:"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 11,36 11,36 C 9.5,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"}),se.jsx("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30",style:{fill:"none"}}),se.jsx("path",{d:"M 12,33.5 C 18,32.5 27,32.5 33,33.5",style:{fill:"none"}}),se.jsx("circle",{cx:"6",cy:"12",r:"2"}),se.jsx("circle",{cx:"14",cy:"9",r:"2"}),se.jsx("circle",{cx:"22.5",cy:"8",r:"2"}),se.jsx("circle",{cx:"31",cy:"9",r:"2"}),se.jsx("circle",{cx:"39",cy:"12",r:"2"})]}))})),wK:se.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:se.jsxs("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[se.jsx("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),se.jsx("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),se.jsx("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt",strokeLinejoin:"miter"}}),se.jsx("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#ffffff",stroke:"#000000"}}),se.jsx("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30",style:{fill:"none",stroke:"#000000"}}),se.jsx("path",{d:"M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5",style:{fill:"none",stroke:"#000000"}}),se.jsx("path",{d:"M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#000000"}})]}))})),bP:se.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:se.jsx("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),bR:se.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:se.jsxs("g",Object.assign({style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[se.jsx("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),se.jsx("path",{d:"M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z ",style:{strokeLinecap:"butt"}}),se.jsx("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),se.jsx("path",{d:"M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z ",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),se.jsx("path",{d:"M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z ",style:{strokeLinecap:"butt"}}),se.jsx("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z ",style:{strokeLinecap:"butt"}}),se.jsx("path",{d:"M 12,35.5 L 33,35.5 L 33,35.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),se.jsx("path",{d:"M 13,31.5 L 32,31.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),se.jsx("path",{d:"M 14,29.5 L 31,29.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),se.jsx("path",{d:"M 14,16.5 L 31,16.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),se.jsx("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}})]}))})),bN:se.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:se.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[se.jsx("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#000000",stroke:"#000000"}}),se.jsx("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#000000",stroke:"#000000"}}),se.jsx("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#ffffff",stroke:"#ffffff"}}),se.jsx("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#ffffff",stroke:"#ffffff"}}),se.jsx("path",{d:"M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z ",style:{fill:"#ffffff",stroke:"none"}})]}))})),bB:se.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:se.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[se.jsxs("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeLinecap:"butt"}},{children:[se.jsx("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),se.jsx("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),se.jsx("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),se.jsx("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#ffffff",strokeLinejoin:"miter"}})]}))})),bQ:se.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:se.jsxs("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}},{children:[se.jsx("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z",style:{strokeLinecap:"butt",fill:"#000000"}}),se.jsx("path",{d:"m 9,26 c 0,2 1.5,2 2.5,4 1,1.5 1,1 0.5,3.5 -1.5,1 -1,2.5 -1,2.5 -1.5,1.5 0,2.5 0,2.5 6.5,1 16.5,1 23,0 0,0 1.5,-1 0,-2.5 0,0 0.5,-1.5 -1,-2.5 -0.5,-2.5 -0.5,-2 0.5,-3.5 1,-2 2.5,-2 2.5,-4 -8.5,-1.5 -18.5,-1.5 -27,0 z"}),se.jsx("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30"}),se.jsx("path",{d:"m 12,33.5 c 6,-1 15,-1 21,0"}),se.jsx("circle",{cx:"6",cy:"12",r:"2"}),se.jsx("circle",{cx:"14",cy:"9",r:"2"}),se.jsx("circle",{cx:"22.5",cy:"8",r:"2"}),se.jsx("circle",{cx:"31",cy:"9",r:"2"}),se.jsx("circle",{cx:"39",cy:"12",r:"2"}),se.jsx("path",{d:"M 11,38.5 A 35,35 1 0 0 34,38.5",style:{fill:"none",stroke:"#000000",strokeLinecap:"butt"}}),se.jsxs("g",Object.assign({style:{fill:"none",stroke:"#ffffff"}},{children:[se.jsx("path",{d:"M 11,29 A 35,35 1 0 1 34,29"}),se.jsx("path",{d:"M 12.5,31.5 L 32.5,31.5"}),se.jsx("path",{d:"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"}),se.jsx("path",{d:"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"})]}))]}))})),bK:se.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:se.jsxs("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[se.jsx("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"},id:"path6570"}),se.jsx("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#000000",fillOpacity:"1",strokeLinecap:"butt",strokeLinejoin:"miter"}}),se.jsx("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#000000",stroke:"#000000"}}),se.jsx("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),se.jsx("path",{d:"M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.5,26.6 L 22.5,24.5 C 20,18 10.85,14 6.97,19.85 C 4.5,25.5 13,29.5 13,29.5",style:{fill:"none",stroke:"#ffffff"}}),se.jsx("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30 M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5 M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#ffffff"}})]}))}))};function um(r,e,t){const i=e/8,a=r==="white"?p5:g5,l=r==="white"?m5:y5,c=a[t[0]]*i+i/2,h=l[parseInt(t[1],10)-1]*i+i/2;return{x:c,y:h}}function dT(r){let e=!1;return Object.keys(Bh).forEach(t=>{r[t]!==Bh[t]&&(e=!0)}),Object.keys(r).forEach(t=>{Bh[t]!==r[t]&&(e=!0)}),e}function v5(r,e){const t={removed:{},added:{}};return Object.keys(r).forEach(i=>{e[i]!==r[i]&&(t.removed[i]=r[i])}),Object.keys(e).forEach(i=>{r[i]!==e[i]&&(t.added[i]=e[i])}),t}function pT(r){return r==="start"?Bh:typeof r=="string"?_5(r):r}function _5(r){if(!E5(r))return{};r=r.replace(/ .+$/,"");const e=r.split("/"),t={};let i=8;for(let a=0;a<8;a++){const l=e[a].split("");let c=0;for(let h=0;h<l.length;h++)if(l[h].search(/[1-8]/)!==-1){const p=parseInt(l[h],10);c=c+p}else{const p=Iu[c]+i;t[p]=w5(l[h]),c=c+1}i=i-1}return t}function E5(r){r=r.replace(/ .+$/,""),r=T5(r);const e=r.split("/");if(e.length!==8)return!1;for(let t=0;t<8;t++)if(e[t].length!==8||e[t].search(/[^kqrnbpKQRNBP1]/)!==-1)return!1;return!0}function T5(r){return r.replace(/8/g,"11111111").replace(/7/g,"1111111").replace(/6/g,"111111").replace(/5/g,"11111").replace(/4/g,"1111").replace(/3/g,"111").replace(/2/g,"11")}function w5(r){return r.toLowerCase()===r?"b"+r.toUpperCase():"w"+r.toUpperCase()}const b5=(r,e=!0,t,i)=>{const[a,l]=W.useState([]),[c,h]=W.useState([]),[p,g]=W.useState();W.useEffect(()=>{Array.isArray(r)&&(y(),l(r==null?void 0:r.filter(E=>E[0]!==E[1])))},[r]),W.useEffect(()=>{t==null||t(c)},[c]);function y(){h([]),g(void 0)}const S=(E,I)=>{e&&g([E,I,i])},T=[...c,...a];return{arrows:T,newArrow:p,clearArrows:y,drawNewArrow:S,setArrows:h,onArrowDrawEnd:(E,I)=>{if(E===I||!e)return;let N;const O=[E,I,i];T.every(([j,G])=>!(j===E&&G===I))?N=[...c,O]:N=c.filter(([j,G])=>!(j===E&&G===I)),g(void 0),h(N)}}},VS=W.createContext({}),Bi=()=>W.useContext(VS),S5=W.forwardRef(({allowDragOutsideBoard:r=!0,animationDuration:e=300,areArrowsAllowed:t=!0,arePiecesDraggable:i=!0,arePremovesAllowed:a=!1,autoPromoteToQueen:l=!1,boardOrientation:c="white",boardWidth:h,children:p,clearPremovesOnRightClick:g=!0,customArrows:y,customArrowColor:S="rgb(255,170,0)",customBoardStyle:T,customNotationStyle:D,customDarkSquareStyle:E={backgroundColor:"#B58863"},customDropSquareStyle:I={boxShadow:"inset 0 0 1px 6px rgba(255,255,255,0.75)"},customLightSquareStyle:N={backgroundColor:"#F0D9B5"},customPieces:O,customPremoveDarkSquareStyle:B={backgroundColor:"#A42323"},customPremoveLightSquareStyle:j={backgroundColor:"#BD2828"},customSquare:G="div",customSquareStyles:q,dropOffBoardAction:X="snapback",id:V=0,isDraggablePiece:M=()=>!0,getPositionObject:P=()=>{},onArrowsChange:K=()=>{},onDragOverSquare:J=()=>{},onMouseOutSquare:ee=()=>{},onMouseOverSquare:Q=()=>{},onPieceClick:ct=()=>{},onPieceDragBegin:nt=()=>{},onPieceDragEnd:ge=()=>{},onPieceDrop:De=()=>!0,onPieceDropOffBoard:Me=()=>{},onPromotionCheck:Xe=(F,H,ve)=>(ve==="wP"&&F[1]==="7"&&H[1]==="8"||ve==="bP"&&F[1]==="2"&&H[1]==="1")&&Math.abs(F.charCodeAt(0)-H.charCodeAt(0))<=1,onPromotionPieceSelect:Z=()=>!0,onSparePieceDrop:de=()=>!0,onSquareClick:we=()=>{},onSquareRightClick:Ie=()=>{},position:ke="start",promotionDialogVariant:Fe="default",promotionToSquare:re=null,showBoardNotation:te=!0,showPromotionDialog:ye=!1,snapToCursor:Ne=!0},Be)=>{const[F,H]=W.useState(pT(ke)),[ve,Oe]=W.useState({removed:{},added:{}}),[dt,L]=W.useState(void 0),[b,R]=W.useState(ye&&!l),[$,oe]=W.useState(null),[be,Ae]=W.useState(re),[qe,rt]=W.useState([]),ze=W.useRef(qe),[He,x]=W.useState(),[_,w]=W.useState(Object.assign(Object.assign({},fT),O)),[z,ie]=W.useState(!1),he=W.useRef(),[_e,$e]=W.useState(!1),[pt,bt]=W.useState(null);W.useImperativeHandle(Be,()=>({clearPremoves(Je=!0){Wn(Je)}})),W.useEffect(()=>{w(Object.assign(Object.assign({},fT),O))},[O]),W.useEffect(()=>{R(ye),Ae(re)},[re,ye]),W.useEffect(()=>{var Je,vt,hn;kr();const Kt=pT(ke),_n=v5(F,Kt),On=((Je=Object.keys(_n.added))===null||Je===void 0?void 0:Je.length)<=2?(hn=(vt=Object.entries(_n.added))===null||vt===void 0?void 0:vt[0])===null||hn===void 0?void 0:hn[1][0]:void 0;if(_e)H(Kt),$e(!1),a&&qn(On),he.current&&clearTimeout(he.current);else if(z)H(Kt),$e(!1),a&&qn(On);else{dT(Kt)&&dt!==void 0?L(On):dT(Kt)?L(void 0):L("b"),Oe(_n),$e(!0);const si=setTimeout(()=>{H(Kt),$e(!1),a&&qn(On)},e);he.current=si}return ie(!1),P(Kt),ii(),()=>{clearTimeout(he.current)}},[ke]);const{arrows:St,newArrow:yt,clearArrows:ii,drawNewArrow:Ls,onArrowDrawEnd:Er}=b5(y,t,K,S);function Tr(Je,vt,hn,Kt){if(Je===vt)return;if(ii(),a&&_e||a&&(dt===hn[0]||ze.current.filter(On=>On.piece[0]===hn[0]).length>0)){const On=[...ze.current];On.push({sourceSq:Je,targetSq:vt,piece:hn}),ze.current=On,rt([...On]),kr();return}if(!a&&_e)return;const _n=Object.assign({},F);ie(!!Kt),L(hn[0]),De.length?De(Je,vt,hn)||(Wn(),ie(!1)):(delete _n[Je],_n[vt]=hn,H(_n)),kr(),P(_n)}function Ps(Je){const vt=Object.assign({},F);delete vt[Je],H(vt),P(vt)}function qn(Je){if(ze.current.length===0)return;const vt=ze.current[0];if(vt.piece[0]!==void 0&&vt.piece[0]!==Je&&De.length)if(L(vt.piece[0]),ie(!0),De(vt.sourceSq,vt.targetSq,vt.piece)){const Kt=[...ze.current];Kt.shift(),ze.current=Kt,rt([...Kt])}else Wn()}function Us(Je,vt){if(!de(Je,vt))return;const Kt=Object.assign({},F);Kt[vt]=Je,H(Kt),P(Kt)}function Wn(Je=!0){Je&&L(void 0),ze.current=[],rt([])}function kr(){oe(null),Ae(null),R(!1)}function Lr(Je){x(Je)}function Oa(Je){if(He){if(He===Je){x(void 0),g&&Wn(!1),Ie(Je);return}}else x(void 0)}function Pt(){x(void 0)}const $t={allowDragOutsideBoard:r,animationDuration:e,arePiecesDraggable:i,arePremovesAllowed:a,arrows:St,autoPromoteToQueen:l,boardOrientation:c,boardWidth:h,chessPieces:_,clearArrows:ii,clearCurrentRightClickDown:Pt,currentPosition:F,currentRightClickDown:He,customArrowColor:S,customBoardStyle:T,customDarkSquareStyle:E,customDropSquareStyle:I,customLightSquareStyle:N,customNotationStyle:D,customPremoveDarkSquareStyle:B,customPremoveLightSquareStyle:j,customSquare:G,customSquareStyles:q,deletePieceFromSquare:Ps,drawNewArrow:Ls,dropOffBoardAction:X,handleSetPosition:Tr,handleSparePieceDrop:Us,id:V,isDraggablePiece:M,isWaitingForAnimation:_e,lastPieceColour:dt,lastSquareDraggedOver:pt,newArrow:yt,onArrowDrawEnd:Er,onDragOverSquare:J,onMouseOutSquare:ee,onMouseOverSquare:Q,onPieceClick:ct,onPieceDragBegin:nt,onPieceDragEnd:ge,onPieceDrop:De,onPieceDropOffBoard:Me,onPromotionCheck:Xe,onPromotionPieceSelect:Z,onRightClickDown:Lr,onRightClickUp:Oa,onSparePieceDrop:de,onSquareClick:we,positionDifferences:ve,premoves:qe,promoteFromSquare:$,promoteToSquare:be,promotionDialogVariant:Fe,setLastSquareDraggedOver:bt,setPromoteFromSquare:oe,setPromoteToSquare:Ae,setShowPromoteDialog:R,showBoardNotation:te,showPromoteDialog:b,snapToCursor:Ne};return se.jsx(VS.Provider,Object.assign({value:$t},{children:p}))});function R5({row:r,col:e}){const{boardOrientation:t,boardWidth:i,customDarkSquareStyle:a,customLightSquareStyle:l,customNotationStyle:c}=Bi(),h=l.backgroundColor,p=a.backgroundColor,g=e===0,y=r===7,S=g&&y;function T(){return t==="white"?8-r:r+1}function D(){return t==="black"?Iu[7-e]:Iu[e]}function E(){return se.jsxs(se.Fragment,{children:[se.jsx("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:h}),mT(i,c))},{children:T()})),se.jsx("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:h}),gT(i,c))},{children:D()}))]})}function I(){return se.jsx("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},{color:e%2!==0?p:h}),gT(i,c))},{children:D()}))}function N(){return se.jsx("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},t==="black"?{color:r%2===0?p:h}:{color:r%2===0?p:h}),mT(i,c))},{children:T()}))}return S?E():y?I():g?N():null}const gT=(r,e)=>Object.assign({alignSelf:"flex-end",paddingLeft:r/8-r/48,fontSize:r/48},e),mT=(r,e)=>Object.assign({alignSelf:"flex-start",paddingRight:r/8-r/48,fontSize:r/48},e),BS=W.createContext({dragDropManager:void 0});function mr(r){return"Minified Redux error #"+r+"; visit https://redux.js.org/Errors?code="+r+" for the full message or use the non-minified dev environment for full errors. "}var yT=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),vT=function(){return Math.random().toString(36).substring(7).split("").join(".")},_T={INIT:"@@redux/INIT"+vT(),REPLACE:"@@redux/REPLACE"+vT()};function A5(r){if(typeof r!="object"||r===null)return!1;for(var e=r;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e}function jS(r,e,t){var i;if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(mr(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(mr(1));return t(jS)(r,e)}if(typeof r!="function")throw new Error(mr(2));var a=r,l=e,c=[],h=c,p=!1;function g(){h===c&&(h=c.slice())}function y(){if(p)throw new Error(mr(3));return l}function S(I){if(typeof I!="function")throw new Error(mr(4));if(p)throw new Error(mr(5));var N=!0;return g(),h.push(I),function(){if(N){if(p)throw new Error(mr(6));N=!1,g();var B=h.indexOf(I);h.splice(B,1),c=null}}}function T(I){if(!A5(I))throw new Error(mr(7));if(typeof I.type>"u")throw new Error(mr(8));if(p)throw new Error(mr(9));try{p=!0,l=a(l,I)}finally{p=!1}for(var N=c=h,O=0;O<N.length;O++){var B=N[O];B()}return I}function D(I){if(typeof I!="function")throw new Error(mr(10));a=I,T({type:_T.REPLACE})}function E(){var I,N=S;return I={subscribe:function(B){if(typeof B!="object"||B===null)throw new Error(mr(11));function j(){B.next&&B.next(y())}j();var G=N(j);return{unsubscribe:G}}},I[yT]=function(){return this},I}return T({type:_T.INIT}),i={dispatch:T,subscribe:S,getState:y,replaceReducer:D},i[yT]=E,i}function it(r,e,...t){if(C5()&&e===void 0)throw new Error("invariant requires an error message argument");if(!r){let i;if(e===void 0)i=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let a=0;i=new Error(e.replace(/%s/g,function(){return t[a++]})),i.name="Invariant Violation"}throw i.framesToPop=1,i}}function C5(){return typeof process<"u"&&!0}function I5(r,e,t){return e.split(".").reduce((i,a)=>i&&i[a]?i[a]:t||null,r)}function D5(r,e){return r.filter(t=>t!==e)}function FS(r){return typeof r=="object"}function O5(r,e){const t=new Map,i=l=>{t.set(l,t.has(l)?t.get(l)+1:1)};r.forEach(i),e.forEach(i);const a=[];return t.forEach((l,c)=>{l===1&&a.push(c)}),a}function x5(r,e){return r.filter(t=>e.indexOf(t)>-1)}const _y="dnd-core/INIT_COORDS",xf="dnd-core/BEGIN_DRAG",Ey="dnd-core/PUBLISH_DRAG_SOURCE",Nf="dnd-core/HOVER",Mf="dnd-core/DROP",kf="dnd-core/END_DRAG";function ET(r,e){return{type:_y,payload:{sourceClientOffset:e||null,clientOffset:r||null}}}const N5={type:_y,payload:{clientOffset:null,sourceClientOffset:null}};function M5(r){return function(t=[],i={publishSource:!0}){const{publishSource:a=!0,clientOffset:l,getSourceClientOffset:c}=i,h=r.getMonitor(),p=r.getRegistry();r.dispatch(ET(l)),k5(t,h,p);const g=U5(t,h);if(g==null){r.dispatch(N5);return}let y=null;if(l){if(!c)throw new Error("getSourceClientOffset must be defined");L5(c),y=c(g)}r.dispatch(ET(l,y));const T=p.getSource(g).beginDrag(h,g);if(T==null)return;P5(T),p.pinSource(g);const D=p.getSourceType(g);return{type:xf,payload:{itemType:D,item:T,sourceId:g,clientOffset:l||null,sourceClientOffset:y||null,isSourcePublic:!!a}}}}function k5(r,e,t){it(!e.isDragging(),"Cannot call beginDrag while dragging."),r.forEach(function(i){it(t.getSource(i),"Expected sourceIds to be registered.")})}function L5(r){it(typeof r=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function P5(r){it(FS(r),"Item must be an object.")}function U5(r,e){let t=null;for(let i=r.length-1;i>=0;i--)if(e.canDragSource(r[i])){t=r[i];break}return t}function V5(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function B5(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),i.forEach(function(a){V5(r,a,t[a])})}return r}function j5(r){return function(t={}){const i=r.getMonitor(),a=r.getRegistry();F5(i),H5(i).forEach((c,h)=>{const p=q5(c,h,a,i),g={type:Mf,payload:{dropResult:B5({},t,p)}};r.dispatch(g)})}}function F5(r){it(r.isDragging(),"Cannot call drop while not dragging."),it(!r.didDrop(),"Cannot call drop twice during one drag operation.")}function q5(r,e,t,i){const a=t.getTarget(r);let l=a?a.drop(i,r):void 0;return z5(l),typeof l>"u"&&(l=e===0?{}:i.getDropResult()),l}function z5(r){it(typeof r>"u"||FS(r),"Drop result must either be an object or undefined.")}function H5(r){const e=r.getTargetIds().filter(r.canDropOnTarget,r);return e.reverse(),e}function G5(r){return function(){const t=r.getMonitor(),i=r.getRegistry();$5(t);const a=t.getSourceId();return a!=null&&(i.getSource(a,!0).endDrag(t,a),i.unpinSource()),{type:kf}}}function $5(r){it(r.isDragging(),"Cannot call endDrag while not dragging.")}function cm(r,e){return e===null?r===null:Array.isArray(r)?r.some(t=>t===e):r===e}function K5(r){return function(t,{clientOffset:i}={}){Q5(t);const a=t.slice(0),l=r.getMonitor(),c=r.getRegistry(),h=l.getItemType();return W5(a,c,h),Y5(a,l,c),X5(a,l,c),{type:Nf,payload:{targetIds:a,clientOffset:i||null}}}}function Q5(r){it(Array.isArray(r),"Expected targetIds to be an array.")}function Y5(r,e,t){it(e.isDragging(),"Cannot call hover while not dragging."),it(!e.didDrop(),"Cannot call hover after drop.");for(let i=0;i<r.length;i++){const a=r[i];it(r.lastIndexOf(a)===i,"Expected targetIds to be unique in the passed array.");const l=t.getTarget(a);it(l,"Expected targetIds to be registered.")}}function W5(r,e,t){for(let i=r.length-1;i>=0;i--){const a=r[i],l=e.getTargetType(a);cm(l,t)||r.splice(i,1)}}function X5(r,e,t){r.forEach(function(i){t.getTarget(i).hover(e,i)})}function Z5(r){return function(){if(r.getMonitor().isDragging())return{type:Ey}}}function J5(r){return{beginDrag:M5(r),publishDragSource:Z5(r),hover:K5(r),drop:j5(r),endDrag:G5(r)}}class e6{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:t}=this.store;function i(l){return(...c)=>{const h=l.apply(e,c);typeof h<"u"&&t(h)}}const a=J5(this);return Object.keys(a).reduce((l,c)=>{const h=a[c];return l[c]=i(h),l},{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{const i=this.store.getState().refCount>0;this.backend&&(i&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!i&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}}function t6(r,e){return{x:r.x+e.x,y:r.y+e.y}}function qS(r,e){return{x:r.x-e.x,y:r.y-e.y}}function n6(r){const{clientOffset:e,initialClientOffset:t,initialSourceClientOffset:i}=r;return!e||!t||!i?null:qS(t6(e,i),t)}function r6(r){const{clientOffset:e,initialClientOffset:t}=r;return!e||!t?null:qS(e,t)}const du=[],Ty=[];du.__IS_NONE__=!0;Ty.__IS_ALL__=!0;function i6(r,e){return r===du?!1:r===Ty||typeof e>"u"?!0:x5(e,r).length>0}class s6{subscribeToStateChange(e,t={}){const{handlerIds:i}=t;it(typeof e=="function","listener must be a function."),it(typeof i>"u"||Array.isArray(i),"handlerIds, when specified, must be an array of strings.");let a=this.store.getState().stateId;const l=()=>{const c=this.store.getState(),h=c.stateId;try{h===a||h===a+1&&!i6(c.dirtyHandlerIds,i)||e()}finally{a=h}};return this.store.subscribe(l)}subscribeToOffsetChange(e){it(typeof e=="function","listener must be a function.");let t=this.store.getState().dragOffset;const i=()=>{const a=this.store.getState().dragOffset;a!==t&&(t=a,e())};return this.store.subscribe(i)}canDragSource(e){if(!e)return!1;const t=this.registry.getSource(e);return it(t,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const t=this.registry.getTarget(e);if(it(t,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const i=this.registry.getTargetType(e),a=this.getItemType();return cm(i,a)&&t.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const t=this.registry.getSource(e,!0);if(it(t,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const i=this.registry.getSourceType(e),a=this.getItemType();return i!==a?!1:t.isDragging(this,e)}isOverTarget(e,t={shallow:!1}){if(!e)return!1;const{shallow:i}=t;if(!this.isDragging())return!1;const a=this.registry.getTargetType(e),l=this.getItemType();if(l&&!cm(a,l))return!1;const c=this.getTargetIds();if(!c.length)return!1;const h=c.indexOf(e);return i?h===c.length-1:h>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return n6(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return r6(this.store.getState().dragOffset)}constructor(e,t){this.store=e,this.registry=t}}const TT=typeof globalThis<"u"?globalThis:self,zS=TT.MutationObserver||TT.WebKitMutationObserver;function HS(r){return function(){const t=setTimeout(a,0),i=setInterval(a,50);function a(){clearTimeout(t),clearInterval(i),r()}}}function a6(r){let e=1;const t=new zS(r),i=document.createTextNode("");return t.observe(i,{characterData:!0}),function(){e=-e,i.data=e}}const o6=typeof zS=="function"?a6:HS;class l6{enqueueTask(e){const{queue:t,requestFlush:i}=this;t.length||(i(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let i=0,a=e.length-this.index;i<a;i++)e[i]=e[i+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=o6(this.flush),this.requestErrorThrow=HS(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class u6{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}class c6{create(e){const t=this.freeTasks,i=t.length?t.pop():new u6(this.onError,a=>t[t.length]=a);return i.task=e,i}constructor(e){this.onError=e,this.freeTasks=[]}}const GS=new l6,h6=new c6(GS.registerPendingError);function f6(r){GS.enqueueTask(h6.create(r))}const wy="dnd-core/ADD_SOURCE",by="dnd-core/ADD_TARGET",Sy="dnd-core/REMOVE_SOURCE",Lf="dnd-core/REMOVE_TARGET";function d6(r){return{type:wy,payload:{sourceId:r}}}function p6(r){return{type:by,payload:{targetId:r}}}function g6(r){return{type:Sy,payload:{sourceId:r}}}function m6(r){return{type:Lf,payload:{targetId:r}}}function y6(r){it(typeof r.canDrag=="function","Expected canDrag to be a function."),it(typeof r.beginDrag=="function","Expected beginDrag to be a function."),it(typeof r.endDrag=="function","Expected endDrag to be a function.")}function v6(r){it(typeof r.canDrop=="function","Expected canDrop to be a function."),it(typeof r.hover=="function","Expected hover to be a function."),it(typeof r.drop=="function","Expected beginDrag to be a function.")}function hm(r,e){if(e&&Array.isArray(r)){r.forEach(t=>hm(t,!1));return}it(typeof r=="string"||typeof r=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var vr;(function(r){r.SOURCE="SOURCE",r.TARGET="TARGET"})(vr||(vr={}));let _6=0;function E6(){return _6++}function T6(r){const e=E6().toString();switch(r){case vr.SOURCE:return`S${e}`;case vr.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${r}`)}}function wT(r){switch(r[0]){case"S":return vr.SOURCE;case"T":return vr.TARGET;default:throw new Error(`Cannot parse handler ID: ${r}`)}}function bT(r,e){const t=r.entries();let i=!1;do{const{done:a,value:[,l]}=t.next();if(l===e)return!0;i=!!a}while(!i);return!1}class w6{addSource(e,t){hm(e),y6(t);const i=this.addHandler(vr.SOURCE,e,t);return this.store.dispatch(d6(i)),i}addTarget(e,t){hm(e,!0),v6(t);const i=this.addHandler(vr.TARGET,e,t);return this.store.dispatch(p6(i)),i}containsHandler(e){return bT(this.dragSources,e)||bT(this.dropTargets,e)}getSource(e,t=!1){return it(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return it(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return it(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return it(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return wT(e)===vr.SOURCE}isTargetId(e){return wT(e)===vr.TARGET}removeSource(e){it(this.getSource(e),"Expected an existing source."),this.store.dispatch(g6(e)),f6(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){it(this.getTarget(e),"Expected an existing target."),this.store.dispatch(m6(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const t=this.getSource(e);it(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){it(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,i){const a=T6(e);return this.types.set(a,t),e===vr.SOURCE?this.dragSources.set(a,i):e===vr.TARGET&&this.dropTargets.set(a,i),a}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const b6=(r,e)=>r===e;function S6(r,e){return!r&&!e?!0:!r||!e?!1:r.x===e.x&&r.y===e.y}function R6(r,e,t=b6){if(r.length!==e.length)return!1;for(let i=0;i<r.length;++i)if(!t(r[i],e[i]))return!1;return!0}function A6(r=du,e){switch(e.type){case Nf:break;case wy:case by:case Lf:case Sy:return du;case xf:case Ey:case kf:case Mf:default:return Ty}const{targetIds:t=[],prevTargetIds:i=[]}=e.payload,a=O5(t,i);if(!(a.length>0||!R6(t,i)))return du;const c=i[i.length-1],h=t[t.length-1];return c!==h&&(c&&a.push(c),h&&a.push(h)),a}function C6(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function I6(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),i.forEach(function(a){C6(r,a,t[a])})}return r}const ST={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function D6(r=ST,e){const{payload:t}=e;switch(e.type){case _y:case xf:return{initialSourceClientOffset:t.sourceClientOffset,initialClientOffset:t.clientOffset,clientOffset:t.clientOffset};case Nf:return S6(r.clientOffset,t.clientOffset)?r:I6({},r,{clientOffset:t.clientOffset});case kf:case Mf:return ST;default:return r}}function O6(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Eo(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),i.forEach(function(a){O6(r,a,t[a])})}return r}const x6={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function N6(r=x6,e){const{payload:t}=e;switch(e.type){case xf:return Eo({},r,{itemType:t.itemType,item:t.item,sourceId:t.sourceId,isSourcePublic:t.isSourcePublic,dropResult:null,didDrop:!1});case Ey:return Eo({},r,{isSourcePublic:!0});case Nf:return Eo({},r,{targetIds:t.targetIds});case Lf:return r.targetIds.indexOf(t.targetId)===-1?r:Eo({},r,{targetIds:D5(r.targetIds,t.targetId)});case Mf:return Eo({},r,{dropResult:t.dropResult,didDrop:!0,targetIds:[]});case kf:return Eo({},r,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return r}}function M6(r=0,e){switch(e.type){case wy:case by:return r+1;case Sy:case Lf:return r-1;default:return r}}function k6(r=0){return r+1}function L6(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function P6(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),i.forEach(function(a){L6(r,a,t[a])})}return r}function U6(r={},e){return{dirtyHandlerIds:A6(r.dirtyHandlerIds,{type:e.type,payload:P6({},e.payload,{prevTargetIds:I5(r,"dragOperation.targetIds",[])})}),dragOffset:D6(r.dragOffset,e),refCount:M6(r.refCount,e),dragOperation:N6(r.dragOperation,e),stateId:k6(r.stateId)}}function V6(r,e=void 0,t={},i=!1){const a=B6(i),l=new s6(a,new w6(a)),c=new e6(a,l),h=r(c,e,t);return c.receiveBackend(h),c}function B6(r){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return jS(U6,r&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function j6(r,e){if(r==null)return{};var t=F6(r,e),i,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);for(a=0;a<l.length;a++)i=l[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(t[i]=r[i])}return t}function F6(r,e){if(r==null)return{};var t={},i=Object.keys(r),a,l;for(l=0;l<i.length;l++)a=i[l],!(e.indexOf(a)>=0)&&(t[a]=r[a]);return t}let RT=0;const jh=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var q6=W.memo(function(e){var{children:t}=e,i=j6(e,["children"]);const[a,l]=z6(i);return W.useEffect(()=>{if(l){const c=$S();return++RT,()=>{--RT===0&&(c[jh]=null)}}},[]),se.jsx(BS.Provider,{value:a,children:t})});function z6(r){if("manager"in r)return[{dragDropManager:r.manager},!1];const e=H6(r.backend,r.context,r.options,r.debugMode),t=!r.context;return[e,t]}function H6(r,e=$S(),t,i){const a=e;return a[jh]||(a[jh]={dragDropManager:V6(r,e,t,i)}),a[jh]}function $S(){return typeof globalThis<"u"?globalThis:window}var G6=function r(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var i,a,l;if(Array.isArray(e)){if(i=e.length,i!=t.length)return!1;for(a=i;a--!==0;)if(!r(e[a],t[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(l=Object.keys(e),i=l.length,i!==Object.keys(t).length)return!1;for(a=i;a--!==0;)if(!Object.prototype.hasOwnProperty.call(t,l[a]))return!1;for(a=i;a--!==0;){var c=l[a];if(!r(e[c],t[c]))return!1}return!0}return e!==e&&t!==t};const ba=typeof window<"u"?W.useLayoutEffect:W.useEffect;function KS(r,e,t){const[i,a]=W.useState(()=>e(r)),l=W.useCallback(()=>{const c=e(r);G6(i,c)||(a(c),t&&t())},[i,r,t]);return ba(l),[i,l]}function $6(r,e,t){const[i,a]=KS(r,e,t);return ba(function(){const c=r.getHandlerId();if(c!=null)return r.subscribeToStateChange(a,{handlerIds:[c]})},[r,a]),i}function QS(r,e,t){return $6(e,r||(()=>({})),()=>t.reconnect())}function YS(r,e){const t=[...e||[]];return e==null&&typeof r!="function"&&t.push(r),W.useMemo(()=>typeof r=="function"?r():r,t)}function K6(r){return W.useMemo(()=>r.hooks.dragSource(),[r])}function Q6(r){return W.useMemo(()=>r.hooks.dragPreview(),[r])}let Cg=!1,Ig=!1;class Y6{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){it(!Cg,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Cg=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Cg=!1}}isDragging(){if(!this.sourceId)return!1;it(!Ig,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Ig=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Ig=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let Dg=!1;class W6{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;it(!Dg,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Dg=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Dg=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function X6(r,e,t){const i=t.getRegistry(),a=i.addTarget(r,e);return[a,()=>i.removeTarget(a)]}function Z6(r,e,t){const i=t.getRegistry(),a=i.addSource(r,e);return[a,()=>i.removeSource(a)]}function fm(r,e,t,i){let a;if(a!==void 0)return!!a;if(r===e)return!0;if(typeof r!="object"||!r||typeof e!="object"||!e)return!1;const l=Object.keys(r),c=Object.keys(e);if(l.length!==c.length)return!1;const h=Object.prototype.hasOwnProperty.bind(e);for(let p=0;p<l.length;p++){const g=l[p];if(!h(g))return!1;const y=r[g],S=e[g];if(a=void 0,a===!1||a===void 0&&y!==S)return!1}return!0}function dm(r){return r!==null&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function J6(r){if(typeof r.type=="string")return;const e=r.type.displayName||r.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function ek(r){return(e=null,t=null)=>{if(!W.isValidElement(e)){const l=e;return r(l,t),l}const i=e;return J6(i),tk(i,t?l=>r(l,t):r)}}function WS(r){const e={};return Object.keys(r).forEach(t=>{const i=r[t];if(t.endsWith("Ref"))e[t]=r[t];else{const a=ek(i);e[t]=()=>a}}),e}function AT(r,e){typeof r=="function"?r(e):r.current=e}function tk(r,e){const t=r.ref;return it(typeof t!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),t?W.cloneElement(r,{ref:i=>{AT(t,i),AT(e,i)}}):W.cloneElement(r,{ref:e})}class nk{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId?e?(t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),t):(this.lastConnectedDragSource=e,t):t}reconnectDragPreview(e=!1){const t=this.dragPreview,i=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(i&&this.disconnectDragPreview(),!!this.handlerId){if(!t){this.lastConnectedDragPreview=t;return}i&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!fm(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!fm(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=WS({dragSource:(t,i)=>{this.clearDragSource(),this.dragSourceOptions=i||null,dm(t)?this.dragSourceRef=t:this.dragSourceNode=t,this.reconnectDragSource()},dragPreview:(t,i)=>{this.clearDragPreview(),this.dragPreviewOptions=i||null,dm(t)?this.dragPreviewRef=t:this.dragPreviewNode=t,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class rk{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const t=this.dropTarget;if(this.handlerId){if(!t){this.lastConnectedDropTarget=t;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!fm(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=WS({dropTarget:(t,i)=>{this.clearDropTarget(),this.dropTargetOptions=i,dm(t)?this.dropTargetRef=t:this.dropTargetNode=t,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function Da(){const{dragDropManager:r}=W.useContext(BS);return it(r!=null,"Expected drag drop context"),r}function ik(r,e){const t=Da(),i=W.useMemo(()=>new nk(t.getBackend()),[t]);return ba(()=>(i.dragSourceOptions=r||null,i.reconnect(),()=>i.disconnectDragSource()),[i,r]),ba(()=>(i.dragPreviewOptions=e||null,i.reconnect(),()=>i.disconnectDragPreview()),[i,e]),i}function sk(){const r=Da();return W.useMemo(()=>new Y6(r),[r])}class ak{beginDrag(){const e=this.spec,t=this.monitor;let i=null;return typeof e.item=="object"?i=e.item:typeof e.item=="function"?i=e.item(t):i={},i??null}canDrag(){const e=this.spec,t=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(t):!0}isDragging(e,t){const i=this.spec,a=this.monitor,{isDragging:l}=i;return l?l(a):t===e.getSourceId()}endDrag(){const e=this.spec,t=this.monitor,i=this.connector,{end:a}=e;a&&a(t.getItem(),t),i.reconnect()}constructor(e,t,i){this.spec=e,this.monitor=t,this.connector=i}}function ok(r,e,t){const i=W.useMemo(()=>new ak(r,e,t),[e,t]);return W.useEffect(()=>{i.spec=r},[r]),i}function lk(r){return W.useMemo(()=>{const e=r.type;return it(e!=null,"spec.type must be defined"),e},[r])}function uk(r,e,t){const i=Da(),a=ok(r,e,t),l=lk(r);ba(function(){if(l!=null){const[h,p]=Z6(l,a,i);return e.receiveHandlerId(h),t.receiveHandlerId(h),p}},[i,e,t,a,l])}function ck(r,e){const t=YS(r,e);it(!t.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const i=sk(),a=ik(t.options,t.previewOptions);return uk(t,i,a),[QS(t.collect,i,a),K6(a),Q6(a)]}function hk(r){const t=Da().getMonitor(),[i,a]=KS(t,r);return W.useEffect(()=>t.subscribeToOffsetChange(a)),W.useEffect(()=>t.subscribeToStateChange(a)),i}function fk(r){return W.useMemo(()=>r.hooks.dropTarget(),[r])}function dk(r){const e=Da(),t=W.useMemo(()=>new rk(e.getBackend()),[e]);return ba(()=>(t.dropTargetOptions=r||null,t.reconnect(),()=>t.disconnectDropTarget()),[r]),t}function pk(){const r=Da();return W.useMemo(()=>new W6(r),[r])}function gk(r){const{accept:e}=r;return W.useMemo(()=>(it(r.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class mk{canDrop(){const e=this.spec,t=this.monitor;return e.canDrop?e.canDrop(t.getItem(),t):!0}hover(){const e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){const e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function yk(r,e){const t=W.useMemo(()=>new mk(r,e),[e]);return W.useEffect(()=>{t.spec=r},[r]),t}function vk(r,e,t){const i=Da(),a=yk(r,e),l=gk(r);ba(function(){const[h,p]=X6(l,a,i);return e.receiveHandlerId(h),t.receiveHandlerId(h),p},[i,e,a,t,l.map(c=>c.toString()).join("|")])}function _k(r,e){const t=YS(r,e),i=pk(),a=dk(t.options);return vk(t,i,a),[QS(t.collect,i,a),fk(a)]}function XS(r){let e=null;return()=>(e==null&&(e=r()),e)}function Ek(r,e){return r.filter(t=>t!==e)}function Tk(r,e){const t=new Set,i=l=>t.add(l);r.forEach(i),e.forEach(i);const a=[];return t.forEach(l=>a.push(l)),a}class wk{enter(e){const t=this.entered.length,i=a=>this.isNodeInDocument(a)&&(!a.contains||a.contains(e));return this.entered=Tk(this.entered.filter(i),[e]),t===0&&this.entered.length>0}leave(e){const t=this.entered.length;return this.entered=Ek(this.entered.filter(this.isNodeInDocument),e),t>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class bk{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const t={};Object.keys(this.config.exposeProperties).forEach(i=>{const a=this.config.exposeProperties[i];a!=null&&(t[i]={value:a(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,t)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,t){return t===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const ZS="__NATIVE_FILE__",JS="__NATIVE_URL__",eR="__NATIVE_TEXT__",tR="__NATIVE_HTML__";var CT=Object.freeze({__proto__:null,FILE:ZS,HTML:tR,TEXT:eR,URL:JS});function Og(r,e,t){const i=e.reduce((a,l)=>a||r.getData(l),"");return i??t}const pm={[ZS]:{exposeProperties:{files:r=>Array.prototype.slice.call(r.files),items:r=>r.items,dataTransfer:r=>r},matchesTypes:["Files"]},[tR]:{exposeProperties:{html:(r,e)=>Og(r,e,""),dataTransfer:r=>r},matchesTypes:["Html","text/html"]},[JS]:{exposeProperties:{urls:(r,e)=>Og(r,e,"").split(`
`),dataTransfer:r=>r},matchesTypes:["Url","text/uri-list"]},[eR]:{exposeProperties:{text:(r,e)=>Og(r,e,""),dataTransfer:r=>r},matchesTypes:["Text","text/plain"]}};function Sk(r,e){const t=pm[r];if(!t)throw new Error(`native type ${r} has no configuration`);const i=new bk(t);return i.loadDataTransfer(e),i}function xg(r){if(!r)return null;const e=Array.prototype.slice.call(r.types||[]);return Object.keys(pm).filter(t=>{const i=pm[t];return i!=null&&i.matchesTypes?i.matchesTypes.some(a=>e.indexOf(a)>-1):!1})[0]||null}const Rk=XS(()=>/firefox/i.test(navigator.userAgent)),nR=XS(()=>!!window.safari);class IT{interpolate(e){const{xs:t,ys:i,c1s:a,c2s:l,c3s:c}=this;let h=t.length-1;if(e===t[h])return i[h];let p=0,g=c.length-1,y;for(;p<=g;){y=Math.floor(.5*(p+g));const D=t[y];if(D<e)p=y+1;else if(D>e)g=y-1;else return i[y]}h=Math.max(0,g);const S=e-t[h],T=S*S;return i[h]+a[h]*S+l[h]*T+c[h]*S*T}constructor(e,t){const{length:i}=e,a=[];for(let D=0;D<i;D++)a.push(D);a.sort((D,E)=>e[D]<e[E]?-1:1);const l=[],c=[];let h,p;for(let D=0;D<i-1;D++)h=e[D+1]-e[D],p=t[D+1]-t[D],l.push(h),c.push(p/h);const g=[c[0]];for(let D=0;D<l.length-1;D++){const E=c[D],I=c[D+1];if(E*I<=0)g.push(0);else{h=l[D];const N=l[D+1],O=h+N;g.push(3*O/((O+N)/E+(O+h)/I))}}g.push(c[c.length-1]);const y=[],S=[];let T;for(let D=0;D<g.length-1;D++){T=c[D];const E=g[D],I=1/l[D],N=E+g[D+1]-T-T;y.push((T-E-N)*I),S.push(N*I*I)}this.xs=e,this.ys=t,this.c1s=g,this.c2s=y,this.c3s=S}}const Ak=1;function rR(r){const e=r.nodeType===Ak?r:r.parentElement;if(!e)return null;const{top:t,left:i}=e.getBoundingClientRect();return{x:i,y:t}}function bh(r){return{x:r.clientX,y:r.clientY}}function Ck(r){var e;return r.nodeName==="IMG"&&(Rk()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(r)))}function Ik(r,e,t,i){let a=r?e.width:t,l=r?e.height:i;return nR()&&r&&(l/=window.devicePixelRatio,a/=window.devicePixelRatio),{dragPreviewWidth:a,dragPreviewHeight:l}}function Dk(r,e,t,i,a){const l=Ck(e),h=rR(l?r:e),p={x:t.x-h.x,y:t.y-h.y},{offsetWidth:g,offsetHeight:y}=r,{anchorX:S,anchorY:T}=i,{dragPreviewWidth:D,dragPreviewHeight:E}=Ik(l,e,g,y),I=()=>{let X=new IT([0,.5,1],[p.y,p.y/y*E,p.y+E-y]).interpolate(T);return nR()&&l&&(X+=(window.devicePixelRatio-1)*E),X},N=()=>new IT([0,.5,1],[p.x,p.x/g*D,p.x+D-g]).interpolate(S),{offsetX:O,offsetY:B}=a,j=O===0||O,G=B===0||B;return{x:j?O:N(),y:G?B:I()}}let Ok=class{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,t){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=t}};function xk(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function DT(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),i.forEach(function(a){xk(r,a,t[a])})}return r}class Nk{profile(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((t=this.dragOverTargetIds)===null||t===void 0?void 0:t.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var t;(t=this.window)===null||t===void 0||t.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,t,i){return this.sourcePreviewNodeOptions.set(e,i),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,t,i){this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,i);const a=c=>this.handleDragStart(c,e),l=c=>this.handleSelectStart(c);return t.setAttribute("draggable","true"),t.addEventListener("dragstart",a),t.addEventListener("selectstart",l),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",a),t.removeEventListener("selectstart",l),t.setAttribute("draggable","false")}}connectDropTarget(e,t){const i=c=>this.handleDragEnter(c,e),a=c=>this.handleDragOver(c,e),l=c=>this.handleDrop(c,e);return t.addEventListener("dragenter",i),t.addEventListener("dragover",a),t.addEventListener("drop",l),()=>{t.removeEventListener("dragenter",i),t.removeEventListener("dragover",a),t.removeEventListener("drop",l)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return DT({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourcePreviewNodeOptions.get(e);return DT({anchorX:.5,anchorY:.5,captureDraggingState:!1},t||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(CT).some(t=>CT[t]===e)}beginDragNativeItem(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=Sk(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const t=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var i;return(i=this.rootElement)===null||i===void 0?void 0:i.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},t)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}handleDragEnter(e,t){this.dragEnterTargetIds.unshift(t)}handleDragOver(e,t){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}handleDrop(e,t){this.dropTargetIds.unshift(t)}constructor(e,t,i){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=a=>{const l=this.sourceNodes.get(a);return l&&rR(l)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=a=>!!(a&&this.document&&this.document.body&&this.document.body.contains(a)),this.endDragIfSourceWasRemovedFromDOM=()=>{const a=this.currentDragSourceNode;a==null||this.isNodeInDocument(a)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=a=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(a||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=a=>{if(a.defaultPrevented)return;const{dragStartSourceIds:l}=this;this.dragStartSourceIds=null;const c=bh(a);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(l||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:c});const{dataTransfer:h}=a,p=xg(h);if(this.monitor.isDragging()){if(h&&typeof h.setDragImage=="function"){const y=this.monitor.getSourceId(),S=this.sourceNodes.get(y),T=this.sourcePreviewNodes.get(y)||S;if(T){const{anchorX:D,anchorY:E,offsetX:I,offsetY:N}=this.getCurrentSourcePreviewNodeOptions(),j=Dk(S,T,c,{anchorX:D,anchorY:E},{offsetX:I,offsetY:N});h.setDragImage(T,j.x,j.y)}}try{h==null||h.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(a.target);const{captureDraggingState:g}=this.getCurrentSourcePreviewNodeOptions();g?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(p)this.beginDragNativeItem(p);else{if(h&&!h.types&&(a.target&&!a.target.hasAttribute||!a.target.hasAttribute("draggable")))return;a.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=a=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var l;(l=this.currentNativeSource)===null||l===void 0||l.loadDataTransfer(a.dataTransfer)}if(!this.enterLeaveCounter.enter(a.target)||this.monitor.isDragging())return;const{dataTransfer:h}=a,p=xg(h);p&&this.beginDragNativeItem(p,h)},this.handleTopDragEnter=a=>{const{dragEnterTargetIds:l}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=a.altKey,l.length>0&&this.actions.hover(l,{clientOffset:bh(a)}),l.some(h=>this.monitor.canDropOnTarget(h))&&(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=a=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var l;(l=this.currentNativeSource)===null||l===void 0||l.loadDataTransfer(a.dataTransfer)}},this.handleTopDragOver=a=>{const{dragOverTargetIds:l}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none");return}this.altKeyPressed=a.altKey,this.lastClientOffset=bh(a),this.scheduleHover(l),(l||[]).some(h=>this.monitor.canDropOnTarget(h))?(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?a.preventDefault():(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=a=>{this.isDraggingNativeItem()&&a.preventDefault(),this.enterLeaveCounter.leave(a.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=a=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var l;a.preventDefault(),(l=this.currentNativeSource)===null||l===void 0||l.loadDataTransfer(a.dataTransfer)}else xg(a.dataTransfer)&&a.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=a=>{const{dropTargetIds:l}=this;this.dropTargetIds=[],this.actions.hover(l,{clientOffset:bh(a)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=a=>{const l=a.target;typeof l.dragDrop=="function"&&(l.tagName==="INPUT"||l.tagName==="SELECT"||l.tagName==="TEXTAREA"||l.isContentEditable||(a.preventDefault(),l.dragDrop()))},this.options=new Ok(t,i),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new wk(this.isNodeInDocument)}}let Sh;function Mk(){return Sh||(Sh=new Image,Sh.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),Sh}const kk=function(e,t,i){return new Nk(e,t,i)};function OT({isPremovedPiece:r=!1,piece:e,square:t,squares:i}){const{animationDuration:a,arePiecesDraggable:l,boardWidth:c,boardOrientation:h,chessPieces:p,currentPosition:g,deletePieceFromSquare:y,dropOffBoardAction:S,id:T,isDraggablePiece:D,isWaitingForAnimation:E,onPieceClick:I,onPieceDragBegin:N,onPieceDragEnd:O,onPieceDropOffBoard:B,onPromotionCheck:j,positionDifferences:G}=Bi(),[q,X]=W.useState({opacity:1,zIndex:5,touchAction:"none",cursor:l&&D({piece:e,sourceSquare:t})?"-webkit-grab":"default"}),[{canDrag:V,isDragging:M},P,K]=ck(()=>({type:"piece",item:()=>(N(e,t),{piece:e,square:t,id:T}),end:(ee,Q)=>{O(e,t),!Q.didDrop()&&(S==="trash"&&y(t),B==null||B(t,e))},collect:ee=>({canDrag:D({piece:e,sourceSquare:t}),isDragging:!!ee.isDragging()})}),[e,t,g,T]);K(Mk(),{captureDraggingState:!0}),W.useEffect(()=>{X(ee=>Object.assign(Object.assign({},ee),{opacity:M?0:1}))},[M]),W.useEffect(()=>{var ee;const Q=(ee=G.removed)===null||ee===void 0?void 0:ee[t];if(!G.added||!Q)return;const ct=Object.entries(G.added).find(([nt,ge])=>ge===Q||j(t,nt,Q));if(E&&Q&&ct&&!r){const nt=t,ge=ct[0];if(nt&&ge){const De=c/8;X(Me=>Object.assign(Object.assign({},Me),{transform:`translate(${(h==="black"?-1:1)*(ge.charCodeAt(0)-nt.charCodeAt(0))*De}px, ${(h==="black"?-1:1)*(Number(nt[1])-Number(ge[1]))*De}px)`,transition:`transform ${a}ms`,zIndex:6}))}}},[G]),W.useEffect(()=>{const{sourceSq:ee}=J();ee&&X(Q=>Object.assign(Object.assign({},Q),{transform:"translate(0px, 0px)",transition:"transform 0ms"}))},[g]),W.useEffect(()=>{X(ee=>Object.assign(Object.assign({},ee),{cursor:l&&D({piece:e,sourceSquare:t})?"-webkit-grab":"default"}))},[t,g,l]);function J(){return{sourceSq:i[t]}}return se.jsx("div",Object.assign({ref:l&&V?P:null,onClick:()=>I(e,t),"data-piece":e,style:q},{children:typeof p[e]=="function"?p[e]({squareWidth:c/8,isDragging:M,square:t}):se.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:c/8,height:c/8,style:{display:"block"}},{children:se.jsx("g",{children:p[e]})}))}))}function Lk({square:r,squareColor:e,setSquares:t,squareHasPremove:i,children:a}){const l=W.useRef(null),{autoPromoteToQueen:c,boardWidth:h,boardOrientation:p,clearArrows:g,currentPosition:y,currentRightClickDown:S,customBoardStyle:T,customDarkSquareStyle:D,customDropSquareStyle:E,customLightSquareStyle:I,customPremoveDarkSquareStyle:N,customPremoveLightSquareStyle:O,customSquare:B,customSquareStyles:j,drawNewArrow:G,handleSetPosition:q,handleSparePieceDrop:X,isWaitingForAnimation:V,lastPieceColour:M,lastSquareDraggedOver:P,onArrowDrawEnd:K,onDragOverSquare:J,onMouseOutSquare:ee,onMouseOverSquare:Q,onPieceDrop:ct,onPromotionCheck:nt,onRightClickDown:ge,onRightClickUp:De,onSquareClick:Me,setLastSquareDraggedOver:Xe,setPromoteFromSquare:Z,setPromoteToSquare:de,setShowPromoteDialog:we}=Bi(),[{isOver:Ie},ke]=_k(()=>({accept:"piece",drop:Fe,collect:te=>({isOver:!!te.isOver()})}),[r,y,ct,V,M]);function Fe(te){if(te.isSpare){X(te.piece,r);return}nt(te.square,r,te.piece)?c?q(te.square,r,te.piece[0]==="w"?"wQ":"bQ"):(Z(te.square),de(r),we(!0)):q(te.square,r,te.piece,!0)}W.useEffect(()=>{if(l.current){const{x:te,y:ye}=l.current.getBoundingClientRect();t(Ne=>Object.assign(Object.assign({},Ne),{[r]:{x:te,y:ye}}))}},[h,p]);const re=Object.assign(Object.assign(Object.assign(Object.assign({},Pk(r,p,T)),e==="black"?D:I),i&&(e==="black"?N:O)),Ie&&E);return se.jsx("div",Object.assign({ref:ke,style:re,"data-square-color":e,"data-square":r,onTouchMove:te=>{var ye;const Ne=te.touches[0],Be=document.elementsFromPoint(Ne.clientX,Ne.clientY),F=(ye=Be==null?void 0:Be.find(H=>H.getAttribute("data-square")))===null||ye===void 0?void 0:ye.getAttribute("data-square");F&&F!==P&&(Xe(F),J(F))},onMouseOver:te=>{te.buttons===2&&S&&G(S,r),!(te.relatedTarget&&te.currentTarget.contains(te.relatedTarget))&&Q(r)},onMouseOut:te=>{te.relatedTarget&&te.currentTarget.contains(te.relatedTarget)||ee(r)},onMouseDown:te=>{te.button===2&&ge(r)},onMouseUp:te=>{te.button===2&&(S&&K(S,r),De(r))},onDragEnter:()=>J(r),onClick:()=>{const te=y[r];Me(r,te),g()},onContextMenu:te=>{te.preventDefault()}},{children:typeof B=="string"?se.jsx(B,Object.assign({ref:l,style:Object.assign(Object.assign(Object.assign({},NT(h)),xT),!i&&(j==null?void 0:j[r]))},{children:a})):se.jsx(B,Object.assign({ref:l,square:r,squareColor:e,style:Object.assign(Object.assign(Object.assign({},NT(h)),xT),!i&&(j==null?void 0:j[r]))},{children:a}))}))}const xT={display:"flex",justifyContent:"center"},NT=r=>({width:r/8,height:r/8}),Pk=(r,e,t)=>t!=null&&t.borderRadius?r==="a1"?e==="white"?{borderBottomLeftRadius:t.borderRadius}:{borderTopRightRadius:t.borderRadius}:r==="a8"?e==="white"?{borderTopLeftRadius:t.borderRadius}:{borderBottomRightRadius:t.borderRadius}:r==="h1"?e==="white"?{borderBottomRightRadius:t.borderRadius}:{borderTopLeftRadius:t.borderRadius}:r==="h8"?e==="white"?{borderTopRightRadius:t.borderRadius}:{borderBottomLeftRadius:t.borderRadius}:{}:{};function Uk(){const[r,e]=W.useState({}),{arePremovesAllowed:t,boardOrientation:i,boardWidth:a,currentPosition:l,id:c,premoves:h,showBoardNotation:p}=Bi(),g=W.useMemo(()=>{const y=[];return t?(h.forEach((S,T)=>{const{sourceSq:D,targetSq:E,piece:I}=S,N=y.find(O=>{var B;return O.piece===I&&((B=O.premovesRoute.at(-1))===null||B===void 0?void 0:B.targetSq)===D});N?N.premovesRoute.push({sourceSq:D,targetSq:E,index:T}):y.push({piece:I,premovesRoute:[{sourceSq:D,targetSq:E,index:T}]})}),y):[]},[h]);return se.jsx("div",Object.assign({"data-boardid":c},{children:[...Array(8)].map((y,S)=>se.jsx("div",Object.assign({style:{display:"flex",flexWrap:"nowrap",width:a}},{children:[...Array(8)].map((T,D)=>{const E=i==="black"?Iu[7-D]+(S+1):Iu[D]+(8-S),I=D%2===S%2?"white":"black",N=h.find(B=>B.sourceSq===E||B.targetSq===E),O=g.filter(({premovesRoute:B})=>{var j;return((j=B.at(-1))===null||j===void 0?void 0:j.targetSq)===E}).sort((B,j)=>{var G,q;return((G=j.premovesRoute.at(-1))===null||G===void 0?void 0:G.index)-((q=B.premovesRoute.at(-1))===null||q===void 0?void 0:q.index)}).at(0);return se.jsxs(Lk,Object.assign({square:E,squareColor:I,setSquares:e,squareHasPremove:!!N},{children:[!N&&l[E]&&se.jsx(OT,{piece:l[E],square:E,squares:r}),O&&se.jsx(OT,{isPremovedPiece:!0,piece:O.piece,square:E,squares:r}),p&&se.jsx(R5,{row:S,col:D})]}),`${D}${S}`)})}),S.toString()))}))}const Vk=()=>{const{arrows:r,newArrow:e,boardOrientation:t,boardWidth:i,customArrowColor:a}=Bi(),l=[...r,e].filter(Boolean);return se.jsx("svg",Object.assign({width:i,height:i,style:{position:"absolute",top:"0",left:"0",pointerEvents:"none",zIndex:"10"}},{children:l.map((c,h)=>{const[p,g,y]=c;if(p===g)return null;const S=um(t,i,p),T=um(t,i,g);let D=i/32;const E=h===r.length;r.some(j=>j[0]!==p&&j[1]===g)&&!E&&(D=i/16);const I=T.x-S.x,N=T.y-S.y,O=Math.hypot(N,I),B={x:S.x+I*(O-D)/O,y:S.y+N*(O-D)/O};return se.jsxs(W.Fragment,{children:[se.jsx("marker",Object.assign({id:`arrowhead-${h}`,markerWidth:"2",markerHeight:"2.5",refX:"1.25",refY:"1.25",orient:"auto"},{children:se.jsx("polygon",{points:"0.3 0, 2 1.25, 0.3 2.5",fill:y??a})})),se.jsx("line",{x1:S.x,y1:S.y,x2:B.x,y2:B.y,opacity:E?"0.5":"0.65",stroke:y??a,strokeWidth:E?.9*i/40:i/40,markerEnd:`url(#arrowhead-${h})`})]},`${p}-${g}${E?"-active":""}`)})}))};function Bk({option:r}){const[e,t]=W.useState(!1),{boardWidth:i,chessPieces:a,customDarkSquareStyle:l,customLightSquareStyle:c,handleSetPosition:h,onPromotionPieceSelect:p,promoteFromSquare:g,promoteToSquare:y,promotionDialogVariant:S}=Bi(),T=()=>{switch(r[1]){case"Q":return l.backgroundColor;case"R":return c.backgroundColor;case"N":return S==="default"?c.backgroundColor:l.backgroundColor;case"B":return S==="default"?l.backgroundColor:c.backgroundColor}};return se.jsx("div",Object.assign({onClick:()=>{p(r,g??void 0,y??void 0)&&h(g,y,r,!0)},onMouseOver:()=>t(!0),onMouseOut:()=>t(!1),"data-piece":r,style:{cursor:"pointer",backgroundColor:e?T():`${T()}aa`,borderRadius:"4px",transition:"all 0.1s ease-out"}},{children:typeof a[r]=="function"?se.jsx("div",Object.assign({style:{transition:"all 0.1s ease-out",transform:e?"scale(1)":"scale(0.85)"}},{children:a[r]({squareWidth:i/8,isDragging:!1})})):se.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:i/8,height:i/8,style:{transition:"all 0.1s ease-out",transform:e?"scale(1)":"scale(0.85)"}},{children:se.jsx("g",{children:a[r]})}))}))}function jk(){const{boardOrientation:r,boardWidth:e,promotionDialogVariant:t,promoteToSquare:i}=Bi(),a=(i==null?void 0:i[1])==="1"?"b":"w",l=[`${a??"w"}Q`,`${a??"w"}R`,`${a??"w"}N`,`${a??"w"}B`],c={default:{display:"grid",gridTemplateColumns:"1fr 1fr",transform:`translate(${-e/8}px, ${-e/8}px)`},vertical:{transform:`translate(${-e/16}px, ${-e/16}px)`},modal:{display:"flex",justifyContent:"center",alignItems:"center",transform:`translate(0px, ${3*e/8}px)`,width:"100%",height:`${e/4}px`,top:0,backgroundColor:"white",left:0}},h=um(r,e,i||"a8");return se.jsx("div",Object.assign({style:Object.assign({position:"absolute",top:`${h==null?void 0:h.y}px`,left:`${h==null?void 0:h.x}px`,zIndex:1e3},c[t]),title:"Choose promotion piece"},{children:l.map(p=>se.jsx(Bk,{option:p},p))}))}const Fk={whiteKing:se.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"crisp-edges"},viewBox:"0 0 4210 12970",x:"0px",y:"0px",fillRule:"evenodd",clipRule:"evenodd",width:"250",height:"250"},{children:se.jsx("g",{children:se.jsx("path",{style:{fill:"black",fillRule:"nonzero"},d:"M2105 0c169,0 286,160 249,315l200 0c-172,266 -231,479 -256,792 315,-24 530,-86 792,-255l0 897c-265,-171 -479,-231 -792,-256 18,234 75,495 185,682l339 0c233,0 369,269 225,456l545 0 -595 1916c130,94 158,275 59,402 465,0 416,568 51,568l-334 0 465 2867 332 0c250,0 381,306 199,485 162,63 273,220 273,399l0 633 168 0 0 475c-1403,0 -2807,0 -4210,0l0 -475 167 0 0 -633c0,-179 112,-336 274,-399 -181,-178 -52,-485 199,-485l332 0 465 -2867 -335 0c-353,0 -418,-568 51,-568 -98,-127 -70,-308 59,-402l-594 -1916c181,0 363,0 545,0 -144,-187 -9,-456 225,-456l339 0c110,-187 167,-448 185,-682 -315,25 -530,87 -793,256l0 -897c266,171 480,231 793,255 -25,-315 -87,-529 -256,-792l199 0c-36,-155 81,-315 250,-315zm-1994 10012l0 253 3988 0 0 -253c-1330,0 -2659,0 -3988,0zm484 -1060c-174,0 -316,142 -316,316l0 633 3652 0 0 -633c0,-174 -142,-316 -316,-316 -1007,0 -2013,0 -3020,0zm45 -457c-230,0 -225,345 0,345l2930 0c230,0 225,-345 0,-345 -977,0 -1953,0 -2930,0zm2020 -2978l-1111 0 -465 2867 2041 0 -465 -2867zm-1558 -456c-229,0 -224,345 0,345 669,0 1337,0 2005,0 230,0 225,-345 0,-345 -668,0 -1336,0 -2005,0zm1730 -457l-1454 0c-229,0 -224,345 0,345l1454 0c229,0 224,-345 0,-345zm-2064 -1862l544 1751c529,0 1057,0 1586,0l544 -1751c-892,0 -1783,0 -2674,0zm1085 -567l504 0c-126,-247 -163,-526 -177,-800 273,15 553,52 800,177l0 -504c-247,126 -527,163 -800,177 14,-273 51,-552 177,-799 -168,0 -336,0 -504,0 125,247 162,526 177,799 -274,-14 -553,-51 -800,-177l0 504c247,-125 527,-162 800,-177 -15,274 -52,553 -177,800zm969 111l-1434 0c-230,0 -225,345 0,345l1434 0c230,0 225,-345 0,-345zm-717 -2175c-105,0 -175,109 -133,204l266 0c42,-96 -30,-205 -133,-204z"})})}))};function qk({children:r}){try{return se.jsx(se.Fragment,{children:r})}catch(e){return console.log(e),se.jsx(iR,{showError:!0})}}function iR({showError:r=!1}){return se.jsxs("div",Object.assign({style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},{children:[se.jsx("div",Object.assign({style:{width:250,height:250,transform:"rotate(90deg)"}},{children:Fk.whiteKing})),r&&se.jsx("h1",{children:"Something went wrong"})]}))}function zk(){const r=W.useRef(null),{boardWidth:e,clearCurrentRightClickDown:t,onPromotionPieceSelect:i,setShowPromoteDialog:a,showPromoteDialog:l,customBoardStyle:c}=Bi();return W.useEffect(()=>{function h(p){r.current&&!r.current.contains(p.target)&&t()}return document.addEventListener("mouseup",h),()=>{document.removeEventListener("mouseup",h)}},[]),e?se.jsx("div",Object.assign({style:{perspective:"1000px"}},{children:se.jsxs("div",Object.assign({ref:r,style:Object.assign(Object.assign({position:"relative"},Hk(e)),c)},{children:[se.jsx(Uk,{}),se.jsx(Vk,{}),l&&se.jsxs(se.Fragment,{children:[se.jsx("div",{onClick:()=>{a(!1),i==null||i()},style:{position:"absolute",top:"0",left:"0",zIndex:"100",backgroundColor:"rgba(22,21,18,.7)",width:e,height:e}}),se.jsx(jk,{})]})]}))})):se.jsx(iR,{})}const Hk=r=>({cursor:"default",height:r,width:r});var As;(function(r){r.mouse="mouse",r.touch="touch",r.keyboard="keyboard"})(As||(As={}));class Gk{get delay(){var e;return(e=this.args.delay)!==null&&e!==void 0?e:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var e;return(e=this.args.ignoreContextMenu)!==null&&e!==void 0?e:!1}get enableHoverOutsideTarget(){var e;return(e=this.args.enableHoverOutsideTarget)!==null&&e!==void 0?e:!1}get enableKeyboardEvents(){var e;return(e=this.args.enableKeyboardEvents)!==null&&e!==void 0?e:!1}get enableMouseEvents(){var e;return(e=this.args.enableMouseEvents)!==null&&e!==void 0?e:!1}get enableTouchEvents(){var e;return(e=this.args.enableTouchEvents)!==null&&e!==void 0?e:!0}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var e,t,i,a;return(a=(i=(e=this.args)===null||e===void 0?void 0:e.delayTouchStart)!==null&&i!==void 0?i:(t=this.args)===null||t===void 0?void 0:t.delay)!==null&&a!==void 0?a:0}get delayMouseStart(){var e,t,i,a;return(a=(i=(e=this.args)===null||e===void 0?void 0:e.delayMouseStart)!==null&&i!==void 0?i:(t=this.args)===null||t===void 0?void 0:t.delay)!==null&&a!==void 0?a:0}get window(){if(this.context&&this.context.window)return this.context.window;if(typeof window<"u")return window}get document(){var e;if(!((e=this.context)===null||e===void 0)&&e.document)return this.context.document;if(this.window)return this.window.document}get rootElement(){var e;return((e=this.args)===null||e===void 0?void 0:e.rootElement)||this.document}constructor(e,t){this.args=e,this.context=t}}function $k(r,e,t,i){return Math.sqrt(Math.pow(Math.abs(t-r),2)+Math.pow(Math.abs(i-e),2))}function Kk(r,e,t,i,a){if(!a)return!1;const l=Math.atan2(i-e,t-r)*180/Math.PI+180;for(let c=0;c<a.length;++c){const h=a[c];if(h&&(h.start==null||l>=h.start)&&(h.end==null||l<=h.end))return!0}return!1}const Qk={Left:1},Yk={Left:0};function Ng(r){return r.button===void 0||r.button===Yk.Left}function Wk(r){return r.buttons===void 0||(r.buttons&Qk.Left)===0}function sR(r){return!!r.targetTouches}const Xk=1;function Zk(r){const e=r.nodeType===Xk?r:r.parentElement;if(!e)return;const{top:t,left:i}=e.getBoundingClientRect();return{x:i,y:t}}function Jk(r,e){if(r.targetTouches.length===1)return of(r.targetTouches[0]);if(e&&r.touches.length===1&&r.touches[0].target===e.target)return of(r.touches[0])}function of(r,e){return sR(r)?Jk(r,e):{x:r.clientX,y:r.clientY}}const MT=(()=>{let r=!1;try{addEventListener("test",()=>{},Object.defineProperty({},"passive",{get(){return r=!0,!0}}))}catch{}return r})(),tu={[As.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[As.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[As.keyboard]:{keydown:"keydown"}};class pu{profile(){var e;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:((e=this.dragOverTargetIds)===null||e===void 0?void 0:e.length)||0}}get document(){return this.options.document}setup(){const e=this.options.rootElement;e&&(it(!pu.isSetUp,"Cannot have two Touch backends at the same time."),pu.isSetUp=!0,this.addEventListener(e,"start",this.getTopMoveStartHandler()),this.addEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(e,"move",this.handleTopMove),this.addEventListener(e,"move",this.handleTopMoveCapture,!0),this.addEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(e,"keydown",this.handleCancelOnEscape,!0))}teardown(){const e=this.options.rootElement;e&&(pu.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(e,"start",this.handleTopMoveStart),this.removeEventListener(e,"move",this.handleTopMoveCapture,!0),this.removeEventListener(e,"move",this.handleTopMove),this.removeEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(e,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(e,t,i,a=!1){const l=MT?{capture:a,passive:!1}:a;this.listenerTypes.forEach(function(c){const h=tu[c][t];h&&e.addEventListener(h,i,l)})}removeEventListener(e,t,i,a=!1){const l=MT?{capture:a,passive:!1}:a;this.listenerTypes.forEach(function(c){const h=tu[c][t];h&&e.removeEventListener(h,i,l)})}connectDragSource(e,t){const i=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,t),this.addEventListener(t,"start",i),()=>{this.sourceNodes.delete(e),this.removeEventListener(t,"start",i)}}connectDragPreview(e,t,i){return this.sourcePreviewNodeOptions.set(e,i),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDropTarget(e,t){const i=this.options.rootElement;if(!this.document||!i)return()=>{};const a=l=>{if(!this.document||!i||!this.monitor.isDragging())return;let c;switch(l.type){case tu.mouse.move:c={x:l.clientX,y:l.clientY};break;case tu.touch.move:var h,p;c={x:((h=l.touches[0])===null||h===void 0?void 0:h.clientX)||0,y:((p=l.touches[0])===null||p===void 0?void 0:p.clientY)||0};break}const g=c!=null?this.document.elementFromPoint(c.x,c.y):void 0,y=g&&t.contains(g);if(g===t||y)return this.handleMove(l,e)};return this.addEventListener(this.document.body,"move",a),this.targetNodes.set(e,t),()=>{this.document&&(this.targetNodes.delete(e),this.removeEventListener(this.document.body,"move",a))}}getTopMoveStartHandler(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}installSourceNodeRemovalObserver(e){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{e&&!e.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),!(!e||!e.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(e,t,i){this.getSourceClientOffset=a=>{const l=this.sourceNodes.get(a);return l&&Zk(l)},this.handleTopMoveStartCapture=a=>{Ng(a)&&(this.moveStartSourceIds=[])},this.handleMoveStart=a=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(a)},this.handleTopMoveStart=a=>{if(!Ng(a))return;const l=of(a);l&&(sR(a)&&(this.lastTargetTouchFallback=a.targetTouches[0]),this._mouseClientOffset=l),this.waitingForDelay=!1},this.handleTopMoveStartDelay=a=>{if(!Ng(a))return;const l=a.type===tu.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,a),l),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(a,l)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(l)},this.handleTopMove=a=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;const{moveStartSourceIds:l,dragOverTargetIds:c}=this,h=this.options.enableHoverOutsideTarget,p=of(a,this.lastTargetTouchFallback);if(!p)return;if(this._isScrolling||!this.monitor.isDragging()&&Kk(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,p.x,p.y,this.options.scrollAngleRanges)){this._isScrolling=!0;return}if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&l&&$k(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,p.x,p.y)>(this.options.touchSlop?this.options.touchSlop:0)&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(l,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;const g=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(g),this.actions.publishDragSource(),a.cancelable&&a.preventDefault();const y=(c||[]).map(E=>this.targetNodes.get(E)).filter(E=>!!E),S=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(p.x,p.y,y):this.document.elementsFromPoint(p.x,p.y),T=[];for(const E in S){if(!S.hasOwnProperty(E))continue;let I=S[E];for(I!=null&&T.push(I);I;)I=I.parentElement,I&&T.indexOf(I)===-1&&T.push(I)}const D=T.filter(E=>y.indexOf(E)>-1).map(E=>this._getDropTargetId(E)).filter(E=>!!E).filter((E,I,N)=>N.indexOf(E)===I);if(h)for(const E in this.targetNodes){const I=this.targetNodes.get(E);if(g&&I&&I.contains(g)&&D.indexOf(E)===-1){D.unshift(E);break}}D.reverse(),this.actions.hover(D,{clientOffset:p})},this._getDropTargetId=a=>{const l=this.targetNodes.keys();let c=l.next();for(;c.done===!1;){const h=c.value;if(a===this.targetNodes.get(h))return h;c=l.next()}},this.handleTopMoveEndCapture=a=>{if(this._isScrolling=!1,this.lastTargetTouchFallback=void 0,!!Wk(a)){if(!this.monitor.isDragging()||this.monitor.didDrop()){this.moveStartSourceIds=void 0;return}a.cancelable&&a.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()}},this.handleCancelOnEscape=a=>{a.key==="Escape"&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new Gk(i,t),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(As.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(As.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(As.keyboard)}}const eL=function(e,t={},i={}){return new pu(e,t,i)},tL=W.createContext({isCustomDndProviderSet:!1}),nL=({children:r})=>se.jsx(se.Fragment,{children:r}),rL=({customDndBackend:r,customDndBackendOptions:e,children:t})=>{const[i,a]=W.useState(),[l,c]=W.useState(!1),[h,p]=W.useState(!1),{isCustomDndProviderSet:g}=W.useContext(tL);W.useEffect(()=>{p("ontouchstart"in window),c(!0),a(window)},[]);const y=g?nL:q6;return l?i?se.jsx(y,Object.assign({backend:r||(h?eL:kk),context:i,options:r?e:void 0},{children:t})):se.jsx(se.Fragment,{children:t}):null};function iL({boardContainer:r}){const{boardWidth:e,chessPieces:t,id:i,snapToCursor:a,allowDragOutsideBoard:l}=Bi(),c=hk(T=>({item:T.getItem(),clientOffset:T.getClientOffset(),sourceClientOffset:T.getSourceClientOffset(),isDragging:T.isDragging()})),{isDragging:h,item:p,clientOffset:g,sourceClientOffset:y}=c,S=W.useCallback((T,D)=>{if(!T||!D)return{display:"none"};let{x:E,y:I}=a?T:D;const N=e/8/2;if(a&&(E-=N,I-=N),!l){const{left:B,top:j}=r,G=B-N,q=j-N,X=B+e-N,V=j+e-N;E=Math.max(G,Math.min(E,X)),I=Math.max(q,Math.min(I,V))}const O=`translate(${E}px, ${I}px)`;return{transform:O,WebkitTransform:O,touchAction:"none"}},[e,l,a,r]);return h&&p.id===i?se.jsx("div",Object.assign({style:{position:"fixed",pointerEvents:"none",zIndex:10,left:0,top:0}},{children:se.jsx("div",Object.assign({style:S(g,y)},{children:typeof t[p.piece]=="function"?t[p.piece]({squareWidth:e/8,isDragging:!0}):se.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:e/8,height:e/8},{children:se.jsx("g",{children:t[p.piece]})}))}))})):null}const sL=W.forwardRef((r,e)=>{const{customDndBackend:t,customDndBackendOptions:i,onBoardWidthChange:a}=r,l=d5(r,["customDndBackend","customDndBackendOptions","onBoardWidthChange"]),[c,h]=W.useState(r.boardWidth),p=W.useRef(null),g=W.useRef(null),[y,S]=W.useState({left:0,top:0}),T=W.useMemo(()=>{var D;return(D=p.current)===null||D===void 0?void 0:D.getBoundingClientRect()},[p.current]);return W.useEffect(()=>{c&&(a==null||a(c))},[c]),W.useEffect(()=>{S({left:T!=null&&T.left?T==null?void 0:T.left:0,top:T!=null&&T.top?T==null?void 0:T.top:0})},[T]),W.useEffect(()=>{var D;if(r.boardWidth===void 0&&(!((D=p.current)===null||D===void 0)&&D.offsetWidth)){const E=new ResizeObserver(()=>{var I;h((I=p.current)===null||I===void 0?void 0:I.offsetWidth)});return E.observe(p.current),()=>{E.disconnect()}}},[p.current]),se.jsx(qk,{children:se.jsxs("div",Object.assign({ref:g,style:{display:"flex",flexDirection:"column",width:"100%"}},{children:[se.jsx("div",{ref:p,style:{width:"100%"}}),se.jsx(rL,Object.assign({customDndBackend:t,customDndBackendOptions:i},{children:c&&se.jsxs(S5,Object.assign({boardWidth:c},l,{ref:e},{children:[se.jsx(iL,{boardContainer:y}),se.jsx(zk,{})]}))}))]}))})});function aL({fen:r,onDrop:e}){const[t,i]=W.useState(null),a=W.useCallback((c,h)=>{const p=e(c,h);return p||(i(c),setTimeout(()=>i(null),500)),p},[e]),l=t?{[t]:{boxShadow:"inset 0 0 0 3px red"}}:{};return se.jsx(sL,{position:r,onPieceDrop:a,customSquareStyles:l,boardWidth:600})}function oL({clocks:r,active:e,onRestart:t,onResign:i}){return se.jsxs("div",{style:{display:"flex",justifyContent:"space-between",maxWidth:600,margin:"1rem auto"},children:[se.jsxs("div",{children:[se.jsxs("div",{children:["White: ",r.w,"s ",e==="w"?"(Running)":""]}),se.jsxs("div",{children:["Black: ",r.b,"s ",e==="b"?"(Running)":""]})]}),se.jsxs("div",{children:[se.jsx("button",{onClick:t,children:"Restart"}),se.jsx("button",{onClick:i,style:{marginLeft:"0.5rem"},children:"Resign"})]})]})}const lL=[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:your.turn.server:3478",username:"TURN_USER",credential:"TURN_PASS"}];function uL({gameId:r}){const{fen:e,onDrop:t,reset:i,load:a}=c5(),{clocks:l,active:c,start:h,pause:p,reset:g,setClocks:y}=h5(300);W.useEffect(()=>{h(e.split(" ")[1])},[e,h]);const S=W.useCallback(({fen:G,clocks:q})=>{a(G),y(q),p()},[a,y,p]);Q4(r,e,l,S);const T=W.useRef(null),D=W.useRef(null),E=W.useRef(null),[I,N]=W.useState(!1),O=W.useCallback(G=>{var q;(q=E.current)==null||q.signal(G)},[]),B=f5(r,O);W.useEffect(()=>{const G=new URLSearchParams(location.search).has("init");let q=!0;return navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(X=>{if(!q)return;T.current&&(T.current.srcObject=X);const V=new GI({initiator:G,trickle:!0,config:{iceServers:lL}});E.current=V,V.on("signal",M=>{(M.type==="offer"||M.type==="answer"||M.candidate)&&B(M)}),V.on("connect",()=>{N(!0)}),V.on("stream",M=>{D.current&&(D.current.srcObject=M)}),V.addStream(X)}).catch(X=>console.error(" getUserMedia error",X)),()=>{var X;q=!1,(X=E.current)==null||X.destroy(),E.current=null}},[r,B]);const j=(G,q)=>t(G,q);return se.jsxs(se.Fragment,{children:[se.jsxs("h2",{style:{textAlign:"center"},children:["Game ID: ",r," ",I?" P2P up":"connecting"]}),se.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:16},children:[se.jsx("video",{ref:T,autoPlay:!0,muted:!0,playsInline:!0,style:{width:200,height:150,background:"#000"}}),se.jsx("video",{ref:D,autoPlay:!0,playsInline:!0,style:{width:200,height:150,background:"#000"}})]}),se.jsx(aL,{fen:e,onDrop:j}),se.jsx(oL,{fen:e,clocks:l,active:c,onRestart:()=>{i(),g()},onResign:()=>{p(),alert(`${c==="w"?"White":"Black"} resigned!`)}})]})}function cL(){const{id:r}=SC(),e=r??"local";return K4()?se.jsx(uL,{gameId:e}):se.jsx("p",{style:{textAlign:"center"},children:"Connecting"})}function hL(){return se.jsxs(jC,{children:[se.jsx(Rh,{path:"/",element:se.jsx(VC,{to:"/new",replace:!0})}),se.jsx(Rh,{path:"/new",element:se.jsx(RI,{})}),se.jsx(Rh,{path:"/play/:id",element:se.jsx(cL,{})})]})}globalThis.global=globalThis;globalThis.process=UA;KA.createRoot(document.getElementById("root")).render(se.jsx(BA.StrictMode,{children:se.jsx(cI,{children:se.jsx(hL,{})})}));
